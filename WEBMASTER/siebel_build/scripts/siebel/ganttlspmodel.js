/*<ORACLECOPYRIGHT>
* Copyright (C) 1994-2014
* Oracle and Java are registered trademarks of Oracle and/or its affiliates.
* Other names may be trademarks of their respective owners.
* UNIX is a registered trademark of The Open Group.
*
* This software and related documentation are provided under a license agreement
* containing restrictions on use and disclosure and are protected by intellectual property laws.
* Except as expressly permitted in your license agreement or allowed by law, you may not use, copy,
* reproduce, translate, broadcast, modify, license, transmit, distribute, exhibit, perform, publish,
* or display any part, in any form, or by any means. Reverse engineering, disassembly,
* or decompilation of this software, unless required by law for interoperability, is prohibited.
*
* The information contained herein is subject to change without notice and is not warranted to be error-free.
* If you find any errors, please report them to us in writing.
*
* U.S. GOVERNMENT RIGHTS Programs, software, databases, and related documentation and technical data delivered to U.S.
* Government customers are "commercial computer software" or "commercial technical data" pursuant to the applicable
* Federal Acquisition Regulation and agency-specific supplemental regulations.
* As such, the use, duplication, disclosure, modification, and adaptation shall be subject to the restrictions and
* license terms set forth in the applicable Government contract, and, to the extent applicable by the terms of the
* Government contract, the additional rights set forth in FAR 52.227-19, Commercial Computer Software License
* (December 2007). Oracle America, Inc., 500 Oracle Parkway, Redwood City, CA 94065.
*
* This software or hardware is developed for general use in a variety of information management applications.
* It is not developed or intended for use in any inherently dangerous applications, including applications that
* may create a risk of personal injury. If you use this software or hardware in dangerous applications,
* then you shall be responsible to take all appropriate fail-safe, backup, redundancy,
* and other measures to ensure its safe use. Oracle Corporation and its affiliates disclaim any liability for any
* damages caused by use of this software or hardware in dangerous applications.
*
* This software or hardware and documentation may provide access to or information on content,
* products, and services from third parties. Oracle Corporation and its affiliates are not responsible for and
* expressly disclaim all warranties of any kind with respect to third-party content, products, and services.
* Oracle Corporation and its affiliates will not be responsible for any loss, costs,
* or damages incurred due to your access to or use of third-party content, products, or services.
</ORACLECOPYRIGHT>*/
/* 8.1.1.14SIA[23044]PATCHSET10 */
if(typeof(SiebelAppFacade.ganttlspmodel)==="undefined"){SiebelJS.Namespace("SiebelAppFacade.ganttlspmodel");define("siebel/ganttlspmodel",["siebel/ganttpmodel"],function(){SiebelAppFacade.ganttlspmodel=(function(){var e=SiebelJS.Dependency("SiebelApp.Constants"),aM=e.get("SWE_GANTT_DAYINFO"),H=e.get("SWE_GANTT_DRILLDOWN_CLS"),o=e.get("SWE_GANTT_DYNAMIC"),aZ=e.get("SWE_GANTT_STATIC"),aS=e.get("SWE_GANTT_START_DATE"),Y=e.get("SWE_GANTT_TIME_SCALE"),ai=e.get("SWE_GANTT_STARTMILLIS"),aE=e.get("SWE_GANTT_COLOR"),x=e.get("SWE_GANTT_ACTIVITY_START_TIME"),a=e.get("SWE_GANTT_ACTIVITY_END_TIME"),n=e.get("SWE_GANTT_ACTIVITY_NO_DAYS_IN_WEEK"),P=e.get("SWE_GANTT_ACTIVITY_WEEK_DAY_START"),m=e.get("SWE_GANTT_BOTTOMAXIS"),Z=e.get("SWE_GANTT_NOOFHRS"),w=e.get("SWE_GANTT_ENDMILLIS"),R=e.get("SWE_PROP_BC_NOTI_GENERIC"),E=e.get("SWE_PST_CNTRL_LIST"),aQ=e.get("SWE_PST_CUSTOM_CTRL"),aa=e.get("SWE_PROP_NOTI_TYPE"),aW=e.get("SWE_PROP_ARGS_ARRAY"),aF=e.get("SWE_GANTT_PREFERENCES"),f=e.get("SWE_GANTT_RESOURCE_PANE"),aV=e.get("SWE_GANTT_TIMESCALE_PANE"),aG=e.get("SWE_GANTT_UTILIZATION_PANE"),az=e.get("SWE_GANTT_DRILLDOWN"),B=e.get("SWE_GANTT_DAY_HOUR"),g=e.get("SWE_GANTT_DAY_TWOHOUR"),Q=e.get("SWE_GANTT_DAY_DAY_FOURHOUR"),V=e.get("SWE_GANTT_DAY_DAYPART"),U=e.get("SWE_GANTT_WEEK_DAY_DAYPART"),S=e.get("SWE_GANTT_MONTH_DOW_DAYPART"),y=e.get("SWE_GANTT_WEEK_DAY"),aX=e.get("SWE_GANTT_MONTH_DAY"),d=e.get("SWE_GANTT_YEAR_MONTH"),k=e.get("SWE_GANTT_MONTH_DOW"),N=e.get("SWE_GANTT_3MONTH_DOW"),at=e.get("SWE_GANTT_RESHEADER"),T=e.get("SWE_GANTT_RENDER_INFO"),v=e.get("SWE_GANTT_SPL_DATE"),ao=e.get("SWE_GANTT_ICONINFO"),i=e.get("SWE_GANTT_DRILLDOWN_CLS"),X="Weekend Axis Color TS",G="Weekends",aH="TS COLOR",K="ICON_INFO",j="CurrentDate",c="NextDate",aC="PrevDate",M="TSUnints",ap="Hour Axis Color",O="LIC Field",u="Booking Colors",D="EventDefaultColor",aT="Color Display By",a4="Status Abbreviations",ac={1:7,2:1,4:1,32:35,64:31,128:7,256:35,512:1,1024:1,2048:1,4096:1,8192:366,16384:366,32768:35,65536:98},aB={1:6,2:0,4:0,32:28,64:30,128:6,256:28,512:0,1024:0,2048:0,4096:0,8192:364,16384:364,32768:34,65536:91},au=SiebelApp.S_App.LocaleObject,aw=au.GetLocalString("IDS_TNT_PREV_DAY_TOOLTIP"),A=au.GetLocalString("IDS_TNT_NEXT_DAY_TOOLTIP"),aj=au.GetLocalString("IDS_TNT_PREV_WEEK_TOOLTIP"),aJ=au.GetLocalString("IDS_TNT_NEXT_WEEK_TOOLTIP"),ag=au.GetLocalString("IDS_CALENDAR_PREVIOUS_MONTH_STRING"),am=au.GetLocalString("IDS_CALENDAR_NEXT_MONTH_STRING"),h="MMMM D, YYYY",a3="MM/dd/yyyy",W="MM/DD/YYYY",a1="Splitter Position",aP="Column Width",I=SiebelApp.S_App.GetService("Gantt UI Service");function ah(){SiebelAppFacade.ganttlspmodel.superclass.constructor.apply(this,arguments)}SiebelJS.Extend(ah,SiebelAppFacade.GanttPresentationModel);ah.prototype.Init=function(){SiebelAppFacade.ganttlspmodel.superclass.Init.call(this);this.AddProperty("CustCtlrName","");this.AddProperty("RevertInfo","");this.AddProperty("TSDDInfo","");this.AddProperty("ResSeq","");this.AddProperty("ResEvents","");this.AddProperty("IsRefreshNeeded",false);this.AddProperty("RevertBooking",false);this.AddProperty("DisableExtendShrinkTS","");this.AddProperty("Round Minutes Events",15);this.AddProperty("fx","");this.AddProperty("RESOURCEHEADER","");this.AddProperty("Activity_DDInfo","");this.AddProperty("DDrag","");this.AddProperty("DRSZ","");this.AddProperty(x,"");this.AddProperty(a,"");this.AddProperty(n,"");this.AddProperty(P,"");this.AddProperty(aS,"");this.AddProperty(aM,"");this.AddProperty(m,"");this.AddProperty(Y,"");this.AddProperty(Z,"");this.AddProperty(ai,"");this.AddProperty(w,"");this.AddProperty(T,"");this.AddProperty("tooltipMap","");this.AddProperty(v,"");this.AddProperty(K,"");this.AddProperty("Newpages",false);this.AddProperty("RecordSet","");this.AddProperty("ResIDtoIndex",{});this.AddProperty("InEvent","");this.AddProperty(D,"");this.AddProperty("RTL Mode","");this.AddProperty("SERVICE_NAME","");this.AddProperty("TotalHPages","");this.AddProperty("VScrollPos",0);this.AddProperty("Scale_factor",1);this.AddProperty("FilterGantt_CLS","");this.AddProperty("MinGanttsize","");this.AddProperty("PanesToRefresh",0);this.AddProperty("RevertDate","");this.AddProperty("Resource Id","");this.AddProperty(a1,"");this.AddProperty(aP,"");this.AddProperty("EnableTooltip","");this.AddProperty("ShowLegend",true);this.AddProperty("TurnTime","");this.AddProperty("expcolpse",true);this.AddProperty("datePaddingMap","");this.AddProperty("IsTotalHPagesChanged","Y");this.AddMethod("getEvent",av);this.AddMethod("gettaskSeqEvents",F);this.AddMethod("gettimescaleDDcls",aN);this.AddMethod("prepareResInfo",L);this.AddMethod("prepareResStaticInfo",aY);this.AddMethod("prepareGanttInfo",s);this.AddMethod("prepareTimeScaleInfo",aI);this.AddMethod("prepareGridInfo",p);this.AddMethod("prepareEventInfo",ax);this.AddMethod("RefreshGanttChart",z);this.AddMethod("InvokeServer",af);this.AddMethod("CustomDrillDown",ab);this.AddMethod("setHoursFrom",r);this.AddMethod("setDefaults",aA);this.AddMethod("InvokeOperation",aD);this.AddMethod("CanExtendShrinkEvents",aR);this.AddMethod("getTooltip",a0);this.AddMethod("prepareRespage",ay);this.AddMethod("getTimeScaleUnits",a2);this.AddMethod("getTimeScalePeriods",C);this.AddMethod("getDateRange",ae);this.AddMethod("prepareLegendMap",aU);this.AddMethod("CanInvokeMethod",b,{sequence:true,scope:this});this.AddMethod("InvokeMethod",ad,{sequence:true,scope:this});this.AddMethod("saveUserPref",aq);this.AddMethod("saveControlValues",ak);this.AttachNotificationHandler(R,function(a5){if(a5&&a5.GetProperty(aa)==="ClosePopup"){SiebelApp.S_App.GetPopupPM().SetProperty("isPrevPopupVisible",false)}},{core:true,scope:this});this.AttachNotificationHandler(R,aL)};ah.prototype.Setup=function(bb){SiebelAppFacade.ganttlspmodel.superclass.Setup.call(this,bb);var a5=bb.EnumChildren(true),ba,bc=bb.GetChildByType("apm"),bd=bb.GetChildByType(E);if(bc){aO.call(this,bc);if(this.Get("Date Padding for TimeScale LIC")){var a7=this.Get("Date Padding for TimeScale LIC"),a6={};a7=a7.replace(/;/g,":");a7=a7.split(":");var a9=a7.length;for(var a8=0;a8<a9;a8++){a6[a7[a8]]=a7[++a8]}this.SetProperty("datePaddingMap",a6)}}if(bd){ba=bd.EnumChildren(true);do{if(ba.GetType()===aQ){this.SetProperty("PanesToRefresh",63);this.ExecuteMethod("prepareGanttInfo",ba.GetChild(0));break}ba=bd.EnumChildren(false)}while(ba)}};function aR(){var a5=":"+this.Get(Y)+":",a6=String(this.Get("DisableExtendShrinkTS"));return(a6.indexOf(a5)===-1)}function ab(a5){this.ExecuteMethod("InvokeMethod","DoInvokeDrilldown",a5)}function aD(a5){this.ExecuteMethod("InvokeMethod","InvokeOperation",a5)}function aN(){if(this.Get("TSDDInfo")){return H}else{return}}function F(a6){var a5=this.Get("ResEvents");if(a5&&a5[a6]&&a5[a6].BOOKINGS){return a5[a6].BOOKINGS}else{return}}function av(a6,a7){var a5=this.Get("ResEvents");if(a5&&a5[a6]&&a5[a6].EVENTS){return a5[a6].EVENTS[a7]}else{return}}function aL(a7){var a6,a8=[],bf=0,bc,be,ba=[],bd=0;if(a7.GetProperty(aa)==="Gantt"){a6=a7.GetProperty(aW);if(a6){CCFMiscUtil_StringToArray(a6,a8)
}bc=CCFMiscUtil_CreatePropSet();bf=a8.length;for(var bb=0;bb<bf;bb++){bc.SetProperty(bb.toString(),a8[bb])}be=CCFMiscUtil_CreatePropSet();be.DecodeFromString(bc.GetProperty("0"));this.SetProperty("PanesToRefresh",63);this.ExecuteMethod("prepareGanttInfo",be);bd=this.Get("PanesToRefresh");if(!(bd&(1<<2))&&((bd&(1<<3))||(bd&(1<<4)))){this.SetProperty("IsRefreshNeeded",true)}}else{if(a7.GetProperty(aa)==="ClosePopup"){this.SetProperty("RevertBooking",true)}else{if(a7.GetProperty(e.get("SWE_PROP_NOTI_TYPE"))==="EI"){a6=a7.GetProperty(e.get("SWE_PROP_ARGS_ARRAY"));if(a6){CCFMiscUtil_StringToArray(a6,a8)}bc=CCFMiscUtil_CreatePropSet();var a5=a8.length;for(var a9=0;a9<a5;a9++){bc.SetProperty(a9.toString(),a8[a9])}be=CCFMiscUtil_CreatePropSet();be.DecodeFromString(bc.GetProperty("0"));this.ExecuteMethod("prepareEventInfo",be);this.SetProperty("Newpages",true)}else{if(a7.GetProperty(aa)==="RevertBooking"){this.SetProperty("RevertBooking",true)}}}}}function z(a6,ba,a8){var a9=this.Get(aS),a7=this.Get("TST"),bb=SiebelApp.S_App.NewPropertySet(),a5=0;a5=a5|(1<<1);a5=a5|(1<<2);a5=a5|(1<<3);a5=a5|(1<<4);this.SetProperty("PanesToRefresh",a5);bb.SetProperty("PanesToRefresh",a5);if((a9!==a6)||(ba&&a7!==ba)){if(typeof(a6)!=="undefined"){if(a6!==0){this.SetProperty(aS,a6)}bb.SetProperty(aS,a6)}if(ba){this.SetProperty("TST",ba)}this.ExecuteMethod("InvokeMethod","RefreshGantt",bb,a8)}}function aU(){var bh=this.Get("Booking Colors"),a9=this.Get("Color Display By"),bb=this.Get("Status Abbreviations"),a5,bg,ba=[],be=[],bf,bd,bi,a8=0,bc=1,a7=" LOV";if(bb&&a9){a5=bb.substring(bb.indexOf(a9)+a9.length+1,bb.indexOf(";",bb.indexOf(a9)))}else{if(bb){a5=bb.substring(bb.indexOf(",")+1,bb.length-1)}else{a5="GS"}}bf=this.Get("Legend Bar Order: "+a5+" "+bc);while(bf){bf=bf+";";bd=bf.indexOf(";");while(bd!==-1&&bd!==0){bi=bf.substring(0,bd);bf=bf.substring(bd+1,bf.length);bd=bf.indexOf(";");ba[a8++]=bi}bc=bc+1;bf=this.Get("Legend Bar Order: "+a5+" "+bc)}a5=a5+"_";a8=0;if(ba.length>0){for(var bc=0;bc<ba.length;bc++){var a6=ba[bc];if(bh[a5+a6+a7]&&bh[a5+a6]){be[a8]=new Object;be[a8].displayValue=bh[a5+a6+a7];be[a8].color=bh[a5+a6];a8++}}}else{for(var bj in bh){if(bj.indexOf(a5)===0&&bj.indexOf(a7)===-1){be[a8]=new Object;be[a8].displayValue=bh[bj+a7];be[a8].color=bh[bj];a8++}}}return be}function af(a7){var a6=CCFMiscUtil_CreatePropSet(),a5=0;a6.SetProperty(aS,this.Get(aS));a5=this.Get("PanesToRefresh");a6.SetProperty("PanesToRefresh",a5);this.ExecuteMethod("InvokeMethod","RefreshGantt",a6)}function s(ba){var a5,bd,a6={},bc="DDrag",a9=this.Get("datePaddingMap"),a7=0,a8="DRSZ";this.SetProperty("RecordSet",this.Get("GetRawRecordSet"));this.SetProperty("CustCtlrName",ba.GetValue());this.SetProperty("RTL Mode",ba.GetProperty("RTL Mode"));this.SetProperty("SERVICE_NAME",ba.GetProperty("Gantt Service Name"));if(ba.GetProperty("SD")){this.SetProperty("SD",ba.GetProperty("SD"))}this.SetProperty("ResEvents",{});if(ba&&ba instanceof JSSPropertySet){a5=ba.GetChildCount();for(var bb=0;bb<a5;bb++){bd=ba.GetChild(bb);switch(bd.GetType()){case (aF):case ("DisplayControls"):aO.call(this,bd);if(a9[this.Get(Y)]){a7=a9[this.Get(Y)]}this.SetProperty("TotalHPages",1+(a7*2));break;case (f):this.ExecuteMethod("prepareResInfo",bd);break;case (aV):this.ExecuteMethod("prepareTimeScaleInfo",bd);break;case (aG):this.ExecuteMethod("prepareGridInfo",bd);break;case ("Custom Controls"):this.SetProperty("DateBarControl",bd.GetProperty("DateBar Control Name"));this.SetProperty("LegendControl",bd.GetProperty("Legend Control Name"));break}}a6[K]=this.Get(K);a6.TotalHPages=this.Get("TotalHPages");this.SetProperty(T,a6)}}function aI(bb){var be,bf,a6,bd,a8,a7,a9,ba=this.Get("TotalHPages"),bc=false;if(bb&&bb instanceof JSSPropertySet){a6=bb.GetChildCount();for(a8=0;a8<a6;a8=a8+1){be=bb.GetChild(a8);if(be.GetType()==aZ){a9=be.EnumProperties(true);if(a9){do{this.SetProperty(a9,be.GetProperty(a9));a9=be.EnumProperties(false)}while(a9)}bd=be.GetChildCount();for(a7=bd-1;a7>=0;a7=a7-1){bf=be.GetChild(a7);switch(bf.GetType()){case (az):this.SetProperty("TSDDInfo",an(bf));break;case (aM):this.SetProperty(aM,J(bf));break;case (aE):this.SetProperty(aH,an(bf));break;case (ao):this.SetProperty(K,an(bf,this.Get(K)));break;case (ap):var a5=an(bf);this.SetProperty(ap,q(a5));break}}}else{if(be.GetType()==o){a9=be.EnumProperties(true);if(a9){do{this.SetProperty(a9,be.GetProperty(a9));a9=be.EnumProperties(false)}while(a9)}this.ExecuteMethod("setDefaults");this.createPeriod(-parseInt(ba/2,10),ba);bd=be.GetChildCount();for(a7=bd-1;a7>=0;a7=a7-1){bf=be.GetChild(a7);if(bf.GetType()==m){this.SetProperty(m,t(bf))}else{if(bf.GetType()==v){this.SetProperty(v,al.call(this,bf))}}}bc=true}}if(!bc){this.ExecuteMethod("setDefaults");this.createPeriod(-parseInt(ba/2,10),ba)}}}}function aA(){var a5;a5=this.Get(Y);if(!a5){a5="4";this.SetProperty(Y,a5)}this.SetProperty(Z,ar(a5))}ah.prototype.createPeriod=function(bb,ba){var a5,a8,bg,a7,a9,bd,bc=3600000,be=24,a6=this.ExecuteMethod("getTimeScaleUnits"),bh=this.Get(aM),bf="";a5=new Date(this.Get(aS));if(!a5||!a5 instanceof Date){a5=new Date()}if(this.Get(n)){a9=String(this.Get(n))}else{a9=7}if(this.Get(P)){bd=String(this.Get(P))}else{bd=a5.format("EEEE")}this.SetProperty("EndTime","");this.SetProperty("FinalWeekDays",aK(a5,bd,a9,bf));switch(Number(this.Get(Y))){case (B):case (g):case (Q):case (V):if(a9==="5"){a5=new Date(this.Get(ai));a5.setHours(0,0,0,0);a8=new Date(this.Get(w));a8.setHours(23,59,59,999);this.SetProperty("TDays",24*bc);this.SetProperty("AxisDuration",(this.Get("EndTime")-this.Get("StartTime")))}else{a5.setDate(a5.getDate()+(bb*a6));a5.setHours(0,0,0,0);a8=new Date(a5.getTime());a8.setDate(a5.getDate()+(ba*a6)-1);a8.setHours(23,59,59,999)}break;case (S):a5.setDate(a5.getDate()+(bb*a6));a7=bh[0];this.ExecuteMethod("setHoursFrom",a5,a7.ST);a8=new Date(a5.getTime());a8.setDate(a5.getDate()+(ba*a6)-7);this.SetProperty("StartTime","0");this.SetProperty("EndTime",24*bc-1);this.SetProperty("TDays",7*24*bc);this.SetProperty("AxisDuration",24*bc-1);break;case (y):case (U):if(a9==="5"){a5=new Date(this.Get(ai));a8=new Date(this.Get(w))}else{a5.setDate(a5.getDate()+(bb*a6));a5.setHours(0,0,0,0);a8=new Date(a5.getTime());a8.setDate(a5.getDate()+(ba*a6)-1);a8.setHours(23,59,59,999)}break;case (aX):a5.setDate(a5.getDate()+(bb*a6));a5.setHours(0,0,0,0);a8=new Date(a5.getTime());a8.setDate(a5.getDate()+(ba*a6)-1);a8.setHours(23,59,59,999);break;case (d):a5.setDate(a5.getDate()+(bb*a6));a5.setHours(0,0,0,0);a8=new Date((a5.getTime())+ba*(bc*be*364));a8.setHours(23,59,59,999);break;case (k):a5.setDate(a5.getDate()+(bb*a6));a5.setHours(0,0,0,0);a8=new Date(a5.getTime());a8.setDate(a5.getDate()+(ba*a6)-7);a8.setHours(23,59,59,999);break;case (N):a5.setDate(a5.getDate()+(bb*a6));a5.setHours(0,0,0,0);a8=new Date(a5.getTime());a8.setDate(a5.getDate()+(ba*a6)-7);a8.setHours(23,59,59,999);break;default:a5.setDate(a5.getDate()+(bb*a6));a5.setHours(0,0,0,0);a8=new Date(a5.getTime());a8.setDate(a5.getDate()+(ba*a6)-1);a8.setHours(23,59,59,999);break
}this.SetProperty(ai,a5.getTime());this.SetProperty(w,a8.getTime());this.SetProperty(n,a9);if((this.Get(Y)=="4")||(this.Get(Y)=="512")||(this.Get(Y)=="1024")||(this.Get(Y)=="1")||(this.Get(Y)=="64")||(this.Get(Y)=="2048")||(this.Get(Y)=="4096")||(this.Get(Y)=="128")||(this.Get("TST")=="256")){this.calcDayLeft()}};function r(ba,a6){var a9=0,a7,a8=0,a5=a6.length;ba.setHours(0,0,0,0);for(a7=0;a7<a5;a7++){if(a6.charAt(a7)!=":"){a8=(a8*10)+Number(a6.charAt(a7))}else{if(a9===0){ba.setHours(a8)}else{if(a9==1){ba.setMinutes(a8)}else{ba.setSeconds(a8);break}}a8=0;a9=a9+1}}}function aK(bc,a7,ba,a6){var a5=86400000,a8,a9;var bb=new Date();for(a8=1;a8<8;a8++){if(bb.format("EEEE")===a7){bc=bb;break}bb=new Date((bc.getTime())+a5*a8)}a6=bc.getDay()+",";for(a8=1;a8<ba;a8++){a9=new Date((bc.getTime())+a5*a8);a6+=a9.getDay()+","}return a6}function ar(a5){switch(Number(a5)){case (B):case (aX):return 1;case (g):return 2;case (Q):return 4;case (k):return 7;case (N):return 7;default:return 1}}function L(a7){var a8,a5=0;if(a7&&a7 instanceof JSSPropertySet){a5=a7.GetChildCount();for(var a6=0;a6<a5;a6++){a8=a7.GetChild(a6);if(a8.GetType()==aZ){this.ExecuteMethod("prepareResStaticInfo",a8)}}}}function aY(a8){var a7,a6=0;if(a8&&a8 instanceof JSSPropertySet){a6=a8.GetChildCount();aO.call(this,a8);for(var a5=0;a5<a6;a5++){a7=a8.GetChild(a5);switch(a7.GetType()){case (at):this.SetProperty("RESOURCEHEADER",J(a7));break;case (ao):this.SetProperty(K,an(a7,this.Get(K)));break}}}}function p(a7){var bb,a9,ba,bc,a5;if(a7&&a7 instanceof JSSPropertySet){ba=a7.GetChildCount();for(var a8=0;a8<ba;a8++){bb=a7.GetChild(a8);if(bb.GetType()==aZ){bc=bb.GetChildCount();for(var a6=0;a6<bc;a6++){a9=bb.GetChild(a6);switch(a9.GetType()){case az:this.SetProperty("Activity_DDInfo",an(a9));break;case ao:this.SetProperty(K,an(a9,this.Get(K)));break;case"Color":this.SetProperty(u,an(a9));if(!this.Get(aT)){this.SetProperty(aT,this.Get(u)["Event Status"])}break;case O:this.SetProperty(O,an(a9));break}}a5=bb.GetProperty("Disable ExtendShrink Views");if(a5){this.SetProperty("DisableExtendShrinkTS",":"+a5+":")}a5="";a5=bb.GetProperty("Round Minutes Events");if(a5){this.SetProperty("Round Minutes Events",a5)}a5="";a5=bb.GetProperty(a4);if(a5){this.SetProperty(a4,a5)}a5="";a5=bb.GetProperty("Event Default Color");if(a5){this.SetProperty(D,a5)}}else{if(bb.GetType()==o){this.ExecuteMethod("prepareEventInfo",bb)}}}}}function ax(a6){var a5="",a8=0,ba,bb,a7=this.Get("ResEvents");if(a6){aO.call(this,a6);a8=a6.GetChildCount();for(var a9=0;a9<a8;a9++){ba=[];bb=a6.GetChild(a9);a5=bb.GetType();a7[a5]={};a7[a5].EVENTS=l(bb,ba);a7[a5].BOOKINGS=ba}}}function l(bb,ba){var a7,a6={},a5,a9,a8=bb.GetChildCount();for(a7=0;a7<a8;a7++){a9=bb.GetChild(a7);a5=a9.GetProperty("ID");a6[a5]=an(a9);ba[a7]=a5}return a6}function J(a8){var a6,a5=[],a7=a8.GetChildCount();for(a6=0;a6<a7;a6++){a5[a6]=an(a8.GetChild(a6))}return a5}function an(a7,a8){var a5,a6={};if(a8){a6=a8}if(a7){a5=a7.EnumProperties(true);do{if(a5){if(!a6){a6={}}a6[a5]=a7.GetProperty(a5)}a5=a7.EnumProperties(false)}while(a5)}return a6}function aO(a6){var a5=a6.EnumProperties(true);if(a5){do{this.SetProperty(a5,a6.GetProperty(a5));a5=a6.EnumProperties(false)}while(a5)}}function t(a9){var a6,bb={},ba,a5,a7=a9.GetChildCount(),a8;for(a6=0;a6<a7;a6++){a5=a9.GetChild(a6);ba=a5.GetType();if(!ba){break}a8=new Date(ba).format("MM/dd/yyyy");bb[a8]=an(a5)}return bb}ah.prototype.calcDayLeft=function(){var bb=new Date(this.Get(ai)),a9=new Date(this.Get(w)),bg,a8=this.Get("TDays"),bl=0,bj=0,bq,bd={},bk={},a5=this.Get(Y),bn=Number(this.Get(n)),bp=this.ExecuteMethod("getTimeScaleUnits"),bo=this.Get("datePaddingMap"),a6=new Date(),be=bo[Number(this.Get(Y))],bm=0;var bc=Number(be)+1;var bq;if(a5==1){bc=Number(be)*Number(bn)+1;bg=1/(this.Get("TotalHPages")>0?this.Get("TotalHPages"):1);if(bn){bg=bg/bn}}else{if(a5==64){var bi=0;bq=new Date(this.Get(ai));var a7=bq.getMonth();bk[(bq).format("MM/dd/yyyy")]=bi;while(bq.getTime()<=a9.getTime()){if(bq.getMonth()==a7){var ba=this.Get("FinalWeekDays");if(ba.indexOf(bq.getDay())!==-1){bj++}bq.setTime(bq.getTime()+a8)}else{var a7=bq.getMonth();bk[(bq).format("MM/dd/yyyy")]=bj*3.225806451612903}}}else{if(a5==="256"){bg=1/(this.Get("TotalHPages")>0?this.Get("TotalHPages"):1);if(bp){bg=bg/bp*7}}else{bg=1/(this.Get("TotalHPages")>0?this.Get("TotalHPages"):1)}}}while(bb.getTime()<=a9.getTime()){var ba=this.Get("FinalWeekDays");if(ba.indexOf(bb.getDay())!==-1){if(a5=="128"&&bn=="5"){if(bl==0){bd[(bb).format("MM/dd/yyyy")]=bl}else{if(bl==1){bd[(bb).format("MM/dd/yyyy")]=3.98936170212766}else{bb.setTime(bb.getTime()-a8);for(var bh=2;bh<10;bh++){var bf=bd[(bb).format("MM/dd/yyyy")];if(bf){if(bh>2){bb.setTime(bb.getTime()+(a8*bh))}else{bb.setTime(bb.getTime()+(a8))}bd[(bb).format("MM/dd/yyyy")]=bf+15.957446808510639;break}else{bb.setTime(bb.getTime()-(a8*bh))}}}}bl++}else{bd[(bb).format("MM/dd/yyyy")]=bl;bl=bl+bg;bm++;if(a5==1){if(bm==bc){a6=new Date(bb)}}else{if(bm==bc){a6=new Date(bb)}}}}bb.setTime(bb.getTime()+a8)}this.SetProperty("DayLoc",bd);this.SetProperty("mdDayLoc",bk);this.SetProperty("PixelsPerUnit",bg);this.SetProperty("paddingMiddleDayMillis",a6.getTime());this.SetProperty("StartDate",a6);if(this.Get("EndTime")-this.Get("StartTime")>0){this.SetProperty("miniFX",bg/(this.Get("EndTime")-this.Get("StartTime")))}};ah.prototype.calcLeftWidth=function(bj,a5){var ba,bd,bh,bk,bg,bf=new Object(),a7=this.Get("StartTime"),bb=this.Get("EndTime"),a9=this.Get("PixelsPerUnit"),a6=this.Get("AxisDuration"),a8=new Date(this.Get(ai)),bc=this.Get("DayLoc"),be=60000,bi=this.Get("TST");if(bi==="256"){if(typeof bc[(bj).format("MM/dd/yyyy")]==="undefined"){bj.setDate(bj.getDate()+((a8.getDay()-bj.getDay()+7)%7));bj.setHours(0,0,0,0)}if(typeof bc[(a5).format("MM/dd/yyyy")]==="undefined"){a5.setDate(a5.getDate()+((a8.getDay()-a5.getDay()+7)%7));a5.setHours(0,0,0,0)}}bf.Left=bc[(bj).format("MM/dd/yyyy")];bk=bc[(a5).format("MM/dd/yyyy")];ba=(bj.getHours()*60+bj.getMinutes())*be;bd=(a5.getHours()*60+a5.getMinutes())*be;if(ba>=a7&&ba<=bb){bf.Left=bf.Left+(ba-a7)*this.Get("miniFX")}else{if(ba>bb){bf.Left=bf.Left+a9}}if(bd>=a7&&bd<=bb){bk=bk+(bd-a7)*this.Get("miniFX")}else{if(bd>bb){bk=bk+a9}}bf.Width=bk-bf.Left;bf.Left=bf.Left*100*this.Get("TotalHPages")*this.Get("Scale_factor");bf.Width=bf.Width*100*this.Get("TotalHPages")*this.Get("Scale_factor");bf.Left=isNaN(bf.Left)?0:bf.Left;bf.Width=isNaN(bf.Width)?0:bf.Width;return bf};function a0(a7){if(this.Get("EnableTooltip")==="Y"){if(I){var a5=null;var a6={};a6.async=false;a6.selfbusy=true;a6.scope=this;a6.cb=function(){a5=arguments[2];if(a5){this.SetProperty("tooltipMap",a5.GetChildByType("ResultSet"))}};I.InvokeMethod(("GetTooltipInfo"),a7,a6)}}}function al(bj){var ba,bh={},bd,bf,a5,a7,bk,be,a9,bi,bg,bb=this.Get(ai),a6=this.Get(w),bc=bj.GetChildCount();for(ba=0;ba<bc;ba++){var a8=false;bk=bj.GetChild(ba);a5=bk.GetProperty("SD");if(!a5){break}else{bi=new Date(a5);bi.setHours(0,0,0,0);bg=bi}a7=bk.GetProperty("ED");if(!a7){a8=true}else{bg=new Date(a7);bg.setHours(0,0,0,0)
}be=new Date(bb);be.setHours(0,0,0,0);a9=new Date(a6);a9.setHours(0,0,0,0);while(be.getTime()<=a9.getTime()){if((!a8&&be.getTime()>=bi.getTime()&&be.getTime()<=bg.getTime())){bf={};if(bh[be.format("MM/dd/yyyy")]){bf=bh[be.format("MM/dd/yyyy")];bd=bk.EnumProperties(true);if(bd){do{if(bd!=="SD"&&bd!="ED"&&bk.GetProperty(bd)){bf[bk.GetProperty(bd)]=""}bd=bk.EnumProperties(false)}while(bd)}}else{bd=bk.EnumProperties(true);if(bd){do{if(bd!="SD"&&bd!="ED"){bf[bk.GetProperty(bd)]=""}bd=bk.EnumProperties(false)}while(bd);bh[be.format("MM/dd/yyyy")]=bf}}}be=new Date(be);be.setDate(be.getDate()+1)}}return bh}function ay(bg,bh){var a5=this.Get("RecordSet"),a9=this.Get("ResIDtoIndex"),bi=a5.length,ba=this.Get("RJoinFld"),a7=this.Get("RParentFld"),be="",a8=0,bk="",bj=this.Get(T)[K],bf=0,bd=this.Get("RColorFld"),a6="";if(!a5){return}if(!a9){return}if(this.Get("RESOURCEHEADER")[0]&&this.Get("RESOURCEHEADER")[0]["ICONFLDS"]){be=this.Get("RESOURCEHEADER")[0]["ICONFLDS"].split(",");a8=be.length}for(var bc=bg;bc<bh&&bc<bi;bc=bc+1){a9[a5[bc][ba]]=bc;if(a5[bc]["Outline Number"]){a6=a5[bc]["Outline Number"].match(/./g);if(a6){a5[bc].LEVEL=a6.length-1}}if(a5[bc]["Has Children"]){if(a5[bc].LEVEL===0&&a5[bc]["Has Children"]==="1"){a5[bc].CLS="siebui-expcoll ui-icon ui-icon-triangle-1-se"}else{if(a5[bc].LEVEL!==0){a5[bc].CLS="siebui-expnone ui-icon ui-icon-radio-off"}}}else{a5[bc].CLS="siebui-noIcon"}a5[bc]["Index"]=bc;for(var bb=0;bb<a8;bb++){if(a5[bc][be[bb]]==="Y"){if(bj&&bj[be[bb]]){bk=bk+"<span><span class='"+bj[be[bb]]+"'></span></span>"}bf=bf+1}}if(a5[bc].LEVEL>=bf){a5[bc].LEVEL=a5[bc].LEVEL-bf}a5[bc]["Icons"]=bk;bk="";bf=0;a5[bc].STCLS="";if(a5[bc][bd]){a5[bc].STCLS=" siebui-"+a5[bc][bd]}}this.SetProperty("RecordSet",a5);this.SetProperty("ResIDtoIndex",a9)}ah.prototype.prepareUtillpage=function(bK,bu){var bw=this.Get("ResEvents"),bl=this.Get(ai),bh=this.Get("DayLoc"),bv=this.Get("fx"),bM=this.Get("RecordSet"),bJ=0,bR=this.Get("RJoinFld"),be=this.Get("RParentFld"),bL=this.Get(w),bn="ST",bp,a8;ETF="ET";bJ=bM?bM.length:0;if(this.Get("TurnTime")==="Y"){bn="AST";ETF="AET"}for(var bQ=bK;bQ<bu;bQ=bQ+1){if(bw[bM[bQ][bR]]){bM[bQ].EVENTS=bw[bM[bQ][bR]].EVENTS;bM[bQ].BOOKINGS=bw[bM[bQ][bR]].BOOKINGS;var bW="",ba=0,bG="",a7=20,bj=0;if(bM[bQ].BOOKINGS){var bm=bM[bQ].BOOKINGS.length,bs=0,bE=0,bq=0;for(var bO=0;bO<bm;bO=bO+1){bG=bM[bQ].EVENTS[bM[bQ].BOOKINGS[bO]];if(bn==="AST"&&typeof(bG[bn])==="undefined"){bn="ST"}if(ETF==="AET"&&typeof(bG[ETF])==="undefined"){ETF="ET"}var bx=new Date(bG[bn]);var bt=new Date(bG[ETF]);var bD="ACTTT";if(bx.getTime()===bt.getTime()){bt=new Date(bx.getTime()+(60000*bG[bD]))}if(bL<bx.getTime()){continue}if(bL<bt.getTime()){bt=new Date(bL)}if(this.Get("EndTime")){if(bx.getTime()<bl){bx=new Date(bl)}if(bx.format("MM/dd/yyyy")!==bt.format("MM/dd/yyyy")&&(typeof(bh[(bx).format("MM/dd/yyyy")])==="undefined"||typeof(bh[(bt).format("MM/dd/yyyy")])==="undefined")){var bk=false;var bV=false;var bP=new Date(bx.getTime());var bT=new Date(bt.getTime());for(var bI=0;bI<7;bI++){if(bP>=bT){break}if(!bk&&typeof(bh[(bP).format("MM/dd/yyyy")])!=="undefined"){bk=true}if(!bV&&typeof(bh[(bT).format("MM/dd/yyyy")])!=="undefined"){bV=true}if(bk&&bV){bx=new Date(bP.getTime());bt=new Date(bT.getTime());break}if(!bk){bP.setDate(bP.getDate()+1);bP.setHours(0,0,0,0)}if(!bV){bT.setDate(bT.getDate()-1);bT.setHours(23,59,59,999)}}}}var bc=this.Get("FinalWeekDays");if(bG.OLPCNT&&bW!==""&&bW.loco){ba=0}if(bG.OLPCNT){bE=(a7/bG.OLPCNT);bq=bE;if(this.Get("isHospitalityScheduler")){if(bG.SEQ){bs=bq*(bG.SEQ-1)}}else{if(ba==bG.OLPCNT){ba=0}ba++;if(ba==1){bs=bj}else{if(bG.OTE){}else{bs=bs+bE}}}}else{ba=0;bs=bj;bq=a7}bp=0;a8=null;if(this.Get("EndTime")||this.Get("TST")=="256"){a8=this.calcLeftWidth(bx,bt);bp=1}noOfDaysInWeek=this.Get(n);if(noOfDaysInWeek=="5"){if(bc.indexOf(bx.getDay())!==-1){if(this.Get("TST")=="64"){var bb=0;var bS=this.Get("mdDayLoc");var a5=bx;var bH=bt;var bF=bx.getDate();var bf=bt.getHours();var bN=bx.getHours();var bU=bf-bN;a5.setDate(1);var bo=new Object();bo.Left="";bo.Left=bS[(a5).format("MM/dd/yyyy")];a5.setDate(bF);var bd=bx.getDate();if(bU=="0"){bo.Width=0.2}else{bo.Width=bU/3.225806451612903}for(var br=1;br<bd;br++){bx.setDate(br);var bc=this.Get("FinalWeekDays");if(bc.indexOf(bx.getDay())!==-1){bb++}}var bA=bb*3.225806451612903;bx.setDate(bd);bo.Left=bo.Left+bA+(bN/3.225806451612903);bo.Left=isNaN(bo.Left)?0:bo.Left;bo.Width=isNaN(bo.Width)?0:bo.Width;bM[bQ].EVENTS[bM[bQ].BOOKINGS[bO]]["left"]=bo.Left;bM[bQ].EVENTS[bM[bQ].BOOKINGS[bO]]["width"]=bo.Width;bM[bQ].EVENTS[bM[bQ].BOOKINGS[bO]]["top"]=bs;bM[bQ].EVENTS[bM[bQ].BOOKINGS[bO]]["height"]=bq}else{var a6=new Object();a6.Left="";var bC,by;var bi=60000;var bh=this.Get("DayLoc");a6.Left=bh[(bx).format("MM/dd/yyyy")];right=bh[(bt).format("MM/dd/yyyy")];bC=(bx.getHours()*60+bx.getMinutes())*bi;by=(bt.getHours()*60+bt.getMinutes())*bi;var bd=bx.getHours()+(bx.getMinutes()/60);if(this.Get("TST")=="4"){a6.Left=a6.Left*100*this.Get("TotalHPages")*this.Get("Scale_factor");var bA=bd*4.1666666666667;a6.Left=a6.Left+bA}if(this.Get("TST")=="512"){a6.Left=a6.Left*100*this.Get("TotalHPages")*this.Get("Scale_factor");var bA=bd*8.333333333333334;a6.Left=a6.Left+bA}if(this.Get("TST")=="1024"){a6.Left=a6.Left*100*this.Get("TotalHPages")*this.Get("Scale_factor");var bA=bd*16.666666666666668;a6.Left=a6.Left+bA}if(this.Get("TST")=="128"){var bA=15.957446808510639/bd;a6.Left=a6.Left+bA}a6.Left=isNaN(a6.Left)?0:a6.Left;a6.Width=isNaN(a6.Width)?0:a6.Width;bM[bQ].EVENTS[bM[bQ].BOOKINGS[bO]]["left"]=a6.Left;bM[bQ].EVENTS[bM[bQ].BOOKINGS[bO]]["width"]=bp?a6.Width:((bt-bx)/(bL-bl))*100*this.Get("TotalHPages")*this.Get("Scale_factor");bM[bQ].EVENTS[bM[bQ].BOOKINGS[bO]]["top"]=bs;bM[bQ].EVENTS[bM[bQ].BOOKINGS[bO]]["height"]=bq}}}else{bM[bQ].EVENTS[bM[bQ].BOOKINGS[bO]]["left"]=bp?a8.Left:((bx.getTime()-bl)*100*this.Get("TotalHPages"))/(bL-bl)*this.Get("Scale_factor");bM[bQ].EVENTS[bM[bQ].BOOKINGS[bO]]["width"]=bp?a8.Width:((bt-bx)/(bL-bl))*100*this.Get("TotalHPages")*this.Get("Scale_factor");bM[bQ].EVENTS[bM[bQ].BOOKINGS[bO]]["top"]=bs;bM[bQ].EVENTS[bM[bQ].BOOKINGS[bO]]["height"]=bq}if(this.Get("TurnTime")==="Y"&&bM[bQ].EVENTS[bM[bQ].BOOKINGS[bO]]["STTF"]==="Y"){var bz=new Date(bG.ST);if(bz.getTime()!==bx.getTime()){bM[bQ].EVENTS[bM[bQ].BOOKINGS[bO]]["SW"]=((bz.getTime()-bx.getTime())/(bt-bx))*100}var bB=new Date(bG.ET);if(bB.getTime()!==bt.getTime()){bM[bQ].EVENTS[bM[bQ].BOOKINGS[bO]]["TW"]=((bt.getTime()-bB.getTime())/(bt-bx))*100}}var a9="";var bg=((this.Get("DDrag")!="Y")||(bM[bQ].EVENTS[bM[bQ].BOOKINGS[bO]]["DRG"]==="Y"));var bX=((this.Get("DRSZ")!="Y")||(bM[bQ].EVENTS[bM[bQ].BOOKINGS[bO]]["RSZ"]?bM[bQ].EVENTS[bM[bQ].BOOKINGS[bO]]["RSZ"]==="Y":bM[bQ].EVENTS[bM[bQ].BOOKINGS[bO]]["DRG"]==="Y"));if(bg){a9=a9+" Dragpble"}if(bX){a9=a9+" Rsizable"}if(bG.OLPCNT&&bG.OLPCNT==="2"){a9=a9+" siebui-overlapEvent"}if(bG.BT&&bG.BT==="Backup"){a9=a9+" siebui-backupEvent"}bM[bQ].EVENTS[bM[bQ].BOOKINGS[bO]]["CLS"]=a9;bW=bG}}}else{bM[bQ].EVENTS={};bM[bQ].BOOKINGS={}}}this.SetProperty("RecordSet",bM)
};function q(a6){var a5={},a7,be,ba,a8,bc,bd,a9,bb;for(bb in a6){if(a6.hasOwnProperty(bb)){a9=bb.indexOf("-");if(a9==-1){continue}bc=Number(bb.substring(0,a9));bd=Number(bb.substring(a9+1,bb.length));while(bc<bd){a5[bc]=a6[bb];bc=bc+1}}}return a5}function a2(){return ac[this.Get(Y)]}function C(){return aB[this.Get(Y)]}function ae(a5){var a9,a7=this.ExecuteMethod("getTimeScalePeriods"),a6,a8;if(a5===""){a5=this.Get(aS)}a9=au.GetStringFromDateTime(a5,W,h);if(a7>0){a8=new Date(a5);a8.setDate(a8.getDate()+a7);a6=au.GetStringFromDateTime(a8.format(a3),W,h);return(a9+" - "+a6)}else{return a9}}function ad(a7,a9,a8,a6){var a5=0;if(a7==="FilterGantt"||a7==="ReSetFilterGantt"){a5=a5|(1<<1);a5=a5|(1<<2);a5=a5|(1<<4);this.SetProperty("PanesToRefresh",a5);a9.SetProperty("PanesToRefresh",a5);a6.CancelOperation=false}else{if(a7==="RefreshGantt"){a5=this.Get("PanesToRefresh");a9.SetProperty("PanesToRefresh",a5);a9.SetProperty("TST",this.Get("TST"));a6.CancelOperation=false}else{if(a7==="Show Legends"){this.SetProperty("ShowLegend",true);a6.CancelOperation=true}else{if(a7==="Hide Legends"){this.SetProperty("ShowLegend",false);a6.CancelOperation=true}else{if(a7==="ExpandAll"){this.SetProperty("expcolpse",true);a6.CancelOperation=true}else{if(a7==="CollapseAll"){this.SetProperty("expcolpse",false);a6.CancelOperation=true}else{if(a7==="FilterDisplayOptions"||a7==="ResetDisplayOptions"){if(a7==="ResetDisplayOptions"){a5=a5|(1<<0);this.SetProperty(aT,"");this.SetProperty("Redraw Legends","Y")}a5=a5|(1<<1);a5=a5|(1<<2);a5=a5|(1<<4);this.SetProperty("PanesToRefresh",a5);a9.SetProperty("PanesToRefresh",a5);a6.CancelOperation=false}else{a6.CancelOperation=false}}}}}}}}function b(a6,a5){if(a6==="Show Legends"){a5.CancelOperation=true;a5.ReturnValue=!this.Get("ShowLegend")}else{if(a6==="Hide Legends"){a5.CancelOperation=true;a5.ReturnValue=this.Get("ShowLegend")}else{a5.CancelOperation=false}}}function aq(a7){var a6=SiebelApp.S_App.GetService(this.Get("SERVICE_NAME"));if(a6){var a5={};a5.async=false;a5.npr=true;a5.selfbusy=true;a5.scope=this;a5.cb=function(){};a6.InvokeMethod("SaveGanttUserPref",a7,a5)}}function ak(a5){this.ExecuteMethod("InvokeMethod","SaveControlValues",a5)}return ah}());return"SiebelAppFacade.ganttlspmodel"})};