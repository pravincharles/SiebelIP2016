/*<ORACLECOPYRIGHT>
* Copyright (C) 1994-2014
* Oracle and Java are registered trademarks of Oracle and/or its affiliates.
* Other names may be trademarks of their respective owners.
* UNIX is a registered trademark of The Open Group.
*
* This software and related documentation are provided under a license agreement
* containing restrictions on use and disclosure and are protected by intellectual property laws.
* Except as expressly permitted in your license agreement or allowed by law, you may not use, copy,
* reproduce, translate, broadcast, modify, license, transmit, distribute, exhibit, perform, publish,
* or display any part, in any form, or by any means. Reverse engineering, disassembly,
* or decompilation of this software, unless required by law for interoperability, is prohibited.
*
* The information contained herein is subject to change without notice and is not warranted to be error-free.
* If you find any errors, please report them to us in writing.
*
* U.S. GOVERNMENT RIGHTS Programs, software, databases, and related documentation and technical data delivered to U.S.
* Government customers are "commercial computer software" or "commercial technical data" pursuant to the applicable
* Federal Acquisition Regulation and agency-specific supplemental regulations.
* As such, the use, duplication, disclosure, modification, and adaptation shall be subject to the restrictions and
* license terms set forth in the applicable Government contract, and, to the extent applicable by the terms of the
* Government contract, the additional rights set forth in FAR 52.227-19, Commercial Computer Software License
* (December 2007). Oracle America, Inc., 500 Oracle Parkway, Redwood City, CA 94065.
*
* This software or hardware is developed for general use in a variety of information management applications.
* It is not developed or intended for use in any inherently dangerous applications, including applications that
* may create a risk of personal injury. If you use this software or hardware in dangerous applications,
* then you shall be responsible to take all appropriate fail-safe, backup, redundancy,
* and other measures to ensure its safe use. Oracle Corporation and its affiliates disclaim any liability for any
* damages caused by use of this software or hardware in dangerous applications.
*
* This software or hardware and documentation may provide access to or information on content,
* products, and services from third parties. Oracle Corporation and its affiliates are not responsible for and
* expressly disclaim all warranties of any kind with respect to third-party content, products, and services.
* Oracle Corporation and its affiliates will not be responsible for any loss, costs,
* or damages incurred due to your access to or use of third-party content, products, or services.
</ORACLECOPYRIGHT>*/
/* 8.1.1.14SIA[23044]PATCHSET8 */
if(typeof(SiebelApp.edetailingsvc)==="undefined"){SiebelJS.Namespace("SiebelApp.edetailingsvc");define("siebel/offline/edetailingsvc",["siebel/offline/model","siebel/offline/servicemodel"],function(){var m=SiebelApp.Offlineconstants;var u={};var v="";var d="";var b="";var a="";var g="";var c="";var p="";var q="";var e="";var h="";var x="";var t={};var k=CCFMiscUtil_CreatePropSet();var f=CCFMiscUtil_CreatePropSet();var w=CCFMiscUtil_CreatePropSet();var y=CCFMiscUtil_CreatePropSet();var o=[];var n=false;var s="";var j=false;var r=false;var l="";u[m.get("DOUIREG_OBJ_NAME")]="LS PCD Service";u[m.get("DOUIREG_SRVC_NAME")]="edetailingsvc";SiebelApp.S_App.Model.ServiceRegistry(u);u[m.get("DOUIREG_OBJ_NAME")]="eDetailer Message Plans List Applet - Mobile";u[m.get("DOUIREG_OBJ_TYPE")]=m.get("DOUIREG_OBJ_TYPEAPPLET");u[m.get("DOUIREG_OBJ_MTHD")]="DoCanInvokeMethod";u[m.get("DOUIREG_SRVC_NAME")]="edetailingsvc";u[m.get("DOUIREG_SRVC_MTDH")]="EdetailerMsgPlanDoCanInvokeMethod";u[m.get("DOUIREG_EXT_TYPE")]=m.get("DOUIREG_EXT_TYPEPRE");SiebelApp.S_App.Model.ServiceRegistry(u);u[m.get("DOUIREG_OBJ_NAME")]="eDetailer Message Plans List Applet - Mobile";u[m.get("DOUIREG_OBJ_TYPE")]=m.get("DOUIREG_OBJ_TYPEAPPLET");u[m.get("DOUIREG_OBJ_MTHD")]="DoInvokeMethod";u[m.get("DOUIREG_SRVC_NAME")]="edetailingsvc";u[m.get("DOUIREG_SRVC_MTDH")]="EdetailerMsgPlanDoInvokeMethod";u[m.get("DOUIREG_EXT_TYPE")]=m.get("DOUIREG_EXT_TYPEPRE");SiebelApp.S_App.Model.ServiceRegistry(u);u[m.get("DOUIREG_OBJ_NAME")]="eDetailer Feedback Container Applet - Mobile";u[m.get("DOUIREG_OBJ_TYPE")]=m.get("DOUIREG_OBJ_TYPEAPPLET");u[m.get("DOUIREG_OBJ_MTHD")]="DoCanInvokeMethod";u[m.get("DOUIREG_SRVC_NAME")]="edetailingsvc";u[m.get("DOUIREG_SRVC_MTDH")]="EdetailerMsgPlanDoCanInvokeMethod";u[m.get("DOUIREG_EXT_TYPE")]=m.get("DOUIREG_EXT_TYPEPRE");SiebelApp.S_App.Model.ServiceRegistry(u);u[m.get("DOUIREG_OBJ_NAME")]="eDetailer Feedback Container Applet - Mobile";u[m.get("DOUIREG_OBJ_TYPE")]=m.get("DOUIREG_OBJ_TYPEAPPLET");u[m.get("DOUIREG_OBJ_MTHD")]="DoInvokeMethod";u[m.get("DOUIREG_SRVC_NAME")]="edetailingsvc";u[m.get("DOUIREG_SRVC_MTDH")]="FeedbackContainerDoInvokeMethod";u[m.get("DOUIREG_EXT_TYPE")]=m.get("DOUIREG_EXT_TYPEPRE");SiebelApp.S_App.Model.ServiceRegistry(u);u[m.get("DOUIREG_OBJ_NAME")]="eDetailer Feedback Container Popup Applet Mobile";u[m.get("DOUIREG_OBJ_TYPE")]=m.get("DOUIREG_OBJ_TYPEAPPLET");u[m.get("DOUIREG_OBJ_MTHD")]="DoCanInvokeMethod";u[m.get("DOUIREG_SRVC_NAME")]="edetailingsvc";u[m.get("DOUIREG_SRVC_MTDH")]="EdetailerMsgPlanDoCanInvokeMethod";u[m.get("DOUIREG_EXT_TYPE")]=m.get("DOUIREG_EXT_TYPEPRE");SiebelApp.S_App.Model.ServiceRegistry(u);u[m.get("DOUIREG_OBJ_NAME")]="eDetailer Feedback Container Popup Applet Mobile";u[m.get("DOUIREG_OBJ_TYPE")]=m.get("DOUIREG_OBJ_TYPEAPPLET");u[m.get("DOUIREG_OBJ_MTHD")]="DoInvokeMethod";u[m.get("DOUIREG_SRVC_NAME")]="edetailingsvc";u[m.get("DOUIREG_SRVC_MTDH")]="FeedbackContainerDoInvokeMethod";u[m.get("DOUIREG_EXT_TYPE")]=m.get("DOUIREG_EXT_TYPEPRE");SiebelApp.S_App.Model.ServiceRegistry(u);u[m.get("DOUIREG_OBJ_NAME")]="eDetailer Feedback Capture VBC";u[m.get("DOUIREG_OBJ_TYPE")]=m.get("DOUIREG_OBJ_TYPEBUSCOMP");u[m.get("DOUIREG_OBJ_MTHD")]="Execute";u[m.get("DOUIREG_SRVC_NAME")]="edetailingsvc";u[m.get("DOUIREG_SRVC_MTDH")]="PopulateFeedback";u[m.get("DOUIREG_EXT_TYPE")]=m.get("DOUIREG_EXT_TYPEPRE");SiebelApp.S_App.Model.ServiceRegistry(u);u[m.get("DOUIREG_OBJ_NAME")]="eDetailer Player Applet Mobile";u[m.get("DOUIREG_OBJ_TYPE")]=m.get("DOUIREG_OBJ_TYPEAPPLET");u[m.get("DOUIREG_OBJ_MTHD")]="DoCanInvokeMethod";u[m.get("DOUIREG_SRVC_NAME")]="edetailingsvc";u[m.get("DOUIREG_SRVC_MTDH")]="EdetailerMsgPlanDoCanInvokeMethod";u[m.get("DOUIREG_EXT_TYPE")]=m.get("DOUIREG_EXT_TYPEPRE");SiebelApp.S_App.Model.ServiceRegistry(u);u[m.get("DOUIREG_OBJ_NAME")]="eDetailer Player Applet Mobile";u[m.get("DOUIREG_OBJ_TYPE")]=m.get("DOUIREG_OBJ_TYPEAPPLET");u[m.get("DOUIREG_OBJ_MTHD")]="DoInvokeMethod";u[m.get("DOUIREG_SRVC_NAME")]="edetailingsvc";u[m.get("DOUIREG_SRVC_MTDH")]="EdetailerMsgPlanDoInvokeMethod";u[m.get("DOUIREG_EXT_TYPE")]=m.get("DOUIREG_EXT_TYPEPRE");SiebelApp.S_App.Model.ServiceRegistry(u);u[m.get("DOUIREG_OBJ_NAME")]=null;u[m.get("DOUIREG_OBJ_TYPE")]=null;u[m.get("DOUIREG_OBJ_MTHD")]="PostSync";u[m.get("DOUIREG_SRVC_NAME")]="edetailingsvc";u[m.get("DOUIREG_SRVC_MTDH")]="CleanMpiAndRelatedMsgFiles";u[m.get("DOUIREG_EXT_TYPE")]=m.get("DOUIREG_EXT_TYPEPOST");SiebelApp.S_App.Model.ServiceRegistry(u);u[m.get("DOUIREG_OBJ_NAME")]="eDetailer Related Applet";u[m.get("DOUIREG_OBJ_TYPE")]=m.get("DOUIREG_OBJ_TYPEAPPLET");u[m.get("DOUIREG_OBJ_MTHD")]="DoCanInvokeMethod";u[m.get("DOUIREG_SRVC_NAME")]="edetailingsvc";u[m.get("DOUIREG_SRVC_MTDH")]="EdetailerMsgPlanDoCanInvokeMethod";u[m.get("DOUIREG_EXT_TYPE")]=m.get("DOUIREG_EXT_TYPEPRE");SiebelApp.S_App.Model.ServiceRegistry(u);u[m.get("DOUIREG_OBJ_NAME")]="eDetailer Related Applet";u[m.get("DOUIREG_OBJ_TYPE")]=m.get("DOUIREG_OBJ_TYPEAPPLET");u[m.get("DOUIREG_OBJ_MTHD")]="DoInvokeMethod";u[m.get("DOUIREG_SRVC_NAME")]="edetailingsvc";u[m.get("DOUIREG_SRVC_MTDH")]="EdetailerMsgPlanDoInvokeMethod";u[m.get("DOUIREG_EXT_TYPE")]=m.get("DOUIREG_EXT_TYPEPRE");SiebelApp.S_App.Model.ServiceRegistry(u);u[m.get("DOUIREG_OBJ_NAME")]="eDetailer Contact List VBC";u[m.get("DOUIREG_OBJ_TYPE")]=m.get("DOUIREG_OBJ_TYPEBUSCOMP");u[m.get("DOUIREG_OBJ_MTHD")]="Execute";u[m.get("DOUIREG_SRVC_NAME")]="edetailingsvc";u[m.get("DOUIREG_SRVC_MTDH")]="eDetailingVBCExecute";u[m.get("DOUIREG_EXT_TYPE")]=m.get("DOUIREG_EXT_TYPEPRE");SiebelApp.S_App.Model.ServiceRegistry(u);u[m.get("DOUIREG_OBJ_NAME")]="Contact Feedback List VBC Applet";u[m.get("DOUIREG_OBJ_TYPE")]=m.get("DOUIREG_OBJ_TYPEAPPLET");u[m.get("DOUIREG_OBJ_MTHD")]="Populate";u[m.get("DOUIREG_SRVC_NAME")]="edetailingsvc";u[m.get("DOUIREG_SRVC_MTDH")]="PrePopulate";u[m.get("DOUIREG_EXT_TYPE")]=m.get("DOUIREG_EXT_TYPEPRE");SiebelApp.S_App.Model.ServiceRegistry(u);u[m.get("DOUIREG_OBJ_NAME")]="Add Contact Popup Applet";u[m.get("DOUIREG_OBJ_TYPE")]=m.get("DOUIREG_OBJ_TYPEAPPLET");u[m.get("DOUIREG_OBJ_MTHD")]="DoCanInvokeMethod";u[m.get("DOUIREG_SRVC_NAME")]="edetailingsvc";u[m.get("DOUIREG_SRVC_MTDH")]="EdetailerContactDoCanInvokeMethod";u[m.get("DOUIREG_EXT_TYPE")]=m.get("DOUIREG_EXT_TYPEPRE");SiebelApp.S_App.Model.ServiceRegistry(u);u[m.get("DOUIREG_OBJ_NAME")]="Add Contact Popup Applet";u[m.get("DOUIREG_OBJ_TYPE")]=m.get("DOUIREG_OBJ_TYPEAPPLET");u[m.get("DOUIREG_OBJ_MTHD")]="DoInvokeMethod";u[m.get("DOUIREG_SRVC_NAME")]="edetailingsvc";u[m.get("DOUIREG_SRVC_MTDH")]="EdetailerContactDoInvokeMethod";u[m.get("DOUIREG_EXT_TYPE")]=m.get("DOUIREG_EXT_TYPEPRE");SiebelApp.S_App.Model.ServiceRegistry(u);u[m.get("DOUIREG_OBJ_NAME")]="Contact Feedback List VBC Applet";u[m.get("DOUIREG_OBJ_TYPE")]=m.get("DOUIREG_OBJ_TYPEAPPLET");u[m.get("DOUIREG_OBJ_MTHD")]="DoInvokeMethod";u[m.get("DOUIREG_SRVC_NAME")]="edetailingsvc";u[m.get("DOUIREG_SRVC_MTDH")]="EdetailerContactVBCBaseDoCanInvokeMethod";u[m.get("DOUIREG_EXT_TYPE")]=m.get("DOUIREG_EXT_TYPEPRE");
SiebelApp.S_App.Model.ServiceRegistry(u);u[m.get("DOUIREG_OBJ_NAME")]="Contact Feedback List VBC Applet";u[m.get("DOUIREG_OBJ_TYPE")]=m.get("DOUIREG_OBJ_TYPEAPPLET");u[m.get("DOUIREG_OBJ_MTHD")]="DoCanInvokeMethod";u[m.get("DOUIREG_SRVC_NAME")]="edetailingsvc";u[m.get("DOUIREG_SRVC_MTDH")]="EdetailerContactDoCanInvokeMethod";u[m.get("DOUIREG_EXT_TYPE")]=m.get("DOUIREG_EXT_TYPEPRE");SiebelApp.S_App.Model.ServiceRegistry(u);u[m.get("DOUIREG_OBJ_NAME")]="eDetailer Feedback Capture VBC";u[m.get("DOUIREG_OBJ_TYPE")]=m.get("DOUIREG_OBJ_TYPEBUSCOMP");u[m.get("DOUIREG_OBJ_MTHD")]="SetFieldValue";u[m.get("DOUIREG_SRVC_NAME")]="edetailingsvc";u[m.get("DOUIREG_SRVC_MTDH")]="feedbackOnSetFieldValue";u[m.get("DOUIREG_EXT_TYPE")]=m.get("DOUIREG_EXT_TYPEPOST");SiebelApp.S_App.Model.ServiceRegistry(u);u[m.get("DOUIREG_OBJ_NAME")]="LS PCD Presentation Details List Applet - Mobile";u[m.get("DOUIREG_OBJ_TYPE")]=m.get("DOUIREG_OBJ_TYPEAPPLET");u[m.get("DOUIREG_OBJ_MTHD")]="CanUpdate";u[m.get("DOUIREG_SRVC_NAME")]="edetailingsvc";u[m.get("DOUIREG_SRVC_MTDH")]="ResponseCanUpdate";u[m.get("DOUIREG_EXT_TYPE")]=m.get("DOUIREG_EXT_TYPEPRE");SiebelApp.S_App.Model.ServiceRegistry(u);u[m.get("DOUIREG_OBJ_NAME")]="eDetailer Feedback Container Applet - Mobile";u[m.get("DOUIREG_OBJ_TYPE")]=m.get("DOUIREG_OBJ_TYPEAPPLET");u[m.get("DOUIREG_OBJ_MTHD")]="CanUpdate";u[m.get("DOUIREG_SRVC_NAME")]="edetailingsvc";u[m.get("DOUIREG_SRVC_MTDH")]="feedbackResponseCanUpdate";u[m.get("DOUIREG_EXT_TYPE")]=m.get("DOUIREG_EXT_TYPEPRE");SiebelApp.S_App.Model.ServiceRegistry(u);u[m.get("DOUIREG_OBJ_NAME")]="eDetailer Contact List VBC";u[m.get("DOUIREG_OBJ_TYPE")]=m.get("DOUIREG_OBJ_TYPEBUSCOMP");u[m.get("DOUIREG_OBJ_MTHD")]="DeleteRecord";u[m.get("DOUIREG_SRVC_NAME")]="edetailingsvc";u[m.get("DOUIREG_SRVC_MTDH")]="PhaeDetContatcDeleteRecord";u[m.get("DOUIREG_EXT_TYPE")]=m.get("DOUIREG_EXT_TYPEPOST");SiebelApp.S_App.Model.ServiceRegistry(u);u[m.get("DOUIREG_OBJ_NAME")]="eDetailer Feedback Contact List Applet";u[m.get("DOUIREG_OBJ_TYPE")]=m.get("DOUIREG_OBJ_TYPEAPPLET");u[m.get("DOUIREG_OBJ_MTHD")]="DoCanInvokeMethod";u[m.get("DOUIREG_SRVC_NAME")]="edetailingsvc";u[m.get("DOUIREG_SRVC_MTDH")]="EdetailerContactDoCanInvokeMethod";u[m.get("DOUIREG_EXT_TYPE")]=m.get("DOUIREG_EXT_TYPEPRE");SiebelApp.S_App.Model.ServiceRegistry(u);u[m.get("DOUIREG_OBJ_NAME")]="eDetailer Feedback Contact List Applet";u[m.get("DOUIREG_OBJ_TYPE")]=m.get("DOUIREG_OBJ_TYPEAPPLET");u[m.get("DOUIREG_OBJ_MTHD")]="Populate";u[m.get("DOUIREG_SRVC_NAME")]="edetailingsvc";u[m.get("DOUIREG_SRVC_MTDH")]="PrePopulate";u[m.get("DOUIREG_EXT_TYPE")]=m.get("DOUIREG_EXT_TYPEPRE");SiebelApp.S_App.Model.ServiceRegistry(u);u[m.get("DOUIREG_OBJ_NAME")]="eDetailer Feedback Contact List Applet";u[m.get("DOUIREG_OBJ_TYPE")]=m.get("DOUIREG_OBJ_TYPEAPPLET");u[m.get("DOUIREG_OBJ_MTHD")]="DoInvokeMethod";u[m.get("DOUIREG_SRVC_NAME")]="edetailingsvc";u[m.get("DOUIREG_SRVC_MTDH")]="EdetailerContactVBCBaseDoCanInvokeMethod";u[m.get("DOUIREG_EXT_TYPE")]=m.get("DOUIREG_EXT_TYPEPRE");SiebelApp.S_App.Model.ServiceRegistry(u);SiebelApp.edetailingsvc=(function(){var z=SiebelJS.Dependency("SiebelApp.Utils");function A(){SiebelApp.edetailingsvc.superclass.constructor.call(this)}SiebelJS.Extend(A,SiebelApp.ServiceModel);A.prototype.Populate=function(){if(z.IsEmpty(a)){SiebelApp.S_App.DateFilterControl.populate(this.GetContext())}else{this.GetContext().GetBusComp().SetSearchExpr(x)}};A.prototype.PrePopulate=function(){var J=0;var B=SiebelApp.Metadata.GetSystemPreference("IP2015 - Repository Content");if(B.Value==="Y"){y.SetProperty("RetVal","Y")}else{y.SetProperty("RetVal","N")}s=y.GetProperty("RetVal");if(s==="Y"){var I=CCFMiscUtil_CreatePropSet();var H=SiebelApp.S_App.GetActiveView().GetBusObj().GetBusComp("eDetailer Contact List VBC");var L,F,N,C,M,E,K,D;if(n){var G=function(){H.DeleteRecord();$.callback(this,function(){if(H.GetWS().length>0){G.call(this)}})};if(H.CheckActiveRow()===true){r=true;G.call(this)}$.callback(this,function(P){r=false;var O=function(){H.NewRecord();$.callback(this,function(Q){L=k.GetChild(J).GetProperty("Title");F=k.GetChild(J).GetProperty("FirstName");N=k.GetChild(J).GetProperty("LastName");C=k.GetChild(J).GetProperty("Call Type");M=k.GetChild(J).GetProperty("Contact Id");E=k.GetChild(J).GetProperty("Call Id");D=k.GetChild(J).GetProperty("Call Flag");psFldValist=CCFMiscUtil_CreatePropSet();I.SetProperty("Title",L);I.SetProperty("FirstName",F);I.SetProperty("LastName",N);I.SetProperty("Call Type",C);I.SetProperty("Contact Id",M);I.SetProperty("Call Id",E);I.SetProperty("Call Flag",D);H.SetMultipleFieldValues(I);$.callback(this,function(R){H.SetCommitPending(true);$.callback(this,function(S){H.WriteRecord();$.callback(this,function(T){if(!T.err){H.FieldValue("Id");$.callback(this,function(U){var V=U.retVal;k.GetChild(J).SetProperty("Row Id",V);J++;if(J<k.GetChildCount()){O.call(this)}else{n=false}})}else{$.setReturnValue(T)}})})})})};if(J<k.GetChildCount()){O.call(this)}})}}};A.prototype.feedbackResponseCanUpdate=function(G){var D=CCFMiscUtil_CreatePropSet();var E="";var C=this.GetContext().GetBusComp();E=G.GetPropertyAsStr("Field");var B=G.GetProperty("Field");if(!z.IsEmpty(B)){if(E==="Select Flag"){var F=SiebelApp.S_App.Model.GetBusObj("Pharma Professional Call - Mobile");var I=F.GetBusComp("Pharma Professional Call - Mobile");if(d==="Account"){D.SetProperty("Invoked",true);D.SetProperty("RetVal",false);$.setReturnValue({err:false,retVal:D})}else{if(d==="Contact"){D.SetProperty("Invoked",true);D.SetProperty("RetVal",true);$.setReturnValue({err:false,retVal:D})}else{if(a){var H=SiebelApp.S_App.Model.GetLovNameVal("Account Call","TODO_TYPE");if(p===H){D.SetProperty("Invoked",true);D.SetProperty("RetVal",false);$.setReturnValue({err:false,retVal:D})}else{D.SetProperty("Invoked",true);D.SetProperty("RetVal",true);$.setReturnValue({err:false,retVal:D})}}}}$.callback(this,function(J){if(F){$.setReturnValue({err:false,retVal:D});SiebelApp.S_App.Model.ReleaseBO(F)}})}}};A.prototype.ResponseCanUpdate=function(E){var I=CCFMiscUtil_CreatePropSet();var D="";var J="";var K="";var F=this.GetContext().GetBusComp();D=E.GetPropertyAsStr("Field");var H=E.GetProperty("Field");var B=SiebelApp.S_App.GetActiveView().GetBusObj().GetBusComp("Pharma Professional Call - Mobile");var G=SiebelApp.S_App.Model.GetLovNameVal("Attendee Call","TODO_TYPE");var C=SiebelApp.S_App.Model.GetLovNameVal("Submitted","EVENT_STATUS");if(!z.IsEmpty(H)){if(D==="Response"){if(B.CheckActiveRow()===true){B.FieldValue("Category");$.callback(this,function(L){J=L.retVal;B.FieldValue("Call Status");$.callback(this,function(M){K=M.retVal;if((G===J)||(C===K)){I.SetProperty("Invoked",true);I.SetProperty("RetVal",false);$.setReturnValue({err:false,retVal:I})}else{I.SetProperty("Invoked",true);I.SetProperty("RetVal",true);$.setReturnValue({err:false,retVal:I})}})})}}}};A.prototype.eDetailingVBCExecute=function(){if(s==="Y"){var I=CCFMiscUtil_CreatePropSet();var C="Y";var D=SiebelApp.S_App.Model.GetBusObj("Pharma Professional Call - Mobile");
var H=D.GetBusComp("Pharma Professional Call - Mobile");var M=D.GetBusComp("Contact");var G=SiebelApp.S_App.GetActiveView().GetBusObj().GetBusComp("eDetailer Contact List VBC");var K,F,N,B,L,E,J;G.SetExecuted("TRUE");H.ActivateField("Title");G.ActivateField("FirstName");G.ActivateField("LastName");G.ActivateField("Call Type");G.ActivateField("Contact Id");G.ActivateField("Call Id");G.ActivateField("Call Flag");if(!n){if(!z.IsEmpty(g)){M.SetFldSearchSpec("Id",g);M.Execute();$.callback(this,function(O){M.Home();$.callback(this,function(P){M.FieldValue("First Name");$.callback(this,function(R){var Q=R.retVal;M.FieldValue("Last Name");$.callback(this,function(T){var S=T.retVal;M.FieldValue("Contact Id");$.callback(this,function(V){var U=V.retVal;G.NewRecord();$.callback(this,function(W){I=CCFMiscUtil_CreatePropSet();I.SetProperty("FirstName",Q);I.SetProperty("LastName",S);I.SetProperty("Contact Id",U);I.SetProperty("Call Flag",C);$.callback(this,function(X){G.SetMultipleFieldValues(I);$.callback(this,function(Y){G.SetFieldValue("Contact Id",U);$.callback(this,function(Z){G.SetCommitPending(true);$.callback(this,function(aa){G.WriteRecord();$.callback(this,function(ab){if(!ab.err){G.FieldValue("Id");$.callback(this,function(ac){var ad=ac.retVal;I.SetProperty("Row Id",ad);k.AddChild(I);n=true;SiebelApp.S_App.Model.ReleaseBO(D)})}})})})})})})})})})})})}else{if(a){H.SetFldSearchSpec("Parent Activity Id",a);$.callback(this,function(O){H.Execute();$.callback(this,function(P){H.Home();$.callback(this,function(Q){var R=function(){H.FieldValue("Category");$.callback(this,function(T){J=T.retVal;p=J;var S=SiebelApp.S_App.Model.GetLovNameVal("Account Call","TODO_TYPE");if(J!==S){H.FieldValue("Title");$.callback(this,function(U){K=U.retVal;H.FieldValue("Contact First Name");$.callback(this,function(V){F=V.retVal;H.FieldValue("Last Name");$.callback(this,function(W){N=W.retVal;H.FieldValue("Type");$.callback(this,function(X){B=X.retVal;H.FieldValue("Contact Id");$.callback(this,function(Y){L=Y.retVal;H.FieldValue("Id");$.callback(this,function(Z){E=Z.retVal;G.NewRecord();$.callback(this,function(aa){I=CCFMiscUtil_CreatePropSet();I.SetProperty("Title",K);I.SetProperty("FirstName",F);I.SetProperty("LastName",N);I.SetProperty("Call Type",B);I.SetProperty("Contact Id",L);I.SetProperty("Call Id",E);I.SetProperty("Call Flag",C);$.callback(this,function(ab){G.SetMultipleFieldValues(I);$.callback(this,function(ac){G.SetCommitPending(true);$.callback(this,function(ad){G.WriteRecord();$.callback(this,function(ae){if(!ae.err){G.FieldValue("Id");$.callback(this,function(af){var ag=af.retVal;I.SetProperty("Row Id",ag);k.AddChild(I)})}})})})})})})})})})})})}});$.callback(this,function(S){H.NextRecord();$.callback(this,function(U){var T=U.err;if(!T){R.call(this)}else{n=true;SiebelApp.S_App.Model.ReleaseBO(D)}})})};if(H.CheckActiveRow()===true){R.call(this)}})})})}}}}};A.prototype.CanInvokeMethod=function(B){if(!z.IsEmpty(B)){if(B==="LogMsgPlanItemSesResponse"){$.setReturnValue({err:false,retVal:true});return}if(B==="GeteDetailingSysPref"){$.setReturnValue({err:false,retVal:true});return}if(B==="navigateToItem"){$.setReturnValue({err:false,retVal:true});return}if(B==="LoghotspotMsgPlanResponse"){$.setReturnValue({err:false,retVal:true});return}else{return SiebelApp.edetailingsvc.superclass.CanInvokeMethod.call(this,B)}}};A.prototype.InvokeMethod=function(D,C){var B=CCFMiscUtil_CreatePropSet();if(!D){$.setReturnValue({err:false,retVal:false});return}else{if(D==="LogMsgPlanItemSesResponse"){this.LogMsgPlanItemSesResponse(C)}else{if(D==="GeteDetailingSysPref"){this.GeteDetailingSysPref(C);$.callback(this,function(E){$.setReturnValue(E)})}else{if(D==="navigateToItem"){this.navigateToItem(C)}else{if(D==="LoghotspotMsgPlanResponse"){this.LoghotspotMsgPlanResponse(C)}else{return SiebelApp.edetailingsvc.superclass.InvokeMethod.call(this,D,C)}}}}}};A.prototype.EdetailerContactVBCBaseDoCanInvokeMethod=function(D){var E="";var C=CCFMiscUtil_CreatePropSet();var B;if(s==="Y"){E=D.GetProperty("MethodName").toString();if(E==="PositionOnRow"){this.ResetSelectFlags();$.callback(this,function(F){if(!F.err){C.SetProperty("Invoked",true);$.setReturnValue({err:false,retVal:C})}else{$.setReturnValue(F)}})}else{C.SetProperty("Invoked",false);$.setReturnValue({err:false,retVal:C})}}};A.prototype.EdetailerContactDoCanInvokeMethod=function(D){var E="";var C=CCFMiscUtil_CreatePropSet();var B;if(s==="Y"){E=D.GetProperty("MethodName").toString();if(E==="AddRecord"){C.SetProperty("Invoked",true);C.SetProperty("RetVal",true);$.setReturnValue({err:false,retVal:C})}else{if(E==="GetAffiliatedContacts"){C.SetProperty("Invoked",true);C.SetProperty("RetVal",true);$.setReturnValue({err:false,retVal:C})}else{if(E==="PositionOnRow"){C.SetProperty("Invoked",true);C.SetProperty("RetVal",true);$.setReturnValue({err:false,retVal:C})}else{if(E==="SetAllAssocFilter"){C.SetProperty("Invoked",true);C.SetProperty("RetVal",true);$.setReturnValue({err:false,retVal:C})}else{if(E==="DeleteRecord"){var B=this.GetContext().GetBusComp();if(B.CheckActiveRow()===true){B.FieldValue("Call Id");$.callback(this,function(G){var F=G.retVal;B.FieldValue("Call Flag");$.callback(this,function(I){var H=I.retVal;if(H!=="Y"){C.SetProperty("Invoked",true);C.SetProperty("RetVal",true);$.setReturnValue({err:false,retVal:C})}else{C.SetProperty("Invoked",true);C.SetProperty("RetVal",false);$.setReturnValue({err:false,retVal:C})}})})}else{C.SetProperty("Invoked",true);C.SetProperty("RetVal",false);$.setReturnValue({err:false,retVal:C})}}else{C.SetProperty("Invoked",false);C.SetProperty("RetVal",false);$.setReturnValue({err:false,retVal:C})}}}}}}};A.prototype.EdetailerMsgPlanDoCanInvokeMethod=function(E){var F="";var D=CCFMiscUtil_CreatePropSet();var C;F=E.GetProperty("MethodName").toString();if(F==="LaunchPlayer"){var B=SiebelApp.S_App.GetActiveView().GetBusObj().GetBusComp("LS MP Items BC");if(B.CheckActiveRow()===false){D.SetProperty("RetVal",false)}else{D.SetProperty("RetVal",true)}D.SetProperty("Invoked",true);$.setReturnValue({err:false,retVal:D})}else{if(F==="FeedbackNavigation"){if(s==="Y"){D.SetProperty("Invoked",true);D.SetProperty("RetVal",true);$.setReturnValue({err:false,retVal:D})}else{D.SetProperty("Invoked",true);D.SetProperty("RetVal",false);$.setReturnValue({err:false,retVal:D})}}else{if(F==="ShowEdetailerPreviewView"){D.SetProperty("Invoked",true);D.SetProperty("RetVal",true);$.setReturnValue({err:false,retVal:D})}else{if(F==="LogMsgPlanItemResponse"){D.SetProperty("Invoked",true);D.SetProperty("RetVal",true);$.setReturnValue({err:false,retVal:D})}else{if(F==="SkipMsgPlanItemResponse"){D.SetProperty("Invoked",true);D.SetProperty("RetVal",true);$.setReturnValue({err:false,retVal:D})}else{if(F==="NavigateToBookMark"){D.SetProperty("Invoked",true);D.SetProperty("RetVal",true);$.setReturnValue({err:false,retVal:D})}else{D.SetProperty("Invoked",false);D.SetProperty("RetVal",false);$.setReturnValue({err:false,retVal:D})}}}}}}};A.prototype.EdetailerContactDoInvokeMethod=function(C){var D="";
var B=CCFMiscUtil_CreatePropSet();if(s==="Y"){D=C.GetProperty("MethodName").toString();if(D==="AddRecord"){this.AddContact();$.callback(this,function(E){if(!E.err){B.SetProperty("Invoked",true);$.setReturnValue({err:false,retVal:B})}else{$.setReturnValue(E)}})}else{if(D==="GetAffiliatedContacts"){SiebelApp.pharmacallsvc.prototype.PopulateAttendee();$.callback(this,function(E){if(!E.err){B.SetProperty("Invoked",true);$.setReturnValue({err:false,retVal:B})}else{$.setReturnValue(E)}})}else{if(D==="SetAllAssocFilter"){SiebelApp.pharmacallsvc.prototype.PopulateAllContact();$.callback(this,function(E){if(!E.err){B.SetProperty("Invoked",true);$.setReturnValue({err:false,retVal:B})}else{$.setReturnValue(E)}})}else{B.SetProperty("Invoked",false);$.setReturnValue({err:false,retVal:B})}}}}};A.prototype.EdetailerMsgPlanDoInvokeMethod=function(C){var D="";var B=CCFMiscUtil_CreatePropSet();D=C.GetProperty("MethodName").toString();if(D==="LaunchPlayer"){f.Reset();if(s==="Y"){n=false;k.Reset()}this.LaunchPlayer();$.callback(this,function(E){if(!E.err){B.SetProperty("Invoked",true);$.setReturnValue({err:false,retVal:B})}else{$.setReturnValue(E)}})}else{if(D==="ShowEdetailerPreviewView"){this.EdetailerExitMethod();$.callback(this,function(E){if(!E.err){B.SetProperty("Invoked",true);$.setReturnValue({err:false,retVal:B})}else{$.setReturnValue(E)}})}else{if(D==="FeedbackNavigation"){this.EdetailerFeedbackNavigation();$.callback(this,function(E){if(!E.err){B.SetProperty("Invoked",true);$.setReturnValue({err:false,retVal:B})}else{$.setReturnValue(E)}})}else{if(D==="NavigateToBookMark"){this.NavigateToBookMarkView()}else{B.SetProperty("Invoked",false);$.setReturnValue({err:false,retVal:B})}}}}};A.prototype.GeteDetailingSysPref=function(D){var B;var C=CCFMiscUtil_CreatePropSet();B=SiebelApp.Metadata.GetSystemPreference("IP2015 - Repository Content");if(B.Value==="Y"){C.SetProperty("RetVal","Y")}else{C.SetProperty("RetVal","N")}$.setReturnValue({err:false,retVal:C});return};A.prototype.FeedbackContainerDoInvokeMethod=function(C){var D="";var B=CCFMiscUtil_CreatePropSet();D=C.GetProperty("MethodName").toString();if(D==="SkipMsgPlanItemResponse"){j=true}if((D==="LogMsgPlanItemResponse")||(D==="SkipMsgPlanItemResponse")){this.SubmitFeedback();$.callback(this,function(E){j=false;if(!E.err){if(a){this.MakePDEntry(a);$.callback(this,function(F){if(!F.err){this.NavigateToBookMarkView()}else{B.SetProperty("Invoked",true);$.setReturnValue({err:F.err,retVal:B})}})}else{$.callback(this,function(F){if(!F.err){this.NavigateToBookMarkView()}else{B.SetProperty("Invoked",true);$.setReturnValue({err:F.err,retVal:B})}})}}else{B.SetProperty("Invoked",true);$.setReturnValue({err:E.err,retVal:B})}})}else{if(D==="ShowEdetailerPreviewView"){this.EdetailerCancelMethod();$.callback(this,function(E){if(!E.err){B.SetProperty("Invoked",true);$.setReturnValue({err:false,retVal:B})}else{$.setReturnValue(E)}})}else{B.SetProperty("Invoked",false);$.setReturnValue({err:false,retVal:B})}}};A.prototype.LogMsgPlanItemSesResponse=function(H){var B=H.GetProperty("Mode");if(B==="INSERT"){f.AddChild(H)}else{var I=H.GetProperty("MpiId");var D=H.GetProperty("EndTime");var C=f;var E=C.GetChildCount();for(i=E-1;i>=0;i--){var G=C.GetChild(i);var F=G.GetProperty("MpiId");if(I===F){G.SetProperty("EndTime",D);break}}}};A.prototype.AddContact=function(){if(s==="Y"){var C=SiebelApp.S_App.GetActiveView().GetActiveApplet().GetBusComp();var H;var F=SiebelApp.S_App.GetActiveView().GetBusObj().GetBusComp("eDetailer Contact List VBC");var B=C.GetMultiSelectMode();var E=C.GetSelRowIdArray();if(B&&(E.length>0)){for(var D=0;D<E.length;D++){H=E[D];this.IsDuplicateContact(H);$.callback(this,function(J){var I=J.retVal;if(!I){this.addContactRecord(C,H)}})}$.callback(this,function(I){F.Home();$.callback(this,function(J){SiebelApp.OfflineAppMgr.PostActions("ClosePopup")})})}else{var G=C.GetActiveRow();if(C.FindWorkSet(G)){H=C.FindWorkSet(G)["Id"];this.IsDuplicateContact(H);$.callback(this,function(J){var I=J.retVal;if(!I){this.addContactRecord(C,H)}else{SiebelApp.OfflineAppMgr.PostActions("ClosePopup")}})}else{SiebelApp.OfflineAppMgr.PostActions("ClosePopup")}}}};A.prototype.IsDuplicateContact=function(E){var B=false;for(var C=0;C<k.GetChildCount();C++){var D=k.GetChild(C).GetProperty("Contact Id");if(E===D){B=true}}$.setReturnValue({err:false,retVal:B});return};A.prototype.addContactRecord=function(D,I){var H=SiebelApp.S_App.GetActiveView().GetBusObj().GetBusComp("eDetailer Contact List VBC");var B,E,C,G;var F=CCFMiscUtil_CreatePropSet();H.ActivateField("Title");H.ActivateField("FirstName");H.ActivateField("LastName");H.ActivateField("Call Type");H.ActivateField("Contact Id");H.ActivateField("Call Id");D.PositionById(I);D.FieldValue("MM");$.callback(this,function(J){B=J.retVal;D.FieldValue("First Name");$.callback(this,function(K){G=K.retVal;D.FieldValue("Last Name");$.callback(this,function(L){C=L.retVal;D.FieldValue("Id");$.callback(this,function(M){E=M.retVal;H.NewRecord();$.callback(this,function(N){psFldValist=CCFMiscUtil_CreatePropSet();F.SetProperty("Title",B);F.SetProperty("FirstName",G);F.SetProperty("LastName",C);F.SetProperty("Contact Id",E);F.SetProperty("Call Type","");H.SetMultipleFieldValues(F);$.callback(this,function(O){H.SetFieldValue("Contact Id",E);$.callback(this,function(P){H.SetCommitPending(true);$.callback(this,function(Q){H.WriteRecord();$.callback(this,function(R){if(!R.err){H.FieldValue("Id");$.callback(this,function(S){var T=S.retVal;F.SetProperty("Row Id",T);n=true;k.AddChild(F);H.Home();$.callback(this,function(U){SiebelApp.OfflineAppMgr.PostActions("ClosePopup")})})}else{$.setReturnValue(R)}})})})})})})})})})};A.prototype.navigateToItem=function(F){var C=F.GetProperty("Parent MP Id");var H=F.GetProperty("Content File");var G;var E=SiebelApp.S_App.GetActiveView().GetBusObj().GetBusComp("LS MP Items BC");var D=SiebelApp.S_App.Model.GetBusObj("Admin Messaging Plan");var B=D.GetBusComp("LS MP Items BC");B.SetFldSearchSpec("Parent MP Id",C);B.SetFldSearchSpec("Name",H);B.Execute();$.callback(this,function(I){B.Home();$.callback(this,function(J){if(B.CheckActiveRow()===true){B.FieldValue("Id");$.callback(this,function(K){G=K.retVal;E.PositionById(G)})}})})};A.prototype.LoghotspotMsgPlanResponse=function(F){var J=CCFMiscUtil_CreatePropSet();var E=F.GetProperty("MpiId");var I=F.GetProperty("ItemName");var D;var G;J=F;var B=SiebelApp.S_App.GetActiveView().GetBusObj().GetBusComp("LS MP Items BC");var C=SiebelApp.S_App.Model.GetBusObj("Admin Messaging Plan");var H=C.GetBusComp("LS Related Messages BC");H.ActivateField("RelatedImage With Path");H.SetFldSearchSpec("Parent MP Item Id",E);H.SetFldSearchSpec("Name",I);H.Execute();$.callback(this,function(K){H.Home();$.callback(this,function(L){if(H.CheckActiveRow()===true){H.FieldValue("Id");$.callback(this,function(M){D=M.retVal;H.FieldValue("RelatedImage With Path");$.callback(this,function(N){G=N.retVal;$.callback(this,function(O){J.SetProperty("MpiId",D);J.SetProperty("ThumbnailPath",G);
this.LogMsgPlanItemSesResponse(J)})})})}})})};A.prototype.ShowEdetailerPreviewView=function(){SiebelJS.Log("Invoked ShowEdetailerPreviewView Method");var E="";var C;v=SiebelApp.S_App.GetActiveView().GetName();h=this.GetContext().GetName();d=this.GetContext().GetBusComp().GetName();var F=this.GetContext().GetBusComp().GetActiveRow();if(d==="Contact"){var G=SiebelApp.S_App.Model.GetLovNameVal("Professional Call","TODO_TYPE");b=G;E=SiebelApp.S_App.GetActiveView().GetActiveApplet().GetDrillDown("Player Drilldown");g=this.GetContext().GetBusComp().FindWorkSet(F)["Id"];e=g;c="";a="";l=""}else{if(d==="Account"){var D=SiebelApp.S_App.Model.GetLovNameVal("Account Call","TODO_TYPE");b=D;E=SiebelApp.S_App.GetActiveView().GetActiveApplet().GetDrillDown("Player Drilldown");c=this.GetContext().GetBusComp().FindWorkSet(F)["Id"];q=c;a="";l="";g=""}else{E=SiebelApp.S_App.GetActiveView().GetActiveApplet().GetDrillDown("Edetailer Drilldown");a=this.GetContext().GetBusComp().FindWorkSet(F)["Id"];var B=this.GetContext().GetBusComp().FindWorkSet(F)["Planned"];g="";c="";l="";p=""}}this.viewNavigation(E)};A.prototype.CreateAccountCall=function(D){var F=SiebelApp.S_App.Model.GetBusObj("Pharma Professional Call - Mobile");var C=F.GetBusComp("Account");var E=F.GetBusComp("Pharma Professional Call - Mobile");var B=SiebelApp.S_App.Model.GetLovNameVal("Account Call","TODO_TYPE");E.Execute();$.callback(this,function(G){E.NewRecord();$.callback(this,function(H){E.SetFieldValue("Category",B);$.callback(this,function(I){E.SetFieldValue("Account Id",D);$.callback(this,function(J){E.SetCommitPending(true);$.callback(this,function(K){E.WriteRecord();$.callback(this,function(L){if(!L.err){E.FieldValue("Id");$.callback(this,function(N){var M=N.retVal;a=M;D="";SiebelApp.S_App.Model.ReleaseBO(F)})}else{SiebelApp.S_App.Model.ReleaseBO(F);$.setReturnValue(L)}})})})})})})};A.prototype.EdetailerExitMethod=function(E){SiebelJS.Log("Invoked Exit Method");var D="";var B=SiebelApp.S_App.GetActiveView().GetBusObj();var C=SiebelApp.S_App.GetActiveView().GetBusObj().GetBusComp("LS MP Items BC");if(C.CheckActiveRow()===true){C.Home()}$.callback(this,function(){D=SiebelApp.S_App.GetActiveView().GetActiveApplet().GetDrillDown("Player Drilldown");this.viewNavigation(D,B)})};A.prototype.EdetailerCancelMethod=function(D){SiebelJS.Log("Invoked Cancel Method");var C="";var B=SiebelApp.S_App.GetActiveView().GetBusObj().GetBusComp("LS MP Items BC");if(B.CheckActiveRow()===true){B.Home()}$.callback(this,function(){this.NavigateToBookMarkView()})};A.prototype.EdetailerFeedbackNavigation=function(){SiebelJS.Log("Invoked feedback");var B="";n=true;B=SiebelApp.S_App.GetActiveView().GetActiveApplet().GetDrillDown("Feedback Drilldown");this.viewNavigation(B)};A.prototype.LaunchPlayer=function(){SiebelJS.Log("Invoked LaunchPlayer Method");var C="";var B=SiebelApp.S_App.GetActiveView().GetBusObj().GetBusComp("LS MP Items BC");if(B.CheckActiveRow()===true){B.Home()}$.callback(this,function(){C=SiebelApp.S_App.GetActiveView().GetActiveApplet().GetDrillDown("Launch Player Drilldown");this.viewNavigation(C)})};A.prototype.viewNavigation=function(D,B){var C="";if(!z.IsEmpty(D)){C=D.viewname;SiebelApp.OfflineAppMgr.BuildViewAsync(C,"BS_DRILLDOWN",D,B)}};A.prototype.feedbackOnSetFieldValue=function(G){var E,C,D,I;var H=this.GetContext();var B;var F=G.GetPropertyAsStr("inputParam1");if(s==="Y"&&F==="Select Flag"){if(H.CheckActiveRow()===true){H.FieldValue("Select Flag");$.callback(this,function(J){C=J.retVal;if(C){B=SiebelApp.S_App.GetActiveView().GetBusObj().GetBusComp("eDetailer Contact List VBC");if(B&&(B.CheckActiveRow()===true)){B.FieldValue("Id");$.callback(this,function(K){E=K.retVal;H.FieldValue("Id");$.callback(this,function(L){D=L.retVal;I=E+"_"+D;o[I]=C})})}}})}}};A.prototype.PopulateFeedback=function(){o=[];var D=0;var C=SiebelApp.S_App.GetActiveView().GetBusObj().GetBusComp("eDetailer Feedback Capture VBC");var F=f;var E=CCFMiscUtil_CreatePropSet();C.ActivateField("EndTime");C.ActivateField("ParentMPName");C.ActivateField("Response");C.ActivateField("StartTime");C.ActivateField("ThumbnailPath");C.ActivateField("ParentMPId");C.ActivateField("ItemName");C.ActivateField("spentTime");C.ActivateField("ParentDsblMsgResponse");C.ActivateField("LitFileExt");C.ActivateField("LitFileRev");C.ActivateField("Literature Id");C.ActivateField("Thumbnail Extension");C.ActivateField("Thumbnail Id");C.ActivateField("Thumbnail Rev Id");C.ActivateField("Select Flag");var B=function(){C.DeleteRecord();$.callback(this,function(){if(C.GetWS().length>0){B.call(this)}})};if(C.CheckActiveRow()===true){B.call(this)}$.callback(this,function(H){var G=function(){C.SetExecuted(true);C.NewRecord();$.callback(this,function(J){var K=F.GetChild(D);var I=0;var M=[];M=C.GetActivatedFieldList();var L=function(){var O=M[I];var N=K.GetProperty(O);if(N){C.SetFieldValue(O,N)}$.callback(this,function(P){I++;if(I<M.length){L.call(this)}})};if(I<M.length){L.call(this)}$.callback(this,function(R){var O=K.GetProperty("EndTime");var T=K.GetProperty("StartTime");var U=new Date(O);var P=U.getTime()/1000;var Q=new Date(T);var N=Q.getTime()/1000;var S=P-N;C.SetFieldValue("spentTime",S);$.callback(this,function(V){if(!V.err){psFldValist=CCFMiscUtil_CreatePropSet();E.SetProperty("LitFileExt",K.GetProperty("LitFileExt"));E.SetProperty("LitFileRev",K.GetProperty("LitFileRev"));E.SetProperty("Literature Id",K.GetProperty("LiteratureId"));E.SetProperty("Thumbnail Extension",K.GetProperty("ThumbnailExtension"));E.SetProperty("Thumbnail Id",K.GetProperty("ThumbnailId"));E.SetProperty("Thumbnail Rev Id",K.GetProperty("ThumbnailRevId"));C.SetMultipleFieldValues(E);$.callback(this,function(W){C.SetFieldValue("Select Flag","Y");$.callback(this,function(X){C.SetCommitPending(true);$.callback(this,function(Y){C.WriteRecord();$.callback(this,function(Z){if(!Z.err){D++;if(D<F.GetChildCount()){G.call(this)}}else{$.setReturnValue(Z);return}})})})})}else{$.setReturnValue(V)}})})})};if(D<F.GetChildCount()){G.call(this)}$.callback(this,function(I){C.Home();$.callback(this,function(J){$.setReturnValue(J)})})})};A.prototype.SubmitFeedback=function(){var F=SiebelApp.S_App.Model.GetBusObj("Pharma Professional Call - Mobile");var O=F.GetBusComp("Pharma Professional Call - Mobile");var H=F.GetBusComp("Contact");var B=SiebelApp.S_App.GetActiveView().GetBusObj().GetBusComp("eDetailer Contact List VBC");var L=CCFMiscUtil_CreatePropSet();var I=SiebelApp.S_App.Model.GetLovNameVal("Professional Call","TODO_TYPE");var K=SiebelApp.S_App.Model.GetLovNameVal("Call Attendee","TODO_TYPE");var D=SiebelApp.S_App.Model.GetLovNameVal("Attendee Call","TODO_TYPE");var E,R,N,P,G,Q;var M=CCFMiscUtil_CreatePropSet();var J=0;var C="";if(!z.IsEmpty(c)&&z.IsEmpty(g)){a="";this.CreateAccountCall(c);E=a}$.callback(this,function(S){$.callback(this,function(T){if(T.err){$.setReturnValue({err:T.err,retVal:T.retVal});return}$.callback(this,function(U){if(s==="Y"){O.SetFldSearchSpec("Parent Activity Id",a);O.Execute();$.callback(this,function(V){O.Home();
$.callback(this,function(X){if(O.CheckActiveRow()===true){if(a){O.PositionById(a)}$.callback(this,function(Z){O.FieldValue("Category");$.callback(this,function(ab){strCategory=ab.retVal;if(!a){strCategory=b}var aa=SiebelApp.S_App.Model.GetLovNameVal("Account Call","TODO_TYPE");var ac=SiebelApp.S_App.Model.GetLovNameVal("Professional Call","TODO_TYPE");if(strCategory===aa){this.FeedbackCapture(a,C);$.callback(this,function(ad){if(ad.err){$.setReturnValue({err:ad.err,retVal:ad.retVal});return}E=a;O.Home();$.callback(this,function(ae){O.FieldValue("Account Id");$.callback(this,function(af){R=af.retVal;O.FieldValue("Address");$.callback(this,function(ag){G=ag.retVal;var ah=function(){P=k.GetChild(J).GetProperty("Contact Id");var al=k.GetChild(J).GetProperty("FirstName");var ai=k.GetChild(J).GetProperty("LastName");var ak=k.GetChild(J).GetProperty("Call Id");var aj=al+" "+ai;if(!ak){$.callback(this,function(am){M=CCFMiscUtil_CreatePropSet();M.SetProperty("Account Id",R);M.SetProperty("Category",D);M.SetProperty("Type",K);M.SetProperty("Parent Activity Id",E);M.SetProperty("Contact Id",P);M.SetProperty("First Name",al);M.SetProperty("Last Name",ai);M.SetProperty("Description",aj);M.SetProperty("Address",G);$.callback(this,function(an){this.addAteendee(M,a,O);$.callback(this,function(ao){J++;if(J<k.GetChildCount()){ah.call(this)}})})})}else{$.callback(this,function(am){J++;if(J<k.GetChildCount()){ah.call(this)}})}};if(J<k.GetChildCount()){ah.call(this)}})})})})}else{if(strCategory===ac){$.callback(this,function(ad){if(g){H.SetFldSearchSpec("Id",g);$.callback(this,function(ae){H.Execute();$.callback(this,function(af){H.Home();$.callback(this,function(ag){if(H.CheckActiveRow()===true){H.FieldValue("Primary Address Id");$.callback(this,function(ah){Q=ah.retVal;H.FieldValue("Full Address");$.callback(this,function(ai){G=ai.retVal})})}})})})}else{O.FieldValue("Contact Address Id");$.callback(this,function(ae){Q=ae.retVal;O.FieldValue("Address");$.callback(this,function(af){G=af.retVal})})}});$.callback(this,function(ae){var ad=function(){var af=k.GetChild(J).GetProperty("Call Id");P=k.GetChild(J).GetProperty("Contact Id");C=k.GetChild(J).GetProperty("Row Id");if(!af){O.NewRecord();$.callback(this,function(ag){O.SetFieldValue("Category",ac);$.callback(this,function(ah){O.SetFieldValue("Contact Id",P);$.callback(this,function(ai){O.SetFieldValue("Contact Address Id",Q);$.callback(this,function(aj){O.SetFieldValue("Address",G,true);$.callback(this,function(ak){O.SetCommitPending(true);$.callback(this,function(al){O.WriteRecord();$.callback(this,function(am){if(!am.err){O.FieldValue("Id");$.callback(this,function(ao){var an=ao.retVal;this.FeedbackCapture(an,C);$.callback(this,function(ap){if(!ap.err){this.MakePDEntry(an);$.callback(this,function(aq){J++;if(J<k.GetChildCount()){ad.call(this)}})}else{$.setReturnValue({err:ap.err,retVal:ap.retVal});return}})})}else{$.setReturnValue(am)}})})})})})})})}else{this.FeedbackCapture(af,C)}$.callback(this,function(ag){if(!ag.err){J++;if(J<k.GetChildCount()){ad.call(this)}}else{$.setReturnValue({err:ag.err,retVal:ag.retVal});return}})};if(J<k.GetChildCount()){ad.call(this)}})}}})})}else{var Y=SiebelApp.S_App.Model.GetLovNameVal("Professional Call","TODO_TYPE");l=a;a="";var W=function(){var Z=k.GetChild(J).GetProperty("Call Id");P=k.GetChild(J).GetProperty("Contact Id");C=k.GetChild(J).GetProperty("Row Id");if(!Z){O.NewRecord();$.callback(this,function(aa){O.SetFieldValue("Category",Y);$.callback(this,function(ab){O.SetFieldValue("Contact Id",P);$.callback(this,function(ac){O.SetCommitPending(true);$.callback(this,function(ad){O.WriteRecord();$.callback(this,function(ae){if(!ae.err){O.FieldValue("Id");$.callback(this,function(ag){var af=ag.retVal;this.FeedbackCapture(af,C);$.callback(this,function(ah){if(!ah.err){this.MakePDEntry(af);$.callback(this,function(ai){J++;if(J<k.GetChildCount()){W.call(this)}})}else{$.setReturnValue({err:ah.err,retVal:ah.retVal});return}})})}else{$.setReturnValue(ae)}})})})})})}else{this.FeedbackCapture(Z,C)}$.callback(this,function(aa){if(!aa.err){J++;if(J<k.GetChildCount()){W.call(this)}}else{$.setReturnValue({err:aa.err,retVal:aa.retVal});return}})};if(J<k.GetChildCount()){W.call(this)}}})})}else{this.FeedbackCapture(a,C)}})})})};A.prototype.captureAttendeeResponse=function(B){m_pPharmaProfCallBO=SiebelApp.S_App.Model.GetBusObj("Pharma Professional Call - Mobile");var C=m_pPharmaProfCallBO.GetBusComp("Pharma Professional Call - Mobile");var D="";C.SetFldSearchSpec("Parent Activity Id",B);C.Execute();$.callback(this,function(E){C.Home();$.callback(this,function(F){C.FieldValue("Category");$.callback(this,function(H){var I=H.retVal;var G=function(){var J=SiebelApp.S_App.Model.GetLovNameVal("Account Call","TODO_TYPE");if(I!==J){C.FieldValue("Id");$.callback(this,function(L){var K=L.retVal;this.FeedbackCapture(K,D);$.callback(this,function(M){if(!M.err){this.MakePDEntry(K);$.callback(this,function(N){C.NextRecord();$.callback(this,function(P){var O=P.err;if(!O){C.FieldValue("Category");$.callback(this,function(Q){I=Q.retVal;G.call(this)})}})})}})})}$.callback(this,function(K){C.NextRecord();$.callback(this,function(M){var L=M.err;if(!L){G.call(this)}})})};if(C.CheckActiveRow()===true){G.call(this)}})})})};A.prototype.addAteendee=function(G,B,H){var E=null;m_pPharmaProfCallBO=SiebelApp.S_App.Model.GetBusObj("Pharma Professional Call - Mobile");var F=m_pPharmaProfCallBO.GetBusComp("Pharma Professional Call - Mobile");var I;var C;var D;var J=G.GetProperty("Contact Id");F.SetFldSearchSpec("Id",B);$.callback(this,function(K){F.Execute();$.callback(this,function(L){F.Home();$.callback(this,function(M){I=m_pPharmaProfCallBO.GetBusComp("Pharma Attendee Call Mobile");$.callback(this,function(N){$.callback(this,function(O){I.Execute();$.callback(this,function(P){I.Home();$.callback(this,function(Q){I.FieldValue("Id");$.callback(this,function(R){D=R.retVal;C=I.GetAssocList();$.callback(this,function(S){C.Execute();$.callback(this,function(T){C.Home();$.callback(this,function(U){this.addAllContacts(C,G,F);$.callback(this,function(V){if(C.FindWorkSet(C.GetActiveRow())){I.AddAssociation();$.callback(this,function(W){var W=W;SiebelApp.S_App.Model.ReleaseBO(m_pPharmaProfCallBO)})}else{SiebelApp.S_App.Model.ReleaseBO(m_pPharmaProfCallBO)}})})})})})})})})})})})})};A.prototype.addAllContacts=function(H,C,B){var G=SiebelApp.S_App.Model.GetBusObj("Pharma Professional Call - Mobile");var F=G.GetBusComp("Contact");var E;var D=0;H.EmptyWorkSet();$.callback(this,function(I){E=C.GetProperty("Contact Id");F.SetFldSearchSpec("Id",E);$.callback(this,function(J){F.Execute();$.callback(this,function(L){F.Home();if(F.CheckActiveRow()===true){var K=F.FindWorkSet(0);H.InsertWorkSet(D,K);$.callback(this,function(M){H.SetActiveRow(0);B.FieldValue("Owned By");$.callback(this,function(N){var O=N.retVal;H.SetFieldValueX("Owned By",O);$.callback(this,function(P){var P=P.err;SiebelApp.S_App.Model.ReleaseBO(G)})})})}else{SiebelApp.S_App.Model.ReleaseBO(G)}})})})
};A.prototype.FeedbackCapture=function(N,C){var K=SiebelApp.S_App.GetActiveView().GetActiveApplet().GetBusComp();var H=SiebelApp.S_App.Model.GetBusObj("Pharma Professional Call - Mobile");var I=H.GetBusComp("Pharma Professional Call - Mobile");var O=K.GetUserProperty("DestinationBC");var R=K.GetUserProperty("SourceBC");var L;var B=[];var P=[];var M=[];var J=0;var G=0;var Q=0;var D;D=N;if(O){L=H.GetBusComp(O)}var F=R+"|"+O+" FieldMap ";var E=F;I.SetSearchExpr("[Id] = '"+D+"'");I.Execute();$.callback(this,function(S){I.Home();$.callback(this,function(V){if(I.CheckActiveRow()===true){for(var U=0;U<10;U++){E=F+U;var T=K.GetUserProperty(E);if(!T){continue}M=T.split("|");B[J]=M[0];P[J]=M[1];J++}for(U=0;U<B.length;U++){K.ActivateField(B[U]);L.ActivateField(P[U])}$.callback(this,function(W){K.Home();$.callback(this,function(X){this.captureResponse(K);$.callback(this,function(Y){if(Y.err){$.setReturnValue({err:Y.err,retVal:Y.retVal})}else{$.callback(this,function(Z){K.Home();$.callback(this,function(ab){var ac=SiebelApp.S_App.Model.GetBusObj("Pharma Professional Call - Mobile");var aa=ac.GetBusComp("LS PCD Presentation Details BC");aa.SetFldSearchSpec("Activity Id",D);aa.Execute();$.callback(this,function(ad){aa.Home();$.callback(this,function(ae){if(aa.CheckActiveRow()===true){Q=parseInt(aa.GetRecordCount());Q=Q+1}else{Q=1}$.callback(this,function(ag){var af=function(){this.chkVisitedItem(K,C);$.callback(this,function(ai){var ah=ai.retVal;if(ah===true){L.SetExecuted(true);L.NewRecord(false);$.callback(this,function(ak){var aj=0;var al=function(){var am=B[aj];var an=P[aj];K.FieldValue(am);$.callback(this,function(ao){var ap=ao.retVal;if(ap){L.SetFieldValue(an,ap)}});$.callback(this,function(ao){aj++;if(aj<B.length){al.call(this)}})};if(aj<B.length){al.call(this)}$.callback(this,function(am){L.SetFieldValue("Activity Id",D);$.callback(this,function(an){if(!an.err){L.SetFieldValue("Sequence Number",Q);$.callback(this,function(ao){L.SetCommitPending(true);L.WriteRecord();$.callback(this,function(ap){if(!ap.err){K.NextRecord();$.callback(this,function(ar){var aq=ar.err;if(!aq){Q=Q+1;af.call(this)}else{L.SetFldSearchSpec("Activity Id",D);$.callback(this,function(at){L.Execute();$.callback(this,function(au){L.Home()})})}})}else{$.setReturnValue(ap)}})})}})})})}else{K.NextRecord();$.callback(this,function(ak){var aj=ak.err;if(!aj){Q=Q+1;af.call(this)}else{L.SetFldSearchSpec("Activity Id",D);$.callback(this,function(al){L.Execute();$.callback(this,function(am){L.Home()})})}})}})};if(K.CheckActiveRow()===true){af.call(this)}})})})})})}})})})}})})};A.prototype.ResetSelectFlags=function(){var B;var E,F,D,C;pContactBusComp=this.GetContext().GetBusComp();pActiveFeedBackBC=SiebelApp.S_App.GetActiveView().GetBusObj().GetBusComp("eDetailer Feedback Capture VBC");if(pContactBusComp&&(pContactBusComp.CheckActiveRow()===true)){pContactBusComp.FieldValue("Id");$.callback(this,function(H){E=H.retVal;var G=function(){pActiveFeedBackBC.FieldValue("Id");$.callback(this,function(I){D=I.retVal;F=E+"_"+D;C=o[F];if(C&&C==="N"){pActiveFeedBackBC.SetFieldValue("Select Flag",C);$.callback(this,function(J){pActiveFeedBackBC.NextRecord();$.callback(this,function(L){var K=L.err;if(!K){G.call(this)}})})}else{pActiveFeedBackBC.SetFieldValue("Select Flag","Y");$.callback(this,function(J){pActiveFeedBackBC.NextRecord();$.callback(this,function(L){var K=L.err;if(!K){G.call(this)}else{pActiveFeedBackBC.Home();$.callback(this,function(M){})}})})}})};if(pActiveFeedBackBC.CheckActiveRow()===true){pActiveFeedBackBC.Home();$.callback(this,function(I){G.call(this)})}})}};A.prototype.chkVisitedItem=function(E,I){var D={};var G,F,H,C;var B;if(s==="Y"){E.FieldValue("Id");$.callback(this,function(J){G=J.retVal;B=SiebelApp.S_App.GetActiveView().GetBusObj().GetBusComp("eDetailer Contact List VBC");if(B&&(B.CheckActiveRow()===true)){if(!z.IsEmpty(I)){F=I}else{B.FieldValue("Id")}$.callback(this,function(K){if(z.IsEmpty(I)){F=K.retVal}H=F+"_"+G;C=o[H];if(C==="N"){D.retVal=false;$.setReturnValue(D)}else{D.retVal=true;$.setReturnValue(D)}})}})}else{D.retVal=true;$.setReturnValue(D)}};A.prototype.captureResponse=function(D){var C={};C.err=false;var F=false;var E=[];var G=SiebelApp.S_App.GetActiveView().GetBusObj().GetBusComp("eDetailer Contact List VBC");var B=function(){D.FieldValue("ParentDsblMsgResponse");$.callback(this,function(I){var H=I.retVal;D.FieldValue("Response");$.callback(this,function(J){var K=J.retVal;if(H==="N"&&!K){E.push("Response");F=true;SiebelApp.S_App.OfflineErrorObject.SetErrorMsg("SSAFReqFieldNotExist",E);C.err="SSAFReqFieldNotExist";C.retVal="";$.setReturnValue(C)}})});if(F===false){D.NextRecord();$.callback(this,function(I){var H=I.err;if(!H){B.call(this)}})}};if(j===false){if(D.CheckActiveRow()===true){B.call(this)}}if(s==="Y"&&G.CheckActiveRow()!==true){SiebelApp.S_App.OfflineErrorObject.SetErrorMsg("IDS_DOUI_ERR_CONTACT_REQD");C.err="IDS_DOUI_ERR_CONTACT_REQD";C.retVal="";$.setReturnValue(C)}};A.prototype.NavigateToBookMarkView=function(){SiebelJS.Log("Invoked LogMsgPlanItemResponse Method");var B=CCFMiscUtil_CreatePropSet();B.SetProperty("Record Id",a);SiebelApp.OfflineAppMgr.QueueMethod(h,"MaintainBCState",B);if(!z.IsEmpty(v)){SiebelApp.OfflineAppMgr.BuildViewAsync(v,"BS_NORMAL")}};A.prototype.MaintainBCState=function(E){var D;var C=SiebelApp.S_App.Model.GetBusObj("Pharma Professional Call - Mobile");var B=this.GetContext().GetBusComp();if(d=="Account"){D=q}else{if(d=="Contact"){D=e}else{if(l){D=l}else{D=a}}}if(!z.IsEmpty(D)){B.PositionById(D);$.callback(this,function(F){SiebelApp.S_App.Model.ReleaseBO(C);SiebelApp.OfflineAppMgr.PostActions("ActionRPCCompleted")})}};A.prototype.CleanMpiAndRelatedMsgFiles=function(E){var D=false;var C=SiebelApp.S_App.Model.GetBusObj("Admin Messaging Plan");var F=C.GetBusComp("LS Related Messages BC");var B=localStorage.getItem("isAdfmContainer");if(B){this.CleanExpiredMsgFiles(F,D);$.callback(this,function(G){F=C.GetBusComp("LS MP Items BC");D=true;this.CleanExpiredMsgFiles(F,D);$.callback(this,function(H){SiebelApp.S_App.Model.ReleaseBO(C)})})}};A.prototype.CleanExpiredMsgFiles=function(E,H){var C=new Date();var F;var B;var G;var K;var I;var D=new Date(C.getUTCFullYear(),C.getUTCMonth(),C.getUTCDate(),C.getUTCHours(),C.getUTCMinutes(),C.getUTCSeconds());D.getSeconds();var J=""+D.getFullYear()+((D.getMonth()+1)<10?"0"+(D.getMonth()+1):(D.getMonth()+1))+(D.getDate()<10?"0"+D.getDate():D.getDate())+(D.getHours()<10?"0"+D.getHours():D.getHours())+(D.getMinutes()<10?"0"+D.getMinutes():D.getMinutes())+(D.getSeconds()<10?"0"+D.getSeconds():D.getSeconds());E.SetSearchExpr(("[Msg End Date] < '"+J+"'"));E.Execute();$.callback(this,function(L){E.Home();$.callback(this,function(M){var N=function(){E.FieldValue("Literature Id");$.callback(this,function(O){I=O.retVal;if(!t[I]){E.FieldValue("LitFileExt");$.callback(this,function(P){K=P.retVal;E.FieldValue("File With Path");$.callback(this,function(Q){var R=Q.retVal;B=R.split("\\");E.FieldValue("LitFileRev");$.callback(this,function(S){var T=S.retVal;
if(K!=="zip"&&K!=="ZIP"){G="S_LIT_"+I+"_"+T+"."+K}else{G="S_LIT_"+I+"_"+T+"/"+B[B.length-2]+"/"+B[B.length-1]}SiebelApp.MobileFileMgr.DeleteFilePath({filename:G});$.callback(this,function(U){if(K!=="zip"&&K!=="ZIP"){E.FieldValue("Thumbnail Id");$.callback(this,function(V){var W=V.retVal;E.FieldValue("Thumbnail Extension");$.callback(this,function(Y){var X=Y.retVal;E.FieldValue("Thumbnail Rev Id");$.callback(this,function(aa){var Z=aa.retVal;if(W&&Z){G="S_LIT_"+W+"_"+Z+"."+X;SiebelApp.MobileFileMgr.DeleteFilePath({filename:G})}})})})}})})})})}});$.callback(this,function(O){E.NextRecord();$.callback(this,function(Q){var P=Q.err;if(!P){N.call(this)}})})};if(E.CheckActiveRow()===true){this.CanDeleteFiles(H);$.callback(this,function(O){N.call(this)})}})})};A.prototype.CanDeleteFiles=function(H){var K=SiebelApp.S_App.Model.GetBusObj("Admin Messaging Plan");var E;var C=new Date();var F;var B;var G;var J;if(H){E=K.GetBusComp("LS MP Items BC")}else{E=K.GetBusComp("LS Related Messages BC")}var D=new Date(C.getUTCFullYear(),C.getUTCMonth(),C.getUTCDate(),C.getUTCHours(),C.getUTCMinutes(),C.getUTCSeconds());var I=""+D.getFullYear()+((D.getMonth()+1)<10?"0"+(D.getMonth()+1):(D.getMonth()+1))+(D.getDate()<10?"0"+D.getDate():D.getDate())+(D.getHours()<10?"0"+D.getHours():D.getHours())+(D.getMinutes()<10?"0"+D.getMinutes():D.getMinutes())+(D.getSeconds()<10?"0"+D.getSeconds():D.getSeconds());E.SetSearchExpr(("[Msg End Date] >= '"+I+"'"));E.Execute();$.callback(this,function(L){E.Home();$.callback(this,function(M){var N=function(){E.FieldValue("Literature Id");$.callback(this,function(O){var P=O.retVal;t[P]=P;E.FieldValue("Thumbnail Id");$.callback(this,function(Q){var R=Q.retVal;t[R]=R})});$.callback(this,function(O){E.NextRecord();$.callback(this,function(Q){var P=Q.err;if(!P){N.call(this);$.callback(this,function(R){SiebelApp.S_App.Model.ReleaseBO(K)})}})})};if(E.CheckActiveRow()===true){N.call(this)}})})};A.prototype.MakePDEntry=function(H){var D;D=H;var G=SiebelApp.S_App.Model.GetBusObj("Pharma Professional Call - Mobile");var F=G.GetBusComp("Pharma Professional Call - Mobile");var B=G.GetBusComp("LS Pharma My Products List");var I=G.GetBusComp("Pharma Call Products Detailed");var J=SiebelApp.S_App.Model.GetBusObj("Admin Messaging Plan");var E=J.GetBusComp("LS Admin Messaging Plans BC");var C=SiebelApp.S_App.GetActiveView().GetActiveApplet().GetBusComp();C.FieldValue("ParentMPId");$.callback(this,function(L){var K=L.retVal;E.SetSearchExpr("[Id] = '"+K+"'");E.Execute();$.callback(this,function(M){E.Home();$.callback(this,function(N){if(E.CheckActiveRow()===true){E.FieldValue("Product Id");$.callback(this,function(P){var O=P.retVal;E.FieldValue("Product");$.callback(this,function(Q){var R=Q.retVal;B.SetSearchExpr("[Product Id] = '"+O+"'");B.Execute();$.callback(this,function(S){B.Home();$.callback(this,function(T){if(B.CheckActiveRow()===true){B.FieldValue("Product Allocation Id");$.callback(this,function(V){var U=V.retVal;F.SetSearchExpr("[Id] = '"+D+"'");F.Execute();$.callback(this,function(W){F.Home();$.callback(this,function(X){I.SetSearchExpr("[Activity Id] = '"+D+"'");I.Execute();$.callback(this,function(Z){I.Home();if(I.CheckActiveRow()===true){var Y=I.GetRecordCount();++Y;this.CreatePDRecord(I,Y,U,O,R,D);$.callback(this,function(aa){if(aa.err){SiebelApp.S_App.Model.ReleaseBO(G);SiebelApp.S_App.Model.ReleaseBO(J);$.setReturnValue(aa)}else{SiebelApp.S_App.Model.ReleaseBO(G);SiebelApp.S_App.Model.ReleaseBO(J)}})}else{this.CreatePDRecord(I,1,U,O,R,D);$.callback(this,function(aa){if(aa.err){SiebelApp.S_App.Model.ReleaseBO(G);SiebelApp.S_App.Model.ReleaseBO(J);$.setReturnValue(aa)}else{SiebelApp.S_App.Model.ReleaseBO(G);SiebelApp.S_App.Model.ReleaseBO(J)}})}})})})})}})})})})}})})})};A.prototype.PhaeDetContatcDeleteRecord=function(G){var B=JSON.parse(G.GetProperty("Record"));var F=B.ContactId;var E=B.CallId;var D;if(z.IsEmpty(E)&&!r){for(var C=0;C<k.GetChildCount();C++){D=k.GetChild(C).GetProperty("Contact Id");if(D===F){k.RemoveChild(C)}}}};A.prototype.CreatePDRecord=function(B,D,G,E,H,C){var F=C;B.ActivateField("Product Allocation Id");B.ActivateField("Priority");B.ActivateField("Activity Id");B.ActivateField("Product Id");B.ActivateField("Name");B.SetExecuted(true);B.NewRecord(false);$.callback(this,function(I){B.SetFieldValue("Product Allocation Id",G,true);$.callback(this,function(J){if(!J.err){B.SetFieldValue("Priority",D);$.callback(this,function(K){if(K.err){$.setReturnValue(K)}else{B.SetFieldValue("Activity Id",F);$.callback(this,function(L){B.SetFieldValue("Product Id",E);$.callback(this,function(M){B.SetFieldValue("Name",H,true);$.callback(this,function(N){B.WriteRecord();$.callback(this,function(O){if(O.err==="SSASqlErrDupConflict"){O.err=false;$.setReturnValue(O)}else{$.setReturnValue(O)}})})})})}})}else{$.setReturnValue(J)}})})};return A}());return"SiebelAppFacade.edetailingsvc"})};