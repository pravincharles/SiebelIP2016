/*<ORACLECOPYRIGHT>
* Copyright (C) 1994-2014
* Oracle and Java are registered trademarks of Oracle and/or its affiliates.
* Other names may be trademarks of their respective owners.
* UNIX is a registered trademark of The Open Group.
*
* This software and related documentation are provided under a license agreement
* containing restrictions on use and disclosure and are protected by intellectual property laws.
* Except as expressly permitted in your license agreement or allowed by law, you may not use, copy,
* reproduce, translate, broadcast, modify, license, transmit, distribute, exhibit, perform, publish,
* or display any part, in any form, or by any means. Reverse engineering, disassembly,
* or decompilation of this software, unless required by law for interoperability, is prohibited.
*
* The information contained herein is subject to change without notice and is not warranted to be error-free.
* If you find any errors, please report them to us in writing.
*
* U.S. GOVERNMENT RIGHTS Programs, software, databases, and related documentation and technical data delivered to U.S.
* Government customers are "commercial computer software" or "commercial technical data" pursuant to the applicable
* Federal Acquisition Regulation and agency-specific supplemental regulations.
* As such, the use, duplication, disclosure, modification, and adaptation shall be subject to the restrictions and
* license terms set forth in the applicable Government contract, and, to the extent applicable by the terms of the
* Government contract, the additional rights set forth in FAR 52.227-19, Commercial Computer Software License
* (December 2007). Oracle America, Inc., 500 Oracle Parkway, Redwood City, CA 94065.
*
* This software or hardware is developed for general use in a variety of information management applications.
* It is not developed or intended for use in any inherently dangerous applications, including applications that
* may create a risk of personal injury. If you use this software or hardware in dangerous applications,
* then you shall be responsible to take all appropriate fail-safe, backup, redundancy,
* and other measures to ensure its safe use. Oracle Corporation and its affiliates disclaim any liability for any
* damages caused by use of this software or hardware in dangerous applications.
*
* This software or hardware and documentation may provide access to or information on content,
* products, and services from third parties. Oracle Corporation and its affiliates are not responsible for and
* expressly disclaim all warranties of any kind with respect to third-party content, products, and services.
* Oracle Corporation and its affiliates will not be responsible for any loss, costs,
* or damages incurred due to your access to or use of third-party content, products, or services.
</ORACLECOPYRIGHT>*/
/* 8.1.1.14SIA[23044]PATCHSET7 */
if(SiebelApp.S_App.Applet){define("siebel/offline/applet",[],function(){(function(){var ab=SiebelApp.S_App.Applet;var g=SiebelApp.S_App.Applet;var i=SiebelApp.S_App.Applet.prototype;var D=SiebelApp.Constants;var P=SiebelApp.Offlineconstants;var O=P.get("IS_DYNAMIC");var X=SiebelJS.Dependency("SiebelApp.Utils");var x=SiebelApp.S_App.Model;var W=SiebelApp.S_App;var z=SiebelApp.OfflineAppMgr;var at=SiebelApp.OfflineUtils;var d=SiebelApp.AjaxRequestMgr;var b=P.get("DOUIREG_OBJ_NAME");var aw=P.get("DOUIREG_OBJ_TYPE");var q=P.get("DOUIREG_OBJ_MTHD");var u=P.get("DOUIREG_EXT_TYPE");var aq=P.get("DOUIREG_EXT_TYPEPRE");var av=P.get("DOUIREG_EXT_TYPEPOST");var af=P.get("DOUIREG_OBJ_TYPEAPPLET");var v=P.get("DOUIREG_EXT_CONTEXT");var y=D.get("SWE_PST_VIEW_INFO");var U=D.get("SWE_PROP_BEGIN_ROW");var H=D.get("SWE_PROP_CAN_UPDATE");var w=D.get("SWE_PROP_CAN_INVOKE");var A=D.get("SWE_PST_BUSCOMP_INFO");var K=D.get("SWE_PROP_NAME");var F=D.get("SWE_PST_CAN_NAV_STATE");var L=D.get("SWE_CMD_DRILLDOWN_STR");var l=D.get("SWE_PROP_ROW_SELECTION");var E=P.get("LOG_EVT_CLIENT_SYS");SiebelApp.S_App.Applet=function(){g.call(this);var aF=-1;var aK=null;var aG=false;var aD=false;var aP=false;var aN=false;var aJ=0;var aB=[];var aI=true;var aL="";var aE=null;var aM=[];var aC=false;var aA;var aO;var az;this.BackUpCtrls=function(aR,aQ){aO=aR;az=aQ};this.ResetCtrls=function(){this.SetPrsrvControl(az);this.SetActiveControl(aO)};this.GetInterface=function(){if(!aE){aE=new SiebelApp.S_App.OfflineAppletInterface(this)}return aE};this.SetInPlaceEdit=function(aQ){aC=aQ};this.GetInPlaceEdit=function(){return aC};this.GetSavedModeState=function(){return aA};this.SetSavedModeState=function(aQ){aA=aQ};this.ResetInterface=function(){if(aE){aE.EndLife()}aE=null};this.GetCanNavigateStateStr=function(){return aL};this.SetCanNavigateStateStr=function(aQ){aL=aQ};this.GetCanNavigateCtrlArray=function(){return aM};this.SetCanNavigateCtrlArray=function(aQ){aM=aQ};this.GetNotComp=function(){return aK};this.SetNotComp=function(aQ){aK=aQ};this.GetNotIdComp=function(){return aF};this.SetNotIdComp=function(){aF=-1};this.SetNoUpdate=function(aQ){aG=aQ};this.SetNoDelete=function(aQ){aP=aQ};this.SetNoInsert=function(aQ){aD=aQ};this.SetNoMerge=function(aQ){aN=aQ};this.GetNoUpdate=function(){return aG};this.GetNoDelete=function(){return aP};this.GetNoInsert=function(){return aD};this.GetNoMerge=function(){return aN};this.SetPrevBegRow=function(aQ){aJ=aQ};this.GetPrevBegRow=function(){return aJ};this.SetRowSelectArr=function(aQ){aB=aQ};this.GetRowSelectArr=function(){return aB};this.GetMultiSelect=function(){return aI};this.SetMultiSelect=function(aQ){aI=aQ};var aH=false;this.SetErrStatus=function(aQ){aH=aQ};this.GetErrStatus=function(){return aH};var n=this._EndLife;this._EndLife=function(){aM=null;aL=null;aB=null;aA=null;aK=null;n.call(this);n=null}};SiebelApp.S_App.Applet.prototype=i;SiebelApp.S_App.Applet.prototype.constructor=SiebelApp.S_App.Applet;var V={};V.ProcessObjectInfo=ab.prototype.ProcessObjectInfo;V.ProcessPickInfo=ab.prototype.ProcessPickInfo;V.EndLife=ab.prototype.EndLife;V.InvokeMethod=ab.prototype.InvokeMethod;V.ProcessFormattedValue=ab.prototype.ProcessFormattedValue;V.ProcessControlInfo=ab.prototype.ProcessControlInfo;var t={};t.ProcessObjectInfo=function(n){var aC=SiebelApp.OfflineAppMgr.GetStatus();if((aC===P.get("NEWLAYOUT")||aC===P.get("NEWPOPUP"))&&!(n.GetProperty(O))){if(aC===P.get("NEWPOPUP")){var az=n.GetProperty(A);if(az===this.GetView().GetActiveApplet().GetBCId()){var aB=SiebelApp.S_App.ActiveBusObject().MaxBCIndex();n.SetProperty(A,"S_BC"+aB)}}this.DeclareFrame(n);if(typeof(this.GetPickAppletSrcInfo)!=="undefined"){var aE=this.GetBusComp();if(aE){var aD=this.GetPickAppletSrcInfo().SrcAppletFld,aA=this.GetParentApplet().GetBusComp();aE.SetSrcIdFld(aD,aA);aE.SetPickAppletSrcInfo(this.GetPickAppletSrcInfo());aE.SetBusCompType(P.get("BCTYPE_PICKLIST"));if(aD){aE.SetPickSrcField(aD);aE.SetMasterBC(aA)}}}this.InitializeFrame();this.SetInPlaceState()}else{M.call(this,n)}};t.ProcessFormattedValue=function(n,aD,aA,aB,az,aG){var aC=this.SetFormattedValue(n,aD);if(aC===undefined){this.OnActionsSetFormattedValue(n,aA,aB,az,aG,true);var aF=this.GetPrsrvControl();var aE=this.GetActiveControl();this.BackUpCtrls(aE,aF);$.callback(this,function(){if(this.GetErrStatus()){if(!aG){this.SetPrsrvControl(aF);this.SetActiveControl(aE)}this.OnActionsSetFormattedValue(n,aA,aB,az,aG,false);this.SetErrStatus(false)}});if(n&&n.GetUIType()===D.get("SWE_CTRL_PICK")){return false}return true}else{return(this.OnActionsSetFormattedValue(n,aA,aB,az,aG,aC))}};t.InvokeMethod=function(n,aB,az){var aA=V.InvokeMethod.call(this,n,aB,az);if(n==="OnEnterKey"){if(aA===undefined||aA===null){return true}}return aA};t.ProcessPickInfo=function(az){var n=SiebelApp.S_App.GetActiveView().GetActiveApplet().GetVarName();az.SetValue(n);return(V.ProcessPickInfo.call(this,az))};t.ProcessControlInfo=function(az,aA){if(az.GetProperty(O)){var n=this.GetControls();var aB=SiebelApp.S_App.LookupStringCache(az.GetProperty(D.get("SWE_PROP_NAME")));var aC=n[aB];if(aC!==undefined){aC.ProcessObjectInfo(az)}}else{V.ProcessControlInfo.call(this,az,aA)}};ab.prototype.DeclareFrame=function(az){var aD={};var aA={};aA[b]=az.GetProperty(K);aA[aw]=af;aA[q]="DeclareFrame";aA[v]=this;var aE=CCFMiscUtil_CreatePropSet();aE.AddChild(az);if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().StartTime("Applet.DeclareFrame")}aA[u]=aq;var aC=x.InvokeRegisteredSvc(aA,aE,true);aD=aC.retVal;if((aD.Outputargs)&&(aD.Outputargs).GetProperty("Invoked")&&(aD.Outputargs).GetProperty("Invoked").toString()==="true"){$.setReturnValue({err:aC.err,retVal:aD.Outputargs});return}if(aD.Outputargs&&aE){(aD.Outputargs).SetType(aq);aE.AddChild(aD.Outputargs)}M.call(this,az);if(!(az.GetProperty(O))){var aB=this.GetBusComp();var n=this.GetView();if(aB!==null){if(n!==null){n.AddBCBroker(aB,this.GetName())}}}if(!this.GetDefn()){at.CcfLogEvent([E,53,4,28,this.GetName(),this.GetDefn()])}this.SetNoUpdate(this.GetDefn().NoUpdate);this.SetNoInsert(this.GetDefn().NoInsert);this.SetNoDelete(this.GetDefn().NoDelete);this.SetNoMerge(this.GetDefn().NoMerge);aA[u]=av;aC=x.InvokeRegisteredSvc(aA,aE,true);aD=aC.retVal;if(aD&&aD.Outputargs){$.setReturnValue({err:aC.err,retVal:aD.Outputargs});if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("Applet.DeclareFrame")}}};function M(aB){if(!(aB.GetProperty(O))){var a0=x.GetDyncPS(y,false);var a5=CCFMiscUtil_CreatePropSet();a5.SetType(aB.GetType());a5.SetValue(aB.GetValue());a5.SetProperty(O,true);var aO=[U,H,w,l];at.ProcessDPS(a5,aB,aO,3,false);var n=[A,K];at.ProcessDPS(a5,aB,n,2,true);var bc=aB.GetChildByType(F);if(bc){var a4=aB.FindChildPosition(F);aB.RemoveChild(a4)}var a2=aB.GetChildByType("cl");var bb;var aM;var aQ;var aG;if(a2){var aD=a2.EnumChildren(true);var aU=false;var aE=false;if(!aD){aU=true}do{if(aD){var bi=aD.GetType();if(bi==="c"){aM=aD.EnumChildren(true);aG=aD.GetProperty(D.get("SWE_PROP_NAME"));if(aM){bb=aM.GetProperty(D.get("SWE_METHOD_STR"));
aQ=aM.GetProperty(D.get("SWE_SHOW_POPUP_STR"));if(bb==="NewRecord"){aE=true;break}}}}}while((aD=a2.EnumChildren(false))&&!aU);if(aE){var bg=CCFMiscUtil_CreatePropSet();bg.SetType(a2.GetType());bg.SetValue(a2.GetValue());bg.SetProperty(O,true);var a1=CCFMiscUtil_CreatePropSet();a1.SetType(aD.GetType());a1.SetValue(aD.GetValue());a1.SetProperty(O,true);a1.SetProperty(D.get("SWE_PROP_NAME"),aG);var aH=CCFMiscUtil_CreatePropSet();aH.SetType(aM.GetType());aH.SetValue(aM.GetValue());aH.SetProperty(O,true);aH.SetProperty(D.get("SWE_METHOD_STR"),bb);aH.SetProperty(D.get("SWE_SHOW_POPUP_STR"),aQ);a1.AddChild(aH);bg.AddChild(a1);a5.AddChild(bg)}}a0.AddChild(a5);x.SetDyncPS([y],[a0],1);if(aB.PropertyExists(D.get("SWE_PST_APPLET_MODE"))){var aJ=aB.GetProperty(D.get("SWE_PST_APPLET_MODE"));if(aJ!==D.get("SWE_PST_APPLET_MODE_BASE")){aB.SetPropertyStr(D.get("SWE_PROP_IS_EDIT"),"1")}else{aB.SetPropertyStr(D.get("SWE_PROP_IS_EDIT"),"0")}}}var a7;V.ProcessObjectInfo.call(this,aB);if(aB.GetProperty(O)){a7=this.GetControls();var aV;var aA=this.GetBusComp();var a6;if(aA){a6=aA.GetActiveRow()}else{a6=-1}var aW=this.GetName();var aK=this.GetView().GetName();var bd=window.localStorage.getItem("SRN");var aL=SiebelApp.OfflineAppMgr.GetControlRegExpMap();for(var aT in a7){if(a7[aT]){var aN=a7[aT];aV=aN.GetMethodPropSet();if(aV){aV.SetPropertyStr(D.get("SWE_PROP_SESSION_RANDOM_NUMBER"),bd);aV.SetPropertyStr("SWEApplet",aW);aV.SetPropertyStr(D.get("SWE_ROW_STR"),a6);aV.SetPropertyStr("SWEView",aK)}if(aN.GetSpanPrefix){var aC=aN.GetSpanPrefix();var bh=aN.GetInputName();var aF=new RegExp("(("+aC+"0)|("+aC+"65535))","ig");aL[bh]=aF;aF=null}}}SiebelApp.OfflineAppMgr.SetControlRegExpMap(aL)}else{var aX=false;var be;var a3=CCFMiscUtil_CreatePropSet();a7=this.GetDefn().control;for(var aI in a7){if(a7[aI]){be=a7[aI];if(be){var aS=be.htmlIconMap;if(aS&&!X.IsEmpty(aS)){a3.SetPropertyStr(K,aS);aX=true;var aZ=SiebelApp.Metadata.GetMIcons(aS);var aR=aZ.length;var a8=0;var az;for(var ba=0;ba<aR;ba++){var a9=aZ[ba].Bitmap;var aP="";if(a9){a9=a9.replace(/\./g,"_");a9=a9.replace(/ /g,"_");a9=a9.toLowerCase();aP='<span class="siebui-icon-'+a9+'">'}az=CCFMiscUtil_CreatePropSet();var aY=SiebelApp.S_App.GetPageURL();aY=aY.replace("start.swe","images/");aY=aY.concat(aZ[ba].FileName);aY='<img src="'+aY+'" border="'+a8+'" space="'+a8+'" hspace="'+a8+'" >';aY=aP+aY;az.SetPropertyStr(K,aZ[ba].IconName);az.SetPropertyStr(D.get("SWE_PROP_ICON_IMG"),aY);az.SetType("i");a3.AddChild(az)}}}}}if(X.IsTrue(aX)){a3.SetType("il");var bf=x.GetDyncPS(D.get("SWE_PST_APP_INFO"),false);bf.AddChild(a3)}}}t.EndLife=function(){var n=this.GetNotIdComp();if(n!==-1){this.GetBusComp().UnRegNotifyObj();this.SetNotIdComp(-1);this.SetNotComp(null)}this.ResetInterface();V.EndLife.call(this)};ab.prototype.InitializeFrame=function(n){var az={};var aD=CCFMiscUtil_CreatePropSet();aD.AddChild(n);az[b]=this.GetName();az[aw]=af;az[q]="InitializeFrame";az[v]=this;az[u]=aq;var aB=x.InvokeRegisteredSvc(az,aD,true);var aA=aB.retVal;if((aA.Outputargs)&&(aA.Outputargs).GetProperty("Invoked")&&(aA.Outputargs).GetProperty("Invoked").toString()==="true"){$.setReturnValue({err:aB.err,retVal:aA.Outputargs});return}if(aA.Outputargs&&aD){(aA.Outputargs).SetType(aq);aD.AddChild(aA.Outputargs)}if(this.GetDefn().searchSpec){var aC=this.GetBusComp();if(aC&&this.GetName()){aC.SetAppletSearchSpec(this.GetDefn().searchSpec);at.CcfLogEvent([E,31,4,10,aC.GetName(),"AppletSearchSpec: ",this.GetDefn().searchSpec])}}az[u]=av;aB=x.InvokeRegisteredSvc(az,aD,true);aA=aB.retVal;if(aA&&aA.Outputargs){$.setReturnValue({err:aB.err,retVal:aA.Outputargs});return}};ab.prototype.SetInPlaceState=function(){var n=this.GetMode();if(n===D.get("SWE_PST_APPLET_MODE_EDIT")){this.SetInPlaceEdit(true)}};ab.prototype.ActivateFields=function(n){if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().StartTime("Applet.ActivateFields")}var az={},aA={},aB=CCFMiscUtil_CreatePropSet();az[b]=this.GetName();az[aw]=af;az[q]="ActivateFields";az[v]=this;aB.AddChild(n);az[u]=aq;x.InvokeRegisteredSvc(az,aB);$.callback(this,function(aJ){aA=aJ.retVal;if((aA.Outputargs)&&(aA.Outputargs).GetProperty("Invoked")&&(aA.Outputargs).GetProperty("Invoked").toString()==="true"){$.setReturnValue({err:aJ.err,retVal:aA.Outputargs});return}if(aA.Outputargs){(aA.Outputargs).SetType(aq);aB.AddChild(aA.Outputargs)}var aR=this.GetBusComp();if(!aR){return}var aE=aR.GetChildBCArray();var aK=[];var a0;var aC=aR.GetFieldMap();var aF=aE.length;for(var aD=0;aD<aF;aD++){a0=aE[aD].GetLinkDef();if(a0){if(!aC[a0.srcFieldName]){aK.push(a0.srcFieldName)}if(!X.IsEmpty(a0.primeIdFieldName)){aR.ActivateFieldList([a0.primeIdFieldName])}}}if(aK.length>0){aR.ActivateFieldList(aK)}var aQ=this.EnumUserProps();var aW=[];var aP=-1;var aH=[];var aY;if(aQ){aP=aQ.length}for(var aS=0;aS<aP;aS++){aR.ActivateFieldList(aW)}if(aH){aY=aH.length;if(aY>0){aR.ActivateFieldList(aH)}}var aX=this.GetParentApplet();if(aX&&aX.GetDefn().AsocAplt&&(aX.GetDefn().AsocAplt===this.GetName())){var aN=aX.GetBusComp().GetActivatedFieldList();if(aN){if(aN.length>0){aR.ActivateFieldList(aN)}}}else{if(aX&&aX.GetActiveControl()){var aO=aX.GetActiveControl().GetFieldName();var aI;var aL=[];var aM;var aG=aX.GetBusComp().GetFieldDefn(aO);if(aG&&aG.PickListName){if(aG.pickMap){var aV=aG.pickMap.length;var aZ;for(var aU=0;aU<aV;aU++){aI=aG.pickMap[aU];aL.push(aI.PFldName)}if(aV>0){this.GetBusComp().ActivateFieldList(aL)}for(var aT=0;aT<aV;aT++){aI=aG.pickMap[aT];if(!aI.IsConstrained){continue}aX.GetBusComp().FieldValue(aI.FldName);$.callback(this,function(a1){if(a1.err){$.setreturnValue(a1);return}else{aZ=a1.retVal;aM="[";aM+=aI.PFldName;aM+="] = ";aM+='"'+aZ+'"';this.GetBusComp().SetSearchSpec(aM);this.GetBusComp().SetExecuted(false);$.callback(this,function(){$.setReturnValue({err:false,retVal:true});return})}})}}}}}aR.ActivateFields();az[u]=av;x.InvokeRegisteredSvc(az,aB);$.callback(this,function(a1){aA=a1.retVal;if(aA&&aA.Outputargs){$.setReturnValue({err:a1.err,retVal:aA.Outputargs});if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("Applet.ActivateFields")}return}})})};ab.prototype.Populate=function(){at.CcfLogEvent([E,44,4,14,"Name",this.GetDefn().Name]);if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().StartTime("Applet.Populate")}var n={},az={},aA=CCFMiscUtil_CreatePropSet();aA.AddChild(az.Outputargs);n[b]=this.GetName();n[aw]=af;n[q]="Populate";n[v]=this;n[u]=aq;x.InvokeRegisteredSvc(n,aA);$.callback(this,function(aF){az=aF.retVal;if((az.Outputargs)&&(az.Outputargs).GetProperty("Invoked")&&(az.Outputargs).GetProperty("Invoked").toString()==="true"){$.setReturnValue({err:aF.err,retVal:az.Outputargs});return}if(az.Outputargs){(az.Outputargs).SetType(aq);aA.AddChild(az.Outputargs)}var aE=this.GetBusComp();if(!aE){$.setReturnValue({err:false});return}var aC=aE.GetExtObjProp("isNewRecord"),aD=aE.GetExtObjProp("IsEditRecord"),aB=aE.IsExecuted(),aG="",aH=aE.GetExtObjProp("reExecute");if(aC&&aB){aE.NewRecordX(true,false,null)}if(aD&&aB){aE.UpdateRecordX(true)}$.callback(this,function(){aH=aH?aH:false;
var aK=aE.GetParentBusComp();if(!aK){var aI=aE.GetChildBCArray(),aM=aI.length,aL;for(var aJ=0;aJ<aM;aJ++){aL=aI[aJ].GetLinkDef().srcFieldName;if(!(aE.GetFieldMap()[aL])){aE.ActivateField(aL);aH=true}}}aE.SetExtObjProp("reExecute",aH);if(aB&&!aH){return}if(aH&&aB){aG=aE.GetIdValueX()}aE.Execute();$.callback(this,function(aN){if(!aN.err){if(aH&&!(X.IsEmpty(aG))){aE.PositionById(aG)}else{aE.Home()}$.callback(this,function(aO){if(!aO.err){n[u]=av;x.InvokeRegisteredSvc(n,aA);$.callback(this,function(aP){az=aP.retVal;if(az&&az.Outputargs){$.setReturnValue({err:aP.err,retVal:az.Outputargs});if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("Applet.Populate")}return}})}})}else{$.setReturnValue(aN)}})})})};ab.prototype.InterpolatePS=function(az){var aD=[ao,ah,Q,au,I],aB=0,n=aD.length;az.SetPropertyStr(l);var aC=function(){aB++;if(aB<n){aA.call(this)}else{aD=null;aA=null;Z.call(this,true)}};var aA=function(){aD[aB].call(this,az);$.callback(this,aC)};aA.call(this)};function ao(az){var aE=[];CCFMiscUtil_StringToArray(az.GetProperty(w),aE);var aA=aE.length;if(aA<2){return}var aC=0;var n=function(aG){if(!aG.err){var aF=aG.retVal;aE[aC+1]=(X.IsTrue(aF)?"1":"0")}if(aC<aA-2){aC=aC+2;aB.call(this)}};var aB=function(){var aF=W.LookupStringCache(aE[aC]);this.CanInvokeMethodX(aF);$.callback(this,n)};aB.call(this);var aD=function(){az.SetProperty(w,CCFMiscUtil_ArrayToString(aE));n=null;aE=null;aB=null};$.callback(this,aD)}function ah(az){var aD=[];CCFMiscUtil_StringToArray(az.GetProperty(H),aD);var aE=aD.length;if(aE<2){return}var aC=0;var n=function(aF){var aG;if(!aF.err){aG=aF.retVal}else{aG=false}aD[aC+1]=(X.IsTrue(aG)?"1":"0");if(aC<aE-2){aC=aC+2;aB.call(this)}};var aB=function(){var aF=W.LookupStringCache(aD[aC]);this.CanUpdateX(aF);$.callback(this,n)};aB.call(this);var aA=function(){az.SetProperty(H,CCFMiscUtil_ArrayToString(aD));n=null;aD=null;aB=null};$.callback(this,aA)}function Q(aS){var aK="";var aO=[];var aA="";var aG=ar.call(this);var az=aG.length;var aH;var n;var aD;var aM,aB;if(az){n=CCFMiscUtil_CreatePropSet();n.SetType("cn");aS.AddChild(n);var aN=this.GetControls();var aC=[];for(var aQ=0;aQ<az;aQ++){for(var aR in aN){if(aN.hasOwnProperty(aR)){if(aN[aR].GetFieldName()===aG[aQ]){aC.push(aN[aR].GetName());break}}}}var aP=aC.length;this.SetCanNavigateCtrlArray(aC);var aF=0;if(aP>0){var aL=0;var aJ=this.GetBusComp();var aI;var aE=this.GetNotComp();var aT=false;aE=0;aM=function(){aO=[];aI=this.GetDrillDown(aN[aC[aL]].GetFieldName(),true);aA+="*";if(aJ&&aJ.CheckActiveRow()){aJ.WSHomeX(aE,this.GetName());aT=true}else{aT=false}aF=0;aD=function(){this.CanNavigateX(aI);$.callback(this,aH)};if(aT){aD.call(this)}$.callback(this,aB)};aH=function(aU){if(!aU.err){aK=X.IsTrue(aU.retVal)?"1":"0";aA+=aK;aO.push(aK);aT=aJ.WSNextRecordX(aE,this.GetName());if(aT&&aF<aJ.GetWS().length){aF++;aD.call(this)}}};aB=function(){if(aF>0){n.SetProperty(aC[aL],CCFMiscUtil_ArrayToString(aO))}aL++;if(aL<aP){aM.call(this)}};aM.call(this)}}$.callback(this,function(){this.SetCanNavigateStateStr(aA);aH=null;aB=null;aM=null;aD=null})}function au(){}function I(n){var aA=this.GetBusComp();var az=this.GetNotIdComp();if(!aA||az===-1){return}var aB=aA.WSGetBegRow(az,this.GetName());this.SetPrevBegRow(aB);n.SetPropertyStr(U,aB.toString())}function aj(){var n=[];var az=this.GetBusComp();var aC=0;var aA=this.GetPrevBegRow();if(!az||aC===-1){return}var aB=az.WSGetBegRow(aC,this.GetName());if(X.IsEmpty(aB)){return}if(aA!==aB){this.SetPrevBegRow(aB);n.push(this.GetName());n.push(aB.toString());az.NotifyGeneric("BegRow",n)}}ab.prototype.GenerateExtraNotifyInfo=function(){if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().StartTime("Applet.GenerateExtraNotifyInfo")}var aB=arguments[0];var aA=SiebelApp.OfflineAppMgr.GetStatus();var az=X.DecodeFromQueryString(aB);var n=az.GetProperty(D.get("SWEJI"));if(!X.IsEmpty(n)||aA===P.get("REFRESHLAYOUT")||aA===P.get("NEWLAYOUT")||aA===P.get("NEWPOPUP")){return}e.call(this);$.callback(this,function(){Y.call(this);$.callback(this,function(){p.call(this);$.callback(this,function(){Z.call(this);$.callback(this,function(){aj.call(this);var aC=this.GetPopupApplet();if(aC){aC.GenerateExtraNotifyInfo(aB)}if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("Applet.GenerateExtraNotifyInfo")}})})})})};function e(){var aG=[];var aB=0;var aH=this.GetCanInvokeArray();if(X.IsEmpty(aH)){return}var aE=aH.length;var aF=this.GetBusComp();if(aE<=0||!aF){return}var n=false;aG.push(this.GetName());var aC;var aI;var aD=function(aJ){if(!aJ.err){aI=aJ.retVal;aC=this.GetCanInvokeByName()[aH[aB]].bCanInvoke;if(X.IsEmpty(aI)){aI=aC}if(aI!==aC){this.GetCanInvokeByName()[aH[aB]]={bCanInvoke:aI};n=true}aG.push(String(aB));aG.push(X.IsTrue(aI)?"1":"0");aB++;if(aB<aE){az.call(this)}}};var az=function(){var aJ=aH[aB];this.CanInvokeMethodX(aJ);$.callback(this,aD)};az.call(this);var aA=function(){if(n){aF.NotifyGeneric("SWEICanInvokeMethod",aG)}az=null;aD=null};$.callback(this,aA)}function Y(){var aG=[];var aD=this.GetCanUpdateArray();if(X.IsEmpty(aD)){return}var aE=aD.length;var aF=this.GetBusComp();var aC=0;if(aE<=0||!aF){return}var n=false;aG.push(this.GetName());var az=function(aI){if(!aI.err){var aJ=aI.retVal;var aH=this.GetCanUpdateByName()[aD[aC]].bCanUpdate;if(X.IsTrue(aJ)!==X.IsTrue(aH)){this.GetCanUpdateByName()[aD[aC]]={bCanUpdate:aJ};n=true}aG.push(String(aC));aG.push(X.IsTrue(aJ)?"1":"0")}aC++;if(aC<aE){aA.call(this)}};var aA=function(){var aH=aD[aC];this.CanUpdateX(aH);$.callback(this,az)};aA.call(this);var aB=function(){if(n){aF.NotifyGeneric("SWEICanUpdate",aG)}aA=null;az=null};$.callback(this,aB)}function p(){var aA="";var az=[];var aD="";var aE=0;var aF=[];var aH=this.GetCanNavigateCtrlArray();aE=aH.length;var n=this.GetBusComp();aF.push(this.GetName());if(!n||!aE){return}var aB=0;var aI=this.GetNotComp();aI=0;var aC=false;var aG=function(){az=[];var aK=this.GetDrillDown(aH[aB],true);aD+="*";if(n&&n.CheckActiveRow()){n.WSHomeX(aI,this.GetName());aC=true}else{aC=false}var aL=0;var aJ=function(){this.CanNavigateX(aK);$.callback(this,function(aM){if(!aM.err){aA=X.IsTrue(aM.retVal)?"1":"0";aD+=aA;az.push(aA);aC=n.WSNextRecordX(aI,this.GetName());if(aC&&aL<n.GetWS().length){aL++;aJ.call(this)}}})};if(aC){aJ.call(this)}$.callback(this,function(){if(aL>0){aF.push("*"+aH[aB]);aF=aF.concat(az)}aB++;if(aB<aE){aG.call(this)}})};aG.call(this);$.callback(this,function(){var aJ=this.GetCanNavigateStateStr();if(aJ!==aD){aJ=aD;this.NotifyGeneric("SWEICanNavigate",aF)}})}ab.prototype.CanNavigateX=function(n){if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().StartTime("Applet.CanNavigateX")}var az={},aA={},aB=CCFMiscUtil_CreatePropSet();az[b]=this.GetName();az[aw]=af;az[q]="CanNavigateX";az[v]=this;aB.SetPropertyStr("ddObj",n);az[u]=aq;x.InvokeRegisteredSvc(az,aB);$.callback(this,function(aE){aA=aE.retVal;if((aA.Outputargs)&&(aA.Outputargs).GetProperty("Invoked")&&(aA.Outputargs).GetProperty("Invoked").toString()==="true"){$.setReturnValue({err:aE.err,retVal:aA.Outputargs});return
}if(aA.Outputargs){(aA.Outputargs).SetType(aq);aB.AddChild(aA.Outputargs)}var aD=0;var aC;if(!n){aC=false}else{var aF=this.GetBusComp();if(aF){aD=aF.GetActiveRow()}if(aD>=0){aC=true}else{aC=false}}az[u]=av;x.InvokeRegisteredSvc(az,aB);$.callback(this,function(aG){aA=aG.retVal;if(aA&&aA.Outputargs){if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("Applet.CanNavigateX")}aC=aA.Outputargs}$.setReturnValue({err:aG.err,retVal:aC})})})};ab.prototype.PositionBaseAncestorFrame=function(){};ab.prototype.GoBackToRecord=function(aD){at.CcfLogEvent([E,44,4,15,"Name",this.GetDefn().Name]);if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().StartTime("Applet.GoBackToRecord")}var aA;var aC;var az;var aE=this.GetBusComp();var n=at.JsonRecordSet(aD);var aB=n.SweCommands.SWERowId;if(aE){aC=aE.GetExtObjProp("m_wsActiveRow");az=aE.FindWorkSet(aC);if(az){aE.FieldValue(D.get("SWE_ROW_ID_FIELD"),az);$.callback(this,function(aF){if(!aF.err){aA=aF.retVal;if(!this.CheckActiveRowId(aA,aB)){aE.PositionById(aB)}}else{$.setReturnValue(aF)}if(SiebelApp.S_App.GetTimer()){$.callback(this,function(){SiebelApp.S_App.GetTimer().EndTime("Applet.GoBackToRecord")})}})}}};ab.prototype.CanPostChangesToBC=function(aA){if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().StartTime("Applet.CanPostChangesToBC")}var n;var aB=CCFMiscUtil_CreatePropSet();aB.SetProperty("inputParam1",aA);var az={};az[b]=this.GetName();az[aw]=af;az[q]="CanPostChangesToBC";az[v]=this;az[u]=aq;x.InvokeRegisteredSvc(az,aB);$.callback(this,function(aD){var aC=aD.retVal;if((aC.Outputargs)&&(aC.Outputargs).GetProperty("Invoked")&&(aC.Outputargs).GetProperty("Invoked").toString()==="true"){$.setReturnValue({err:aD.err,retVal:aC.Outputargs});return}if(aC.Outputargs&&aB){(aC.Outputargs).SetType(aq);aB.AddChild(aC.Outputargs)}if(aA===null||aA===undefined){return false}if(aA==="EditField"||aA==="EditMail"||aA==="ExecuteQuery"||aA==="ExecuteNewQuery"||aA==="PostChanges"||aA==="WriteRecord"||aA==="SaveEditRecord"||aA==="PositionOnRow"||aA==="UndoQuery"||aA==="ShowPopup"||aA==="ViewField"||aA==="GetSMCUpdate"||aA==="ExecuteFrameQuery"){n=false}else{n=true}az[u]=av;aB.SetProperty("RetVal",n);x.InvokeRegisteredSvc(az,aB);$.callback(this,function(aF){var aE=aF.err;var aG=aF.retVal;if(aG.Outputargs){n=aG.Outputargs}if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("Applet.CanPostChangesToBC")}$.setReturnValue({err:aE,retVal:n})})})};ab.prototype.CanInvokeMethodX=function(n){if(!n){$.setReturnValue({err:true,retVal:false});return}if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().StartTime("Applet.CanInvokeMethodX")}var aB,az={},aA;az[b]=this.GetName();az[aw]=af;az[q]="DoCanInvokeMethod";az[v]=this;var aC=CCFMiscUtil_CreatePropSet();aC.SetPropertyStr("MethodName",n);az[u]=aq;x.InvokeRegisteredSvc(az,aC);$.callback(this,function(aI){aB=aI.retVal;aA=aI.err;if(aB.Outputargs&&(aB.Outputargs).GetProperty("Invoked")&&(aB.Outputargs).GetProperty("Invoked").toString()==="true"){var aF=(aB.Outputargs).GetProperty("RetVal").toString();$.setReturnValue({err:aA,retVal:aF});if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("Applet.CanInvokeMethodX")}return}if(aB.Outputargs&&aC){(aB.Outputargs).SetType(aq);aC.AddChild(aB.Outputargs)}var aE=this.GetUserProperty("CanInvokeMethod: "+n);aE=(X.IsEmpty(aE))?this.GetUserProperty("CanInvokeMethod:"+n):aE;if(!X.IsEmpty(aE)){if(aE==="TRUE"){$.setReturnValue({err:false,retVal:true});return}else{if(aE==="FALSE"){$.setReturnValue({err:false,retVal:false});return}else{var aD=SiebelApp.Query.Parse(aE);var aH=SiebelApp.Query.Evaluate(aD,this.GetBusComp());$.setReturnValue({err:false,retVal:aH});return}}}var aG=false;switch(n){case P.get("NEWRECORD"):case P.get("COPYRECORD"):$.setReturnValue({err:false,retVal:this.CanNewAndBOL(true,false)});return;case P.get("CREATERECORD"):$.setReturnValue({err:false,retVal:false});return;case P.get("WRITERECORD"):case"ExplicitWriteRecord":this.CanWriteRecord();aG=true;break;case P.get("SHOW_POPUP"):$.setReturnValue({err:false,retVal:true});if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("Applet.CanInvokeMethodX")}return;case P.get("UNDORECORD"):$.setReturnValue({err:false,retVal:true});if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("Applet.CanInvokeMethodX")}return;case P.get("EXECUTEFRMQUERY"):case P.get("EXECUTE_QUERY"):aI=this.CanExecuteQuery();$.setReturnValue(aI);if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("Applet.CanInvokeMethodX")}return;case P.get("EDITRECORD"):if(!this.GetInPlaceEdit()){this.CanUpdateX();aG=true}else{$.setReturnValue({err:false,retVal:false});if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("Applet.CanInvokeMethodX")}return}break;case P.get("EXECUTESORT"):this.CanSort();break;case P.get("DELETERECORD"):this.CanDeleteRecord();aG=true;break;case P.get("DELETERECORDS"):this.CanDeleteRecords();aG=true;break;case P.get("DRILLDOWN"):case"DrillDown":$.setReturnValue({err:false,retVal:true});if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("Applet.CanInvokeMethodX")}return;case P.get("EDIT_FIELD"):$.setReturnValue({err:false,retVal:true});if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("Applet.CanInvokeMethodX")}return;case P.get("GO_TO_NEXT_SET"):aI=this.CanGotoNextSet();$.setReturnValue(aI);if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("Applet.CanInvokeMethodX")}return;case P.get("GO_TO_PRV_SET"):aI=this.CanGotoPreviousSet();$.setReturnValue(aI);if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("Applet.CanInvokeMethodX")}return;case P.get("SCROLL_NEXT_DATA"):aI=this.CanScrollNext();$.setReturnValue(aI);return;case P.get("SCROLL_PREV_DATA"):aI=this.CanScrollPrevious();$.setReturnValue(aI);return;case P.get("GOTOVIEW"):$.setReturnValue({err:false,retVal:true});if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("Applet.CanInvokeMethodX")}return;case P.get("PICKRECORD"):this.CanPickRecord();aG=true;break;case P.get("POSITION_ON_ROW"):var aK=this.GetBusComp();if(!aK){$.setReturnValue({err:false,retVal:false});return}if(!aK.CheckActiveRow()){$.setReturnValue({err:false,retVal:false})}else{$.setReturnValue({err:false,retVal:true})}if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("Applet.CanInvokeMethodX")}return;case P.get("SWE_POST_CHANGES"):$.setReturnValue({err:false,retVal:true});if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("Applet.CanInvokeMethodX")}return;case"ResetRecord":$.setReturnValue({err:false,retVal:true});return;case"GetQuickPickInfo":$.setReturnValue({err:false,retVal:true});if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("Applet.CanInvokeMethodX")}return;case"Refresh":$.setReturnValue({err:false,retVal:true});return;case P.get("GO_TO_FST_SET"):aI=this.CanGotoFirstSet();$.setReturnValue(aI);if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("Applet.CanInvokeMethodX")}return;case P.get("GO_TO_LAST_SET"):aI=this.CanGotoLastSet();
$.setReturnValue(aI);if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("Applet.CanInvokeMethodX")}return;case P.get("GO_TO_NEXT_REC"):this.CanGotoNextRecord();if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("Applet.CanInvokeMethodX")}break;case P.get("GO_TO_PREVIOUS_REC"):aI=this.CanGotoPreviousRecord();$.setReturnValue(aI);if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("Applet.CanInvokeMethodX")}return;case P.get("ADDRECORD"):aI=this.CanAddRecord();$.setReturnValue(aI);break;case P.get("SWE_CLOSE_APPLET"):aI=({err:false,retVal:true});$.setReturnValue(aI);break;case P.get("GO_TO_NEXT"):aI=this.CanGotoNextRecord();$.setReturnValue(aI);break;case P.get("GO_TO_PREV"):aI=this.CanGotoPreviousRecord();$.setReturnValue(aI);break;case P.get("SELECT_ALL"):var aJ=this.CanSelectAll();$.setReturnValue(({err:false,retVal:aJ}));break;default:if(this.GetBusComp()){this.GetBusComp().CanInvokeMethodX(n);aG=true}}if(aG){$.callback(this,function(aL){$.setReturnValue(aL);if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("Applet.CanInvokeMethodX")}})}})};ab.prototype.CanSelectAll=function(){var aA=false,az=this.GetBusComp(),n=-1;if(az&&az.IsNewRecordPending()){aA=false}else{if(az&&!az.IsInQueryState()){n=az.GetActiveRow()}if(n!==-1){aA=true}}return aA};ab.prototype.CanNewAndBOL=function(az,n){if(this.GetParentApplet()){return false}var aA=this.GetBusComp();if(aA===null||aA===undefined){at.CcfLogEvent([E,37,4,13,"InserRecord","buscomp is undefined"]);return false}if(this.m_bNoInsert||this.IsMultiRecSelected()||aA.IsInQueryState()){return false}else{if(az){if(aA.HasAssocList()&&n){return !this.m_cszAssocFrameName}else{return(aA.CanInsert())}}else{return(aA.GetSelection()>=0&&aA.CanInsert())}}};ab.prototype.IsMultiRecSelected=function(){return this.GetBusComp().GetMultiSelectMode()};ab.prototype.CanGotoNextSet=function(){var aD=this.GetBusComp();if(aD){var aA=aD.GetRecordCount();var aG=aD.GetCursor();var aF=aD.GetWS().length;if(aG[0]<(aA-1)){return({err:false,retVal:true})}var aE=aD.GetNotifyInfoArray();var n=aE[0];var aB=n.GetBegRow(this.GetName());var az=n.GetSize(this.GetName());var aC=aB+(2*az)-aF;if(aC<=0){return({err:false,retVal:true})}else{return({err:false,retVal:false})}}return({err:false,retVal:true})};ab.prototype.CanGotoPreviousSet=function(){var aC=this.GetBusComp();if(aC){var aD=aC.GetCursor();var aA=aC.GetWS().length;var aF=aC.GetNotifyInfoArray();var az=aF[0];var aB=az.GetBegRow(this.GetName());var n=az.GetSize(this.GetName());var aE=aB-n;if(aE>=0){return({err:false,retVal:true})}else{if((aD[0]-aA)>=0){return({err:false,retVal:true})}else{return({err:false,retVal:false})}}}return({err:false,retVal:true})};ab.prototype.CanGotoFirstSet=function(){return({err:false,retVal:true})};ab.prototype.CanGotoLastSet=function(){return({err:false,retVal:true})};ab.prototype.CanScrollNext=function(){var n=this.GetBusComp();if(n){var aB=0;var aA;var az=n.GetNumRowsX();aA=az.retVal;if(!az.err){az=this.GetWSEndRowNumX();aB=az.retVal;if(!az.err){aB=az.retVal;if(aB===-1||aB===0){return({err:false,retVal:false})}else{return({err:false,retVal:true})}}else{return({err:false,retVal:true})}}else{az=this.GetWSEndRowNumX();if(!az.err){aB=az.retVal;if(aB<aA){return({err:false,retVal:true})}}}return({err:false,retVal:false})}return({err:false,retVal:true})};ab.prototype.CanScrollPrevious=function(){var az=this.GetBusComp();if(az){if(az.IsInQueryState()){return({err:false,retVal:false})}var aC;var aA=this.GetWSStartRowNumX();aC=aA.retVal;if(!aA.err&&aC!==1){aA=this.GetWSNumRows();var aB=aA.retVal;var n=az.GetWS().length;if(aB<=n){return({err:false,retVal:true})}}return({err:false,retVal:false})}return({err:false,retVal:false})};ab.prototype.CanGotoNextRecord=function(){var az=this.GetBusComp();if(az===null||az===undefined){return({err:true,retVal:false})}if(az.IsInQueryState()){return({err:false,retVal:false})}var n=az.GetRecordCount();var aA=az.GetCursor();if(n===0||n===1){return({err:false,retVal:false})}if(az.GetActiveRow()<az.GetWS().length-1){return({err:false,retVal:true})}if(aA[0]>=n-1){return({err:false,retVal:false})}return({err:false,retVal:true})};ab.prototype.CanGotoPreviousRecord=function(){var az=this.GetBusComp();if(az===null||az===undefined){return({err:true,retVal:false})}if(az.IsInQueryState()){return({err:false,retVal:false})}var n=az.GetRecordCount();if(n===0||n===1){return({err:false,retVal:false})}if(az.GetActiveRow()>0){return({err:false,retVal:true})}var aA=az.GetCursor();if((aA[0]+1-az.GetWS().length)<=0){return({err:false,retVal:false})}return({err:false,retVal:true})};ab.prototype.CanDeleteRecord=function(){var az=this.GetBusComp();var n={};n.err=false;n.retVal=false;if(this.GetNoDelete()||this.IsMultiRecSelected()){$.setReturnValue(n)}else{if(!az){n.err=true;$.setReturnValue(n)}else{if(az.IsInQueryState()){n.retVal=false;$.setReturnValue(n)}else{az.CanDelete();$.callback(this,function(aA){$.setReturnValue(aA)})}}}};ab.prototype.CanDeleteRecords=function(){$.setReturnValue({err:false,retVal:true})};ab.prototype.CanExecuteQuery=function(){var az=this.GetBusComp();var n={};n.err=false;n.retVal=false;if(az===null||az===undefined){n.err=true;$.setReturnValue(n);return}$.setReturnValue({err:false,retVal:!this.m_bNoExecuteQuery});return({err:false,retVal:!this.m_bNoExecuteQuery})};ab.prototype.CanWriteRecord=function(){var n=this.GetBusComp();if(n===null||n===undefined){at.CcfLogEvent([E,37,4,13,"WriteRecord","buscomp is undefined"]);return}if(!n.CheckActiveRow()){$.setReturnValue({err:false,retVal:false});return}if(n.IsInQueryState()){at.CcfLogEvent([E,37,4,13,"WriteRecord","buscomp is in Query Mode",n.GetName()]);return}if(!n.IsCommitPending()){if(!this.m_bNoUpdate){n.CanUpdateX(true);$.callback(this,function(az){if(!az.retVal){$.setReturnValue({err:false,retVal:false})}else{$.setReturnValue({err:false,retVal:true})}})}else{$.setReturnValue({err:false,retVal:false});return}}else{$.setReturnValue({err:false,retVal:true})}};ab.prototype.CanUpdateX=function(n){if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().StartTime("Applet.CanUpdateX")}var aA,az={};az[b]=this.GetName();az[aw]=af;az[q]="CanUpdate";az[v]=this;var aB=CCFMiscUtil_CreatePropSet();aB.SetPropertyStr("Field",n);az[u]=aq;x.InvokeRegisteredSvc(az,aB);$.callback(this,function(aF){aA=aF.retVal;var aE=aF.err;if(aA.Outputargs&&(aA.Outputargs).GetProperty("Invoked")&&(aA.Outputargs).GetProperty("Invoked").toString()==="true"){var aK=(aA.Outputargs).GetProperty("RetVal").toString();$.setReturnValue({err:aE,retVal:aK});if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("Applet.CanUpdateX")}return}if(aA.Outputargs&&aB){(aA.Outputargs).SetType(aq);aB.AddChild(aA.Outputargs)}var aH=this.GetBusComp();if(n!==undefined){var aD=this.GetControlDef(n);if(aD){if(X.IsEmpty(aD.field)){$.setReturnValue({err:false,retVal:aD.IsEditable});return}if(aH&&aH.IsInQueryState()){$.setReturnValue({err:false,retVal:true});return}if(!aD.IsEditable){$.setReturnValue({err:false,retVal:false});
return}}else{var aJ=this.GetControls();if(aJ.hasOwnProperty(n)){var aG=aJ[n];if(X.IsEmpty(aG.GetFieldName())){var aC=aG.IsEditEnabled();if(!aC){$.setReturnValue({err:false,retVal:true});return}}}}if(this.GetNoUpdate()&&aH&&!aH.IsNewRecordPending()){$.setReturnValue({err:false,retVal:false});return}if(aH){aH.CanUpdateX(false,n);$.callback(this,function(aL){$.setReturnValue(aL)})}else{$.setReturnValue({err:false,retVal:false})}}else{var aI;if(this.m_bNoUpdate){$.setReturnValue({err:false,retVal:false});return}if(aH===null||aH===undefined){$.setReturnValue({err:false,retVal:false});return}aI=aH.GetActiveRow();if(aI>=0){aH.CanUpdateX(true);$.callback(this,function(aL){if(aL.retVal){$.setReturnValue({err:false,retVal:true})}else{$.setReturnValue({err:false,retVal:false})}})}else{$.setReturnValue({err:false,retVal:false})}}})};ab.prototype.CanSort=function(){return(false)};ab.prototype.CanAddRecord=function(){var az=this.GetBusComp();var n=(az&&(!(az.IsInQueryState()))&&(az.CheckActiveRow()));return({err:false,retVal:n})};ab.prototype.CanPickRecord=function(){var az=this.GetBusComp();var aA=this.GetParentApplet();var n=false;if(az&&!az.IsInQueryState()&&!az.GetMultiSelectMode()&&az.CheckActiveRow()&&aA&&this.GetPickAppletSrcInfo){var aB=this.GetPickAppletSrcInfo().SrcAppletFld;if(aB){aA.CanUpdateX(aB);$.callback(this,function(aC){n=aC.retVal;$.setReturnValue({err:false,retVal:n})})}else{$.setReturnValue({err:false,retVal:n})}}else{$.setReturnValue({err:false,retVal:n})}};ab.prototype.InvokeMethodX=function(n,aD){if(W.GetTimer()){W.GetTimer().StartTime("Applet.prototype.InvokeMethodX ")}var aC;var az={};var aB;var aA=[];if(!n){aA.push(n);SiebelApp.S_App.OfflineErrorObject.SetErrorMsg("AppletErrNoSuchMethod",aA,"","","",4,11);$.setReturnValue({err:"AppletErrNoSuchMethod",retVal:""});return}az[b]=this.GetName();az[aw]=af;az[q]="DoInvokeMethod";az[v]=this;aD.SetProperty("MethodName",n);az[u]=aq;x.InvokeRegisteredSvc(az,aD);$.callback(this,function(aE){aC=aE.retVal;aB=aE.err;if(aB){$.setReturnValue({err:aB,retVal:aC.Outputargs});return}if((aC.Outputargs)&&(aC.Outputargs).GetProperty("Invoked")&&(aC.Outputargs).GetProperty("Invoked").toString()==="true"){at.CcfLogEvent([E,48,4,11,az[b],n,az.ExtType]);$.setReturnValue({err:aB,retVal:aC.Outputargs});if(!z.GetPostedAction()||!z.GetPostedAction().Action){z.PostActions(P.get("ACTION_RPC_COMPLETED"))}if(W.GetTimer()){W.GetTimer().EndTime("Applet.prototype.InvokeMethodX ")}return}if(aC.Outputargs&&aD){(aC.Outputargs).SetType(aq);aD.AddChild(aC.Outputargs)}am.call(this,n,aD);$.callback(this,function(aH){var aF=aH.retVal;var aG=aH.err;if(aG){$.setReturnValue({err:aG,retVal:aF});return}if(aF){if(this.GetBusComp()){this.GetBusComp().InvokeMethodX(n,aD)}$.callback(this,function(aI){aC=aI.retVal;if(aC){$.setReturnValue({err:aG,retVal:aC.Outputargs})}if(!z.GetPostedAction()||!z.GetPostedAction().Action){z.PostActions(P.get("ACTION_RPC_COMPLETED"))}return})}az[u]=av;aD.SetProperty("RetVal",aF);x.InvokeRegisteredSvc(az,aD);$.callback(this,function(aJ){var aI=aJ.retVal.Outputargs;aG=aJ.err;$.setReturnValue({err:aG,retVal:aI});if(W.GetTimer()){W.GetTimer().EndTime("Applet.prototype.InvokeMethodX ")}return})})})};function am(aF,aC){if(!aF){$.setReturnValue({err:true,retVal:false})}var aD={};aD.request=aC.GetProperty("Request").toString();if(aF==="NewRecord"){this.NewRecord(aD);$.callback(this,function(aJ){if(aJ.err){$.setReturnValue(aJ)}else{$.setReturnValue({err:false,retVal:false})}});return}if(aF==="EditRecord"){this.EditRecord(aD);$.callback(this,function(aJ){if(aJ.err){$.setReturnValue(aJ)}else{$.setReturnValue({err:false,retVal:false})}});return}if(aF==="WriteRecord"){T.call(this,aD);$.callback(this,function(aJ){if(aJ.err){$.setReturnValue(aJ)}else{$.setReturnValue({err:false,retVal:false})}});return}if(aF==="GetQuickPickInfo"){var aI;var n;var az=this;var aB;var aA=this.GetActiveControl();if(aA===null&&d.GetActiveRequestObj()&&d.GetActiveRequestObj().activeControl){aA=d.GetActiveRequestObj().activeControl;this.SetActiveControl(aA)}if(az instanceof SiebelApp.S_App.ListApplet){aI=aA.GetInputName();var aG=this.GetControlById(aI);var aH;if(this.GetParentApplet()!==null){aH=this.GetControlByName(P.get("STR_POPUP_QUERY_COMBO_BOX"))}else{aH=this.GetControlByName(P.get("STR_QUERY_COMBO_BOX"))}if(aG===aH){N.call(this,aI)}else{aI=aA.GetFieldName();n=aA.GetApplet().GetBusComp();aB=n.GetFieldMap()[aI].GetDefn().PickListName;r.call(this,aB,aI)}$.callback(this,function(aJ){if(aJ.err){$.setReturnValue(aJ)}else{$.setReturnValue({err:false,retVal:false})}})}else{aI=aA.GetFieldName();n=aA.GetApplet().GetBusComp();aB=n.GetFieldMap()[aI].GetDefn().PickListName;r.call(this,aB,aI);$.callback(this,function(aJ){if(aJ.err){$.setReturnValue(aJ)}else{$.setReturnValue({err:false,retVal:false})}})}return}if(aF==="EditField"){ai.call(this,aD);$.callback(this,function(aJ){if(aJ.err){$.setReturnValue(aJ)}else{$.setReturnValue({err:false,retVal:false})}});return}if(aF==="ShowPopup"){this.MakePopup("ShowPopup",aD);$.setReturnValue({err:false,retVal:false});return}if(aF==="AddRecord"){s.call(this,aD);$.callback(this,function(aJ){if(aJ.err){$.setReturnValue(aJ)}else{$.setReturnValue({err:false,retVal:false})}});return}if(aF==="UndoRecord"){c.call(this,aD);$.callback(this,function(aJ){if(aJ.err){$.setReturnValue(aJ)}else{$.setReturnValue({err:false,retVal:false})}});return}if(aF==="PickRecord"){S.call(this,aD);$.callback(this,function(aJ){if(aJ.err){$.setReturnValue(aJ)}else{$.setReturnValue({err:false,retVal:false})}});return}if(aF==="PositionOnRow"){f.call(this,aD);$.callback(this,function(aJ){if(aJ.err){$.setReturnValue(aJ)}else{$.setReturnValue({err:false,retVal:false})}});return}if(aF==="DeleteRecord"){o.call(this,aD);$.callback(this,function(aJ){if(aJ.err){$.setReturnValue(aJ)}else{$.setReturnValue({err:false,retVal:false})}});return}if(aF==="PostChanges"){ae.call(this,aD);$.callback(this,function(aJ){if(aJ.err){$.setReturnValue(aJ)}else{$.setReturnValue({err:false,retVal:false})}});return}if(aF==="ScrollNextData"){R.call(this,aD);$.callback(this,function(aJ){if(aJ.err){$.setReturnValue(aJ)}else{$.setReturnValue({err:false,retVal:false})}});return}if(aF==="ScrollPrevData"){ag.call(this,aD);$.callback(this,function(aJ){if(aJ.err){$.setReturnValue(aJ)}else{$.setReturnValue({err:false,retVal:false})}});return}if(aF==="GotoNextSet"){B.call(this,aD);$.callback(this,function(aJ){if(aJ.err){$.setReturnValue(aJ)}else{$.setReturnValue({err:false,retVal:false})}});return}if(aF==="GotoPreviousSet"){m.call(this,aD);$.callback(this,function(aJ){if(aJ.err){$.setReturnValue(aJ)}else{$.setReturnValue({err:false,retVal:false})}});return}if(aF==="ExecuteFrameQuery"){al.call(this,aD);$.callback(this,function(aJ){if(aJ.err){$.setReturnValue(aJ)}else{$.setReturnValue({err:false,retVal:false})}});return}if(aF==="CloseApplet"){this.ClosePopupApplet();$.callback(this,function(aJ){if(aJ.err){$.setReturnValue(aJ)}else{$.setReturnValue({err:false,retVal:false})}});return}if(aF==="Find"){C.call(this,aD);
$.callback(this,function(aJ){if(aJ.err){$.setReturnValue(aJ)}else{$.setReturnValue({err:false,retVal:false})}});return}if(aF==="GotoNext"){ak.call(this,aD);$.callback(this,function(aJ){if(aJ.err){$.setReturnValue(aJ)}else{$.setReturnValue({err:false,retVal:false})}});return}if(aF==="GotoPrevious"){ap.call(this,aD);$.callback(this,function(aJ){if(aJ.err){$.setReturnValue(aJ)}else{$.setReturnValue({err:false,retVal:false})}});return}if(aF===P.get("SELECT_ALL")){var aE=this.GetBusComp();if(aE){aE.SelectAll()}$.callback(this,function(aJ){z.PostActions(P.get("ACTION_RPC_COMPLETED"));$.setReturnValue(aJ)});return}if(aF===L||aF==="DrillDown"){ac.call(this,aD);$.callback(this,function(){$.setReturnValue({err:false,retVal:false})});return}$.setReturnValue({err:false,retVal:true})}ab.prototype.NewRecord=function(aC){if(W.GetTimer()){W.GetTimer().StartTime("Applet.prototype.NewRecord ")}var n=this.GetDefn();var aB=n.AsocAplt;var aA=X.DecodeFromQueryString(aC.request);var az=aA.GetProperty(D.get("SWE_SHOW_POPUP_STR")).toString();if(!X.IsEmpty(aB)&&(az==="true")){aC.appletName=aB;this.MakePopup("NewRecord",aC)}else{this.GetBusComp().SetExtObjProp("isNewRecord",true);G.call(this,aC)}if(W.GetTimer()){$.callback(this,function(){W.GetTimer().EndTime("Applet.prototype.NewRecord ")})}};function c(){if(W.GetTimer()){W.GetTimer().StartTime("Applet.OnActionCancelRecord ")}var n=this.GetBusComp();if(n&&n.IsCommitPending()){n.UndoRecord()}$.callback(this,function(){var aA=P.get("VIEW_INFO");var az=P.get("GOTOVIEWCOLD");this.PostLayoutAction(false,az,aA);if(W.GetTimer()){W.GetTimer().EndTime("Applet.OnActionCancelRecord ")}})}function S(){if(W.GetTimer()){W.GetTimer().StartTime("Applet.OnActionsPickRecord ")}var n;var aB;var az;var aA;n=this.GetBusComp();aB=this.GetParentApplet();aA=this.GetPickAppletSrcInfo().SrcAppletFld;if(aA){az=aB.GetBusComp();n.SetPickSrcField(aA);n.SetSrcIdFld(aA,az);n.SetMasterBC(az);n.PickCurrentRow()}$.callback(this,function(){this.ClosePopupApplet()});if(W.GetTimer()){$.callback(this,function(){W.GetTimer().EndTime("Applet.OnActionsPickRecord ")})}}function f(){z.PostActions(P.get("ACTION_RPC_CONTINUE"),"PositionOnRow")}function R(az){if(W.GetTimer()){W.GetTimer().StartTime("Applet.OnActionsScrollNextData ")}var n=SiebelApp.S_App.Model.GetScrollScaleFactor();n=n?Math.ceil(this.GetRowListRowCount()/n):P.get("SCROLL_SCALE_CONSTANT");this.ImplicitCommit();$.callback(this,function(aA){if(!aA.err){aa.call(this,n);$.callback(this,function(aB){if(!aB.err){if(this.GetBusComp()){this.GetBusComp().WSHomeX(this.GetName())}this.PostLayoutAction(true,az.methodName);if(W.GetTimer()){W.GetTimer().EndTime("Applet.OnActionsScrollNextData ")}}else{$.setReturnValue(aB)}})}else{$.setReturnValue(aA)}})}function ag(az){if(W.GetTimer()){W.GetTimer().StartTime("Applet.OnActionsScrollPrevData ")}var n=SiebelApp.S_App.Model.GetScrollScaleFactor();n=n?Math.ceil(this.GetRowListRowCount()/n):P.get("SCROLL_SCALE_CONSTANT");n=-n;this.ImplicitCommit();$.callback(this,function(aA){if(!aA.err){aa.call(this,n);$.callback(this,function(aB){if(!aB.err){if(this.GetBusComp()){this.GetBusComp().WSHomeX(this.GetName())}this.PostLayoutAction(true,az.methodName);if(W.GetTimer()){W.GetTimer().EndTime("Applet.OnActionsScrollPrevData ")}}else{$.setReturnValue(aB)}})}else{$.setReturnValue(aA)}})}function B(n){if(W.GetTimer()){W.GetTimer().StartTime("Applet.OnActionsNextset ")}this.ImplicitCommit();$.callback(this,function(aA){if(aA.err){$.setReturnValue(aA)}else{var az=true;k.call(this,n,az);$.callback(this,function(aB){var aC=this.GetBusComp();if(aC){aC.WSHomeX(0,this.GetName())}if(!aB.err){this.PostLayoutAction(true,n.methodName);if(W.GetTimer()){W.GetTimer().EndTime("Applet.OnActionsNextset ")}}else{$.setReturnValue(aB)}})}})}function ak(n){if(W.GetTimer()){W.GetTimer().StartTime("Applet.OnActionsNextrecord")}this.ImplicitCommit();$.callback(this,function(az){if(az.err){$.setReturnValue(az)}else{var aA=this.GetBusComp();if(this.GetBusComp()&&!this.GetBusComp().IsInQueryState()){aA.NextRecord();$.callback(this,function(aB){if(!aB.err){this.PostLayoutAction(true,n.methodName);if(W.GetTimer()){W.GetTimer().EndTime("Applet.OnActionsNextrecord")}}else{$.setReturnValue(aB)}})}}})}function ap(n){if(W.GetTimer()){W.GetTimer().StartTime("Applet.OnActionsNextrecord")}this.ImplicitCommit();$.callback(this,function(az){if(az.err){$.setReturnValue(az)}else{var aA=this.GetBusComp();if(this.GetBusComp()&&!this.GetBusComp().IsInQueryState()){aA.PriorRecord();$.callback(this,function(aB){if(!aB.err){this.PostLayoutAction(true,n.methodName);if(W.GetTimer()){W.GetTimer().EndTime("Applet.OnActionsNextrecord")}}else{$.setReturnValue(aB)}})}}})}function al(az){if(W.GetTimer()){W.GetTimer().StartTime("Applet.ExecuteQuery")}var n=this.GetBusComp();var aA=n.GetCursor();aA[0]=0;n.SetCursor(aA);n.SetSearchSpec("");if(!n.IsInQueryState()){n.BeginQuery()}j.call(this);$.callback(this,function(aB){if(!aB.err){n.Execute();$.callback(this,function(aC){if(!aC.err){$.callback(this,function(aD){if(!aD.err){n.Home();$.callback(this,function(aE){if(!aE.err){this.PostLayoutAction(true,az.methodName);if(W.GetTimer()){W.GetTimer().EndTime("Applet.ExecuteQuery")}}})}})}})}else{$.setReturnValue(aB)}})}function C(aC){if(W.GetTimer()){W.GetTimer().StartTime("Applet.OnQueryExecute")}var az=this.GetBusComp();az.SetSearchSpec("");var aG=this.GetControls();var aI;var aB;if(this.GetParentApplet()!==null){aI=aG.PopupQueryCombobox;aB=aG.PopupQuerySrchspec}else{aI=aG.QueryComboBox;aB=aG.QuerySrchSpec}if(aI&&aB){var aJ=d.GetActiveRequestObj(),aH=aB.GetInputName(),aE=aI.GetInputName(),aD=aJ.SweCommands[aH],aF=aJ.SweCommands[aE],n,aA;for(aA in aG){if(aG[aA].GetDisplayName()===aF){n=aG[aA];break}}aD=az.DoBldQueryText(n,aD);az.SetSearchSpec(aD);az.Execute();$.callback(this,function(aK){if(!aK.err){$.callback(this,function(aL){if(!aL.err){az.Home();$.callback(this,function(aM){if(!aM.err){this.PostLayoutAction(true,aC.methodName);if(W.GetTimer()){W.GetTimer().EndTime("Applet.OnQueryExecute")}}})}})}})}}function m(n){if(W.GetTimer()){W.GetTimer().StartTime("Applet.OnActionsPreviousset ")}this.ImplicitCommit();$.callback(this,function(aA){if(aA.err){$.setReturnValue(aA)}else{var az=false;k.call(this,n,az);$.callback(this,function(aB){var aC=this.GetBusComp();if(aC){aC.WSHomeX(0,this.GetName())}if(!aB.err){this.PostLayoutAction(true,n.methodName);if(W.GetTimer()){W.GetTimer().EndTime("Applet.OnActionsPreviousset ")}}else{$.setReturnValue(aB)}})}})}function k(aC,az){if(W.GetTimer()){W.GetTimer().StartTime("Applet.DoNextPriorSet ")}var aB=this.GetBusComp();var n=aB.GetActiveRow();var aA=aB.FindWorkSet(n);if(!aA){$.setReturnValue({err:true,retVal:""});return}if(az){aB.NextSet(aC,this.GetName())}else{aB.PriorSet(aC,this.GetName())}$.callback(this,function(aD){if(W.GetTimer()){W.GetTimer().EndTime("Applet.DoNextPriorSet ")}$.setReturnValue(aD)})}function aa(aA){if(W.GetTimer()){W.GetTimer().StartTime("Applet.DoScrollData ")}var az=this.GetBusComp();if(az){var n=az.GetRowNum();
if(n.err==="SSAOMErrActiveRow"){$.setReturnValue({err:false});return}if(!n.err){az.ScrollWorkSetByNum(0,aA,this.GetName());$.callback(this,function(aB){$.setReturnValue(aB);if(W.GetTimer()){W.GetTimer().EndTime("Applet.DoScrollData ")}})}else{$.setReturnValue(n)}}else{$.setReturnValue({err:false})}}function ai(az){at.CcfLogEvent([E,44,4,16,"Name",this.GetDefn().Name]);var n=false;var aA=this.GetActiveControl().GetName();if(!this.CanUpdate(aA)){at.CcfLogEvent([E,47,4,24,aA]);n=true}this.ShowFieldDetail(n,az)}function G(){this.ImplicitCommit();$.callback(this,function(n){if(n.err){$.setReturnValue(n)}else{this.SetSavedModeState(D.get("SWE_PST_APPLET_MODE_NEW"));SiebelApp.RequestProcessor.SetLayoutState(P.get("NEW_VIEW_INFO"),this.GetName());this.PostLayoutAction(false,"NewRecord",P.get("NEW_VIEW_INFO"))}})}function a(){this.ImplicitCommit();$.callback(this,function(n){if(n.err){$.setReturnValue(n)}else{this.SetSavedModeState(D.get("SWE_PST_APPLET_MODE_EDIT"));SiebelApp.RequestProcessor.SetLayoutState(P.get("EDIT_VIEW_INFO"),this.GetName());this.PostLayoutAction(false,"EditRecord",P.get("EDIT_VIEW_INFO"))}})}ab.prototype.ShowFieldDetail=function(n,az){at.CcfLogEvent([E,44,4,17,"Name",this.GetDefn().Name]);this.MakePopup("EditField",az,n);$.callback(this,function(){ad.call(this);$.callback(this,function(){})})};function ad(){at.CcfLogEvent([E,44,4,17,"Name",this.GetDefn().Name]);if(W.GetTimer()){W.GetTimer().StartTime("Applet.PostChangesForPopup ")}j.call(this,false);$.callback(this,function(){if(W.GetTimer()){W.GetTimer().EndTime("Applet.PostChangesForPopup ")}})}ab.prototype.EditRecord=function(aA){this.GetBusComp().SetExtObjProp("IsEditRecord",true);var az=this.GetBusComp().GetActiveRow();var n=this.GetBusComp().FindWorkSet(az);this.GetBusComp().SetOrigRecVal(n);a.call(this,aA)};ab.prototype.MakePopup=function(n,aD){at.CcfLogEvent([E,44,4,18,"methodName",n]);var aB;switch(n){case"ShowPopup":aB="puinf";var aA=X.DecodeFromQueryString(aD.request);var aC=aA.GetProperty("SWETA").toString();z.SetContext("Applet",aB,aC);break;case P.get("NEWRECORD"):aB=P.get("NEW_VIEW_INFO");z.SetContext("Applet",aB);break;case P.get("EDIT_FIELD"):var az=this.GetBusComp();if(az.IsDeletePending()){az.WriteRecord()}$.callback(this,function(){this.CreatePopup(n,aD)});break}};ab.prototype.CreatePopup=function(n){at.CcfLogEvent([E,44,4,19,"methodName",n]);if(W.GetTimer()){W.GetTimer().StartTime("Applet.CreatePopup ")}var aA;var az=this.GetActiveControl();var aB=az.GetUIType();if(aB==="Pick"){SiebelApp.BrowserCacheMgr.GetPickAppletInfo(this.GetView().GetName(),this.GetName(),az.GetName());$.callback(this,function(aF){var aD=aF.retVal;aA=P.get("PICK_APLT_INFO");var aE=aD.PickApplet+"__"+this.GetName()+"__"+this.GetView().GetName();SiebelApp.RequestProcessor.SetPrevReqObj({reqType:n,searchVal:aE});z.SetContext("Applet",aA,aE);var aC={};aC.SrcApplet=this.GetName();aC.SrcAppletFld=az.GetFieldName();z.SetPickAppletContext(aC);if(W.GetTimer()){W.GetTimer().EndTime("Applet.CreatePopup ")}})}else{if(!z.GetPostedAction()||!z.GetPostedAction().Action){z.PostActions(P.get("ACTION_RPC_COMPLETED"))}at.CcfLogEvent([E,92,4,19,aB]);return}};ab.prototype.GetWSEndRowNumX=function(){var aB=0;var n={};n.err=false;n.retVal=aB;var az=this.GetWSNumRows();if(!az.err){var aA=az.retVal;if(aA<=0){return n}aB=this.GetWSStartRowNumX(aB).retVal;aB+=(aA-1);n.retVal=aB;return n}else{n.err=true;return n}};ab.prototype.GetWSNumRows=function(){var aB;var aD=0;var aA={};aA.err=false;aA.retVal=aD;if(!this.GetBusComp()){return aA}var aC=this.GetBusComp();var az=this.GetName();var n=aC.WSGetCurrRow(0,az);if(!n.err){aB=n.retVal;aC.WSHomeX(0,az)}else{aA.err=true;return aA}for(aD=1;;aD++){if((aC.WSNextRecordX(0,az)).err){break}}if(aD>aB){aC.WSSetCurrRow(0,aB,az)}else{aC.WSHomeX(0,az)}aA.retVal=aD;return aA};ab.prototype.GetWSStartRowNumX=function(){var aD=0;var az={};az.err=false;az.retVal=aD;if(!this.GetBusComp()){return az}var aC=this.GetBusComp();var aB=aC.GetRowNum();var aA=aB.err;if(aA){if(aA==="SSAOMErrActiveRow"){aD=0;az.retVal=aD;return az}else{az.err=true;return az}}aD=aB.retVal;var n=aC.GetActiveRow();aD=aD-n;az.retVal=aD;return az};ab.prototype.WSNextRecordX=function(){var aC=false;var aA=this.GetBusComp();var aD=this.GetNotIdComp();aD=0;var az=aA.WSNextRecordX(aD,this.GetName());var aB=az.err;if(!aB){aC=true;az.err="";az.retVal=aC;return az}if(aB==="SSAOMErrEOWS"){az.err="";az.retVal=aC;return az}var n=[aA];az.err=aB;az.retVal=n;return az};function s(){if(W.GetTimer()){W.GetTimer().StartTime("Applet.OnActionAddRecord ")}this.ImplicitCommit();$.callback(this,function(az){if(az.err){$.setReturnValue(az)}else{var aA=this.GetBusComp();var n=aA.IsNotifyEnabled();if(n){aA.DisableNotifySys()}aA.AssocSelection();$.callback(this,function(aB){if(!aB.err){if(n){aA.EnableNotify()}this.ClosePopupApplet();if(W.GetTimer()){W.GetTimer().EndTime("Applet.OnActionAddRecord ")}}else{$.setReturnValue(aB)}})}})}ab.prototype.ClosePopupApplet=function(){var n;var az=this.GetParentApplet();if(az.GetBusComp()){n=[];n.push(az.GetName());az.NotifyDeletePopup(n)}z.PostActions(P.get("ACTION_RPC_CLOSE_POPUP"));this.SetRowSelectArr([])};ab.prototype.NotifyDeletePopup=function(n){this.GetBusComp().NotifyGeneric(D.get("SWE_RPC_PROP_CLOSE_POPUP"),n)};ab.prototype.SetDefaultShowMode=function(){};function T(){if(W.GetTimer()){W.GetTimer().StartTime("Applet.OnActionWriteRecord ")}var n=this.GetBusComp();if(n.IsDeletePending()){n.WriteRecord()}$.callback(this,function(){this.CanWriteRecord();$.callback(this,function(aA){var az=aA.retVal;if(!az){$.setReturnValue({err:false,retVal:false})}else{if(!n.IsCommitPending()){n.UpdateRecordX()}$.callback(this,function(){j.call(this,true);$.callback(this,function(aC){if(!aC.err){var aB=false;if(this.GetParentApplet()){aB=true}else{if((this.GetSavedModeState()!==this.GetMode())){aB=true}}this.PostLayoutAction(aB,P.get("GOTOVIEWCOLD"),P.get("VIEW_INFO"));this.SetSavedModeState();if(W.GetTimer()){W.GetTimer().EndTime("Applet.OnActionWriteRecord ")}}else{this.ResetCtrls();$.setReturnValue({err:true,retVal:false})}})})}})})}function r(aA,aC){if(W.GetTimer()){W.GetTimer().StartTime("Applet.OnActionsGetQuickPickInfo ")}var n={};var az;var aB=this.GetBusComp();n.viewName=this.GetView().GetName();n.appletName=this.GetName();n.fieldName=this.GetActiveControl().GetInputName();if(aB){az=aB.GetPickListInfo(aA,aC);this.GetComboBoxOptions(aA,aC);$.callback(this,function(aH){var aG=aH.retVal;var aE=[];n.LOV=aG;aE[0]="";aE[1]=n.viewName;aE[2]=n.appletName;aE[3]=n.fieldName;aE[4]="true";aE[5]=az.NAME;var aF=0;for(var aD=6;aD<6+aG.length;aD++){aE[aD]=aG[aF];aF++}aB.NotifyGeneric("GetQuickPickInfo",aE);z.PostActions(P.get("ACTION_RPC_COMPLETED"),"GetQuickPickInfo");if(W.GetTimer()){W.GetTimer().EndTime("Applet.OnActionsGetQuickPickInfo ")}})}}function N(aJ){if(W.GetTimer()){W.GetTimer().StartTime("Applet.GetQuickInfoForPopup ")}var aF=this.GetBusComp();var aE=this;var n;var aC=false;var aH=[];var az;var aI;var aG;var aA;if(aE instanceof SiebelApp.S_App.ListApplet){aI=this.GetListOfColumns()
}else{aI=this.GetControls()}for(az in aI){if(aI[az]){n=aI[az];aJ=n.GetFieldName();aC=aF.GetFieldDefn(aJ);aG=n.GetUIType();aA=n.GetDisplayName();if(aC){aC=aF.GetFieldDefn(aJ).DisableSearch;aC=X.IsTrue(aC)}else{continue}if(aC||aG===D.get("SWE_CTRL_CHECKBOX")||aG===D.get("SWE_CTRL_DATE_TZ_PICK")||aG===D.get("SWE_CTRL_DATE_TIME_PICK")||aG===D.get("SWE_CTRL_DATE_PICK")||!aA){continue}else{aH.push(aA)}}}var aK=[];aK[0]="";aK[1]=aE.GetView().GetName();aK[2]=aE.GetName();aK[3]=aJ;aK[4]="true";aK[5]="";var aD=0;for(var aB=6;aB<6+aH.length;aB++){aK[aB]=aH[aD];aD++}aF.NotifyGeneric("GetQuickPickInfo",aK);z.PostActions(P.get("ACTION_RPC_COMPLETED"),"GetQuickPickInfo")}ab.prototype.GetComboBoxOptions=function(n,aA){var az=this.GetBusComp();az.GetQuickPickInfo(n,aA);$.callback(this,function(aB){$.setReturnValue(aB)})};function j(aC){if(W.GetTimer()){W.GetTimer().StartTime("SiebelApp.S_App.Applet.PostChangesToBC")}var aA={};var az;var aB=CCFMiscUtil_CreatePropSet();aB.SetProperty("inputParam1",aC);var n={};n[b]=this.GetName();n[aw]=af;n[q]="PostChangesToBC";n[v]=this;n[u]=aq;x.InvokeRegisteredSvc(n,aB);$.callback(this,function(aG){aA=aG.retVal;az=aG.err;if((aA.Outputargs)&&(aA.Outputargs).GetProperty("Invoked")&&(aA.Outputargs).GetProperty("Invoked").toString()==="true"){at.CcfLogEvent([E,45,4,23,n.ObjectName,n.ObjectType,n.ObjectMethod,n.ExtType]);$.setReturnValue({err:aG.err,retVal:aA.Outputargs});return}var aI;var aJ=this.GetBusComp();var aE=null;var aL=d.GetActiveRequestObj();if(!aL){aL=d.GetActiveRequestObj()}if(!aL){aL=d.GetActiveRequestObj()}if(!aL){$.setReturnValue({err:true});return}if(aJ&&!aJ.IsInQueryState()){var aK=-1;aK=aJ.GetActiveRow();if(aK===-1){if(aC&&aJ.IsDeletePending()){aJ.WriteRecord();$.callback(this,function(aM){$.setReturnvalue(aM)});return}}}var aD=aL.SweCommands[D.get("SWE_POST_ON_CHANGE_STR")];aI=aL.SweCommands.SWEBCVals;if(aI!==undefined&&aI!==null){var aH=CCFMiscUtil_CreatePropSet();aH.DecodeFromString(aI);var aF=SiebelApp.S_App.GetActiveView().GetBCBroker(aJ);if(!aJ.IsInQueryState()){aF.InvokeMethod("SetFieldValue",aH)}}$.callback(this,function(){var aN=aL.SweCommands;var aT=[];for(var aS in aN){var aQ=this.GetControlById(aS);if(aQ){aT.push(aS)}}var aP=aT.length;var aM=0;var aR;var aO=function(){if(aT[aM]&&(aD===this.GetControlById(aT[aM]).GetFieldName())){aE=aT[aM]}else{if(aT[aM]){aR=aN[aT[aM]];J.call(this,this.GetControlById(aT[aM]),aR);$.callback(this,function(aU){if(aU.err){$.setReturnValue(aU);return}else{aM++;if(aM<aP){aO.call(this)}}})}}};aO.call(this);$.callback(this,function(aU){if(aU.err){$.setReturnValue(aU);return}if(aE!==null){aR=aN[aE];J.call(this,this.GetControlById(aE),aR)}$.callback(this,function(aV){if(aV.err){$.setReturnValue(aV);return}if(aJ&&!aJ.IsInQueryState()){if(aC&&aJ.IsCommitPending()){aJ.WriteRecord()}}$.callback(this,function(aW){if(aW.err){$.setReturnValue(aW)}else{n[u]=av;x.InvokeRegisteredSvc(n,aB);$.callback(this,function(aX){if(W.GetTimer()){W.GetTimer().EndTime("SiebelApp.S_App.Applet.prototype.PostChangesToBC")}aA=aX.retVal;if(aA&&aA.Outputargs){$.setReturnValue({err:aX.err,retVal:aA.Outputargs});return}})}})})})})})}function ae(){if(W.GetTimer()){W.GetTimer().StartTime("Applet.OnActionPostChanges ")}var aA=d.GetActiveRequestObj();var n=aA.SweCommands[D.get("SWE_POST_ON_CHANGE_STR")];var az=aA.SweCommands[D.get("SWE_POST_FORCE_STR")];var aB=this.GetBusComp();if((n||az==="Y")&&aB){if(!aB.IsCommitPending()){aB.UpdateRecordX()}$.callback(this,function(){j.call(this,false);$.callback(this,function(aC){if(aC.err){this.ResetCtrls();$.setReturnValue(aC);return}z.PostActions(P.get("ACTION_RPC_COMPLETED"),"OnActionPostChanges");if(W.GetTimer()){W.GetTimer().EndTime("Applet.OnActionPostChanges ")}})})}else{if(aB&&!aB.IsCommitPending()&&!aB.IsInQueryState()){SiebelApp.S_App.OfflineErrorObject.SetErrorMsg("IDS_SWE_NO_COMMIT_PENDING","","","","",4,71);$.setReturnValue({err:"IDS_SWE_NO_COMMIT_PENDING"});return}j.call(this,false);$.callback(this,function(aC){if(aC.err){this.ResetCtrls();$.setReturnValue(aC);return}z.PostActions(P.get("ACTION_RPC_COMPLETED"),"OnActionPostChanges");if(W.GetTimer()){W.GetTimer().EndTime("Applet.OnActionPostChanges ")}})}}function J(n,aA){var az=this.GetBusComp();if(n){this.CanUpdateX(n.GetName());$.callback(this,function(aB){if(aB.retVal){if(az&&az.IsInQueryState()){aA=az.DoBldQueryText(n,aA);if(aA===false){$.setReturnValue({err:true});return}az.SetSearchSpec(aA)}else{if(az&&!az.IsExecuted()){$.setReturnValue({err:false,retVal:true});return}var aC;an.call(this,n,aA,false);$.callback(this,function(aD){if(!aD.err){aC=aD.retVal;if(!X.IsEmpty(aC)){aA=aC}}if(az&&!X.IsEmpty(n.GetFieldName())){this.SetFieldValue(n,aA);$.callback(this,function(aE){if(aE.err){$.setReturnValue(aE);return}else{$.setReturnValue({err:false,retVal:true})}})}else{$.setReturnValue({err:false,retVal:true})}})}}})}}function an(aG,aA,aE){var aH;var aC=this.GetBusComp();var aF=null;if(aC){aF=aC.GetField(aG.GetFieldName())}if(X.IsEmpty(aF)){return $.setReturnValue({err:false,retVal:aA})}var az=aF.GetDataType();var aD=aG.GetDisplayFormat();var n=SiebelApp.S_App.LocaleObject.GetDatum(az);if(n&&!X.IsEmpty(aA)){switch(az){case"number":var aB=aF.GetScale();SiebelApp.S_App.LocaleObject.SetScale(aB);break;case"currency":h.call(this,aG,n,aE,az);break}$.callback(this,function(aI){if(!aI.err){SiebelApp.S_App.LocaleObject.FormattedToString(az,aA,aD);n.SetAsFormattedString(aA,aD);aH=SiebelApp.S_App.LocaleObject.HasErrorMsg();aA=n.GetAsString(aA);$.setReturnValue({err:false,retVal:aA})}else{$.setReturnValue({err:true,retVal:aA})}})}else{$.setReturnValue({err:false,retVal:aA})}}function ac(){var aH=d.GetActiveRequestObj();var az=aH.SweCommands.SWEField;if(X.IsEmpty(az)){return}var aC=this.GetControls();var n;var aA;var aB;var aF;var aD;aA=az.lastIndexOf("_");aB=az.substring(0,aA);for(var aG in aC){if(aC.hasOwnProperty(aG)){aF=aC[aG].GetInputName();aA=aF.lastIndexOf("_");aD=aF.substring(0,aA);if(aB===aD){n=aC[aG].GetFieldName();break}}}if(X.IsEmpty(n)){return}var aE=this.GetDrillDown(n,true);if(X.IsEmpty(aE)){return}return ax.call(this,aE)}function ax(az){var n;if(X.IsEmpty(az)){return}n=az.Dynamicdrilldown.length;if(n){return}ay.call(this,az);return true}function ay(n){var aB=n.viewname;var az=X.IsEmpty(n.srcFieldName);var aA=az?"BS_DRILLDOWN":"BS_DRILLDOWNBYFIELD";SiebelApp.OfflineAppMgr.BuildViewAsync(aB,aA,n);return true}ab.prototype.SetFieldValue=function(n,az){var aB;var aA=this.GetBusComp();if(!aA){$.setReturnValue({err:false});return}this.GetBusComp().FieldValue(n.GetFieldName());$.callback(this,function(aC){if(!aC.err){aB=aC.retVal;if(aB===az){$.setReturnValue({err:false});return}this.GetBusComp().SetFieldValueX(n.GetFieldName(),az);$.callback(this,function(aD){if(aD.err){$.setReturnValue(aD);return}if(!this.GetSavedModeState()){if(!this.commitPending){this.GetBusComp().NotifyStateChanged("cp",1)}}})}})};ab.prototype.GetControlById=function(n){var az=this.GetControls();var aB;for(var aA in az){if(az[aA].GetInputName()===n){aB=az[aA];break}}az=null;
return aB};ab.prototype.GetControlByName=function(n){var az=this.GetControls();var aB;for(var aA in az){if(az[aA].GetName()===n){aB=az[aA];break}}az=null;return aB};function h(aE,aF,aD,n){var az;var aC=this.GetNotIdComp();aF.SetAsString(null);var aA;var aB=this.GetBusComp();if(X.IsEmpty(aB)){$.setReturnValue(aA);return}var aG=aE.GetFieldName();if(X.IsEmpty(aG)){$.setReturnValue(aA);return}if(aD){az=aB.WSFieldValue(aC,aG,this.GetName())}else{aB.FieldValue(aG)}$.callback(this,function(aM){if(!aM.err){az=aM.retVal;aF.SetAsString(az);if(n==="currency"){var aK=W.LookupStringCache(aE.GetCurrField());var aI=aK.indexOf("|");var aN;var aJ;if(aI>=0){var aH=(aK.substring(aI+1).indexOf("|")===-1)?-1:(aK.substring(aI+1).indexOf("|")+aI);if(aH<0){aH=aK.length}var aL=aK.substr(0,aI);if(aL.length!==0){if(aD){aN=aB.WSFieldValue(aC,aL,this.GetName())}else{aB.FieldValue(aL)}$.callback(this,function(aO){if(!aO.err){aN=aO.retVal;if(aN){aF.SetCurrency(aN)}else{aF.SetCurrency("")}aL=aK.substr(aI+1,aH-aI);if(aL.length!==0){if(aD){aJ=aB.WSFieldValue(aC,aL,this.GetName())}else{aB.FieldValue(aL)}$.callback(this,function(aP){if(!aP.err){aJ=aP.retVal;if(X.IsEmpty(aJ)){aF.SetExchangeDate(aJ)}}else{$.setReturnValue(aP)}})}}else{$.setReturnValue(aO)}})}}}}else{$.setReturnValue(aM)}})}ab.prototype.CheckActiveRowId=function(n,az){if(n&&n.match(az)){return true}else{return false}};ab.prototype.PrepareToInvokeMethod=function(n,aA){at.CcfLogEvent([E,44,4,20,"methodName",n]);if(W.GetTimer()){W.GetTimer().StartTime("Applet.PrepareToInvokeMethod ")}this.PositionBaseAncestorFrame();var az=function(){var aB=SiebelApp.AjaxRequestMgr.GetActiveRequestObj(),aC=aB.SweCommands;if(aC.SWEReqRowId==="1"){if(n===P.get("POSITION_ON_ROW")){this.CanInvokeMethodX(n);$.callback(this,function(aF){if(!aF.err){if(aF.retVal){var aE=parseInt(aC.SWEIgnoreCtrlShift,10),aG=parseInt(aC[D.get("SWE_ROW_STR")],10),aD=parseInt(aC.SWEControlClicked,10),aH=parseInt(aC.SWEShiftClicked,10);if(!aE){this.GetBusComp().SelectRow(this.GetName(),aG,aD,aH,false)}}}})}this.GoBackToRecord(aA)}$.callback(this,function(){this.CanPostChangesToBC(n);$.callback(this,function(aD){if(aD.retVal){j.call(this,false)}$.callback(this,function(aE){if(aE.err&&n!=="UndoRecord"){$.setReturnValue(aE)}else{this.CanInvokeMethodX(n);$.callback(this,function(aF){if(!aF.err){$.setReturnValue({err:true})}if(W.GetTimer()){W.GetTimer().EndTime("Applet.PrepareToInvokeMethod ")}})}})})})};$.callback(this,az)};ab.prototype.GetDefn=function(){return SiebelApp.Metadata.GetAppletDef(this.GetName())};ab.prototype.EnumUserProps=function(){var aA=this.GetDefn();var az=null;if(aA.userPropMap){az=[];var n=aA.userPropMap;for(var aB in n){if(n[aB]){az.push(aB)}}return az}else{return null}};ab.prototype.GetUserProperty=function(n){if(this.GetDefn().userPropMap){return this.GetDefn().userPropMap[n]}else{return""}};ab.prototype.GetControlDef=function(n){if(this.GetDefn().control){var aA=this.GetDefn().control[n];if(aA){if(!aA.hasOwnProperty("IsEditable")){var az=aA.name;if(az===D.get("SWE_QUERY_COMBO_BOX")||az===D.get("SWE_QUERY_SEARCH_SPEC")){if(this.GetBusComp()&&this.GetBusComp().CanQuery()){aA.IsEditable=true}else{aA.IsEditable=false}}else{aA.IsEditable=!aA.ReadOnly}if(az===D.get("SWE_POPUP_QUERY_COMBO_BOX")||az===D.get("SWE_POPUP_QUERY_SEARCH_SPEC")){aA.IsEditable=true}this.GetDefn().control[n]=aA}return aA}}};ab.prototype.GetDrillDown=function(az,aB){var aC=X.IsEmpty(aB)?false:aB;if(!aC){if(this.GetDefn().drilldown){return this.GetDefn().drilldown[az]}else{return""}}else{var n=this.GetDefn().drilldown;for(var aA in n){if(n.hasOwnProperty(aA)){var aD=n[aA].hyperLinkField;aD=at.RemoveNonAlphaChars(aD);az=at.RemoveNonAlphaChars(az);if(aD===az){return this.GetDefn().drilldown[aA]}}}return""}};function ar(){var n=this.GetDefn().ddCtrlsArray;return X.IsEmpty(n)?[]:n}function Z(aA){var n=this.GetBusComp();if(!n){return}var aI=n.GetActiveRow();var aH;if(aI>=0){var aF;var az=false;var aE=0;n.SetPrevActiveRow(aI);var aJ=this.GetNotIdComp();aJ=0;var aB=n.WSGetCurrRow(aJ,this.GetName());if(!aB.err){var aD=aB.retVal;n.WSHomeX(aJ,this.GetName());aH=this.GetRowSelectArr();var aK=this.GetRowSelectArr().length===0?true:false;var aC=true;var aG=function(){n.IsCurWSRecSelected(aJ,this.GetName());$.callback(this,function(aM){aF=aM.retVal;if(aE<aH.length){if(aF!==aH[aE]){aH[aE]=aF;az=true}}else{aH.push(aF);az=true}aE++;var aL=this.WSNextRecordX(aJ);if(!aL.err&&aL.retVal){aG.call(this)}else{if(aI===0&&aK&&aH[0]===true){az=false}}})};if(aC){aG.call(this)}$.callback(this,function(){n.WSSetCurrRow(0,aD,this.GetName());if(window.localStorage.getItem("contextArray")){var aM=JSON.parse(window.localStorage.getItem("contextArray"));var aL=aM.length;for(var aO=0;aO<aL;aO++){var aQ=aM[aO].bc;if(n.GetName()===aQ){if(n.GetWS()[aI]){aM[aO].Id=n.GetWS()[aI].Id;aM[aO].cursor=n.GetCursor()[0]-n.GetWS().length+1+n.GetActiveRow();window.localStorage.setItem("contextArray",JSON.stringify(aM));break}}}}if(az){var aN=[];aN.push(this.GetName());for(var aP=0;aP<aH.length;aP++){aN.push(aH[aP]?"1":"0")}n.NotifyGeneric("SWEIRowSelection",aN)}this.SetRowSelectArr(aH);$.setReturnValue({err:false,retVal:true})})}}else{$.setReturnValue({err:false,retVal:true})}}ab.prototype.SetFldSearchSpec=function(aA,n){var aB=aA.GetName();var az=this.GetBusComp();if(az.ValidateFieldDef(aB)){az.SetFldSearchSpec(aB,n)}};function o(az){if(W.GetTimer()){W.GetTimer().StartTime("Applet.OnActionsDeleteItem ")}var n=this.GetBusComp();n.CanDelete();$.callback(this,function(aA){if(!n||!aA.retVal){SiebelJS.Log("OnActionsDeleteItem: Failed to Delete Item .... ");$.setReturnValue({err:aA.err,retVal:false});return}n.SetDeleteRecordPending(true);n.DeleteRecordX(az,true);$.callback(this,function(){this.PostLayoutAction(true,az.methodName);if(W.GetTimer()){W.GetTimer().EndTime("Applet.OnActionsDeleteItem ")}});$.setReturnValue({err:aA.err,retVal:true});return})}ab.prototype.PostLayoutAction=function(aB,aA,aE){if(aB){var aD=SiebelApp.S_App.GetActiveView();var az=aD.GetAppletMap();var n;for(var aC in az){if(az[aC]){n=az[aC];if(n.GetBusComp()!==this.GetBusComp()||n===this){continue}if((n.GetSavedModeState()===n.GetMode())){aB=false;n.SetSavedModeState();break}}}}if(aB){SiebelApp.OfflineAppMgr.PostActions(P.get("ACTION_RPC_COMPLETED"))}else{SiebelApp.OfflineAppMgr.PostActions(P.get("ACTION_RPC_REFRESH_VIEW"),aA,aE)}};ab.prototype.ImplicitCommit=function(){var n=this.GetBusComp();if(n){if(n.IsCommitPending()||n.IsDeletePending()){n.WriteRecord();$.callback(this,function(az){$.setReturnValue(az)})}}};SiebelApp.OfflineUtils.DefineExtentions(ab,t,V)}());if(typeof(SiebelApp.S_App.OfflineAppletInterface)==="undefined"){SiebelApp.S_App.OfflineAppletInterface=(function(){function a(c){var b=c;var e=this;var f={GetParentApplet:1};for(var d in b){if(b[d]){(function(){var g=d;var h=c;if(typeof(c[g])==="function"&&!e[g]&&!f[g]){e[g]=function(){if(h.constructor.prototype[g]){return(h.constructor.prototype[g].apply(h,arguments))}else{return(h[g].apply(h,arguments))}}}return e[g]}())}}this.GetOfflineApplet=function(){return b
};this.GetParentApplet=function(){var g=b.GetParentApplet();if(g){return g.GetInterface()}};this.EndLife=function(){b=null;e=null;f=null}}a.prototype.GetBusComp=function(){var b=SiebelApp.S_App.Model.GetIsInterFace();var d=this.GetOfflineApplet();var c=d.GetBusComp.call(d);if(b>0&&c){return c.GetInterface()}else{return(d.GetBusComp.call(d))}};a.prototype.InvokeMethod=function(b,c){return this.GetOfflineApplet().InvokeMethodX(b,c)};a.prototype.CanInvokeMethod=function(b){return this.GetOfflineApplet().CanInvokeMethodX(b)};a.prototype.CanUpdate=function(){return this.GetOfflineApplet().CanUpdateX()};a.prototype.CanNavigate=function(){return this.GetOfflineApplet().CanNavigateX()};a.prototype.BusComp=function(){return this.GetOfflineApplet().GetBusComp()};a.prototype.BusObj=function(){return this.GetOfflineApplet().GetBusComp().GetBusObj()};a.prototype.Name=function(){return this.GetOfflineApplet().GetName()};a.prototype.GetWSEndRowNum=function(){return this.GetOfflineApplet().GetWSEndRowNumX()};a.prototype.GetWSStartRowNum=function(){return this.GetOfflineApplet().GetWSStartRowNumX()};return a}())}if(SiebelApp.S_App.ListApplet){(function(){var c={};var b={};var a=SiebelApp.S_App.ListApplet;c.SetOnLoadRowSelection=a.prototype.SetOnLoadRowSelection;b=function(d){if(!(d.GetProperty(SiebelApp.Offlineconstants.get("IS_DYNAMIC")))){return}else{return(c.SetOnLoadRowSelection.call(this,d))}};SiebelApp.OfflineUtils.DefineExtentions(a,b,c)}())}})}if(SiebelApp.S_App.AppletControl){define("siebel/offline/appletcontrol",[],function(){(function(){var d=SiebelApp.S_App.AppletControl,g=d.prototype,c={},f={};c.ProcessObjectInfo=g.ProcessObjectInfo;c.ProcessMethodProps=g.ProcessMethodProps;var e=SiebelApp.Constants;var a=SiebelJS.Dependency("SiebelApp.Utils");function b(i,j){if(i.GetProperty(e.get("SWE_PROP_POPUP_TYPE"))===e.get("SWE_CTRL_MVG")){i.SetProperty(e.get("SWE_PROP_IS_EDIT"),"0");i.SetProperty(e.get("SWE_PROP_POPUP_TYPE"),"");var h=SiebelApp.S_App.LookupStringCache(i.GetPropertyAsStr("n"));var k=j.GetDefn().control[h];if(k){k.IsEditable=false;j.GetDefn().control[h]=k}}}f.ProcessObjectInfo=function(){var q=this,h=q.GetApplet(),m=h instanceof SiebelApp.S_App.ListApplet,p=arguments[0],j=p.GetChildByType(e.get("SWE_PST_VALUE_SET"));if(j){var o=q.GetApplet().GetBusComp();if(o){var i=SiebelApp.S_App.LookupStringCache(p.GetPropertyAsStr(e.get("SWE_PROP_FLD_NAME")));if(i&&p.GetProperty(e.get("SWE_PROP_POPUP_TYPE"))!==e.get("SWE_CTRL_MVG")){var l=o.GetFieldDefn(i),n=l.PickListName,k=SiebelApp.S_App.Model.GetPickListDef(n);if(k&&k.IsBounded&&k.IsStatic){SiebelApp.BrowserCacheMgr.GetPickListData(k,o,i);$.callback(this,function(u){var r=u.retVal,w=r.length,t,v;j.Reset();for(var s=0;s<w;s++){t=CCFMiscUtil_CreatePropSet();v=r[s];t.SetProperty("DisplayName",v);t.SetProperty("FieldValue",v);j.AddChild(t)}j.SetType(e.get("SWE_PST_VALUE_SET"))})}}}}b.call(this,p,h);c.ProcessObjectInfo.apply(q,arguments);if(m&&$.type(q.IsSortable)==="function"){q.IsSortable=function(){return false}}};f.ProcessMethodProps=function(i){if(i.GetProperty(SiebelApp.Offlineconstants.get("IS_DYNAMIC"))){var n=i.GetProperty(e.get("SWE_METHOD_STR"));if(n==="NewRecord"){var l=this.GetMethodPropSet();var m=this.GetApplet().GetBusComp();var h=this.GetApplet().GetDefn();var k=h.AsocAplt;var j=i.GetProperty(e.get("SWE_SHOW_POPUP_STR"));var o=false;if(m&&m.HasAssocList()&&!a.IsEmpty(k)){o=true}if(j!==undefined){if((o||j==="true")&&l){l.SetProperty(e.get("SWE_SHOW_POPUP_STR"),true)}}}}else{c.ProcessMethodProps.call(this,i)}};SiebelApp.OfflineUtils.DefineExtentions(d,f,c)}())})};