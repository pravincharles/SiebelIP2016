/*<ORACLECOPYRIGHT>
* Copyright (C) 1994-2014
* Oracle and Java are registered trademarks of Oracle and/or its affiliates.
* Other names may be trademarks of their respective owners.
* UNIX is a registered trademark of The Open Group.
*
* This software and related documentation are provided under a license agreement
* containing restrictions on use and disclosure and are protected by intellectual property laws.
* Except as expressly permitted in your license agreement or allowed by law, you may not use, copy,
* reproduce, translate, broadcast, modify, license, transmit, distribute, exhibit, perform, publish,
* or display any part, in any form, or by any means. Reverse engineering, disassembly,
* or decompilation of this software, unless required by law for interoperability, is prohibited.
*
* The information contained herein is subject to change without notice and is not warranted to be error-free.
* If you find any errors, please report them to us in writing.
*
* U.S. GOVERNMENT RIGHTS Programs, software, databases, and related documentation and technical data delivered to U.S.
* Government customers are "commercial computer software" or "commercial technical data" pursuant to the applicable
* Federal Acquisition Regulation and agency-specific supplemental regulations.
* As such, the use, duplication, disclosure, modification, and adaptation shall be subject to the restrictions and
* license terms set forth in the applicable Government contract, and, to the extent applicable by the terms of the
* Government contract, the additional rights set forth in FAR 52.227-19, Commercial Computer Software License
* (December 2007). Oracle America, Inc., 500 Oracle Parkway, Redwood City, CA 94065.
*
* This software or hardware is developed for general use in a variety of information management applications.
* It is not developed or intended for use in any inherently dangerous applications, including applications that
* may create a risk of personal injury. If you use this software or hardware in dangerous applications,
* then you shall be responsible to take all appropriate fail-safe, backup, redundancy,
* and other measures to ensure its safe use. Oracle Corporation and its affiliates disclaim any liability for any
* damages caused by use of this software or hardware in dangerous applications.
*
* This software or hardware and documentation may provide access to or information on content,
* products, and services from third parties. Oracle Corporation and its affiliates are not responsible for and
* expressly disclaim all warranties of any kind with respect to third-party content, products, and services.
* Oracle Corporation and its affiliates will not be responsible for any loss, costs,
* or damages incurred due to your access to or use of third-party content, products, or services.
</ORACLECOPYRIGHT>*/
/* 8.1.1.14SIA[23044]PATCHSET7 */
if(typeof(SiebelApp.Servicebarcode)==="undefined"){SiebelJS.Namespace("SiebelApp.Servicebarcode");define("siebel/offline/servicebarcode",[],function(){var b={},j=SiebelApp.Offlineconstants,h=SiebelApp.OfflineAppMgr,g=false,a=true,c={},d=[],i=[],e=[],f=SiebelApp.OfflineUtils;b[j.get("DOUIREG_OBJ_NAME")]="";b[j.get("DOUIREG_OBJ_TYPE")]=j.get("DOUIREG_OBJ_TYPEAPPLET");b[j.get("DOUIREG_OBJ_MTHD")]="DoInvokeMethod";b[j.get("DOUIREG_SRVC_NAME")]="Servicebarcode";b[j.get("DOUIREG_SRVC_MTDH")]="DoInvokeMethod";b[j.get("DOUIREG_EXT_TYPE")]=j.get("DOUIREG_EXT_TYPEPRE");SiebelApp.S_App.Model.ServiceRegistry(b);b={};b[j.get("DOUIREG_OBJ_NAME")]="";b[j.get("DOUIREG_OBJ_TYPE")]=j.get("DOUIREG_OBJ_TYPEAPPLET");b[j.get("DOUIREG_OBJ_MTHD")]="DoCanInvokeMethod";b[j.get("DOUIREG_SRVC_NAME")]="Servicebarcode";b[j.get("DOUIREG_SRVC_MTDH")]="DoCanInvokeMethod";b[j.get("DOUIREG_EXT_TYPE")]=j.get("DOUIREG_EXT_TYPEPRE");SiebelApp.S_App.Model.ServiceRegistry(b);SiebelApp.Servicebarcode=(function(){function k(){}SiebelJS.Extend(k,SiebelApp.ServiceModel);k.prototype.DoCanInvokeMethod=function(q){var p=CCFMiscUtil_CreatePropSet(),r="";r=q.GetProperty("MethodName").toString();if(r==="BarcodeNew"){p.SetProperty("Invoked",true);p.SetProperty("RetVal",true);$.setReturnValue({err:false,retVal:p})}else{if(r==="BarcodeUpdate"){p.SetProperty("Invoked",true);p.SetProperty("RetVal",true);$.setReturnValue({err:false,retVal:p})}else{if(r==="BarcodeEntry"){p.SetProperty("Invoked",true);p.SetProperty("RetVal",true);$.setReturnValue({err:false,retVal:p})}else{p.SetProperty("Invoked",false);p.SetProperty("RetVal",false);$.setReturnValue({err:false,retVal:p})}}}};k.prototype.DoInvokeMethod=function(s){var t="",p=CCFMiscUtil_CreatePropSet(),q=this.GetContext(),r;t=s.GetProperty("MethodName").toString();if(t==="BarcodeUpdate"){this.BarcodeUpdate();this.NotifyPrivFields(s,t);p.SetProperty("Invoked",true);$.setReturnValue({err:false,retVal:p});SiebelApp.OfflineAppMgr.PostActions(j.get("ACTION_RPC_COMPLETED"))}else{if(t==="BarcodeNew"){this.BarcodeNew();this.NotifyPrivFields(s,t);p.SetProperty("Invoked",true);$.setReturnValue({err:false,retVal:p});SiebelApp.OfflineAppMgr.PostActions(j.get("ACTION_RPC_COMPLETED"))}else{if(t==="BarcodeEntry"){this.EventBarcodeEntry(s);$.callback(this,function(){p.SetProperty("Invoked",true);$.setReturnValue({err:false,retVal:p});SiebelApp.OfflineAppMgr.PostActions(j.get("ACTION_RPC_COMPLETED"))})}else{if(t==="GetQuickPickInfo"){r=q.GetActiveControl().GetName();if(r==="BarcodeCombo"){this.GetQuickPickInfo();$.callback(this,function(){p.SetProperty("Invoked",true);$.setReturnValue({err:false,retVal:p})})}else{p.SetProperty("Invoked",false);$.setReturnValue({err:false,retVal:p})}}else{if(t==="GetPrintInfo"){SiebelApp.serviceprintinfo.GetServicePrintInfo(s)}else{p.SetProperty("Invoked",false);$.setReturnValue({err:false,retVal:p})}}}}}};function o(q){var p;for(p in q){return false}return true}function n(s){var r=[],q,p;if(c.hasOwnProperty(s)){q=c[s];for(p in q){r.push(p)}}return r}k.prototype.GetBarcodeFields=function(q){var p=[];if(o(c)){l()}$.callback(this,function(r){if(!r.err){p=n(q);$.setReturnValue(p)}else{$.setReturnValue(r)}})};k.prototype.GetBarcodeFindFields=function(){var p=[];if(o(c)){l()}$.callback(this,function(q){if(!q.err){p=e;$.setReturnValue({err:false,retVal:p})}else{$.setReturnValue(q)}})};k.prototype.GetBarcodeFindInfo=function(s,q){var r=s.GetProperty("VIEWKEY");if(!o(i)&&i.hasOwnProperty(r)){var p=i[r].split(",");q.SetProperty("View",p[0]);q.SetProperty("Applet",p[1]);q.SetProperty("Field",p[2])}};k.prototype.BarcodeUpdate=function(){g=true;a=false;return};k.prototype.BarcodeNew=function(){g=false;a=true;return};k.prototype.NotifyPrivFields=function(p,q){if(o(c)){l()}$.callback(this,function(v){var z=[];var t=this.GetContext();var w;if(q==="BarcodeNew"){w=SiebelApp.S_App.Model.GetLovNameVal("New","FS_BARCODE_PROCESS_MODE")}else{if(q==="BarcodeUpdate"){w=SiebelApp.S_App.Model.GetLovNameVal("Update","FS_BARCODE_PROCESS_MODE")}else{return}}if(typeof(t)!=="undefined"&&typeof(t.GetName())!=="undefined"){var A=t.GetView().GetName();var B=A+w;var E=c[B];var C=CCFMiscUtil_CreatePropSet();var s=CCFMiscUtil_CreatePropSet();var y=t.GetBusComp();var D;z.push(t.GetName());if(typeof(t.GetControlByName("BarcodeScanText"))!=="undefined"){var u=CCFMiscUtil_CreatePropSet();s.AddChild(u);u.SetProperty("FieldValue","");u.SetProperty("DisplayName","");z.push("*BarcodeScanText");z.push("?");D=s.EncodeAsString();z.push("@"+D)}if(typeof(t.GetControlByName("BarcodeCombo"))!=="undefined"){var x=t.GetControlValueByName("BarcodeCombo");z.push("*BarcodeCombo");for(var r in E){if(E.hasOwnProperty(r)){var F=CCFMiscUtil_CreatePropSet();C.AddChild(F);F.SetProperty("FieldValue",r);F.SetProperty("DisplayName",r);if(typeof(x)==="undefined"){x=r}}}if(typeof(x)!=="undefined"){z.push("?"+x)}D=C.EncodeAsString();z.push("@"+D)}if(typeof(y)!=="undefined"){y.NotifyGeneric("SWEIPrivFlds",z)}}})};k.prototype.ClearScanText=function(){var q=[];var r=this.GetContext();if(typeof(r)!=="undefined"&&typeof(r.GetName())!=="undefined"){var p=CCFMiscUtil_CreatePropSet();var u=r.GetBusComp();var s;if(typeof(u)!=="undefined"){q.push(r.GetName());if(typeof(r.GetControlByName("BarcodeScanText"))!=="undefined"){var t=CCFMiscUtil_CreatePropSet();p.AddChild(t);t.SetProperty("FieldValue","");t.SetProperty("DisplayName","");q.push("*BarcodeScanText");q.push("?");s=p.EncodeAsString();q.push("@"+s);u.NotifyGeneric("SWEIPrivFlds",q)}}}};k.prototype.SetEditable=function(w){var r=[];var u=this.GetContext();var t=w.GetProperty("Applet");if(typeof(u)!=="undefined"&&typeof(u.GetName())!=="undefined"){var s=u.GetView().GetApplet(t);var v=s.GetBusComp();if(typeof(s)!=="undefined"&&typeof(s.GetName())!=="undefined"){var p=s.GetCanUpdateArray();r.push(t);for(var q=0;q<p.length;q++){r.push(q.toString());r.push("1")}v.NotifyGeneric("SWEICanUpdate",r)}}};k.prototype.EventBarcodeEntry=function(t){var u=t.GetProperty("Request"),A=utils.DecodeFromQueryString(u),q=this.GetContext(),r=q,x=q.GetView().GetName(),w,z=r.GetControlByName("BarcodeCombo").GetInputName(),p=r.GetControlByName("BarcodeScanText").GetInputName(),s=unescape(A.GetPropertyAsStr(z)),v=unescape(A.GetPropertyAsStr(p)),y;if(s===""||v===""){$.setReturnValue({err:true});f.CcfLogEvent([j.get("LOG_EVT_CLIENT_SYS"),"Scan Text or Combo box cannot be empty ","SiebelApp.Servicebarcode","EventBarcodeEntry"]);return}if(g){w=SiebelApp.S_App.Model.GetLovNameVal("Update","FS_BARCODE_PROCESS_MODE")}else{w=SiebelApp.S_App.Model.GetLovNameVal("New","FS_BARCODE_PROCESS_MODE")}if(o(c)){l()}$.callback(this,function(B){f.CcfLogEvent([j.get("LOG_EVT_CLIENT_SYS"),"Cache created successfully","SiebelApp.Servicebarcode","EventBarcodeEntry"]);var C=x+s+w;t.SetProperty("ScanText",v);if(!o(d)&&d.hasOwnProperty(C)){y=d[C].split(",");t.SetProperty("Applet",y[0]);t.SetProperty("Field",y[1])}if(a){this.ProcessDataNew(t)}else{this.ProcessDataUpdate(t)}$.callback(this,function(D){$.setReturnValue(D);this.ClearScanText()
});$.setReturnValue(B)})};k.prototype.ProcessDataNew=function(v){var s=this.GetContext(),r=v.GetProperty("Applet"),u=v.GetProperty("Field"),p=v.GetProperty("ScanText"),q=s.GetView().GetApplet(r),t;if(q===null){$.setReturnValue({err:true});f.CcfLogEvent([j.get("LOG_EVT_CLIENT_SYS"),"Target Applet "+r+"not available for this view","SiebelApp.Servicebarcode","ProcessDataNew"]);return}t=q.GetBusComp();if(t===null){$.setReturnValue({err:true});f.CcfLogEvent([j.get("LOG_EVT_CLIENT_SYS"),"Target Buscomp not available for this view","SiebelApp.Servicebarcode","ProcessDataNew"]);return}if(t.IsCommitPending()){t.WriteRecord()}$.callback(this,function(w){if(!w.err){SiebelApp.OfflineAppMgr.PostActions(j.get("ACTION_RPC_COMPLETED"));t.NewRecord(true,false,null);$.callback(this,function(x){if(!x.err){t.SetFieldValue(u,p);$.callback(this,function(y){if(!y.err){t.SetCommitPending(true);t.SetNewRecPending(true);this.SetEditable(v);$.setReturnValue({err:false})}else{$.setReturnValue({err:true})}})}else{$.setReturnValue({err:true})}})}else{$.setReturnValue({err:true})}})};k.prototype.ProcessDataUpdate=function(v){var s=this.GetContext(),r=v.GetProperty("Applet"),u=v.GetProperty("Field"),p=v.GetProperty("ScanText"),q=s.GetView().GetApplet(r),t;if(q===null){$.setReturnValue({err:true});f.CcfLogEvent([j.get("LOG_EVT_CLIENT_SYS"),"Target Applet "+r+"not available for this view","SiebelApp.Servicebarcode","ProcessDataNew"]);return}t=q.GetBusComp();if(t===null){$.setReturnValue({err:true});f.CcfLogEvent([j.get("LOG_EVT_CLIENT_SYS"),"Target Buscomp not available for this view","SiebelApp.Servicebarcode","ProcessDataNew"]);return}if(t.IsCommitPending()){t.WriteRecord()}$.callback(this,function(w){if(!w.err){t.SetFieldValue(u,p);$.callback(this,function(x){if(!x.err){t.SetCommitPending(true);$.setReturnValue({err:false})}else{$.setReturnValue({err:true})}})}else{$.setReturnValue({err:true})}})};k.prototype.GetQuickPickInfo=function(){var t=this.GetContext(),w=t.GetView().GetName(),q,r=0,v,p,s=t.GetName(),u=t.GetBusComp();if(g){v=SiebelApp.S_App.Model.GetLovNameVal("Update","FS_BARCODE_PROCESS_MODE")}else{v=SiebelApp.S_App.Model.GetLovNameVal("New","FS_BARCODE_PROCESS_MODE")}p=this.GetBarcodeFields(w+v);$.callback(this,function(y){if(!y.err){p=y;var z=t.GetActiveControl().GetFieldName(),x=[];x[0]="";x[1]=t.GetView().GetName();x[2]=t.GetName();x[3]=z;x[4]="true";x[5]="";for(q=6;q<6+p.length;q++){x[q]=p[r];r++}u.NotifyGeneric("GetQuickPickInfo",x);h.PostActions(j.get("ACTION_RPC_COMPLETED"),"GetQuickPickInfo")}else{$.setReturnValue({err:true})}})};var m=function(t){var v,q,w,x,p,s,r;v=t.View;q=t.EntryMode;w=t.ProcessMode;x=t.Field;p=t.Applet;r=v+w;if(w===SiebelApp.S_App.Model.GetLovNameVal("Find","FS_BARCODE_PROCESS_MODE")){e.push(q)}viewKey=q+w;i[viewKey]=v+","+p+","+x;if(c.hasOwnProperty(r)){var u=c[r];u[q]=x;c[r]=u}else{s=[];s[q]=x;c[r]=s}appletKey=v+q+w;d[appletKey]=p+","+x;if(c.hasOwnProperty(r)){var u=c[r];u[q]=x;c[r]=u}else{s=[];s[q]=x;c[r]=s}};var l=function(){var w=SiebelApp.S_App.GetModel(),t=w.GetBusObj("FS Barcode Mappings"),p,s=CCFMiscUtil_CreatePropSet(),y=0,x,q=10,z=[],v=0,u,r={};if(t){p=t.GetBusComp("FS Barcode Mappings");p.SetBusObj(t)}if(p){p.ActivateFields();$.callback(this,function(A){if(!A.err){p.Execute();$.callback(this,function(B){if(!B.err){p.Home();p.SetActiveRow(0);x=p.GetRecordCount();if(p.CheckActiveRow()===true){m(p.GetWS()[0])}r.iterations=x-1;r.execute=p.NextRecord;r.executeScope=p;r.postExecute=function(C){if(!(C.err)){if(v<p.GetWorkSetSize()){z[v]=p.GetWS()[v+1]}else{z[v]=p.GetWS()[p.GetWorkSetSize()-1]}m(z[v]);v++}};$.eachAsyncOp(this,r);$.callback(this,function(C){$.setReturnValue(C)});$.setReturnValue({err:false})}else{$.setReturnValue(B)}})}})}};return k}());return"SiebelAppFacade.SiebelApp.Servicebarcode"});define("siebel/offline/Invksrchsvc",["siebel/offline/model","siebel/offline/servicemodel"],function(){var a=SiebelApp.Offlineconstants;var b={};b[a.get("DOUIREG_OBJ_NAME")]="Invoke Search";b[a.get("DOUIREG_SRVC_NAME")]="Invksrchsvc";SiebelApp.S_App.Model.ServiceRegistry(b);SiebelApp.Invksrchsvc=(function(){var c=SiebelJS.Dependency("SiebelApp.Utils");function d(){SiebelApp.Invksrchsvc.superclass.constructor.call(this)}SiebelJS.Extend(d,SiebelApp.ServiceModel);d.prototype.CanInvokeMethod=function(e){if(e==="GetOUISearchLookinValues"){$.setReturnValue({err:false,retVal:true});return}else{if(e==="BarcodeQuery"){$.setReturnValue({err:false,retVal:true});return}else{return SiebelApp.Invksrchsvc.superclass.CanInvokeMethod.call(this,e)}}};d.prototype.InvokeMethod=function(s,k){var n=CCFMiscUtil_CreatePropSet();if(!s){$.setReturnValue({err:false,retVal:false});return}if(s==="GetOUISearchLookinValues"){SiebelApp.Servicebarcode.prototype.GetBarcodeFindFields();$.callback(this,function(u){n.SetProperty("Output",u.retVal);$.setReturnValue({err:false,retVal:n});return})}else{if(s==="BarcodeQuery"){var i=CCFMiscUtil_CreatePropSet();var o=CCFMiscUtil_CreatePropSet();var q=k.GetProperty("BARCODE");var h=k.GetProperty("OPTION");var l=h+SiebelApp.S_App.Model.GetLovNameVal("Find","FS_BARCODE_PROCESS_MODE");i.SetProperty("VIEWKEY",l);SiebelApp.Servicebarcode.prototype.GetBarcodeFindInfo(i,o);var f=o.GetProperty("View");var m=o.GetProperty("Applet");var r=o.GetProperty("Field");var g="( [";g+=r;g+="] = ";g+='"'+q+'"';g+=" )";if(f!="undefined"&&SiebelApp.S_App.Model.GetViewDef(f)){var t=SiebelApp.S_App.Model.GetViewDef(f).BOName;var j=SiebelApp.S_App.Model.GetBusObj(t);if(m!="undefined"&&SiebelApp.Metadata.GetAppletDef(m)){var e=SiebelApp.Metadata.GetAppletDef(m).BCName;var p=j.GetBusComp(e);if(p!="undefined"){p.SetFldSearchSpec(r,q)}}}SiebelApp.OfflineAppMgr.BuildViewAsync(f,"BS_NORMAL","",j)}else{return SiebelApp.Invksrchsvc.superclass.DoInvokeMethod.call(this,s,k)}}};return d}());return"SiebelAppFacade.SiebelApp.Invksrchsvc"})};