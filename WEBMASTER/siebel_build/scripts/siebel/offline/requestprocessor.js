/*<ORACLECOPYRIGHT>
* Copyright (C) 1994-2014
* Oracle and Java are registered trademarks of Oracle and/or its affiliates.
* Other names may be trademarks of their respective owners.
* UNIX is a registered trademark of The Open Group.
*
* This software and related documentation are provided under a license agreement
* containing restrictions on use and disclosure and are protected by intellectual property laws.
* Except as expressly permitted in your license agreement or allowed by law, you may not use, copy,
* reproduce, translate, broadcast, modify, license, transmit, distribute, exhibit, perform, publish,
* or display any part, in any form, or by any means. Reverse engineering, disassembly,
* or decompilation of this software, unless required by law for interoperability, is prohibited.
*
* The information contained herein is subject to change without notice and is not warranted to be error-free.
* If you find any errors, please report them to us in writing.
*
* U.S. GOVERNMENT RIGHTS Programs, software, databases, and related documentation and technical data delivered to U.S.
* Government customers are "commercial computer software" or "commercial technical data" pursuant to the applicable
* Federal Acquisition Regulation and agency-specific supplemental regulations.
* As such, the use, duplication, disclosure, modification, and adaptation shall be subject to the restrictions and
* license terms set forth in the applicable Government contract, and, to the extent applicable by the terms of the
* Government contract, the additional rights set forth in FAR 52.227-19, Commercial Computer Software License
* (December 2007). Oracle America, Inc., 500 Oracle Parkway, Redwood City, CA 94065.
*
* This software or hardware is developed for general use in a variety of information management applications.
* It is not developed or intended for use in any inherently dangerous applications, including applications that
* may create a risk of personal injury. If you use this software or hardware in dangerous applications,
* then you shall be responsible to take all appropriate fail-safe, backup, redundancy,
* and other measures to ensure its safe use. Oracle Corporation and its affiliates disclaim any liability for any
* damages caused by use of this software or hardware in dangerous applications.
*
* This software or hardware and documentation may provide access to or information on content,
* products, and services from third parties. Oracle Corporation and its affiliates are not responsible for and
* expressly disclaim all warranties of any kind with respect to third-party content, products, and services.
* Oracle Corporation and its affiliates will not be responsible for any loss, costs,
* or damages incurred due to your access to or use of third-party content, products, or services.
</ORACLECOPYRIGHT>*/
/* 8.1.1.14SIA[23044]PATCHSET7 */
if(typeof(SiebelApp.RequestProcessor)==="undefined"){Namespace("SiebelApp.RequestProcessor");SiebelApp.RequestProcessor=(function(){var d=SiebelJS.Dependency("SiebelApp.Utils");var b=SiebelApp.Offlineconstants;var h=SiebelApp.Constants;var g=SiebelApp.S_App;var a=null;var f;function e(){var i;var k={};j=function j(){return i};j.prototype=this;i=new j();i.constructor=j;this.SetPrevReqObj=function(l){k=l};this.GetPrevReqObj=function(){return k};this.SetLayoutState=function(m,l){a=m;f=l};return i}var c=new e();e.prototype.ProcessReq=function(o,i,l){var v=function(){return(i.successfncallback.apply(i.context||this,arguments))};var y=d.DecodeFromQueryString(o);var u=unescape(y.GetPropertyAsStr(b.get("SWECMD")));var n=unescape(y.GetPropertyAsStr(b.get("SWEMETHOD")));var q="";var t="";var k="";var s="";var j=null;switch(u){case b.get("GOTOBOOKMARKVIEW"):case (b.get("GOTOVIEW")):s=b.get("VIEW_INFO");q=unescape(y.GetProperty("SWEView"));SiebelApp.OfflineAppMgr.ShowView(o,u,v,q,s);break;case (b.get("GETVIEWLAYOUT")):if(a){s=a;t=g.GetActiveView().GetName();q=t.concat("/",f);u=b.get("GETVIEWLAYOUT")}else{s=b.get("VIEW_INFO");q=unescape(y.GetProperty("SWEView"))}var x=function(z,A){a=null;f=null;z=SiebelApp.OfflineAppMgr.ModifyLayout(z);v.apply(this,[z,A])};SiebelApp.BrowserCacheMgr.DiscoverMetadata(o,x,u,q,s);break;case (b.get("NEWLAYOUT")):s=b.get("NEW_VIEW_INFO");t=g.GetActiveView().GetName();q=t.concat("/",f);u=b.get("GETVIEWLAYOUT");SiebelApp.BrowserCacheMgr.DiscoverMetadata(o,v,u,q,s);a=null;f=null;break;case (b.get("GETCACHEDFRAME")):var r=[];var w=[];if(g.GetActiveView()){var p=this.GetPrevReqObj();if(p.reqType===b.get("EDIT_FIELD")){s=b.get("PICK_APLT_INFO");q=p.searchVal;this.SetPrevReqObj({});r=[o,v,u,q,s];w=SiebelApp.BrowserCacheMgr.DiscoverMetadata;if(SiebelApp.OfflineAppMgr.GetIsCreatingPopup()){SiebelApp.OfflineAppMgr.SetPendingOp(true,w,r,SiebelApp.BrowserCacheMgr)}else{SiebelApp.S_App.ProcessCallbacks("refreshpopup",[]);w.apply(SiebelApp.BrowserCacheMgr,r)}break}else{var m=g.GetActiveView().GetActiveApplet();if(m){a=null;if(y.PropertyExists("ObjName")&&y.PropertyExists("Type")){q=y.GetProperty("ObjName").toString();s=y.GetProperty("Type").toString()}else{s=b.get("NEW_VIEW_INFO");t=g.GetActiveView().GetName();k=m.GetName();q=t.concat("/",k)}r=[o,v,u,q,s];w=SiebelApp.BrowserCacheMgr.DiscoverMetadata;if(SiebelApp.OfflineAppMgr.GetIsCreatingPopup()){SiebelApp.OfflineAppMgr.SetPendingOp(true,w,r,SiebelApp.BrowserCacheMgr)}else{SiebelApp.S_App.ProcessCallbacks("refreshpopup",[]);w.apply(SiebelApp.BrowserCacheMgr,r)}break}}}s=b.get("DEFAULT_VIEW_INFO");q=unescape(y.GetProperty("SWEFrame"));SiebelApp.BrowserCacheMgr.DiscoverMetadata(o,v,u,q,s);break;case (b.get("GOTOPOSTEDACTION")):s=b.get("DEFAULT_VIEW_INFO");q=unescape(y.GetProperty("SWEFrame"));SiebelApp.BrowserCacheMgr.DiscoverMetadata(o,v,u,q,s);break;case (b.get("TEXT")):s=b.get("DEFAULT_VIEW_INFO");q="scriptfiles";SiebelApp.BrowserCacheMgr.DiscoverMetadata(o,v,u,q,s);break;case b.get("CANINVOKEMETHOD"):u=n;SiebelApp.OfflineAppMgr.CanInvokeMethod(y,u,v,o);break;case b.get("INVOKEMETHOD"):u=n;SiebelApp.OfflineAppMgr.InvokeMethod(y,u,v,o);$.callback(this,function(A){if(A.err){var z=g.OfflineErrorObject;SiebelApp.OfflineAppMgr.ShowRPCError(z,v,o);z.ClearErrorMsg()}else{$.setReturnValue(A);return(A)}});break;default:if(o.search("scriptfiles.txt")!==-1){u=b.get("TEXT");s=b.get("DEFAULT_VIEW_INFO");q="scriptfiles";SiebelApp.BrowserCacheMgr.DiscoverMetadata(o,v,u,q,s)}else{v.apply(this,[b.get("CUD_RESPONSE")])}}};e.prototype.GetRequestType=function(i,n){var j="";if(!n){i=d.DecodeFromQueryString(i)}var l=i.GetProperty(b.get("SWECMD"));var m=i.GetProperty(b.get("SWEMETHOD"));if(l){l=l.toString()}if(m){m=m.toString()}var k=[b.get("DRILLDOWN"),"DrillDown",b.get("NEWRECORD"),b.get("EDITRECORD"),b.get("WRITERECORD"),b.get("EDIT_FIELD"),b.get("POSITION_ON_ROW"),b.get("SWE_POST_CHANGES"),b.get("DELETERECORD"),b.get("ADDRECORD"),b.get("SWE_CLOSE_APPLET"),b.get("UNDORECORD"),b.get("UPDATEPREFMSG"),h.get("SWE_GET_PICK_INFO"),b.get("SCROLL_NEXT_DATA"),b.get("SCROLL_PREV_DATA"),b.get("GO_TO_NEXT_SET"),b.get("GO_TO_PREV_SET"),b.get("SCROLL_PREV_DATA"),b.get("PICKRECORD"),b.get("CREATERECORD"),b.get("EXECUTE_FRAME_QUERY"),b.get("FIND"),"Submit"];switch(l){case b.get("GOTOBOOKMARKVIEW"):case b.get("GOTOVIEW"):j=l;break;case b.get("GETVIEWLAYOUT"):if(a){l=b.get("NEWLAYOUT")}j=l;break;case b.get("GETCACHEDFRAME"):case b.get("GOTOPOSTEDACTION"):j=l;break;case b.get("GETAPPLETLAYOUT"):l=b.get("NEWLAYOUT");j=l;break;case b.get("INVOKEMETHOD"):case b.get("CANINVOKEMETHOD"):if(k.indexOf(m)!==-1){j=m}break;default:if(!m&&!l){j=b.get("TEXT")}}return j};e.prototype.IsSupported=function(i,l,o){var n=null;if(!l){i=d.DecodeFromQueryString(i)}var j=i.GetProperty(h.get("SWE_SERVICE"));if(!j){j=this.GetRequestType(i,true)}if(o){n=function(){return(o.successfncallback.apply(o.context||this,arguments))}}if(!j){j=i.GetProperty(b.get("SWECMD"));if(j){if(j.toString()===b.get("INVOKEMETHOD")){j=i.GetProperty(b.get("SWEMETHOD"))}}}var m=true;if(j){j=j.toString()}switch(j){case b.get("MESSAGEBAR"):case b.get("CREATERECORD"):m=false;break;case b.get("NEWRECORD"):var k=g.GetActiveView().GetActiveApplet();if(k&&k.GetParentApplet()&&k.GetPopupAppletName()){m=false}break;default:m=true}if(n&&!m){n.apply(this,[b.get("CUD_RESPONSE")])}return m};e.prototype.GetCmdTag=function(l){var m=SiebelApp.OfflineAppMgr.GetCmdMap();var n=m.length;var j=l;for(var k=0;k<n;k++){if(m[k].cmd===l){j=m[k].cmdTag;break}}return j};e.prototype.IsCUDRequest=function(i){switch(i){case b.get("DELETERECORD"):case b.get("NEWRECORD"):case b.get("CREATERECORD"):return true;default:return false}};e.prototype.IsAssoc=function(j){var k=CCFMiscUtil_CreatePropSet();k.DecodeFromString(j);var i=k.GetProperty(h.get("SWE_RPC_PROP_RETURN_STATUS"));if(i&&i.toString()===h.get("SWE_RPC_PROP_NEW_POPUP")){return true}return false};return c}())};