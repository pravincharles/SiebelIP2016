/*<ORACLECOPYRIGHT>
* Copyright (C) 1994-2014
* Oracle and Java are registered trademarks of Oracle and/or its affiliates.
* Other names may be trademarks of their respective owners.
* UNIX is a registered trademark of The Open Group.
*
* This software and related documentation are provided under a license agreement
* containing restrictions on use and disclosure and are protected by intellectual property laws.
* Except as expressly permitted in your license agreement or allowed by law, you may not use, copy,
* reproduce, translate, broadcast, modify, license, transmit, distribute, exhibit, perform, publish,
* or display any part, in any form, or by any means. Reverse engineering, disassembly,
* or decompilation of this software, unless required by law for interoperability, is prohibited.
*
* The information contained herein is subject to change without notice and is not warranted to be error-free.
* If you find any errors, please report them to us in writing.
*
* U.S. GOVERNMENT RIGHTS Programs, software, databases, and related documentation and technical data delivered to U.S.
* Government customers are "commercial computer software" or "commercial technical data" pursuant to the applicable
* Federal Acquisition Regulation and agency-specific supplemental regulations.
* As such, the use, duplication, disclosure, modification, and adaptation shall be subject to the restrictions and
* license terms set forth in the applicable Government contract, and, to the extent applicable by the terms of the
* Government contract, the additional rights set forth in FAR 52.227-19, Commercial Computer Software License
* (December 2007). Oracle America, Inc., 500 Oracle Parkway, Redwood City, CA 94065.
*
* This software or hardware is developed for general use in a variety of information management applications.
* It is not developed or intended for use in any inherently dangerous applications, including applications that
* may create a risk of personal injury. If you use this software or hardware in dangerous applications,
* then you shall be responsible to take all appropriate fail-safe, backup, redundancy,
* and other measures to ensure its safe use. Oracle Corporation and its affiliates disclaim any liability for any
* damages caused by use of this software or hardware in dangerous applications.
*
* This software or hardware and documentation may provide access to or information on content,
* products, and services from third parties. Oracle Corporation and its affiliates are not responsible for and
* expressly disclaim all warranties of any kind with respect to third-party content, products, and services.
* Oracle Corporation and its affiliates will not be responsible for any loss, costs,
* or damages incurred due to your access to or use of third-party content, products, or services.
</ORACLECOPYRIGHT>*/
/* 8.1.1.14SIA[23044]PATCHSET9 */
if(SiebelApp.S_App.BusComp){define("siebel/offline/buscomp",[],function(){(function(){var an=SiebelApp.S_App.BusComp;var ao=SiebelApp.S_App.BusComp.prototype;var r=SiebelApp.S_App.BusComp;var aq=SiebelApp.Utils;var c=SiebelApp.S_App;var m=SiebelApp.OfflineUtils;var F=SiebelApp.Offlineconstants;var M=F.get("LOG_EVT_CLIENT_SYS");var O=true;var L=SiebelApp.BrowserCacheMgr;var Y=SiebelApp.S_App.Model;var ae=SiebelApp.AjaxRequestMgr;SiebelApp.S_App.BusComp=function(){r.call(this);var aV={};var aM=true;var aR=true;var a3=true;var bm=[];var aO=[];var bv=[];var bi=0;var bf=-1;var be=true;var bn=[];var a9={};var bt=[];var bd=null;var bw=true;var aN=true;var bh=0;var aJ=0;var aT=[0,1];var a2=F.get("INSMODE_NORMAL");var aY="";var bx=false;var a1=[];var a5={};var aS=false;var a0=false;var aQ=[];var av=[];var a4=false;var bc=false;var a7;var bl;var ba=false;var a8="";var aI="";var aL="";var az=[];var aX=[];var bq=[];var bk=[];var aF=[];var aB="";var aD=F.get("PAGE_SIZE");var aE=false;var aK=false;var ax=false;var aU=[];var aP=[];var at=[];var aw=[];var aC=null;var br="";var bj="";var bo="";var aA="";var bp;var bu="";var aZ=false;var a6=null;var ar=null;var au=null;var aG=[];var bs=[];var aH="";var bg=0;this.GetBusCompType=function(){return bg};this.SetBusCompType=function(by){bg=by};this.GetAssocList=function(){if(!bp){if(this.GetLinkDef()&&this.GetLinkDef().interTableName){var by=this.GetBusObj();var bA=this.GetName();var bz=by.GetBCPS(bA,true);bp=new SiebelApp.S_App.BusComp();bp.ProcessObjectInfo(bz)}}return bp};this.SetAssocList=function(by){bp=by};this.SetPickSrcIdFName=function(by){a6=by};this.GetPickSrcIdFName=function(){return a6};this.GetPickAppletSrcInfo=function(){return aA};this.SetPickAppletSrcInfo=function(by){aA=by};this.GetIsPopup=function(){return bo};this.SetIsPopup=function(by){bo=by};this.GetViewMode=function(){return bj};this.SetViewMode=function(by){bj=by};this.GetInterface=function(){if(!aC){aC=new SiebelApp.S_App.OfflineBCInterface(this)}return aC};this.ResetInterface=function(){if(aC){aC.EndLife()}aC=null};this.GetOnUpdSrcFldArray=function(){return aU};this.GetOnUpdDstFldArray=function(){return aP};this.GetOnUpdExprArray=function(){return at};this.GetOnUpdConditionArray=function(){return aw};this.IsLoadOnFldUpdSet=function(){return aK};this.SetLoadOnFldUpd=function(by){aK=by};this.IsOnFieldUpdDisabled=function(){return ax};this.DisableOnFieldUpd=function(){ax=true};this.GetWSSize=function(){return aD};this.SetWSSize=function(by){aD=by};this.GetOldFNm=function(){return az};this.SetOldFNm=function(by){if(az.indexOf(by)<0){az.push(by)}};this.SetEmptyFNm=function(){az=[];aX=[];bq=[];aF=[];bk=[];aB=""};this.GetOldfVal=function(){return aX};this.SetOldFVal=function(bF,bz){var bE=this.GetOldFNm();var by=bE.indexOf(bF);if(by<0){aX.push(bz)}else{if(!aX[by]){aX[by]=bz}else{var bC=aX[by].split("|");var bD=bz.split("|");var bA=bC[0];var bB=bD[1];aX[by]=bA+"|"+bB}}};this.GetLocalFNm=function(){return bq};this.SetLocalFNm=function(by){if(bq.indexOf(by)<0){bq.push(by)}};this.GetLocalfVal=function(){return bk};this.SetLocalFVal=function(bC,bB,bA,bz){var by=bq.indexOf(bC);if(bz&&by<0){return}bk[by]=bB;if(by>bk.length){aF[by]=bA}};this.SetLocalTxn=function(by){aB=by};this.GetLocalTxn=function(){return aB};this.GetNewTxn=function(){return a8};this.SetNewTxn=function(by){a8=by};this.GetOpType=function(){return aL};this.SetOpType=function(by){aL=by};this.GetTxnId=function(){return aI};this.SetTxnId=function(by){aI=by};this.IsNotifyEnabled=function(){return aR};this.SetNotifyEnabled=function(by){aR=by};this.IsNotifySysEnabled=function(){return a3};this.SetNotifySysEnabled=function(by){a3=by};this.SetWorkSet=function(by){bm=by};this.GetWorkSet=function(){return bm};this.GetNotifyInfoArray=function(){return aO};this.AddNotifyInfoArray=function(by){aO.push(by)};this.ResetNotifyArr=function(){aO=[]};this.GetRef=function(){return bi};this.AddRef=function(){return ++bi};this.RemoveRef=function(){return bi--};this.GetExtObj=function(){return aV};this.SetExtObjProp=function(bz,by){this.GetExtObj()[bz]=by};this.GetExtObjProp=function(by){if(!((this.GetExtObj()).hasOwnProperty(by))){this.GetExtObj()[by]=null}return(this.GetExtObj()[by])};this.IsInExecution=function(){return aM};this.SetExecutionState=function(by){aM=by};var aW=this.IsInsertPending;this.IsInsertPending=function(){if(SiebelApp.OfflineAppSettings.GetMode()===true){return this.insertPending}else{return aW}};var ay=this.SetSearchSpec;this.SetSearchSpec=function(bB){if(SiebelApp.OfflineAppSettings.GetMode()===true){if(window.localStorage.getItem("contextArray")){var bz=JSON.parse(window.localStorage.getItem("contextArray"));var by=bz.length;var bC;for(var bA=0;bA<by;bA++){bC=bz[bA].bc;if(this.GetName&&(this.GetName()===bC)){bz[bA].ss=bB;window.localStorage.setItem("contextArray",JSON.stringify(bz));break}}bC=null;bz=null}}return ay.call(this,bB)};this.GetMultiSelectMode=function(){return bx};this.SetMultiSelectMode=function(by){if(this.GetMultiSelectMode()===by){return}bx=by;this.NotifyStateChanged("bInMultiSelMode",bx)};this.GetExplicitCommit=function(){return a0};this.SetExplicitCommit=function(by){a0=by};this.GetSelRowIdArray=function(){return a1};this.SetSelRowIdArray=function(by){a1=by};this.SetBCTableUpdateState=function(by){be=by};this.GetBCTableUpdateState=function(){return be};this.SetCursor=function(by){aT=by};this.GetCursor=function(){return aT};this.SetQuerySearchSpec=function(by){bn=by};this.GetQuerySearchSpec=function(){return bn};this.SetAppletSearchSpec=function(by){if($.isArray(by)&&by.length>0){by=by[0]}if(this.IsExecuted()){this.SetExecuted(by===bu)}bu=by};this.GetAppletSearchSpec=function(){return bu};this.SetQuerySortSpec=function(by){a9=by};this.GetQuerySortSpec=function(){return a9};this.SetQueryFieldList=function(by){bt=by};this.GetQueryFieldList=function(){return bt};this.SetPrevActiveRow=function(by){bf=by};this.GetPrevActiveRow=function(){return bf};this.SetQueryOrder=function(by){bd=by};this.GetQueryOrder=function(){return bd};this.SetPriorSet=function(by){bw=by};this.GetPriorSet=function(){return bw};this.SetNextSet=function(by){aN=by};this.GetNextSet=function(){return aN};this.SetRecordCount=function(by){bh=by};this.GetRecordCount=function(){return bh};this.SetScrollCount=function(bA){aJ=bA;if(window.localStorage.getItem("contextArray")){var bz=JSON.parse(window.localStorage.getItem("contextArray"));var by=bz.length;var bC;for(var bB=0;bB<by;bB++){bC=bz[bB].bc;if(this.GetName()===bC){bz[bB].sc=bA;break}}window.localStorage.setItem("contextArray",JSON.stringify(bz));bz=null;bC=null}};this.GetScrollCount=function(){return aJ};this.SetBCTableInsertState=function(by){a2=by};this.GetBCTableInsertState=function(){return a2};this.SetInsertStatement=function(by){aY=by};this.GetInsertStatement=function(){return aY};this.SetIsRelatedBC=function(by){aZ=by;if(by){G.call(this)}};this.GetIsRelatedBC=function(){return aZ};this.GetWS=function(){return bv};this.AddWS=function(by){this.GetWS().push(by)};this.EmptyWS=function(){bv=[]
};this.SetFieldValueWS=function(bA,bz,by){bv[by][bA]=bz};this.GetBCState=function(){return a5};this.SetBCState=function(by){a5=by};this.GetInverseSelection=function(){return aS};this.SetInverseSelection=function(by){if(aS===by){return}aS=by;this.NotifyStateChanged("bInverseSelection",by)};this.GetActivatedFieldList=function(){var bB=this.GetFieldMap();var bC;for(var bA in bB){if(bB[bA]){bC=SiebelApp.S_App.LookupStringCache(bB[bA].GetName());if(aQ.indexOf(bC)===-1){aQ.push(bC)}}}var by=this.GetActFieldList();for(var bz in by){if(by[bz]){bC=SiebelApp.S_App.LookupStringCache(by[bz]);if(aQ.indexOf(bC)===-1){aQ.push(bC)}}}bB=null;by=null;return aQ};this.ResetActivatedFieldList=function(){aQ=[]};this.GetSavedFieldArray=function(){return av};this.SetSavedFieldArray=function(by){av=by};this.IsDeleteRecordPending=function(){return(a4)};this.SetDeleteRecordPending=function(by){a4=by};this.SetAdminNoDelete=function(by){bc=by};this.GetAdminNoDelete=function(){bc=false;return bc};this.SetAspectBCReadFld=function(by){a7=by};this.GetAspectBCReadFld=function(){return a7};this.SetAdminMode=function(by){ba=by};this.GetAdminMode=function(){ba=false;return ba};this.SetFldNoDelete=function(by){bl=by};this.GetFldNoDelete=function(){return bl};this.IsBCFldsActivated=function(){return aE};this.SetBCFldsActivated=function(by){aE=by};this.SetOrigRecVal=function(by){br=by};this.GetOrigRecVal=function(){return(br)};this.SetMasterBC=function(by){ar=by};this.GetMasterBC=function(){return(ar)};this.SetPickSrcField=function(by){au=by};this.GetPickSrcField=function(){return(au)};this.GetVBCRecords=function(){return aG};this.SetVBCRecords=function(by){aG=by};this.GetRelatedBCRecords=function(){return bs};this.SetRelatedBCRecords=function(by){bs=by};this.GetLastSelectedRowId=function(){return aH};this.SetLastSelectedRowId=function(by){aH=by};var bb=this._EndLife;this._EndLife=function(){if(SiebelApp.OfflineAppSettings.GetMode()===true){if(ar){ar=null;this.GetBusObj().EndLife()}else{if(bp){bp.EndLife();bp=null}aU=null;at=null;aw=null;az=null;aX=null;bm=null;aO=null;for(var bB in aV){if(aV[bB]){delete aV[bB]}}aV=null;a1=null;bt=null;bv=null;aQ=null;av=null;au=null;bs=null;var bC=this.GetNotifyObject();if(bC){var bz=bC.GetAppletRegistry();var by=bz.length;for(var bA=0;bA<by;bA++){bC.DeRegister(bz[0])}bz=null}bb.call(this);bb=null;bC=null}}else{bb.call(this)}}};SiebelApp.S_App.BusComp.prototype=ao;SiebelApp.S_App.BusComp.prototype.constructor=SiebelApp.S_App.BusComp;var l={};var e={};l.EndLife=an.prototype.EndLife;l.ProcessObjectInfo=an.prototype.ProcessObjectInfo;l.PositionById=an.prototype.PositionById;l.CanInsert=an.prototype.CanInsert;l.WriteRecord=an.prototype.WriteRecord;l.UndoRecord=an.prototype.UndoRecord;l.SetInQueryState=an.prototype.SetInQueryState;l.ProcessNFLObjectInfo=an.prototype.ProcessNFLObjectInfo;var ag=SiebelApp.OfflineCacheConfig;var q=F.get("IS_DYNAMIC");var X=false;var aj=null;var D=SiebelApp.Constants;var ab=D.get("SWE_ARG_EQUAL");var p=D.get("SWE_PROP_NAME");var P=F.get("DOUIREG_OBJ_NAME");var v=F.get("DOUIREG_OBJ_TYPE");var C=F.get("DOUIREG_OBJ_TYPEBUSCOMP");var T=F.get("DOUIREG_OBJ_MTHD");var ap=F.get("DOUIREG_EXT_TYPE");var a=F.get("DOUIREG_EXT_TYPEPRE");var s=F.get("DOUIREG_EXT_TYPEPOST");var i=F.get("DOUIREG_EXT_CONTEXT");var d=F.get("SWE_ARG_NOT_EQUAL");var y=F.get("SSA_PRIMARY_FIELD");var ac=F.get("SAVE_BC_STATE_ALL");var af=F.get("SAVE_BC_STATE_NONE");var ah=F.get("DTYPE_UTCDATETIME");var j="[~]";an.prototype.GetActiveRow=function(){return(h.call(this))};e.ProcessObjectInfo=function(aF,aE){if(!(aF.GetProperty(q))){var at=D.get("SWE_PST_BUSOBJ_INFO");var av;var aC=aF.GetValue();var au=D.get("SWE_PROP_NAME");var ar=CCFMiscUtil_CreatePropSet();var aA=aF.GetProperty(F.get("STAND_ALONE_INST"));var aD=(!aq.IsTrue(aA));this.GetUIState=function(){return aD};if(aq.IsTrue(aA)){av=CCFMiscUtil_CreatePropSet();av.SetType(at);av.SetValue("");av.SetProperty(q,true)}else{av=SiebelApp.S_App.Model.GetDyncPS(at,false);ar.SetType(aF.GetType());ar.SetValue(aC);ar.SetProperty(q,true);ar.SetProperty(q,true);SiebelApp.OfflineUtils.ProcessDPS(ar,aF,[au],1,true);var az=D.get("SWE_PST_REC_LIST");var aB=[p];SiebelApp.OfflineUtils.ProcessDPS(ar,aF,aB,1,true);var ay=aF.FindChildPosition(az);aF.RemoveChild(ay);av.AddChild(ar);SiebelApp.S_App.Model.SetDyncPS([at],[av],1);if(aE){if(aC!==this.GetVarName()){this.GetVarName=function(){return aC}}var ax=aF.GetProperty("pi");if(ax){ax=ax.toString()}if(this.GetParentId()){if(this.GetParentId()!==ax){this.GetParentId=function(){return ax}}}else{if(ax){this.GetParentId=function(){return ax}}}var aw=aF.GetChildByType(D.get("SWE_PST_FIELD_LIST"));if(aw){this.ProcessNFLObjectInfo(aw)}return}}this.SetSearchSpec("");this.SetSortSpec("");aF.RemoveProperty(D.get("SWE_PROP_HAS_HIER"))}return(l.ProcessObjectInfo.call(this,aF))};e.ProcessNFLObjectInfo=function(ax){var at=SiebelApp.S_App.BCField;var ar=ax.EnumChildren(true);var aw=this.GetFieldMap();do{var av=ar.GetProperty(D.get("SWE_PROP_NAME"));av=SiebelApp.S_App.LookupStringCache(av);if(!this.GetDefn().Fields[av]){continue}var au=aw[av];if(!au){au=new at();au.SetBusComp(this);au.ProcessObjectInfo(ar);this.AddField(au)}else{if(this.GetUIState()){ar.SetPropertyStr(D.get("SWE_PROP_NAME"),au.GetName());au.ProcessObjectInfo(ar)}}}while(ar=ax.EnumChildren(false))};an.prototype.GetActFieldList=function(){if(!this.GetExtObjProp("m_mapActFields")){this.SetExtObjProp("m_mapActFields",{})}return(this.GetExtObjProp("m_mapActFields"))};an.prototype.GetDeActableFieldList=function(){if(!this.GetExtObjProp("m_arDeActableFields")){this.SetExtObjProp("m_arDeActableFields",[])}return(this.GetExtObjProp("m_arDeActableFields"))};function o(){return false}an.prototype.AddActField=function(ar){var at=this.GetFieldDefn(ar);if(at){if(ar){var ax=this.GetFieldMap()[ar],av;if(ax){ax.SetActivated(true)}else{var au=SiebelApp.S_App.LookupSCMap(ar);if(au){av=au}else{var aw=CCFMiscUtil_ArrayToString([ar]);SiebelApp.S_App.AppendToStrCache(aw);av=SiebelApp.S_App.LookupSCMap(ar)}this.GetActFieldList()[ar]=av}if(this.GetFieldList().indexOf(av)===-1){this.GetFieldList().push(av)}f.call(this,ar)}}};an.prototype.InvokeMethodX=function(ar,aw){if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().StartTime("BusComp.prototype.InvokeMethodX ")}var av;var at={};var au=[];if(!ar){au.push(ar);SiebelApp.S_App.OfflineErrorObject.SetErrorMsg("SSAOMErrUnknownBCMethod",au,"","","",4,11);$.setReturnValue({err:"SSAOMErrUnknownBCMethod",retVal:""});return}at[P]=this.GetName();at[v]=C;at[T]="DoInvokeMethod";at[i]=this;if(!aw){aw=CCFMiscUtil_CreatePropSet()}aw.SetProperty("MethodName",ar);at[ap]=a;SiebelApp.S_App.Model.InvokeRegisteredSvc(at,aw);$.callback(this,function(ax){if(!ax.err){av=ax.retVal;if((av.Outputargs)&&(av.Outputargs).GetProperty("Invoked")&&(av.Outputargs).GetProperty("Invoked").toString()==="true"){$.setReturnValue({err:ax.err,retVal:av.Outputargs});return}if(av.Outputargs&&aw){(av.Outputargs).SetType(a);aw.AddChild(av.Outputargs)}ak.call(this,ar,aw);$.callback(this,function(az){if(!az.err){var ay=az.retVal;
if(ay){au.push(ar);SiebelApp.S_App.OfflineErrorObject.SetErrorMsg("SSAOMErrUnknownBCMethod",au,"","","",4,11);$.setReturnValue({err:"SSAOMErrUnknownBCMethod",retVal:""});return}aw.SetProperty("RetVal",ay);at[ap]=s;SiebelApp.S_App.Model.InvokeRegisteredSvc(at,aw);$.callback(this,function(aA){if(!aA.err){if(aA.retVal.Outputargs){$.setReturnValue({err:false,retVal:aA.retVal.Outputargs})}else{$.setReturnValue({err:false,retVal:true})}if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("BusComp.prototype.InvokeMethodX ")}}else{$.setReturnValue(aA)}})}else{$.setReturnValue(az)}})}else{$.setReturnValue(ax)}})};an.prototype.CanInvokeMethodX=function(ar){if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().StartTime("BusComp.prototype.CanInvokeMethodX")}var at={};var aw;var au;if(!ar){$.setReturnValue({err:true,retVal:false})}at[P]=this.GetName();at[v]=C;at[T]="DoCanInvokeMethod";at[ap]=a;at[i]=this;var ax=CCFMiscUtil_CreatePropSet();var av;ax.SetProperty("MethodName",ar);SiebelApp.S_App.Model.InvokeRegisteredSvc(at,ax);$.callback(this,function(ay){au=ay.err;if(au){$.setReturnValue({err:au,retVal:aw.Outputargs});return}if(!ay.err){aw=ay.retVal;if(aw.Outputargs){if((aw.Outputargs).GetPropertyAsStr("Invoked")==="true"){$.setReturnValue({err:au,retVal:(aw.Outputargs).GetProperty("RetVal").toString()});return}}at[ap]=s;if(this.IsNamedMethod(ar)){this.CanInvokeNamedMethod(ar);$.callback(this,function(){SiebelApp.S_App.Model.InvokeRegisteredSvc(at,ax);$.callback(this,function(aB){av=k.call(this,aB);$.setReturnValue({err:false,retVal:av})})})}else{if(ar==="RefreshBusComp"){SiebelApp.S_App.Model.InvokeRegisteredSvc(at,ax);$.callback(this,function(aB){av=k.call(this,aB);$.setReturnValue({err:false,retVal:av})})}else{if(ar==="Merge"){var aA;var az=false;aA=this.GetNumSelected();if(az||(aA<2)){$.setReturnValue({err:false,retVal:true});return}$.setReturnValue({err:false,retVal:this.CanMergeRecords()})}else{if((ar==="GetFieldLength")||(ar==="GetFieldDataType")||(ar==="MergeRecords")||(ar==="IsFieldReadOnly")||(ar==="CanDeleteRecords")||(ar==="CanInsertRecords")||(ar==="CanMergeRecords")||(ar==="CanUpdateRecords")||(ar==="EnableNotify")||(ar==="EnableHierarchy")||(ar==="IsExecuted")||(ar==="IsFieldActive")||(ar==="UpdateLinks")){SiebelApp.S_App.Model.InvokeRegisteredSvc(at,ax);$.callback(this,function(aB){av=k.call(this,aB);$.setReturnValue({err:false,retVal:av})})}else{SiebelApp.S_App.Model.InvokeRegisteredSvc(at,ax);$.callback(this,function(aB){aw=aB.retVal;av=k.call(this,aB);$.setReturnValue({err:false,retVal:av})})}}}}}else{$.setReturnValue(ay)}});if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("BusComp.prototype.CanInvokeMethodX")}};function k(au){var at=au.retVal;var ar=false;if(at.Outputargs){ar=(at.Outputargs).GetProperty("RetVal").toString();if(ar==="true"){ar=true;return ar}else{return ar}}else{return ar}}an.prototype.IsNamedMethod=function(){return(false)};an.prototype.CanInvokeNamedMethod=function(){return(false)};function ak(ar,au){if(!ar){$.setReturnValue({err:true,retVal:false});return}var at={};if(au.GetProperty("Request")){at.request=au.GetProperty("Request").toString()}if(ar==="NewRecord"){this.NewRecord(at);$.callback(this,function(av){if(av.err){$.setReturnValue(av)}else{$.setReturnValue({err:false,retVal:false})}});return}if(ar==="EditRecord"){this.EditRecord(at);$.callback(this,function(av){if(av.err){$.setReturnValue(av)}else{$.setReturnValue({err:false,retVal:false})}});return}if(ar==="WriteRecord"){this.WriteRecord();$.callback(this,function(av){if(av.err){$.setReturnValue(av)}else{$.setReturnValue({err:false,retVal:false})}});return}if(ar==="GetQuickPickInfo"){$.setReturnValue({err:false,retVal:false})}if(ar==="AddRecord"){this.OnActionAddRecord();$.callback(this,function(av){if(av.err){$.setReturnValue(av)}else{$.setReturnValue({err:false,retVal:false})}});return}if(ar==="UndoRecord"){this.UndoRecord(at);$.callback(this,function(av){if(av.err){$.setReturnValue(av)}else{$.setReturnValue({err:false,retVal:false})}});return}if(ar==="RefreshRecord"){this.RefreshRecord();$.callback(this,function(av){if(av.err){$.setReturnValue(av)}else{$.setReturnValue({err:false,retVal:false})}});return}if(ar==="RefreshBusComp"){this.RefreshBusComp();$.callback(this,function(av){if(av.err){$.setReturnValue(av)}else{$.setReturnValue({err:false,retVal:false})}});return}$.setReturnValue({err:false,retVal:true})}an.prototype.CoreMethod=function(ar){switch(ar){case F.get("DELETERECORD"):case D.get("SWE_GET_PICK_INFO"):case F.get("SWE_POST_CHANGES"):case F.get("DELETERECORD"):case F.get("SWE_CLOSE_APPLET"):case F.get("POSITION_ON_ROW"):case F.get("PICKRECORD"):case F.get("WRITERECORD"):case F.get("NEWRECORD"):case F.get("ADDRECORD"):case F.get("EDIT_FIELD"):case F.get("UNDORECORD"):case F.get("REFRESH_BUSCOMP"):case F.get("REFRESH_RECORD"):return true;default:return false}};an.prototype.GetDatumDataType=function(ar){switch(ar){case"1":case"2":case"4":case"5":case"14":return"text";case"3":return"phone";case"6":return"number";case"7":return"currency";case"8":return"bool";case"9":return"integer";case"10":return"date";case"11":return"time";case"12":return"datetime";case"13":return"utcdatetime";default:return""}};function f(av){if(av){var az=this.GetFieldMap()[av];if(!az){var au=this.GetFieldDefn(av);if(au){var aw=SiebelApp.S_App.LookupSCMap(av);var ax=Object.keys(this.GetFieldMap()).length;var ay=new SiebelApp.S_App.BCField();var at=CCFMiscUtil_CreatePropSet();at.SetType(D.get("SWE_PST_FIELD"));at.SetPropertyStr(D.get("SWE_PROP_NAME"),aw);at.SetPropertyStr(D.get("SWE_PROP_TYPE"),this.GetDatumDataType(au.DataType));at.SetPropertyStr(D.get("SWE_PROP_IS_CALC"),au.IsCalculated);at.SetPropertyStr(D.get("SWE_PROP_IS_HIDDEN"),au.Hidden);if(au.ReadOnly){at.SetPropertyStr(D.get("SWE_PROP_IS_READONLY"),au.ReadOnly)}if(au.Required){at.SetPropertyStr(D.get("SWE_PROP_IS_REQ"),au.Required)}at.SetPropertyStr(D.get("SWE_PROP_SCALE"),au.Scale);at.SetPropertyStr(D.get("SWE_PROP_LENGTH"),au.OldTextLen);if(aq.IsTrue(au.ImPostChg)){at.SetPropertyStr(D.get("SWE_PROP_IS_POST_CHANGES"),au.ImPostChg)}at.SetPropertyStr(D.get("CALCEXPR"),au.CalExpr);at.SetPropertyStr(D.get("COLUMN_NAME"),au.ColName);at.SetPropertyStr(D.get("DISABLE_SEARCH"),au.DisableSearch);at.SetPropertyStr(D.get("DISABLE_SORT"),au.DisableSort);at.SetPropertyStr(D.get("FORCE_ACTIVE"),au.ForceActive);at.SetPropertyStr(D.get("FORCE_CASE"),au.ForceCase);at.SetPropertyStr(D.get("LINKNAME"),au.LinkName);at.SetPropertyStr(D.get("NOCOPY"),au.NoCopy);at.SetPropertyStr(D.get("PICKLISTNAME"),au.PickListName);at.SetPropertyStr(D.get("POSTDEFAULT"),au.PostDefault);at.SetPropertyStr(D.get("PREDEFAULT"),au.PreDefault);at.SetPropertyStr(D.get("PRECISION"),au.Precision);at.SetPropertyStr(D.get("VALIDATIONSPEC"),au.ValidationSpec);at.SetPropertyStr(D.get("PRECISION"),au.Precision);at.SetPropertyStr("fDeps",au.fDepArray);ay.SetBusComp(this);ay.SetName(aw);ay.index=ax;ay.ProcessObjectInfo(at,true);ay.SetActivated(true);this.GetFieldMap()[av]=ay;
az=null;au=null;aw=null;ax=null;at=null}}else{var ar=az.IsActivated();if(!(ar)){if(az){az.SetActivated(true)}}}}}function ai(ar){if(!this.GetExtObjProp("m_wsActiveRow")){this.SetExtObjProp("m_wsActiveRow",-1)}this.SetExtObjProp("m_wsActiveRow",ar)}function h(){if(aq.IsEmpty(this.GetExtObjProp("m_wsActiveRow"))){this.SetExtObjProp("m_wsActiveRow",-1)}return this.GetExtObjProp("m_wsActiveRow")}function g(){var ar=this.GetCursor()[0]+1-this.GetWS().length+this.GetActiveRow()+1;return ar}an.prototype.SetActiveRow=function(ar,av,au){if(av===undefined){av=false}var at;if(h.call(this)>=0&&h.call(this)!==ar){this.FinishRecord()}if(ar<0||ar>=this.GetWS().length){this.NotifyNewActiveRow();if(!this.GetMultiSelectMode()){this.NotifyNewSelection(true)}$.setReturnValue({err:"SSAOMErrActiveRow"});return}if(!this.GetMultiSelectMode()){this.NotifyNewSelection(false)}ai.call(this,ar);if(!av){this.OnActiveRowChanged()}else{at=this.FindWorkSet(this.GetActiveRow());if(at){this.FieldValue(D.get("SWE_ROW_ID_FIELD"),at);$.callback(this,function(aw){if(aw.err){$.setreturnValue(aw);return}else{var ax=aw.retVal;this.PositionById(ax);$.callback(this,function(ay){if(ay.err){$.setreturnValue(ay);return}})}})}}$.callback(this,function(){var aD=this.GetNotifyInfoArray();var aC=0;if(aC<aD.length){var ay=aD[aC];var aF;if(ay){var aB=ay.GetAppletArray();var aE=aB.length;var aw;for(var aA=0;aA<aE;aA++){aw=aB[aA];if(!au||(au!==aw)){if(ar<ay.GetBegRow(aw)){aF=ay.GetBegRow(aw)-ar;ay.SetBegRow(ar,aw);ay.SetCurrRow(ar,aw);if(this.IsNotifyEnabled()){if(aF===1&&ay.GetSize(aw)!==1){this.NotifyScrollData(false)}else{if(az!=="PositionOnRow"){this.NotifyNewData()}}}}else{if(ar>ay.GetBegRow(aw)+ay.GetSize(aw)-1){aF=ar-(ay.GetBegRow(aw)+ay.GetSize(aw)-1);ay.SetBegRow(ar-ay.GetSize(aw)+1,aw);ay.SetCurrRow(ay.GetBegRow(aw),aw);if(this.IsNotifyEnabled()){if(aF===1&&ay.GetSize(aw)!==1){this.NotifyScrollData(true)}else{var ax=SiebelApp.AjaxRequestMgr.GetActiveRequestObj();var az=ax?ax.SweCommands[F.get("SWEMETHOD")]:"";if(az!=="PositionOnRow"){this.NotifyNewData()}}}}else{if(this.IsNotifyEnabled()){this.NotifyNewActiveRow()}}}}}}}$.callback(this,function(){if(!av){this.UpdateLinks(false)}$.callback(this,function(aG){if(!aG.err){if(!this.GetMultiSelectMode()){this.NotifyNewSelection(true)}$.setReturnValue({err:false})}else{$.setReturnValue(aG)}this.NotifyNewActiveRow()})})})};an.prototype.SetCurrCursor=function(ar){var au=ae.GetActiveRequestObj();if(au&&au.SweCommands&&au.SweCommands.SWEMethod&&this.IsPagination(au.SweCommands.SWEMethod)){var av=this.GetCursor();var at=this.GetScrollCount();if(ar<0){ar=this.GetActiveRow()}if(at){av[0]=at+ar}else{av[0]=ar}this.SetCursor(av)}};e.PositionById=function(aA){if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().StartTime("BusComp.prototype.PositionById")}var ar=false;var aw=false;var au=aA;var at=-1;var ax;var av;var az=this.GetWS().length;var ay=false;if(this.IsExecuted()){this.FinishRecord();$.callback(this,function(aE){if(aE.err){$.setReturnValue(aE)}else{var aB=0;var aD=false;ax=this.FindWorkSet(aB);this.FieldValue(D.get("SWE_ROW_ID_FIELD"),ax);var aC=function(aF){av=aF.retVal;if(av===au){at=aB;ar=true;aD=true}aB++;if(!aD&&aB<az){ax=this.FindWorkSet(aB);this.FieldValue(D.get("SWE_ROW_ID_FIELD"),ax);$.callback(this,aC)}};$.callback(this,aC);$.callback(this,function(){if(at===-1){this.EmptyWorkSet();ai.call(this,-1);ay=true}else{aw=true;ax=null;this.SetActiveRow(at)}$.callback(this,function(aH){if(ay){this.GetCursor()[0]=-1;var aI=false;var aF;var aG=function(){this.GetNextRecord();$.callback(this,function(aJ){if(!aJ.err){aF=aJ.retVal;aI=aF.Id===au;if(!aI){aG.call(this)}}})};aG.call(this);$.callback(this,function(){if(!aI){U.call(this,au);$.callback(this,function(aJ){aF=aJ.retVal})}$.callback(this,function(){if(aF){this.InsertWorkSet(0,aF);A.call(this,ar,aw)}if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("BusComp.prototype.PositionById ")}})})}else{if(!aH.err){A.call(this,ar,aw);$.callback(this,function(aJ){$.setReturnValue(aJ)})}else{$.setReturnValue(aH)}if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("BusComp.prototype.PositionById ")}}})})}})}};function A(at,ar){if(!at){x.call(this);$.callback(this,function(au){if(au.err){$.setReturnValue({err:true});return}})}$.callback(this,function(au){if(!au.err){if(!ar){this.UpdateLinks(false);$.callback(this,function(av){$.setReturnValue(av)})}else{$.setReturnValue({err:false})}}})}function x(){var au=false;var ar=this.GetWS().length;var av=0;var aw;ai.call(this,-1);var at=function(){this.GetNextRecord();$.callback(this,function(ax){aw=ax.retVal;au=ax.err;if(!ax.err&&aw){this.InsertWorkSet(ar,aw);ar++}if(ar<this.GetWorkSetSize()&&!au){at.call(this)}})};if(ar<this.GetWorkSetSize()){at.call(this)}$.callback(this,function(){if(au){au=false}var ax=this.GetWS().length;if(ax>0&&ax<this.GetWorkSetSize()){aw=this.FindWorkSet(0,aw);if(aw){var ay=function(){this.GetPriorRecord();$.callback(this,function(az){aw=az.retVal;au=az.err;if(!az.err&&aw){av++;this.InsertWorkSet(0,aw)}if(this.GetWS().length<this.GetWorkSetSize()&&!au){ay.call(this)}})};if(ax<this.GetWorkSetSize()){ay.call(this)}}}$.callback(this,function(){ai.call(this,(this.GetWS().length>0)?av:-1);$.callback(this,function(){var aF=this.GetNotifyInfoArray();var az=[];var aE=aF[0];if(aE){var aC=this.GetActiveRow();var aB;az=aE.GetAppletArray();var aD=az.length;for(var aA=0;aA<aD;aA++){aB=az[aA];if(aC===-1||aC===0||(this.GetWS().length<aE.GetSize(aB))){aE.SetBegRow(0,aB)}else{if((aC+aE.GetSize(aB))<=this.GetWS().length){aE.SetBegRow(aC,aB)}else{aE.SetBegRow(this.GetWS().length-aE.GetSize(aB),aB)}}aE.SetCurrRow(aE.GetBegRow(aB),aB)}}this.NotifyNewData()})})})}function U(au){if(this.IsVBC()||this.GetIsRelatedBC()){var at;if(this.IsVBC()){at=this.GetVBCRecords()}else{at=this.GetRelatedBCRecords()}var aF=at.length;for(var ax=0;ax<aF;ax++){if(at[ax].Id===au){$.setReturnValue({err:false,retVal:at[ax]});return}}$.setReturnValue({err:true,retVal:""});return}var aw=this.GetActivatedFieldList();var aA=aw.length;var aG=SiebelApp.OfflineUtils.RemoveNonAlphaChars(this.GetName());var aD=[];var az=0;for(var aE=0;aE<aA;aE++){var av=aw[aE];av=SiebelApp.OfflineUtils.RemoveNonAlphaChars(av);if(L.DoesFieldExist(aG,av)){aD[az]=av;az++}}var ay,aC=[];ay=D.get("SWE_ROW_ID_FIELD")+" = "+au;aC.push(ay);var ar=n.call(this,SiebelApp.OfflineUtils.RemoveNonAlphaChars(this.GetName()));if(ar){aC.push(ar)}var aB=SiebelApp.SqlBuilder.SelectRecordPopulateWS(aG,aC,aD);L.SelectRecord(aB,true);$.callback(this,function(aH){if(aH.err){$.setReturnValue({err:aH.err,retVal:""})}else{$.setReturnValue({err:false,retVal:(aH.retVal)[0]})}})}an.prototype.SetFullSearchSpec=function(){if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().StartTime("BusComp.prototype.SetSearchSpec ")}var ar=null;if(!aq.IsEmpty(this.GetSearchSpec())||!aq.IsEmpty(this.GetDefn().searchSpec)){ar=aq.IsEmpty(this.GetDefn().searchSpec)?"":this.GetDefn().searchSpec;if(aq.IsEmpty(this.GetDefn().searchSpec)){ar+=this.GetSearchSpec();
ar=SiebelApp.Query.GetSearchSpec(ar,this)}else{var at=this.GetSearchSpec();ar=SiebelApp.Query.GetSearchSpec(ar,this);if(!aq.IsEmpty(at)){at=SiebelApp.Query.GetSearchSpec(this.GetSearchSpec(),this);if(!aq.IsEmpty(ar)){ar=[ar];if(!aq.IsEmpty(at)){ar.push(at)}}else{if(!aq.IsEmpty(at)){ar=at}}}}}return((aq.IsEmpty(ar))?[]:ar)};an.prototype.SetFldSearchSpec=function(au,ar){if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().StartTime("BusComp.prototype.SetFldSearchSpec ")}var aw;var av="";var at;if((au===F.get("SSA_PRIMARY_FIELD"))&&this.GetLinkDef()&&(!aq.IsEmpty(this.GetLinkDef().primeIdFieldName))&&this.GetParentBusComp()){if(!aq.IsEmpty(ar)){if(ar==="Y"){aw=ab}else{aw=d}if(!aq.IsEmpty(aw)){au=D.get("SWE_ROW_ID_FIELD");this.GetParentBusComp().FieldValue(this.GetLinkDef().primeIdFieldName);$.callback(this,function(){aw+=av;ar=aw;at=this.GetFieldMap()[au];if(at){if(!aq.IsEmpty(ar)){at.SetSearchSpec(ar)}}if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("BusComp.prototype.SetFldSearchSpec ")}})}}}else{at=this.GetFieldMap()[au];if(at){at.SetSearchSpec(ar)}}this.NotifyNewQuerySpec(au)};an.prototype.GetFldSearchSpec=function(ar){var at=(this.GetFieldMap())[ar];if(at){return(at.GetSearchSpec())}};an.prototype.GetSearchExpr=function(){return(this.GetSearchSpec())};an.prototype.SetSearchExpr=function(ar){this.SetSearchSpec(ar)};an.prototype.NotifyNewQuerySpec=function(au){var av;if(this.IsNotifyEnabled()){var ax=this.GetNotifyInfoArray();var ar=ax.length;for(var at=0;at<ar;at++){av=ax[at];if(av){var aw=av.GetBusCompNotify();if(aw){aw.NotifyNewQuerySpec(au)}}}}};an.prototype.EmptyWorkSet=function(){var ar=this.GetWS();for(var at=(ar.length-1);at>=0;at--){this.DeleteWorkSet(at)}};an.prototype.SetSortSpecification=function(){var aw=this.GetDefn().SortSpec;if(aq.IsEmpty(aw)){return[]}aw=aw.split(",");var av;var ar;var au;for(var at=0;at<aw.length;at++){av="";if(aw[at].indexOf("(")!==-1){av=aw[at].substr(0,aw[at].indexOf("(")).trim()}else{av=aw[at].trim()}if(this.GetDefn().Fields[av].DataType==="10"||this.GetDefn().Fields[av].DataType==="12"||this.GetDefn().Fields[av].DataType==="13"){ar=av.replace(/\s+/g,"");au="";au=this.DateFormatConverter(au,ar);aw[at]=aw[at].replace(av,au);aw[at]=aw[at].trim()}else{aw[at]=SiebelApp.OfflineUtils.RemoveNonAlphaChars(aw[at])}aw[at]=aw[at].replace("(DESCENDING)"," DESC");aw[at]=aw[at].replace("(DESC)"," DESC");aw[at]=aw[at].replace("DESCENDING"," DESC");aw[at]=aw[at].replace("DESC"," DESC");aw[at]=aw[at].replace("(ASCENDING)"," ASC");aw[at]=aw[at].replace("(ASC)"," ASC");aw[at]=aw[at].replace("ASCENDING"," ASC");aw[at]=aw[at].replace("ASC"," ASC")}return aw};an.prototype.DateFormatConverter=function(at,ar){return"substr("+ar+",7,4)||substr("+ar+",1,2)||substr("+ar+",4,2)||substr("+ar+",12,2)||substr("+ar+",15,2)||substr("+ar+",18,2)"};an.prototype.WSHomeX=function(au,ar){var av=this.GetNotifyInfoArray();var at=av[au];if(au>=av.length||aq.IsEmpty(at)){return}at.SetCurrRow(at.GetBegRow(ar),ar);this.CheckActiveRow()};an.prototype.SetWorkSetSizeX=function(aM,ar,at,aH){var aI=this.IsNotifyEnabled();var az=false;var aD=h.call(this);var aK=this.GetNotifyInfoArray();var av=aK[aM];var aE=aK.length;var aw=0;var aG=false;var aL;var aC=0;var aA=this.GetCursor();var aB=this.GetWorkSetSize();at=(at===undefined)?true:at;if(aM>=aE||aK[aM]===null){alert("SSAOMErrNotifyInfo");if(!at&&aI){this.EnableNotify()}return}if(!at&&aI){this.DisableNotify()}az=this.CheckActivation();var ax=av.GetAppletArray();var ay=ax.length;var aF;if(ar>aB){if(aD!==-1){aL=this.FindWorkSet(this.GetWS().length-1)}var au=function(){this.GetNextRecord();$.callback(this,function(aO){aL=aO.retVal;var aN=aO.err;if(!aO.err&&aL){this.InsertWorkSet(this.GetWS().length,aL)}if(h.call(this)!==-1&&!aN&&this.GetWS().length<ar){au.call(this)}})};if(aD!==-1&&this.GetWS().length<ar){au.call(this)}$.callback(this,function(){aD=h.call(this);if(aD!==-1&&this.GetWS().length>0&&this.GetWS().length<ar){aL=this.FindWorkSet(0);if(aL){var aN=function(){this.GetPriorRecord(ar);$.callback(this,function(aP){aL=aP.retVal;var aO=aP.err;if(!aO&&aL){this.InsertWorkSet(0,aL);aC++}if(h.call(this)!==-1&&!aO&&this.GetWS().length<ar){aN.call(this)}else{if(aC){this.SetActiveRow(aD+aC);$.callback(this,function(){aD=h.call(this);aG=true})}}})};aN.call(this)}}$.callback(this,function(){av.SetSize(ar,aH);this.SetWSSize(ar);aB=ar})})}else{if(ar<aB&&av.GetSize(aH)===aB){av.SetSize(ar,aH);aw=0;for(var aJ=0;aJ<ay;aJ++){aF=ax[aJ];if(av.GetSize(aF)>aw){aw=av.GetSize(aF)}}}else{aw=aB}if(aw<aB){while(this.GetWS().length>h.call(this)+1&&this.GetWS().length>aw){this.DeleteWorkSet(this.GetWS().length-1);aA[0]--}while(this.GetWS().length>aw){this.DeleteWorkSet(0)}if(aw<=h.call(this)){ai.call(this,this.GetWS().length-1);aD=h.call(this);aG=true}this.SetWSSize(aw);aB=aw;av.SetBegRow(0,aH);av.SetCurrRow(0,aH);av.SetSize(ar,aH);if(this.IsNotifyEnabled()&&av.GetBusCompNotify()){av.GetBusCompNotify().NotifyNewData()}}else{av.SetSize(ar,aH)}}$.callback(this,function(){for(var aN=0;aN<ay;aN++){aF=ax[aN];var aO=false;if(aD!==-1&&(aD<av.GetBegRow(aF)||aD>=(av.GetBegRow(aF)+av.GetSize(aF)))){if(this.GetWS().length<av.GetSize(aF)){av.SetBegRow(0,aF)}else{if(aD+av.GetSize(aF)<=this.GetWS().length){av.SetBegRow(aD,aF)}else{av.SetBegRow(this.GetWS().length-av.GetSize(aH),aF)}}av.SetCurrRow(av.GetBegRow(aH),aF);aO=true}if((av.GetBegRow(aF)+av.GetSize(aF)>aB)&&(aB>=av.GetSize(aF))){av.SetBegRow(aB-av.GetSize(aH),aF);av.SetCurrRow(av.GetBegRow(aH),aF);aO=true}if(av.GetBusCompNotify()&&!az&&(at?true:av!==av)){if(aO){av.GetBusCompNotify().NotifyNewData()}else{if(aG){av.GetBusCompNotify().NotifyNewActiveRow()}}}}if(aD!==-1){aL=this.FindWorkSet(aD)}if(aG){this.OnActiveRowChanged()}if(!at&&aI){this.EnableNotify()}})};an.prototype.AddReference=function(){this.AddRef();this.GetRef()};e.EndLife=function(){var av=this.GetNotifyInfoArray();var ar=this.GetNotifyInfoArray().length;for(var au=0;au<ar;au++){var at=av[au];if(at){this.UnRegNotifyObj(au)}}this.ResetNotifyArr();this.ResetInterface();l.EndLife.call(this)};an.prototype.UnRegNotifyObj=function(av){var ar;var au=this.GetNotifyInfoArray();if(av<au.length){ar=au[av];if(ar){var at=ar.GetBusCompNotify();if(at){at.Remove(this,av)}ar=null}au.splice(av,1)}};an.prototype.RegNotifyObj=function(ar,au){var av;var aw;av=new SiebelApp.S_App.NotifyInfo();av.SetBusCompNotify(ar);av.SetAppletArray(au);var at=this.GetActiveRow();if(at>=0){av.SetBegRow(0,au);av.SetCurrRow(at,au)}av.SetSize(this.GetWorkSetSize(),au);aw=this.GetNotifyInfoArray().length;this.AddNotifyInfoArray(av);if(ar){ar.Add(this,aw)}return aw};an.prototype.DeactivateFields=function(){var aw=this.GetDeActableFieldList();var ar=aw.length;var av=this.GetActFieldList();var au=this.GetActivatedFieldList();var ay=this.GetFieldMap();var at=this.GetFieldList();for(var ax=0;ax<ar;ax++){if(av[aw[ax]]){at.splice(at.indexOf(av[aw[ax]]),1);delete av[aw[ax]]}if(au.indexOf(aw[ax])!==-1){au.splice(au.indexOf(aw[ax]),1)}if(ay[aw[ax]]){delete ay[aw[ax]]}}};an.prototype.UpdateDeactivateableFldList=function(au){var at=this.GetDeActableFieldList();
if(au){var ar=au.length;var aw=this.GetFieldMap();for(var av=0;av<ar;av++){if(at.indexOf(au[av])===-1&&!aw[au[av]]){at.push(au[av])}}}};an.prototype.ActivateFields=function(){if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().StartTime("BusComp.prototype.ActivateFields ")}var aC=[];var aA=[];var at=[];var aH=[];var az=[];var av=[];var aw=0;var ay={};var ax=[];if(!this.IsBCFldsActivated()){this.SetBCFldsActivated(true);if(aq.IsTrue(this.GetDefn().ForceActive)){var ar=this.GetDefn().Fields;for(var aF in ar){if(ar[aF]){aC[aw++]=aF}}this.ActivateFieldList(aC)}else{at=this.GetFieldList();aC=at;var aG=aC.length;if(aG>0){for(var aB=0;aB<aG;aB++){aA[aB]=SiebelApp.S_App.LookupStringCache(aC[aB])}this.ActivateFieldList(aA)}aH=SiebelApp.S_App.Model.GetSystemFields();if(aH){this.ActivateFieldList(aH)}var au=this.GetReqFieldsHasDefault();if(au){this.ActivateFieldList(au)}if(az){this.ActivateFieldList(az)}av=this.GetAdminFields();if(av.length>0){this.ActivateFieldList(av)}var aD=this.GetLinkDef();if(aD){if(aD.primeIdFieldName){this.ActivateField(aD.primeIdFieldName)}}aw=0;ay=this.GetDefn();for(var aE in ay.Fields){if(aq.IsTrue(ay.Fields[aE].ForceActive)){ax[aw++]=aE}}if(ax.length>0){this.ActivateFieldList(ax)}}}};an.prototype.ActivateField=function(ar){var at=[];if(ar instanceof Array){this.ActivateFieldList(ar)}else{at=[ar];this.ActivateFieldList(at)}};an.prototype.ActivateFieldList=function(aw,aI){if(aw){var aC=aw.length;if(aC>0){var aG,aB;for(var ax=0;ax<aC;ax++){aG=aw[ax];aB=this.GetFieldDefn(aG);if(aB){if(!(this.GetFieldMap()[aG])){this.AddActField(aG)}if(!aI){var aF=aB.pickMap;if(aF){var az=aB.pickMap.length;var aE=[];var ar;var av=false;for(var aA=0;aA<az;aA++){ar=[aF[aA].FldName][0];if(ar!=="{"&&ar!==""){if(!this.GetFieldMap()[ar]){aE.push(ar);av=true}}}if(av){this.ActivateFieldList(aE,true)}}}if(aB.IsCalculated){var au=aB.CalExpr;if(!aq.IsEmpty(au)){this.ActivateSubList(aB.cFldArray)}}var aD=aB.PreDefault;if(!aq.IsEmpty(aD)){var ay=SiebelApp.Query.GetFieldsFromExp("Pre",aD);if(ay[0]!==undefined){this.ActivateSubList(ay)}}var at=aB.PostDefault;if(!aq.IsEmpty(at)){var aH=SiebelApp.Query.GetFieldsFromExp("Post",at);if(aH[0]!==undefined){this.ActivateSubList(aH)}}if(aB.bDepArray.length>0){this.ActivateSubList(aB.bDepArray)}if(aB.fDepArray.length>0){this.ActivateSubList(aB.fDepArray)}}else{m.CcfLogEvent([M,52,0,27,aG,this.GetName()])}}}}};an.prototype.ActivateSubList=function(au){if(au){var aw=au.length,av=false,ar=[];for(var at=0;at<aw;at++){if(!this.GetFieldMap()[au[at]]){ar.push(au[at]);av=true}}if(av){this.ActivateFieldList(ar)}}};an.prototype.GetAdminFields=function(){var ar=[];return ar};an.prototype.InterpolateBCState=function(ar){I.call(this);$.callback(this,function(au){var at=au.retVal;ar.AddChild(at)})};an.prototype.CanWriteRecord=function(){};an.prototype.CanUpdateRecord=function(){};an.prototype.CanAssociate=function(){var ar=false;var au;var aw;var at=this.GetLinkDef();var ax=this.GetParentBusComp();if(!this.IsExecuted()){return false}if(!at){return false}if(!this.GetAdminMode()&&this.IsParentReadOnlyFieldSet()){return false}aw=this.GetLinkSrcFieldName();if(ax&&aw){if(aw==="Id"){if(o.call(ax,this.GetName())){return false}}else{var av=ax.FindWorkSet(h.call(ax));if(av){au=av[aw];if(aq.IsEmpty(au)){return false}}}}ar=this.GetAdminMode()||!(at&&at.NoAssociate);return ar};an.prototype.CanQuery=function(){return true};an.prototype.CanMergeRecords=function(){return true};an.prototype.CanDelete=function(){if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().StartTime("BusComp.prototype.CanDelete ")}var ar=false;var av;var at=false,au=false;if(this.GetAspectBCReadFld()){this.FieldValue(this.GetAspectBCReadFld());$.callback(this,function(aw){av=aw.retVal;if(av){if(av==="Y"){$.setReturnValue({err:false,retVal:false});at=true;return}}})}$.callback(this,function(){if(!at){if(!this.CheckActiveRow()){$.setReturnValue({err:false,retVal:false});return}if(this.IsNewRecordPending()){$.setReturnValue({err:false,retVal:false});return}var az=this.GetLinkDef();var ay=h.call(this);if(!this.IsNewRecordPending()){if(!this.IsLocked()){$.setReturnValue({err:false,retVal:false});return}if((this.GetAdminMode()&&this.m_bAdminNoDelete)){if(!az||az.interTableName||az.InterChildDelete){$.setReturnValue({err:false,retVal:false});return}}if(this.GetFldNoDelete()){var ax=null;ax=this.FindWorkSet(ay);this.FieldValue(ax,this.GetFldNoDelete());au=true;$.callback(this,function(aF){if(aF.err){$.setReturnValue(aF)}else{var aE=aF.retVal;if(aE==="Y"&&(!az||az.interTableName)){$.setReturnValue({err:false,retVal:false});return}}})}}if(!au){if(!this.IsExecuted()||ay<0){$.setReturnValue({err:false,retVal:ar});return}if(!this.GetAdminMode()&&(this.IsBCReadOnlyFieldSet()||this.IsParentReadOnlyFieldSet())){$.setReturnValue({err:false,retVal:ar});return}var aw=this.GetParentBusComp();if(this.GetBusCompType()===(SiebelApp.Offlineconstants.get("BCTYPE_PICKLIST"))){var aD=this.GetMasterBC()?this.GetMasterBC().GetFieldDefn(this.GetPickSrcField()):null;if(aD){var aC=aD.PickListName;var aA=SiebelApp.S_App.Model.GetPickListDef(aC);ar=(!(aA.NoDelete)&&!this.GetMasterBC().IsInQueryState())}$.setReturnValue({err:false,retVal:ar});return}var aB=this.GetLinkSrcFieldName();if(aw&&aB&&aB==="Id"){if(o.call(aw,this.GetName())){$.setReturnValue({err:false,retVal:ar});return}}if((az&&az.NoDelete)){ar=this.GetAdminMode()&&!az.interTableName&&!az.NoInterDelete}else{ar=true}if(ar){ar=this.GetAdminMode()||!(this.GetDefn().NoUpdate)||(az&&!az.interTableName)}if(!ar||this.GetAdminMode()){$.setReturnValue({err:false,retVal:ar});return}if(az&&az.interTableName&&!az.NoInterDelete){$.setReturnValue({err:false,retVal:ar});return}if(this.GetDefn().OwnerDel){$.setReturnValue({err:"",retVal:false});return}else{$.setReturnValue({err:false,retVal:ar});if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("BusComp.prototype.CanDelete ")}}}}})};an.prototype.IsLocked=function(){return true};an.prototype.CanDeleteX=function(){return true};an.prototype.CanDeferDelete=function(){return false};an.prototype.HasAssocList=function(){var ar=this.GetLinkDef();return(this.CanAssociate()&&ar&&!aq.IsEmpty(ar.interTableName))};an.prototype.CanUpdateField=function(av){if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().StartTime("BusComp.prototype.CanUpdateField ")}var at;var au;if(this.CanInsert()&&this.IsInsertPending()){au=true}else{this.CanUpdateX(true);$.callback(this,function(aw){au=aw.retVal})}var ar=function(){if(!au){$.setReturnValue({err:false,retVal:false});return}at=this.GetFieldMap()[av];if(!at){$.setReturnValue({err:false,retVal:au});return}this.IsFieldReadOnly(at);$.callback(this,function(aw){if(aw.retVal){au=false;$.setReturnValue({err:false,retVal:au});return}else{$.setReturnValue({err:false,retVal:au});if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("BusComp.prototype.CanUpdateField ")}}})};$.callback(this,function(){ar.call(this)})};an.prototype.FinishRecord=function(){};an.prototype.CheckActiveRow=function(){var ar=h.call(this);
if(ar>=0){return(true)}else{return(false)}};e.UndoRecord=function(){if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().StartTime("BusComp.prototype.UndoRecord ")}this.GetIdValueX();this.SetNewTxn("");this.SetTxnId("");this.SetEmptyFNm();this.SetOpType("");$.callback(this,function(at){if(!at.err){var av=at.retVal;if(!this.IsCommitPending()&&!this.IsDeletePending()){return}if(this.IsDeletePending()){this.WriteRecord();$.callback(this,function(aw){this.ClearUpdate();$.setReturnValue(aw)});return}if(this.IsInsertPending()){this.DeleteRecordX(av);$.callback(this,function(aw){$.setReturnValue(aw);return})}var ar=function(){var aw=this.GetOrigRecVal();if(aw){var ay=this.GetWS();var ax=this.GetActiveRow();if(ay&&ay[ax].Id===aw.Id){ay[ax]=aw}this.SetOrigRecVal("")}this.SetCommitPending(false);this.SetNewRecPending(false);this.OnActiveRowChanged();this.EventChangeRecord();this.NotifyNewRecordData()};var au;au=this.GetParentBusComp();if(au&&au.IsInsertPending()){au.UndoRecord();$.callback(this,ar)}else{ar.call(this)}}if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("BusComp.prototype.UndoRecord ")}})};an.prototype.FindWorkSet=function(au){var at={};var ar=this.GetWS();if(au<ar.length){at=ar[au]}else{at=null}return at};an.prototype.SQLUpdateRecord=function(){};an.prototype.SQLCommitPending=function(){};an.prototype.FieldValue=function(ax,aw){if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().StartTime("BusComp.prototype.FieldValue")}var av=CCFMiscUtil_CreatePropSet();av.SetProperty("inputParam1",ax);var ar={};ar[P]=this.GetName();ar[v]=C;ar[T]="FieldValue";ar[i]=this;av.SetProperty("FieldName",ax);av.SetProperty("inputParam2",aw);var au={};var at=[];ar[ap]=a;SiebelApp.S_App.Model.InvokeRegisteredSvc(ar,av);$.callback(this,function(aF){if(!aF.err){au=aF.retVal;if(au.Outputargs&&(au.Outputargs).GetProperty("Invoked")&&(au.Outputargs).GetProperty("Invoked").toString()==="true"){var aL=(au.Outputargs).GetProperty("RetVal");var aD=aF.err;if(aL){$.setReturnValue({err:aD,retVal:aL})}else{$.setReturnValue({err:aD,retVal:""})}if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("BusComp.prototype.FieldValue")}return}if(au.Outputargs&&av){(au.Outputargs).SetType(a);av.AddChild(au.Outputargs)}var aB=null;if(!aw&&this.CheckActiveRow()){var aE=h.call(this);aw=this.FindWorkSet(aE)}if(aw){var aK=false;var aA=ax;var aJ={};aJ=this.GetFieldMap()[aA];if(aJ){if(this.IsActiveFieldListDirty()&&!this.IsInsertPending()&&!aJ.IsCalc()&&!(aJ.IsSystemField())&&this.GetDefn().Dstnct){aK=true}}else{if(this.IsActiveFieldListDirty()&&!this.IsInsertPending()){aK=true}}if(!aK){if(ax==="SSA Primary Field"){if(!this.GetLinkDef()||this.GetLinkDef().primeIdFieldName===null){aB=null}else{var aC;var az=function(){this.FieldValue(D.get("SWE_ROW_ID_FIELD"),aw);$.callback(this,function(aN){var aM=aN.retVal;aB=(aM===aC)?"Y":"N"})};if(this.GetParentBusComp()){this.GetParentBusComp().FieldValue(this.GetLinkDef().primeIdFieldName);$.callback(this,function(aM){aC=aM.retVal;az.call(this)})}else{az.call(this)}}}else{var ay;var aI=null;if(!aw){if(aj){var aH;aI=this.GetFieldDefn(D.get("SWE_ROW_ID_FIELD"));this.FieldValue(aI.GetName());$.callback(this,function(aM){ay=aM.retVal;this.FieldValue(D.get("SWE_ROW_ID_FIELD"),aj);$.callback(this,function(aN){aH=aN.retVal;if(ay===aH){aw=aj}})})}}$.callback(this,function(){if(!aJ||aJ.IsInactive(1)){at.push(ax);at.push(this.GetName());SiebelApp.S_App.OfflineErrorObject.SetErrorMsg("SSAOMErrFieldInActive",at,"","","",0,73);$.setReturnValue({err:"SSAOMErrFieldInActive",retVal:""});return}if(aw){aB=aw[SiebelApp.OfflineUtils.RemoveNonAlphaChars(ax)]}if(!aB){if(aJ.IsCalc()&&this.GetFieldDefn(ax).CalExpr){if(!this.GetFieldDefn(ax).CalcQuery){var aM=SiebelApp.Query.Parse(this.GetFieldDefn(ax).CalExpr);this.GetFieldDefn(ax).CalcQuery=aM}if(this.GetFieldDefn(ax).cDepArray){var aP=this.GetFieldDefn(ax).cDepArray;var aO=aP.length;var aN=0;var aQ=function(){this.FieldValue(aP[aN]);$.callback(this,function(aR){if(!aR.err){u.call(this,aP[aN],aR.retVal);aw[m.RemoveNonAlphaChars(aP[aN])]=aR.retVal}aN++;if(aN<aO){aQ.call(this)}})};if(aN<aO){aQ.call(this)}}$.callback(this,function(){aB=SiebelApp.Query.Evaluate(this.GetFieldDefn(ax).CalcQuery,this,null,aw);if(aw&&ax==="SSA Primary Field"){aw[SiebelApp.OfflineUtils.RemoveNonAlphaChars(ax)]=aB}else{if(!aw){this.GetFieldValue(ax)}}})}}})}}else{at.push(ax);at.push(this.GetName());SiebelApp.S_App.OfflineErrorObject.SetErrorMsg("SSAOMErrFieldInActive",at,"","","",0,73);$.setReturnValue({err:"SSAOMErrFieldInActive",retVal:""});return}}else{SiebelApp.S_App.OfflineErrorObject.SetErrorMsg("BCErrNoActiveRow","","","","",0,73);if(!aq.IsEmpty(ax)&&!aq.IsEmpty(this.GetFieldDefn(ax))){aB=SiebelApp.Query.Parse(this.GetFieldDefn(ax).CalExpr,aw)}$.setReturnValue({err:true,retVal:""});return}var aG=function(){ar[ap]=s;av.SetProperty("RetVal",aB);SiebelApp.S_App.Model.InvokeRegisteredSvc(ar,av);$.callback(this,function(aM){au=aM.retVal;if((au.Outputargs)&&(au.Outputargs).GetProperty("Invoked")&&(au.Outputargs).GetProperty("Invoked").toString()==="true"){aB=(au.Outputargs).GetPropertyAsStr("RetVal");if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("BusComp.prototype.FieldValue")}}$.setReturnValue({err:false,retVal:aB})})};$.callback(this,aG)}else{$.setReturnValue(aF)}})};an.prototype.IsInInsertMode=function(){return true};an.prototype.Evaluate=function(){return true};an.prototype.IsActiveFieldListDirty=function(){var ar=this.GetExtObjProp("m_bActiveFieldListDirty");if(!ar){this.SetExtObjProp("m_bActiveFieldListDirty",true)}return(this.GetExtObjProp("m_bActiveFieldListDirty"))};an.prototype.SetActiveFieldListDirty=function(ar){this.SetExtObjProp("m_bActiveFieldListDirty",ar)};an.prototype.SetFieldValueX=function(aC,au,aB,at,av){if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().StartTime("BusComp.prototype.SetFieldValueX")}var az;if(!this.GetFieldDefn(aC)){m.CcfLogEvent([M,55,0,9,aC,this.GetName()]);az=[];az.push(aC);SiebelApp.S_App.OfflineErrorObject.SetErrorMsg("BCErrNoSuchField",az,"","","",0,9);$.setReturnValue({err:"BCErrNoSuchField",retVal:false});return}if(aB===undefined||aB===null){aB=false}if(at===undefined||at===null){at=false}if(av===undefined||av===null){av=false}var aA=this.GetField(aC);if(aA){var ar=aA.GetDataType();if(ar==="utcdatetime"||ar==="datetime"||ar==="date"||ar==="time"){au=SiebelApp.S_App.OfflineLocaleObject.FormattedToString(ar,au)}}var ay;var ax=CCFMiscUtil_CreatePropSet();var aw={};az=[];ax.SetProperty("inputParam1",aC);ax.SetProperty("inputParam2",au);ax.SetProperty("inputParam3",aB);ax.SetProperty("inputParam4",at);ax.SetProperty("inputParam5",av);aw[P]=this.GetName();aw[v]=C;aw[T]="SetFieldValue";aw[i]=this;aw[ap]=a;SiebelApp.S_App.Model.InvokeRegisteredSvc(aw,ax);$.callback(this,function(aG){if(!aG.err){ay=aG.retVal;if(ay.Outputargs){if((ay.Outputargs).GetPropertyAsStr("Invoked")==="true"){$.setReturnValue({err:aG.err,retVal:ay.Outputargs});if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("BusComp.prototype.SetFieldValueX")
}return}(ay.Outputargs).SetType(a);ax.AddChild(ay.Outputargs)}if(!this.CheckActiveRow()){R.call(this,aC);$.setReturnValue({err:true,retVal:false});return}var aE=null,aF=false,aH=null;aE=this.ValidateFieldDef(aC);if(!aE){R.call(this,aC);$.setReturnValue({err:true,retVal:false});return}var aD=this.GetFieldMap()[aC];if(!aD){m.CcfLogEvent([M,55,0,9,aC,this.GetName()])}if(aD.IsInactive(1)){$.setReturnValue({err:false,retVal:false});az=[];az.push(aC);az.push(this.GetName());SiebelApp.S_App.OfflineErrorObject.SetErrorMsg("SSAOMErrFieldInActive",az,"","","",0,9);$.setReturnValue({err:"SSAOMErrFieldInActive",retVal:false});aa.call(this,aF,aC);return}if(!aq.IsEmpty(au)){aH=$.trim(au);au=aH}else{aH=""}if(!aD.IsCalc()&&!aB&&!aq.IsEmpty(aH)){if(aH.length>aD.GetLength()){az.push(aC);az.push(aD.GetLength());SiebelApp.S_App.OfflineErrorObject.SetErrorMsg("SSAOMErrDataTooLong",az,"","","",0,9);R.call(this,aC);$.setReturnValue({err:"SSAOMErrDataTooLong",retVal:false});return}}this.FieldValue(aC);$.callback(this,function(aK){if(!aK.err){var aJ=aK.retVal;if(!aD.AreValuesEqual(au,aJ)){aa.call(this,aF,aC);$.setReturnValue({err:false,retVal:false});return}var aI=true;if(!aB){W.call(this,aD,aC,aH,au,aF);$.callback(this,function(aL){aL=aL.retVal;aI=aL.bContinue;if(aI){aF=aL.bPicked;H.call(this,aC,aF,au);$.callback(this,function(aM){if(!aM.err){am.call(this,aC,aF,aw,ax);$.callback(this,function(aN){$.setReturnValue(aN)})}else{$.setReturnValue(aM)}})}else{$.setReturnValue(aL.retObj)}})}else{if(this.IsDeletePending()){this.WriteRecord();$.callback(this,function(aL){if(aL.err){$.setReturnValue(aL)}else{H.call(this,aC,aF,au)}})}else{H.call(this,aC,aF,au)}$.callback(this,function(aL){if(!aL.err){am.call(this,aC,aF,aw,ax);$.callback(this,function(aM){$.setReturnValue(aM)})}else{$.setReturnValue(aL)}})}}else{$.setReturnValue(aK)}})}else{$.setReturnValue(aG)}})};function am(av,at,ar,au){this.OnSetFieldValue(av);aa.call(this,at,av);ar[ap]=s;au.SetProperty("RetVal",true);SiebelApp.S_App.Model.InvokeRegisteredSvc(ar,au);$.callback(this,function(ax){if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("BusComp.prototype.SetFieldValueX ")}var aw=ax.err?ax.retVal:true;$.setReturnValue({err:false,retVal:aw})})}function W(ar,az,ay,at,aw){var au={};au.bContinue=true;au.bPicked=aw;var av=[];var ax;if(this.IsFieldReadOnly(ar)){av.push(az);SiebelApp.S_App.OfflineErrorObject.SetErrorMsg("SSASqlErrFieldReadOnly",av,"","","",0,9);R.call(this,az);ax={err:"SSASqlErrFieldReadOnly",retVal:false};au.bContinue=false;au.retObj=ax;$.setReturnValue({err:true,retVal:au});return}this.ValidatePickValue(az,ay);$.callback(this,function(aA){if(aA.err){R.call(this,az);au.bContinue=false;au.retObj=aA;au.bPicked=aw;$.setReturnValue({err:true,retVal:au})}else{aw=aA.retVal;if(aw){aa.call(this,aw,az);au.bContinue=false;au.retObj=aA;au.bPicked=aw;$.setReturnValue({err:false,retVal:au})}else{aw=this.ValidateAssocValue(az,ay);if(aw){aa.call(this,aw,az);au.bContinue=false;au.retObj={err:false,retVal:false};au.bPicked=aw;$.setReturnValue({err:false,retVal:au})}else{au.bContinue=true;au.retObj={err:false,retVal:false};au.bPicked=aw;$.setReturnValue({err:false,retVal:au})}}}})}function H(aA,av,at){var ar;var aB;var aw=[];var ax=null;var ay=[];if(aA==="SSA Primary Field"){ax=this.GetLinkDef();aB=ax.primeIdFieldName;if(ax===null||aq.IsEmpty(aB)){aw.push(aA);SiebelApp.S_App.OfflineErrorObject.SetErrorMsg("BCErrNoSuchField",aw,"","","",0,9);R.call(this,av,aA);$.setReturnValue({err:"BCErrNoSuchField",retVal:false})}else{this.GetIdValueX();$.callback(this,function(aD){if(!aD.err){ar=aD.retVal;var aC=this.GetParentBusComp();if(!aC.IsCommitPending()){aC.UpdateRecordX()}$.callback(this,function(){aC.SetFieldValueX(aB,ar,false,true)})}})}}else{var au=this.GetFieldMap()[aA];if(au){if(!au.IsSystemField()&&!au.IsCalc()&&(au.GetTableName()==="m_pSqlBCDef_m_tableName")){var az;this.FieldValue(aA);$.callback(this,function(aD){if(!aD.err){az=aD.retVal;if(!az||(at!==az)){var aC=true;this.SetUpdated(aC)}}})}}else{m.CcfLogEvent([M,55,0,9,aA,this.GetName()])}$.callback(this,function(){ay.push(au);if(au.IsCalc()&&!aq.IsEmpty(au.GetCalcExpr())&&!aq.IsEmpty(au.GetPickList())){aw.push(aA);SiebelApp.S_App.OfflineErrorObject.SetErrorMsg("SSASqlErrFieldReadOnly",aw,"","","",0,9);$.setReturnValue({err:"SSASqlErrFieldReadOnly",retVal:false})}else{u.call(this,aA,at);$.callback(this,function(aD){var aC=aD.retVal;S.call(this,aA,aC);$.setReturnValue(aD)})}})}}function u(av,au){var at=this.GetFieldMap()[av].GetName();var aD;var aJ=this.GetFieldList();var aH=this.GetWS();var aC=h.call(this);var ay={};for(var aE=0;aE<aJ.length;aE++){aD=aJ[aE];var aI=SiebelApp.S_App.LookupStringCache(aD);ay[SiebelApp.OfflineUtils.RemoveNonAlphaChars(aI)]=aH[aC][SiebelApp.OfflineUtils.RemoveNonAlphaChars(aI)]}var aw;for(var ax=0;ax<aJ.length;ax++){aD=aJ[ax];var az=SiebelApp.S_App.LookupStringCache(aD);var aF;aw=SiebelApp.OfflineUtils.RemoveNonAlphaChars(az);ay[aw]=aH[aC][aw];at=at.toString();if(at===aD.toString()){aF=ay[aw];if(aq.IsEmpty(aF)){aF=""}if(aq.IsEmpty(au)){au=""}ay[aw]=au;aH[aC]=ay;var aK=this.GetFieldDefn(av);if(aF!==au&&aK.IsCalculated!=="T"){this.SetLocalFNm(aw);this.SetLocalFVal(aw,au,aF);var aA;var aB;if(!aK.ReadOnly){if(this.GetNewTxn()!==""){aF=""}au=au.replace(/\\/g,"\\3").replace(/\|/g,"\\0").replace(/\^/g,"\\1").replace(/\~/g,"\\2").replace(/&/g,"\\4");aF=aF.replace(/\\/g,"\\3").replace(/\|/g,"\\0").replace(/\^/g,"\\1").replace(/\~/g,"\\2").replace(/&/g,"\\4");var aG=this.GetFieldDefn(av);var ar=(aG.JoinInfo&&aG.JoinInfo.JoinType==="J"&&!(aq.IsTrue(aG.Required)));if(!ar){aA=URLEncode(K.call(this,av,au));aB=URLEncode(K.call(this,av,aF));aF=aB+"|"+aA;aF=this.ReplaceAmp(aF);this.SetOldFNm(av);this.SetOldFVal(av,aF)}}}break}else{continue}}w.call(this,av,this.GetWS()[this.GetActiveRow()]);$.callback(this,function(aL){aL.retVal=ay;aJ=null;aH=null;$.setReturnValue(aL)})}function S(ax,aw){if(!aw){return}var av=this.GetDefn().Fields[ax].fDepArray;if(av){var at=0;var ar=av.length;var au=function(){if(this.GetDefn().Fields[av[at]].IsCalculated==="T"){u.call(this,av[at],"");$.callback(this,function(){at++;if(at<ar){au.call(this)}})}else{at++;if(at<ar){au.call(this)}}};if(at<ar){au.call(this)}}}an.prototype.ValidateFieldDef=function(au){var at;var ar=[];at=this.GetFieldMap()[au];if(at===undefined){ar.push(au);SiebelApp.S_App.OfflineErrorObject.SetErrorMsg("BCErrNoSuchField",ar,"","","",0,74);return(false)}else{return(true)}};function aa(at,ar){if(!at){this.NotifyNewData(ar)}else{this.NotifyNewData(ar)}}function R(ar){if(this.GetActiveRow()>=0){this.NotifyNewData(ar)}}an.prototype.ValidateAssocValue=function(){};an.prototype.IsUndoRedoInProgress=function(){return(false)};an.prototype.AddUndo=function(){};an.prototype.SetUpdated=function(au){var ar=false;var at=false;if(aj){if(aj!==au){SiebelApp.S_App.OfflineErrorObject.SetErrorMsg("SSASqlErrUpdMode","","","","",0,75);$.setReturnValue({err:false,retVal:false});return}}else{this.UpdateRecordX(au);$.callback(this,function(){ar=true})
}$.callback(this,function(){if(ar){if((at=this.WriteRecord())==="SSASqlErrWriteConflict"){at=this.WriteRecord()}if(!at){$.setReturnValue({err:false,retVal:false});return}}$.setReturnValue({err:true,retVal:false})})};an.prototype.UpdateParentRecord=function(ar){if(ar===null||ar===undefined){ar=false}if(!this.IsExecuted()){SiebelApp.S_App.OfflineErrorObject.SetErrorMsg("SSASqlErrNotExecuted","","","","",0,76);$.setReturnValue({err:"SSASqlErrNotExecuted",retVal:false})}if(!ar&&!(this.CanUpdateParent())){SiebelApp.S_App.OfflineErrorObject.SetErrorMsg("SSAOMErrNoUpdate","","","","",0,76);$.setReturnValue({err:"SSAOMErrNoUpdate",retVal:false})}this.UpdateRecordX();$.callback(this,function(){this.SetCommitPending(true);this.m_redoRecordAction="REDO_RECORD_NONE";$.setReturnValue({err:false,retVal:true})})};an.prototype.CanUpdateParent=function(av){var at=false;var au=null;var ar;ar=this.GetParentBusComp();if(av===null||av===undefined){av=true}if(av&&(this.GetSelection())<0){return at}if(this.IsNewRecordPending()){at=true;return at}if(av&&!X&&(this.IsBCReadOnlyFieldSet()||this.IsParentReadOnlyFieldSet())){return at}if(this.GetBusCompType()===(SiebelApp.Offlineconstants.get("BCTYPE_PICKLIST"))){var az=this.GetMasterBC()?this.GetMasterBC().GetFieldDefn(this.GetPickSrcField()):null;if(az){var ay=az.PickListName;var aw=SiebelApp.S_App.Model.GetPickListDef(ay);at=(!(aw.NoUpdate)&&!this.GetMasterBC().IsInQueryState())}return at}var ax=this.GetLinkSrcFieldName();if(av&&ar&&ax==="Id"&&ax){if(o.call(ar,this.GetName())){return at}}au=this.GetLinkDef();at=!(au&&au.NoUpdate);if(at){at=(X||!(this.GetDefn().NoUpdate))}return at};an.prototype.UpdateRecordX=function(at){if(at===null||at===undefined){at=true}if(!this.IsExecuted()){SiebelApp.S_App.OfflineErrorObject.SetErrorMsg("SSASqlErrNotExecuted","","","","",0,68);$.setReturnValue({err:"SSASqlErrNotExecuted",retVal:false});return}var ar=function(){this.SetCommitPending(true);this.FinishRecord();if(this.CheckActiveRow()){var au=this.GetSelection();var av=this.FindWorkSet(au,av)}this.SetExtObjProp("IsEditRecord",false);$.setReturnValue({err:false,retVal:true})};if(!at){this.CanUpdateX();$.callback(this,function(au){if(!au.retVal){SiebelApp.S_App.OfflineErrorObject.SetErrorMsg("SSAOMErrNoUpdate","","","","",0,68);$.setReturnValue({err:"SSAOMErrNoUpdate",retVal:false})}else{ar.call(this)}})}else{ar.call(this)}};an.prototype.GetBatchMode=function(){var ar;return(ar)};an.prototype.IsVBC=function(){if(this.GetDefn().TableName===""){return true}return false};an.prototype.CanUpdateX=function(at,aw){if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().StartTime("BusComp.prototype.CanUpdateX ")}var au;var av=CCFMiscUtil_CreatePropSet();var ar={};av.SetProperty("inputParam1",at);av.SetProperty("inputParam2",aw);ar[P]=this.GetName();ar[v]=C;ar[T]="CanUpdateX";ar[i]=this;ar[ap]=a;SiebelApp.S_App.Model.InvokeRegisteredSvc(ar,av);$.callback(this,function(aC){au=aC.retVal;if(au.Outputargs&&(au.Outputargs).GetProperty("Invoked")&&(au.Outputargs).GetProperty("Invoked").toString()==="true"){var aF=au.Outputargs.GetProperty("RetVal");var ay=false;if(aq.IsTrue(aF)){ay=true}else{ay=false}$.setReturnValue({err:aC.err,retVal:ay});return}if(!aC.err){au=aC.retVal;if(au.Outputargs){(au.Outputargs).SetType(a);av.AddChild(au.Outputargs)}var aG=this.GetPickAppletSrcInfo();if(this.GetIsPopup()){if(!aG&&!this.IsVBC()){$.setReturnValue({err:false,retVal:false});return}}if(aw!==undefined){this.CanUpdateField(aw);$.callback(this,function(aI){$.setReturnValue(aI)})}else{var aE=false;var aH=this.GetParentBusComp();if(at===null||at===undefined){at=true}if(at&&(h.call(this))<0){$.setReturnValue({err:false,retVal:aE});return}if(this.IsNewRecordPending()){aE=true;$.setReturnValue({err:false,retVal:aE});return}if(at&&!X&&(this.IsBCReadOnlyFieldSet()||this.IsParentReadOnlyFieldSet())){$.setReturnValue({err:false,retVal:aE});return}if(this.GetIsPopup()){if(aG&&!this.IsVBC()){var aA=aG.SrcApplet;var ax=aG.SrcAppletFld;aA=SiebelApp.S_App.GetActiveView().GetApplet(aA);var aB=aA.GetBusComp();var az=aB.GetDefn().Fields[ax].PickListName;if(az){az=SiebelApp.Metadata.GetPickListDef(az);$.setReturnValue({err:false,retVal:(!az.NoUpdate&&!aB.IsInQueryState())});return}}}var aD=this.GetLinkSrcFieldName();if(at&&aH&&aD){if(o.call(this,this.GetName())){$.setReturnValue({err:false,retVal:aE});return}}aE=!(this.GetLinkDef()&&this.GetLinkDef().NoUpdate);if(!this.GetLinkDef()){aE=true}if(aE){aE=X||!(this.GetDefn().NoUpdate)}$.setReturnValue({err:false,retVal:aE});if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("BusComp.prototype.CanUpdateX ")}}}else{$.setReturnValue(aC)}})};an.prototype.IsBCReadOnlyFieldSet=function(){var ar=false;return ar};an.prototype.IsParentReadOnlyFieldSet=function(){var ar=false;return ar};an.prototype.GetLinkSrcFieldName=function(){if(this.GetLinkDef()){return(this.GetLinkDef().srcFieldName)}else{return null}};an.prototype.IsFieldReadOnly=function(at){var ar=false;if(at){ar=aq.IsTrue(at.IsReadOnly());if(!ar){var au=this.GetParentBusComp();var aw=SiebelApp.S_App.LookupStringCache(at.GetName()),av;if(aw==="SSA Primary Field"&&au){av=au.CanInsert(aw);if(!av){au.CanUpdateField(aw);$.callback(this,function(ax){$.setReturnValue({err:false,retVal:!(ax.retVal)})})}else{$.setReturnValue({err:false,retVal:false})}}else{av=this.CanInsert(aw);if(!av){this.CanUpdateField(aw);$.callback(this,function(ax){$.setReturnValue({err:false,retVal:!(ax.retVal)})})}else{$.setReturnValue({err:false,retVal:false})}}}else{$.setReturnValue({err:false,retVal:ar})}}else{$.setReturnValue({err:false,retVal:true})}$.setReturnValue({err:false,retVal:ar})};an.prototype.CanInsert=function(au){var ar=false;var at=this.GetParentBusComp();if(au===null||au===undefined){au=true}if(au&&(this.IsParentReadOnlyFieldSet())){return ar}if(this.GetBusCompType()===(SiebelApp.Offlineconstants.get("BCTYPE_PICKLIST"))){var ay=this.GetMasterBC()?this.GetMasterBC().GetFieldDefn(this.GetPickSrcField()):null;if(ay){var ax=ay.PickListName;var av=SiebelApp.S_App.Model.GetPickListDef(ax);ar=(!(av.NoUpdate)&&!this.GetMasterBC().IsInQueryState())}return ar}if(au){if(!this.IsExecuted()){return ar}var aw=this.GetLinkSrcFieldName();if(au&&at&&aw){if(o.call(this,this.GetName())){return ar}}}if(this.GetDefn().NoUpdate){return false}return true};an.prototype.ValidateFieldValue=function(){};an.prototype.OnSetFieldValue=function(ar){if(ar===y){this.NotifyBeginLongOp();this.NotifyNewPrimary(ar);this.NotifyNewData(ar);this.NotifyEndLongOp()}};an.prototype.NotifyBeginLongOp=function(){};an.prototype.NotifyEndLongOp=function(){};an.prototype.NotifyNewPrimary=function(){};an.prototype.NotifyNewData=function(at){if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().StartTime("BusComp.prototype.NotifyNewData ")}var ar={};ar[P]=this.GetName();ar[v]=C;ar[T]="NotifyNewData";ar[i]=this;var av=CCFMiscUtil_CreatePropSet();av.SetProperty("inputParam1",at);var au;ar[ap]=a;au=SiebelApp.S_App.Model.InvokeRegisteredSvc(ar,av);$.callback(this,function(az){if(!az.err){au=az.retVal;
if((au.Outputargs)&&(au.Outputargs).GetProperty("Invoked")&&(au.Outputargs).GetProperty("Invoked").toString()==="true"){$.setReturnValue({err:az.err,retVal:au.Outputargs});return}if(au.Outputargs&&av){(au.Outputargs).SetType(a);av.AddChild(au.Outputargs)}if(!at){at=null}else{if(!(this.IsNotifySysEnabled())){return}this.NotifyNewDataWS(at)}var aE;var aw=this.GetNotifyInfoArray();var aF=aw.length;if(this.IsNotifyEnabled()){for(var aA=0;aA<aF;aA++){aE=aw[aA];if(aE){var aG=aE.GetBusCompNotify();if(aG){aG.NotifyNewData(at);if(!at&&this.GetMultiSelectMode()){aG.NotifyChangeSelection()}}}}}if(at&&this.GetFieldDefn(at)&&this.GetFieldDefn(at).fDepArray){var aD=this.GetFieldDefn(at).fDepArray;var ay=aD.length;var aC=0;var aH;var aB;var ax=function(){if(this.GetDefn().Fields[aD[aC]].IsCalculated==="T"){aH=h.call(this);u.call(this,aD[aC],"");$.callback(this,function(){aB=this.FindWorkSet(aH);this.FieldValue(aD[aC],aB);$.callback(this,function(aI){if(!aI.err){u.call(this,aD[aC],aI.retVal);$.callback(this,function(aJ){if(!aJ.err){this.NotifyNewData(aD[aC]);aC++;if(ay>aC){ax.call(this)}}})}})})}};if(ay){ax.call(this)}}ar[ap]=s;SiebelApp.S_App.Model.InvokeRegisteredSvc(ar,av);$.callback(this,function(aI){$.setReturnValue(aI);if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("BusComp.prototype.NotifyNewData ")}})}else{$.setReturnValue(az)}})};an.prototype.NotifyNewDataWS=function(at){if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().StartTime("BusComp.prototype.NotifyNewDataWS ")}var ar={};ar[P]=this.GetName();ar[v]=C;ar[T]="NotifyNewData";ar[i]=this;var av=CCFMiscUtil_CreatePropSet();av.SetProperty("inputParam1",at);var au;ar[ap]=a;SiebelApp.S_App.Model.InvokeRegisteredSvc(ar,av);$.callback(this,function(az){if(!az.err){au=az.retVal;if((au.Outputargs)&&(au.Outputargs).GetProperty("Invoked")&&(au.Outputargs).GetProperty("Invoked").toString()==="true"){$.setReturnValue({err:az.err,retVal:au.Outputargs});return}if(au.Outputargs&&av){(au.Outputargs).SetType(a);av.AddChild(au.Outputargs)}var ay;if(!at){return}var aB=this.GetNotifyInfoArray();var aw=aB.length;for(var ax=0;ax<aw;ax++){ay=aB[ax];if(ay){var aA=ay.GetBusCompNotify();if(aA){aA.NotifyNewDataWS(at)}}}ar[ap]=s;SiebelApp.S_App.Model.InvokeRegisteredSvc(ar,av);$.callback(this,function(aC){$.setReturnValue(aC);if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("BusComp.prototype.NotifyNewDataWS ")}})}else{$.setReturnValue(az)}})};an.prototype.NotifySelModeChange=function(av){var au;if(this.IsNotifyEnabled()){var ax=this.GetNotifyInfoArray();var ar=ax.length;for(var at=0;at<ar;at++){au=ax[at];if(au){var aw=au.GetBusCompNotify();if(aw){aw.NotifySelModeChange(av)}}}}};an.prototype.NotifyNewSelIds=function(){var av;var au=this.GetSelRowIdArray();if(this.IsNotifyEnabled()){var ax=this.GetNotifyInfoArray();var ar=ax.length;for(var at=0;at<ar;at++){av=ax[at];if(av){var aw=av.GetBusCompNotify();if(aw){aw.NotifyNewSelIds(au)}}}}};an.prototype.NotifyChangeSelection=function(){var au;if(this.IsNotifyEnabled()){var aw=this.GetNotifyInfoArray();var ar=aw.length;for(var at=0;at<ar;at++){au=aw[at];if(au){var av=au.GetBusCompNotify();if(av){av.NotifyChangeSelection()}}}}};an.prototype.NotifyScrollData=function(av,at){var aw;if(this.IsNotifyEnabled()){var ay=this.GetNotifyInfoArray();var ar=ay.length;for(var au=0;au<ar;au++){aw=ay[au];if(aw){var ax=aw.GetBusCompNotify();if(ax){ax.NotifyScrollData(av,at)}}}}};an.prototype.NotifyNewSelection=function(av){var au;if(this.IsNotifyEnabled()){var ax=this.GetNotifyInfoArray();var ar=ax.length;for(var at=0;at<ar;at++){au=ax[at];if(au){var aw=au.GetBusCompNotify();if(aw){aw.NotifyNewSelection(av)}}}}else{this.NotifyStateChanged("activeRow",h.call(this))}};an.prototype.NotifyStateChanged=function(au,aw){var az=false;var av;if(!this.IsNotifySysEnabled()){if(au==="activeRow"||au==="bExecuted"||au==="bNewRecPending"||au==="bCommitPending"){return az}}var ay=this.GetNotifyInfoArray();var ar=ay.length;for(var at=0;at<ar;at++){av=ay[at];if(av){var ax=av.GetBusCompNotify();if(ax){ax.NotifyStateChanged(au,aw)}}az=true}return az};an.prototype.NotifyNewActiveRow=function(){var au;if(this.IsNotifyEnabled()){var aw=this.GetNotifyInfoArray();var ar=aw.length;for(var at=0;at<ar;at++){au=aw[at];if(au){var av=au.GetBusCompNotify();if(av){av.NotifyNewActiveRow()}}}}};e.WriteRecord=function(aD){var au;var aE=[];var ar=[];var aA=[];var ay;var aF;var at;var az;var ax=CCFMiscUtil_CreatePropSet();var aB=this.GetBCTableInsertState();var av={};var aC;var aw;av[P]=this.GetName();av[v]=C;av[T]="WriteRecord";av[i]=this;if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().StartTime("BusComp.WriteRecord")}av[ap]=a;SiebelApp.S_App.Model.InvokeRegisteredSvc(av,ax);$.callback(this,function(aM){az=aM.retVal;var aL=aM.err;if(aL){$.setReturnValue({err:aL,retVal:az});return}if(az.Outputargs){if((az.Outputargs).GetPropertyAsStr("Invoked")==="true"){this.SetCommitPending(false);this.SetNewRecPending(false);this.NotifyNewRecordData();$.setReturnValue({err:aL,retVal:az.Outputargs});if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("BusComp.WriteRecord")}return}(az.Outputargs).SetType(a);ax.AddChild(az.Outputargs);var aN=az.Outputargs.GetPropertyAsStr("bAddSyncQ");if(!aq.IsEmpty(aN)){aD=aN}}if(this.IsVBC()){this.SetCommitPending(false);this.SetNewRecPending(false);this.NotifyNewRecordData();var aQ=this.GetCursor()[0];var aP=this.GetActiveRow();var aO=this.GetWSSize();if(aQ<aO){this.GetVBCRecords()[aP]=this.GetWS()[aP]}else{this.GetVBCRecords()[aQ-(aO-1-aP)]=this.GetWS()[aP]}return}var aG={};if(aB===F.get("INSMODE_ASSOCONLY")){var aH=this.GetInsertStatement();SiebelApp.BrowserCacheMgr.Execute(aH.insertquery,aH.values)}else{if(!this.IsCommitPending()){$.setReturnValue({err:true});return}if(!this.CheckActiveRow()){SiebelApp.S_App.OfflineErrorObject.SetErrorMsg("BCErrNoActiveRow","","","","",0,78);$.setReturnValue({err:"BCErrNoActiveRow",retVal:false});return}if(this.IsDeletePending()){$.setReturnValue({err:true});return}aF=h.call(this);ay=this.FindWorkSet(aF);au=ay.Id;aE=this.GetFieldList();at=this.GetName();var aK=(this.GetParentBusComp())?true:false;var aJ=false;this.SetDefaultValues(false);$.callback(this,function(){var a5=0;var aU=aE.length;var aT=[];var aY=function(){aT[a5]=SiebelApp.S_App.LookupStringCache(aE[a5]);if(aK&&(!this.GetExtObjProp("m_pCurLinkQueryDef").Defn.interTableName)&&aT[a5]===this.GetExtObjProp("m_pCurLinkQueryDef").Defn.destFieldName){aJ=true;ar[a5]=this.GetExtObjProp("m_pCurLinkQueryDef").Defn.SrcFieldValue;aA[a5]=SiebelApp.OfflineUtils.RemoveNonAlphaChars(aT[a5]);this.SetLocalFNm(aA[a5]);this.SetLocalFVal(aA[a5],ar[a5]);a5++;if(a5<aU){aY.call(this)}}else{this.FieldValue(aT[a5]);$.callback(this,function(a9){ar[a5]=a9.retVal;aA[a5]=SiebelApp.OfflineUtils.RemoveNonAlphaChars(aT[a5]);a5++;if(a5<aU){aY.call(this)}})}};aY.call(this);var a3=this.CheckRequiredFields(aE,ar);if(a3.err){$.setReturnValue({err:a3.err,retVal:a3.retVal});return}var aS=this.GetParentBusComp();var aX;if(aS){aX=this.GetExtObjProp("m_pCurLinkQueryDef").Defn.interTableName
}if(aK&&(!aX)&&!aJ){aA[a5]=SiebelApp.OfflineUtils.RemoveNonAlphaChars(this.GetExtObjProp("m_pCurLinkQueryDef").Defn.destFieldName);aT[a5]=this.GetExtObjProp("m_pCurLinkQueryDef").Defn.destFieldName;ar[a5]=this.GetExtObjProp("m_pCurLinkQueryDef").Defn.SrcFieldValue;this.SetLocalFNm(aA[a5]);this.SetLocalFVal(aA[a5],ar[a5]);a5++}var a7=false;aw=this.GetDefn().Fields;var aW=[];var a1=[];var a0=[];var a4=[];if(aS&&aX){for(var a6=0;a6<a5;a6++){var a2=aw[aT[a6]];if(a2.Join&&a2.JoinInfo.JoinType==="X"){var aZ=a2.ColName;if(L.DoesFieldExist(aX,aZ)){a1.push(aZ);a4.push(ar[a6]);a7=true}else{aW.push(aA[a6]);a0.push(ar[a6])}}else{aW.push(aA[a6]);a0.push(ar[a6])}}}var aR;a3=this.FieldValidation(aE,ar);if(a3.retVal===true){$.setReturnValue(a3);return}E.call(this,aE,ar);aG.FldNames=this.GetLocalFNm();aG.FldValue=this.GetLocalfVal();if(this.IsInsertPending()){if(!a7){aC=SiebelApp.SqlBuilder.InsertRecord(at,aA,ar);aR=this.GetRecordCount();this.SetRecordCount(++aR);m.CcfLogEvent([M,34,0,0,"Table: ",this.GetName(),aC.insertquery]);m.CcfLogEvent([M,44,0,0,"Bind variables",aC.values]);SiebelApp.BrowserCacheMgr.Execute(aC.insertquery,aC.values)}else{var a8=Z.call(this,this.GetExtObjProp("m_pCurLinkQueryDef").Defn.SrcFieldValue,au);aC=SiebelApp.SqlBuilder.InsertRecord(at,aW,a0);a1.push(D.get("SWE_ROW_ID_FIELD"));a4.push(a8);aG.InterTableName=aX;aG.InterTableCol=a1;aG.InterTableColVal=a4;var aV=SiebelApp.SqlBuilder.InsertRecord(aX,a1,a4);aR=this.GetRecordCount();this.SetRecordCount(++aR);m.CcfLogEvent([M,34,0,0,"Table: ",this.GetName(),aC.insertquery]);m.CcfLogEvent([M,44,0,0,"Bind variables",aC.values]);SiebelApp.BrowserCacheMgr.Execute(aC.insertquery,aC.values);$.callback(this,function(){m.CcfLogEvent([M,34,0,0,"Inter Table: ",aX,aV.insertquery]);m.CcfLogEvent([M,44,0,0,"Bind variables",aC.values]);SiebelApp.BrowserCacheMgr.Execute(aV.insertquery,aV.values)})}}else{if(!a7){aC=SiebelApp.SqlBuilder.UpdateRecord(at,aA,ar,D.get("SWE_ROW_ID_FIELD"),au);m.CcfLogEvent([M,34,0,51,"Table: ",this.GetName(),aC]);m.CcfLogEvent([M,44,0,51,"Bind variables",au]);SiebelApp.BrowserCacheMgr.UpdateRecord(aC,au)}else{aC=SiebelApp.SqlBuilder.UpdateRecord(at,aW,a0,D.get("SWE_ROW_ID_FIELD"),au);SiebelApp.BrowserCacheMgr.UpdateRecord(aC,au);m.CcfLogEvent([M,34,0,51,"Table: ",this.GetName(),aC]);m.CcfLogEvent([M,44,0,51,"Bind variables",au]);$.callback(this,function(){var a9=Z.call(this,this.GetExtObjProp("m_pCurLinkQueryDef").Defn.SrcFieldValue,au);aG.InterTableName=aX;aG.InterTableCol=a1;aG.InterTableColVal=a4;aG.InterTableRowId=a9;aC=SiebelApp.SqlBuilder.UpdateRecord(aX,a1,a4,D.get("SWE_ROW_ID_FIELD"),a9);m.CcfLogEvent([M,34,0,51,"Inter Table: ",aX,aC]);m.CcfLogEvent([M,44,0,51,"Bind variables",a9]);SiebelApp.BrowserCacheMgr.UpdateRecord(aC,a9)})}}})}var aI=function(){this.SetCommitPending(false);this.SetNewRecPending(false);this.OnWriteRecord();if(this.GetParentBusComp()){this.GetParentBusComp().WriteRecord();this.SetParCommitPen(false)}$.callback(this,function(){if(aB!==F.get("INSMODE_ASSOCONLY")){this.NotifyNewRecordData();this.SetOpType(F.get("WRITERECORD"));for(var aR in aw){if(aw[aR].IsCalculated==="T"){aG.FldNames.push(m.RemoveNonAlphaChars(aR));aG.FldValue.push("")}}this.SetLocalTxn(JSON.stringify(aG))}aD=aq.IsEmpty(aD)?true:aq.IsTrue(aD);this.UpdateSync(au,aD);$.callback(this,function(){this.SetOrigRecVal("");if(aB===F.get("INSMODE_ASSOCONLY")){this.SetBCTableInsertState(F.get("INSMODE_NORMAL"));this.SetInsertStatement("")}av[ap]=s;SiebelApp.S_App.Model.InvokeRegisteredSvc(av,ax);$.callback(this,function(aT){az=aT.retVal;var aS=aT.err;if(aS){$.setReturnValue({err:aS,retVal:az});return}if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("BusComp.WriteRecord")}})})})};$.callback(this,function(aR){if(!aR.err){aI.call(this)}else{var aS=aR.retVal.message;if(aR.retVal.code===6){SiebelApp.S_App.OfflineErrorObject.SetErrorMsg("SSASqlErrDupConflict","","","","",0,77);$.setReturnValue({err:"SSASqlErrDupConflict",retVal:""})}else{if(aS){aS=aS.toLowerCase();if(aR.retVal.code===1&&(aS==="constraint failed"||aS.indexOf("not unique")>-1)||aS.indexOf("unique constraint failed")>-1){SiebelApp.S_App.OfflineErrorObject.SetErrorMsg("SSASqlErrDupConflict","","","","",0,77);$.setReturnValue({err:"SSASqlErrDupConflict",retVal:""})}else{SiebelApp.S_App.OfflineErrorObject.SetErrorMsg("SSASqlErrEndTrx","","","","",0,77);$.setReturnValue({err:"SSASqlErrEndTrx",retVal:""});SiebelJS.Log(aR.retVal.message)}}else{$.setReturnValue({err:aR.err,retVal:""})}}return}})})};an.prototype.ReplaceAmp=function(ar){if(ar.indexOf("&")!==-1){ar=ar.replace("&",";amp;")}return ar};an.prototype.SyncQRec=function(av){var ar=this.GetTxnId();if(ar===""){ar=m.GetTempId();this.SetTxnId(ar)}var aw=D.get("SWE_PST_BUSOBJ_INFO")+"="+this.GetBusObj().GetName()+"&";var au=this.GetName();au=this.ReplaceAmp(au);aw=aw+D.get("SWE_PST_BUSCOMP_INFO")+"="+au+"&";aw=aw+D.get("SWE_METHOD_STR")+"="+this.GetOpType()+"&";if(this.GetBusObj().GetUIState()===false){aw=aw+D.get("SWE_VIEW_ARG")+"=&"}else{aw=aw+D.get("SWE_VIEW_ARG")+"="+SiebelApp.S_App.GetActiveView().GetName()+"&"}aw=aw+D.get("SWE_ROW_ID_STR")+"="+URLEncode(av)+"&";aw=aw+"TxnId="+ar;if(this.GetParentBusComp()){var at=this.GetParentBusComp().FindWorkSet(this.GetParentBusComp().GetSelection());this.GetParentBusComp().FieldValue(D.get("SWE_ROW_ID_FIELD"),at);$.callback(this,function(ax){if(ax.err){$.setReturnValue(ax)}else{aw=aw+"&"+D.get("SWE_ROW_IDS_STR")+"="+ax.retVal;$.setReturnValue({err:false,retVal:aw})}})}else{$.setReturnValue({err:false,retVal:aw})}};function Q(at){var ar=function(){if(this.IsNotifyEnabled()&&!at.bAfterNotify){this.EnableNotify()}if(at.bAddUndo){this.EndUndo(false)}};if(at.bRecordCreated){if(this.IsNotifyEnabled()&&!at.bAfterNotify){this.DisableNotify()}this.UndoRecordX();$.callback(this,ar)}else{ar.call(this)}}an.prototype.NewRecordX=function(az,aA,aD){if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().StartTime("BusComp.prototype.NewRecordX")}var aE=null;var ay;var ar=false;var aC=null;var ax=null;var aw={};aw.bAddUndo=false;aw.bAfterNotify=false;aw.bNewRecordInsertedInWorkSet=false;aw.bSetPrimary=false;aw.bInsertBefore=az;var av;var aB,at={};at[P]=this.GetName();at[v]=C;at[T]="NewRecord";at[i]=this;var au=CCFMiscUtil_CreatePropSet();au.SetPropertyStr("InsertBefore",az);au.SetPropertyStr("Internal",aA);au.SetPropertyStr("IdValue",aD);at[ap]=a;Y.InvokeRegisteredSvc(at,au);$.callback(this,function(aG){aB=aG.retVal;av=aG.err;if(aB.Outputargs&&(aB.Outputargs).GetProperty("Invoked")&&(aB.Outputargs).GetProperty("Invoked").toString()==="true"){var aF=(aB.Outputargs).GetProperty("RetVal").toString();$.setReturnValue({err:av,retVal:aF});if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("Applet.NewRecord")}Q.call(this,aw);return}if(aB.Outputargs&&au){(aB.Outputargs).SetType(a);au.AddChild(aB.Outputargs)}ar=this.IsExecuted();if(!ar){Q.call(this,aw);return}if(!aA&&!this.CanInsert()){alert("SSAOMErrNoInsert");Q.call(this,aw);return}aE=h.call(this);ax=this.FindWorkSet(aE);
if(aE===-1){ay=0}else{ay=(!aw.bInsertBefore)?(aE+1):aE}this.InsertWorkSet(ay,aC,true);aE=ay;ai.call(this,aE);if(ax&&this.GetWS().length>this.GetWorkSetSize()){if(!this.IsVBC()&&!this.GetIsRelatedBC()){if(az||aE!==this.GetWS().length-1){this.DeleteWorkSet(this.GetWS().length-1)}else{this.DeleteWorkSet(0);ai.call(this,--aE)}}else{ai.call(this,aE)}}this.SetCommitPending(true);this.SetNewRecPending(true);aw.bRecordCreated=true;N.call(this,aw);$.callback(this,function(){this.SetDefaultValues(true);$.callback(this,function(){this.SetOpType(F.get("NEWRECORD"));this.SyncQRec("rowId");$.callback(this,function(aH){var aI=aH.retVal;this.SetNewTxn(aI);if(!aA){this.NotifyNewRecord(az);aw.bAfterNotify=true;this.UpdateLinks(false)}$.callback(this,function(){this.SetExtObjProp("isNewRecord",false);at[ap]=s;Y.InvokeRegisteredSvc(at,au);$.callback(this,function(aJ){$.setReturnValue(aJ)});if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("BusComp.prototype.NewRecordX")}})})})})})};function N(ax){var av=this.GetParentBusComp();if(av){var az=this.GetLinkDef();var ay=az.interTableName;if(!ay){var aw=az.destFieldName;var ar=this.GetFieldDefn(aw);var au;var at=[];if(!ar){au="SSASqlErrLinkDestField";at.push(az.Name);at.push(aw);at.push(this.GetName());SiebelApp.S_App.OfflineErrorObject.SetErrorMsg("SSASqlErrLinkDestField",at,"","","",0,78);Q.call(this,ax)}else{if(az.SrcFieldValue){this.SetFieldValueX(az.destFieldName,az.SrcFieldValue,true)}else{av.FieldValue(aw);$.callback(this,function(aB){var aA=aB.retVal;this.SetFieldValueX(az.destFieldName,aA,true)})}}}}}an.prototype.InsertWorkSet=function(at,ar,av){ar=V.call(this,ar);var au=(!av)?ar:this.CreateRecord("");if(at===this.GetWS().length){this.AddWS(au)}else{this.InsertRecordWS(at,au)}this.NotifyInsertWorkSet(at,au)};function V(ar){if(!ar){return ar}var at=this.CreateRecord("");var au=this.GetFieldMap();for(var ay in au){if(au.hasOwnProperty(ay)){var aw=this.GetFieldDefn(ay);var ax=m.RemoveNonAlphaChars(ay);if(ar.hasOwnProperty(ax)){if(aw.DataType===ah){var av=m.UtcToLocal(ar[ax]);at[ax]=m.ToTS(av)}else{at[ax]=ar[ax]}}}}return at}an.prototype.InsertRecordWS=function(at,ar){this.GetWS().splice(at,0,ar)};an.prototype.CreateRecord=function(az){if(!az){az=m.GetTempRowId()}var aw=az;var at=this.GetFieldList();var ar=at.length;var ax={};for(var au=0;au<ar;au++){var av=at[au];var ay=SiebelApp.S_App.LookupStringCache(av);ay=SiebelApp.OfflineUtils.RemoveNonAlphaChars(ay);if(ay==="Id"){ax[ay]=aw}else{ax[ay]=""}}return ax};an.prototype.SetDefaultValues=function(ar){var av=[];var aA;var az;var aB;var ay=this;av=this.GetFieldList();aB=this.GetName();var ax=av.length;var au=0;var aw=(ar)?"PreDefault":"PostDefault";var at=function(){aA=SiebelApp.S_App.LookupStringCache(av[au]);var aC=ar?ay.GetFieldDefn(aA).PreDefault:ay.GetFieldDefn(aA).PostDefault;if(aC){ay.GetDefaultValue(aB,aA,ar);$.callback(this,function(aD){az=aD.retVal;if(az){if(!ar){this.FieldValue(aA);$.callback(this,function(aE){var aF=aE.retVal;if(aq.IsEmpty(aF)){m.CcfLogEvent([M,30,0,44,aw,this.GetName(),aA,az,this.GetDefaultExpr(aA,ar)]);ay.SetFieldValueX(aA,az,true)}})}else{m.CcfLogEvent([M,30,0,44,aw,this.GetName(),aA,az,this.GetDefaultExpr(aA,ar)]);ay.SetFieldValueX(aA,az,true)}}else{m.CcfLogEvent([M,30,0,44,aw,this.GetName(),aA,az,this.GetDefaultExpr(aA,ar)])}})}$.callback(this,function(){au++;if(au<ax){$.callback(this,at)}else{at=null}})};at.call(this)};an.prototype.FieldValidation=function(az,at){var aD=[];var av=this.GetDefn().Fields;var ay=[];var aA={};var ar=false;aA.err=false;for(var aw=0;aw<az.length;aw++){aD[aw]=SiebelApp.S_App.LookupStringCache(az[aw]);if(!aq.IsEmpty(av[aD[aw]].ValidationSpec)){if(!(av[aD[aw]].ValidationSpecast)){this.GetDefn().Fields[aD[aw]].ValidationSpecast=SiebelApp.Query.Parse(av[aD[aw]].ValidationSpec)}var aC=SiebelApp.Query.Evaluate(this.GetDefn().Fields[aD[aw]].ValidationSpecast,this,SiebelApp.Query.Parse("["+aD[aw]+"]"));if(aC===false){var ax=SiebelApp.Query.GetFieldsFromExp("Calc",av[aD[aw]].ValidationSpec);if(aq.IsEmpty(at[aw])){ar=true}for(var au=0;au<ax.length;au++){var aB=this.GetWS()[this.GetActiveRow()][SiebelApp.OfflineUtils.RemoveNonAlphaChars(ax[au])];if(aq.IsEmpty(aB)||aq.IsEmpty(at[aw])){ar=true}}if(ar===false){ay.push(at[aw]);ay.push(aD[aw]);ay.push(av[aD[aw]].ValidationSpec);SiebelApp.S_App.OfflineErrorObject.SetErrorMsg("SSASqlErrValidation",ay,"","","",0,79);return{err:"SSASqlErrValidation",retVal:true}}}}ar=false}return{err:"SSASqlErrValidation",retVal:false}};function E(ar,aw){var ax=ar.length;for(var au=0;au<ax;au++){var at=SiebelApp.S_App.LookupStringCache(ar[au]);var av=aw[au];var ay=this.GetFieldDefn(at);if(ay.DataType===ah){if(av){aw[au]=m.ToTS(new Date(av),true);this.SetLocalFVal(m.RemoveNonAlphaChars(at),aw[au],true)}}}}function K(ar,at){var au=this.GetFieldDefn(ar);if(au.DataType===ah){if(at){au=null;return m.ToTS(new Date(at),true)}}au=null;return at}an.prototype.CheckRequiredFields=function(ax,au){var aG=[];var aw=[];var aE=SiebelApp.S_App.Model.GetSystemFields();var aD=this.GetFieldMap();var az={};az.err=false;for(var av=0;av<ax.length;av++){aG[av]=SiebelApp.S_App.LookupStringCache(ax[av]);if(aE.indexOf(aG[av])===-1&&aD[aG[av]].IsRequired()){if(!au[av]){if(!this.IsInsertPending()){var at=this.GetOldFNm();if(at.indexOf(aG[av])===-1){continue}}var ay=SiebelApp.S_App.GetActiveView();var aC=ay?ay.GetActiveApplet():undefined;var aB=aC?aC.GetControls():undefined;var aA="";var aF;if(aB){for(var ar in aB){aF=aB[ar];if(aF.GetFieldName()===aG[av]){aA=aF.GetDisplayName();break}}}if(!aA){aA=aG[av]}aw.push(aA);SiebelApp.S_App.OfflineErrorObject.SetErrorMsg("SSAFReqFieldNotExist",aw,"","","",0,69);az.err="SSAFReqFieldNotExist";az.retVal="";return az}}}return az};an.prototype.RemoveBindingToRow=function(){};an.prototype.OnActiveRowChanged=function(){this.FindWorkSet(h.call(this));this.RemoveBindingToRow(true)};an.prototype.EventChangeRecord=function(){if(this.CheckActiveRow()===false){return true}};an.prototype.GetRowNum=function(ar){var ax={};var aw=this.GetWS();var at=aw.length;var ay=this.GetCursor()[0];if(ar){for(var av=0;av<at;av++){if(aw[av].Id===ar.Id){break}}if(av===at){ax.err=true;return ax}if(ay>at-1){ax.retVal=ay+1-at+av}else{ax.retVal=(av+1)}ax.err=false;return ax}ax.err=false;if(!this.CheckActiveRow()){ax.err="SSAOMErrActiveRow";ax.retVal=-1}var au=this.GetActiveRow();ax.retVal=(ay+1-at+au+1);return ax};an.prototype.GetNumRowsX=function(){var ar={};ar.err=false;ar.retVal=0;if(!this.IsExecuted()){return(ar)}return(J.call(this))};function J(){var ar={};ar.err=false;ar.retVal=0;var au=this.GetCursor()[0];var at=this.GetRecordCount();if(au<at-1){if(this.IsInsertPending()){ar.err=false;ar.retVal=au+2}else{ar.err=false;ar.retVal=au+1}}else{if(this.IsInsertPending()){ar.err=false;ar.retVal=at+1}else{ar.err=true;ar.retVal=at}}return ar}an.prototype.NotifyNewRecord=function(ax){var az;var aB=false;var at=this.GetNotifyInfoArray();var aA=at.length;var aD=h.call(this);for(var aw=0;aw<aA;aw++){az=at[aw];var av=az.GetAppletArray();
var ay=av.length;var ar;for(var au=0;au<ay;au++){ar=av[au];if(az&&((az.GetBegRow(ar)+az.GetSize(ar)-1)<aD)){az.SetBegRow(az.GetBegRow(ar)+1,ar);az.SetCurrRow(az.GetCurrRow(ar)+1,ar);aB=true}else{aB=false}}if(this.IsNotifyEnabled()&&az){var aC=az.GetBusCompNotify();if(aC){aC.NotifyNewRecord(ax&&!aB)}}}};an.prototype.NotifyDeleteRecord=function(at,aC){var aD;var az;if(!(this.IsNotifyEnabled())){return}var au=this.GetNotifyInfoArray();var aA=au.length;for(var ax=0;ax<aA;ax++){az=au[ax];var aw=az.GetAppletArray();var ay=aw.length;var ar;for(var av=0;av<ay;av++){ar=aw[av];if(!at&&az&&az.GetBegRow(ar)!==0&&((az.GetBegRow(ar)+az.GetSize(ar)>this.GetWS().length))){az.SetBegRow(az.GetBegRow(ar)-1);az.SetCurrRow(az.GetCurrRow(ar)-1);aD=true}else{aD=false}}if(az){var aB=az.GetBusCompNotify();if(aB){aB.NotifyDeleteRecord(at,aC&&!aD)}}}};an.prototype.VBCHome=function(){var ar=this.GetVBCRecords();if(ar.length>0){var at=this.GetWSSize();var av=this.GetCursor();if(av[0]>at-1){this.EmptyWS();av[0]=-1;for(var au=0;au<at;au++){this.InsertWorkSet(au,ar[au]);av[0]++}}ai.call(this,0);return}ai.call(this,-1)};an.prototype.Home=function(){m.CcfLogEvent([M,27,0,64,this.GetName()]);if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().StartTime("BusComp.prototype.Home")}this.FinishRecord();this.ClearUpdates();if(!this.IsExecuted()){this.EmptyWorkSet();ai.call(this,-1);this.NotifyReset();return}if(h.call(this)!==-1){var av=this.FindWorkSet(0);var ar=this.GetRowNum(av);if(ar.err){$.setReturnValue({err:true});return}var aw=ar.retVal;var at=this.GetNumRowsX();var au=at.retVal;if(aw<0&&!at.err){aw=au+aw+1}if(aw===1){this.NotifyReset();$.callback(this,function(ax){$.setReturnValue(ax)});return}}ai.call(this,-1);this.NotifyReset();$.callback(this,function(ax){$.setReturnValue(ax);if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("BusComp.prototype.Home")}})};an.prototype.NotifyReset=function(){ai.call(this,(this.GetWS().length>0?0:-1));this.NotifyStateChanged("activeRow",h.call(this));this.OnActiveRowChanged();this.EventChangeRecord();this.NotifyNewData();$.callback(this,function(ar){if(ar.err){$.setReturnValue(ar)}else{this.UpdateLinks(false);$.callback(this,function(at){$.setReturnValue(at)})}})};an.prototype.EnumUserProps=function(){var at=this.GetDefn();var ar=null;if(at.userPropMap){ar=[];for(var au in at.userPropMap){if(at.userPropMap[au]){ar.push(au)}}return ar}else{return null}};an.prototype.EnumFieldUserProps=function(ar){var au=this.GetFieldDefn(ar);if(au.userPropMap){var at=[];for(var av in au.userPropMap){if(au.userPropMap[av]){at.push(av)}}return at}else{return null}};an.prototype.GetFldPickMapDef=function(ar){var at=this.GetFieldDefn(ar);return at.pickMap};an.prototype.GetUserProperty=function(ar){if(this.GetDefn().userPropMap){return this.GetDefn().userPropMap[ar]}else{return""}};an.prototype.GetLinkDef=function(){var at=SiebelApp.Metadata.GetBusObjDef(this.GetBusObj().GetName())[this.GetName()];if(at){var ar=SiebelApp.Metadata.GetLinkDef(at);if(!ar.interTableName&&!ar.srcFieldName){ar.srcFieldName=D.get("SWE_ROW_ID_FIELD")}return SiebelApp.Metadata.GetLinkDef(at)}else{return null}};an.prototype.GetDefn=function(){var ar=SiebelApp.Metadata.GetBusCompDef(this.GetName());return ar};an.prototype.GetFieldDefn=function(ar){var at=this.GetDefn().Fields[ar];if(!at){m.CcfLogEvent([M,55,0,53,ar,this.GetName()])}return at};an.prototype.PopulateWS=function(aR,aw,av,az){if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().StartTime("BusComp.prototype.PopulateWS")}var aQ=aw.length;var aC=SiebelApp.OfflineUtils.RemoveNonAlphaChars(this.GetName());var ar=this.GetDefn();var aJ=[];var aE=0;var aL={};var aS=ar.Fields;var ay=this.GetSavedFieldArray();for(var aU=0;aU<aQ;aU++){var aG=aw[aU];var aH=SiebelApp.S_App.LookupStringCache(aG);var aN=SiebelApp.OfflineUtils.RemoveNonAlphaChars(aH);if(ay.indexOf(aH)===-1){this.GetSavedFieldArray().push(aH)}if(L.DoesFieldExist(aC,aN)){if((typeof(aR)!=="string")){var ax=aR.length;for(var aI=1;aI<ax;aI++){if(ar.InterFieldInfo.InterFieldArr.indexOf(aH)!==-1){var aM=aS[aH].ColName;if(L.DoesFieldExist(aR[aI],aM)){aN=aR[aI]+"."+aM;if(aL[aM]){var aK=[];aK.push(aL[aM]);aK.push(SiebelApp.OfflineUtils.RemoveNonAlphaChars(aH));aL[aM]=aK}else{aL[aM]=SiebelApp.OfflineUtils.RemoveNonAlphaChars(aH)}continue}}if(L.DoesFieldExist(aR[aI],aN)){aN=aC+'."'+aN+'"'}}}else{aN='"'+aN+'"'}aJ[aE]=aN;aE++}}var aB=this.GetCursor();var au=false;var aA=0;var aD=window.localStorage.getItem("reload")&&JSON.parse(window.localStorage.getItem("reload"));var aF=this.GetExtObjProp("reExecute");if(aD||aF){aA=aB[0];au=true;if(aD){window.localStorage.setItem("reload",false)}}var aO;this.SetQuerySearchSpec(av);this.SetQuerySortSpec(az);this.SetQueryFieldList(aJ);this.SetQueryOrder(aO);var at="Count(*)";var aP=SiebelApp.SqlBuilder.SelectRecordPopulateWS(aR,av,[at],az,aO);SiebelApp.BrowserCacheMgr.SelectRecord(aP);var aT=this.GetWorkSetSize();$.callback(this,function(aX){if(aX.err){$.setReturnValue({err:true});return}var aV=aX.retVal[at],aW;this.SetRecordCount(aV);aB[0]=aA;aB[1]=aV<=aT?aV:aT;if(au){if(aV<=aT){aB[0]=0}else{if((aV-(aA+1))<=aT){aB[0]=aV-aT}else{aB[0]=aA}}}else{if(aB[0]>=aV){aB[0]=0}if(this.CheckActivation()){aB[0]=this.GetScrollCount()}}m.CcfLogEvent([M,33,0,12,this.GetName(),aV,aB[1]]);aW=SiebelApp.SqlBuilder.SelectRecordPopulateWS(aR,av,aJ,az,aO,aB);SiebelApp.BrowserCacheMgr.SelectRecord(aW,true);$.callback(this,function(a1){if(!a1.err){var a4=a1.retVal;this.EmptyWorkSet();if(a4&&a4.length){var aZ=a4.length;for(var a0=0;a0<aZ;a0++){var a2=a4[a0];if($.isArray(aR)){for(var a6 in aL){var a5=aL[a6];if(a5){if(typeof(a5)!=="string"){var aY=a5.length;for(var a3=0;a3<aY;a3++){a2[a5[a3]]=a2[a6]}delete a2[a6]}else{a2[aL[a6]]=a2[a6];delete a2[a6]}}}}this.InsertWorkSet(a0,a2)}aB[0]=aB[0]+aZ-1;aB[1]=1;this.SetCursor(aB)}}if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("BusComp.prototype.PopulateWS")}})})};an.prototype.Execute=function(){m.CcfLogEvent([M,27,0,12,this.GetName()]);if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().StartTime("BusComp.prototype.Execute")}var av;var au;var aw=CCFMiscUtil_CreatePropSet();var at={},ar=false;at[P]=this.GetName();at[v]=C;at[T]="Execute";at[i]=this;at[ap]=a;Y.InvokeRegisteredSvc(at,aw);$.callback(this,function(aC){av=aC.retVal;au=aC.err;if(av.Outputargs&&(av.Outputargs).GetProperty("Invoked")&&(av.Outputargs).GetProperty("Invoked").toString()==="true"){if(this.IsVBC()){G.call(this);this.SetExecuted(true)}$.setReturnValue({err:au,retVal:av.Outputargs});return}if(av.Outputargs&&aw){(av.Outputargs).SetType(a);aw.AddChild(av.Outputargs)}if(this.IsVBC()){G.call(this);this.SetExecuted(true);return}if(this.GetMultiSelectMode()){this.SetMultiSelectMode(false);this.SetInverseSelection(false);this.SetSelRowIdArray([]);this.NotifySelModeChange(false)}this.SetInQueryState(false);this.SetExecuted(false);var aI=SiebelApp.OfflineUtils.RemoveNonAlphaChars(this.GetName());var az=this.SetSortSpecification();var aE=this.SetFullSearchSpec();
var aD=this.GetFieldList();var aF=this.GetLinkDef();var aB;var ax;var aH;var aG;var aA=this.GetParentBusComp();if(aA){if(!(aA.IsExecuted())||(aA.GetActiveRow()===-1)){$.setReturnValue({err:false,retVal:""});return}else{ax=aF.srcFieldName;ar=true;aA.FieldValue(ax);$.callback(this,function(aJ){aH=aJ.retVal;aG=aF.Name;if(!this.IsVBC()){this.SetLinkSpec(aG,ax,aH,aF)}aB=this.GetExtObjProp("m_pCurLinkQueryDef")})}}else{var ay=n.call(this,aI);if(ay){aE.push(ay)}}$.callback(this,function(){var aP=this.GetFieldMap();var aT;for(var aU in aP){if(aP[aU]){var aR=aP[aU].GetSearchSpec();if(aq.IsEmpty(aR)){continue}if(aR.toLowerCase()==="is null"){aR=""}var aM=" ";aM+=SiebelApp.OfflineUtils.RemoveNonAlphaChars(aU);var aW=aR.indexOf(ab);var aS=aR.indexOf(d);var aO=aR.indexOf(j);if(aW>=0){aT=aR.substring(aW+1);aM+=(" "+ab+" ");aM+=('"'+aT+'" ')}else{if(aS>=0){aT=aR.substring(aS+1);aM+=(" "+d+" ");aM+=('"'+aT+'" ')}else{if(aO>=0){if(aB){if(!aq.IsEmpty(aB.Defn.interTableName)){aM=SiebelApp.OfflineUtils.RemoveNonAlphaChars(aM);aM=aI+"."+aM}}aT=aR.substring(aO+j.length);aM+=(" "+j+" ");aM+=('"'+aT+'" ')}else{aM+=(" "+ab+" ");aM+=('"'+aR+'" ')}}}aE.push(aM)}}var aV={};if(aB){var aQ;if(!aq.IsEmpty(aB.Defn.interTableName)){aV={};var aK=aI;aI=[];aI.push(aK);var aN=aB.Defn.interTableName;aN=SiebelApp.OfflineUtils.RemoveNonAlphaChars(aN);aI.push(aN);aQ=aK+"."+SiebelApp.OfflineUtils.RemoveNonAlphaChars(aB.Defn.destFieldName);aQ=aQ+" = "+aN+"."+aB.Defn.interChildColName;aQ=aQ+" AND "+aN+"."+SiebelApp.OfflineUtils.RemoveNonAlphaChars(aB.Defn.interParentColName);aQ=aQ+' = "'+aB.Defn.SrcFieldValue+'"';aQ=aQ+" AND "+aN+'.Id LIKE "'+aB.Defn.SrcFieldValue+'.%"';aE.push(aQ)}else{aQ=SiebelApp.OfflineUtils.RemoveNonAlphaChars(aB.Defn.destFieldName)+' = "'+aB.Defn.SrcFieldValue+'"';aE.push(aQ)}}if(aA&&aF){if(!(aq.IsEmpty(aF.interTableName))){az.push(aF.interTableName+"."+SiebelApp.OfflineUtils.RemoveNonAlphaChars(aF.interChildColName))}else{az.push(SiebelApp.OfflineUtils.RemoveNonAlphaChars(aF.destFieldName))}}if(!this.IsVBC){az.push(SiebelApp.OfflineUtils.RemoveNonAlphaChars(aF.srcFieldName))}var aL=this.GetAppletSearchSpec();if(aL){var aJ=SiebelApp.Query.GetSearchSpec(aL,this);if(aJ.length>0){aE.push(aJ[0])}}this.SetExecutionState(true);m.CcfLogEvent([M,31,0,45,this.GetName(),"SearchSpec: ",aE]);m.CcfLogEvent([M,31,0,46,this.GetName(),"SortSpec: ",az]);this.PopulateWS(aI,aD,aE,az);$.callback(this,function(aX){if(!aX.err){this.NotifyExecute();this.SetExecutionState(false);this.SetExecuted(true);$.callback(this,function(){at[ap]=s;aw.SetProperty("RetVal",true);Y.InvokeRegisteredSvc(at,aw);$.callback(this,function(){$.setReturnValue({err:false})});if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("BusComp.prototype.Execute")}})}else{$.setReturnValue({err:true})}})})})};an.prototype.ClearLinkDef=function(){this.SetExtObjProp("m_pCurLinkQueryDef","")};function n(aB){var av=this.GetViewMode();var aA=this.GetUIState();if(aq.IsEmpty(av)){if(!aA){return null}else{var az=SiebelApp.S_App.GetActiveView().GetName();av=SiebelApp.S_App.Model.GetViewMode(az);if(av!=="4"){av=av.toString();this.SetViewMode(av)}else{var at=this.GetDefn();var ay=at.Visibility;var aw=ay.length;if(aw>0){for(var au=0;au<aw;au++){if(ay[au].mode==="0"){av=0;break}else{if(ay[au].mode==="2"){av=2;break}else{av=5}}}}av=av.toString();this.SetViewMode(av)}}}if(av==="5"){return null}var ar=Math.pow(2,av);if(av==="3"){ar=15}var ax="("+aB+'._PDAVisibilityTypes & "'+ar+'") OR ('+aB+"._PDAVisibilityTypes = '' )";return ax}function G(){var av=this.GetWS().length;if(av>0){var aA=this.GetWSSize();var at=this.GetWS();this.SetRecordCount(av);var aB=[0,1];var au=[];for(var ax=0;ax<av;ax++){au.push(at[ax])}if(this.IsVBC()){this.SetVBCRecords(au)}else{this.SetRelatedBCRecords(au)}if(av<aA){aB[0]=av-1}else{aB[0]=aA-1;for(var aw=aA;aw<av;aw++){this.DeleteWorkSet(aA)}}var az=this.GetNotifyInfoArray();if(az&&az[0]){var ay=az[0].GetAppletArray();var ar=ay.length;for(ax=0;ax<ar;ax++){az[0].SetBegRow(0,ay[ax]);az[0].SetCurrRow(0,ay[ax])}}this.SetCursor(aB)}}an.prototype.SetLinkSpec=function(aw,au,ar,at){this.ActivateField(at.destFieldName);var av=this.GetExtObjProp("m_pCurLinkQueryDef");if(av&&av.Defn.SrcFieldValue===ar){return}av={};av.Defn=at;av.Defn.SrcFieldValue=ar;av.Data={};av.Data.srcFieldValue=ar;this.SetExtObjProp("m_pCurLinkQueryDef",av)};an.prototype.IsExecuted=function(){var ar=this.GetExtObjProp("m_bExecuted");if(!ar){this.SetExtObjProp("m_bExecuted",false)}return(this.GetExtObjProp("m_bExecuted"))};an.prototype.IsPagination=function(ar){switch(ar){case F.get("POSITION_ON_ROW"):case F.get("SCROLL_NEXT_DATA"):case F.get("SCROLL_PREV_DATA"):case F.get("GO_TO_NEXT_SET"):case F.get("GO_TO_PREV_SET"):return true;default:return false}};an.prototype.SetExecuted=function(at){var ar=this.IsExecuted();if(ar===at){return}if(!at){this.UndoRecord();$.callback(this,function(){this.SetExtObjProp("m_bExecuted",at);this.NotifyStateChanged("bExecuted",at);this.EmptyWorkSet();ai.call(this,-1)})}else{this.SetExtObjProp("m_bExecuted",at);this.NotifyStateChanged("bExecuted",at)}};an.prototype.SetDelRecPending=function(ar){if(this.deletePending&&(this.deletePending===ar)){return}this.deletePending=ar;this.NotifyStateChanged("dp",ar)};an.prototype.IsParCommitPen=function(){if(!((this.GetExtObj).hasOwnProperty("m_isParentCommit"))){this.GetExtObj.m_isParentCommit=false}return this.GetExtObj.m_isParentCommit};an.prototype.SetParCommitPen=function(ar){if(this.GetExtObj.m_isParentCommit&&(this.GetExtObj.m_isParentCommit===ar)){return}this.GetExtObj.m_isParentCommit=ar};an.prototype.SetNewRecPending=function(ar){if(this.insertPending&&(this.insertPending===ar)){return}this.insertPending=ar;if(ar){ar=1}else{ar=0}this.NotifyStateChanged("np",ar)};an.prototype.IsNewRecordPending=function(){return this.insertPending};an.prototype.GetDefaultValue=function(at,av,au){var ar=this.GetDefaultExpr(av,au);this.EvaluateFieldExpr(ar,av,au);$.callback(this,function(aw){$.setReturnValue(aw)})};an.prototype.GetDefaultExpr=function(au,ar){var at=ar?this.GetFieldDefn(au).PreDefault:this.GetFieldDefn(au).PostDefault;return at};an.prototype.EvaluateFieldExpr=function(aA,aw,aJ){var aE="";var au=aA;var aD=aA.indexOf("Parent:");var aH=aA.indexOf("Field:");var aI=aA.indexOf("Expr:");var aC=aA.indexOf("System:");if(aq.IsEmpty(aA)){$.setReturnValue({err:false,retVal:aE});return}if(aA.toUpperCase()==="SYSTEM: CREATORID"){aE=Y.GetLoginId();$.setReturnValue({err:false,retVal:aE});return}if(aA.toUpperCase()==="SYSTEM: TIMESTAMP"){aE="";if(this.GetFieldMap()[aw].GetDataType()==="date"){aE=SiebelApp.OfflineUtils.GetTS()}else{aE=SiebelApp.OfflineUtils.GetTS()}$.setReturnValue({err:false,retVal:aE});return}if(aC===0){au=au.replace("System:","");au=au.replace("()","");au=au.trim();switch(au.toUpperCase()){case"CREATOR":aE=Y.GetLoginName();break;case"CREATORID":case"LOGINID":aE=Y.GetLoginId();break;case"CURRENCY":aE=Y.GetCurrencyCode();break;case"POSITIONID":aE=Y.GetPositionId();break;case"DIVISIONNAME":aE=Y.GetDivisionId();
break;case"ORGANIZATIONID":aE=Y.GetOrganizationId();break;case"ORGANIZATIONNAME":aE=Y.GetOrganizationName();break;case"CONTACTLOGINID":aE=Y.GetLoginId();break;case"CONTACTLOGINNAME":aE=Y.GetLoginName();break;case"TODAY":aE=SiebelApp.OfflineUtils.GetDate();break}$.setReturnValue({err:false,retVal:aE});return}if(aD===0){var aF=0;var at=au.split(",");var aG=at.length;var ar=false;var az=function(){if(this.GetParentBusComp()){var aM=this.GetParentBusComp().GetName();if(aM){at[aF]=at[aF].replace("Parent:","");at[aF]=at[aF].replace(/["']{1}/gi,"");at[aF]=at[aF].replace(/['"]/g,"");var aK=(at[aF].slice(0,at[aF].indexOf("."))).trim();var aL=(at[aF].slice(at[aF].indexOf(".")+1));if(aM===aK){this.GetParentBusComp().FieldValue(aL);$.callback(this,function(aN){$.setReturnValue(aN)});return}}}else{$.setReturnValue({err:false,retVal:""})}};var ay={};var ax=function(){at[aF]=at[aF].trim();if(at[aF].indexOf("Parent:")===0||at[aF].indexOf("Field:")===0||at[aF].indexOf("Expr:")===0||at[aF].indexOf("System:")===0){if(aF===0){az.call(this)}else{this.EvaluateFieldExpr(at[aF].trim(),aw,aJ)}}else{az.call(this)}$.callback(this,function(aK){if(!aq.IsEmpty(aK.retVal)){ar=true;ay=aK;$.setReturnValue(ay)}if(!ar){aF++;if(aF<aG){ax.call(this)}else{ar=true;ay={err:false,retVal:""};$.setReturnValue(ay)}}})};if(aF<aG){ax.call(this)}$.callback(this,function(){if(ar){$.setReturnValue(ay);return}});if(ar){return}}if(aH===0){au=au.replace("Field:","");au=au.replace(/["']{1}/gi,"");au=au.replace(/['"]/g,"");au=au.trim(au);this.FieldValue(au);$.callback(this,function(aK){$.setReturnValue(aK)});return}var aB;if((aI===0)){au=au.replace("Expr:","");au=au.trim();var av=au.length-1;if((au[0]==="'"||au[0]==='"')&&(au[av]==="'"||au[av]==='"')){au=au.slice(1,av)}if(!this.GetFieldDefn(aw).PreQuery){aB=SiebelApp.Query.Parse(au);this.GetFieldDefn(aw).PreQuery=aB}aE=SiebelApp.Query.Evaluate(this.GetFieldDefn(aw).PreQuery,this);$.setReturnValue({err:false,retVal:aE});return}if(aH!==0&&aD!==0&&aI!==0&&aC!==0){au=au.trim();if(!this.GetFieldDefn(aw).PreQuery){aB=SiebelApp.Query.Parse(au);this.GetFieldDefn(aw).PreQuery=aB}aE=SiebelApp.Query.Evaluate(this.GetFieldDefn(aw).PreQuery,this);$.setReturnValue({err:false,retVal:aE});return}if(!isNaN(au)){$.setReturnValue({err:false,retVal:au});return}if((aD===-1)&&(aH===-1)){$.setReturnValue({err:false,retVal:au});return}};an.prototype.IsRequired=function(){return false};an.prototype.HasDefaultValue=function(){return false};an.prototype.NotifyNewRecordDataWS=function(){var au;if(!this.IsNotifySysEnabled()){return}if(!this.CheckActiveRow()){return}var aw=this.GetNotifyInfoArray();var ar=aw.length;for(var at=0;at<ar;at++){au=aw[at];if(au){var av=au.GetBusCompNotify();if(av){av.NotifyNewRecordDataWS()}}}};an.prototype.NotifyNewRecordData=function(){var au;if(!this.IsNotifySysEnabled()){return}this.NotifyNewRecordDataWS();if(!(this.IsNotifyEnabled())){return}var aw=this.GetNotifyInfoArray();var ar=aw.length;for(var at=0;at<ar;at++){au=aw[at];if(au){var av=au.GetBusCompNotify();if(av){av.NotifyNewRecordData()}}}};an.prototype.FillRecord=function(){return};an.prototype.OnWriteRecord=function(){return};an.prototype.UpdateSync=function(at,aw){var ax="";var au=this.GetNewTxn();var aB=this.GetOpType();var ay=this.GetTxnId();var ar=this.GetLocalTxn();if(ay===""){ay=m.GetTempId();this.SetTxnId(ay)}if(aB===F.get("ADDRECORD")){ax=this.GetNewTxn()}else{if(aB===F.get("DELETERECORD")){ax=this.GetNewTxn()}else{if(au!==""){aB=F.get("NEWRECORD")}if(aw){var az=this.GetOldFNm();var av=this.GetOldfVal();for(var aA=0;aA<az.length;aA++){ax=ax+"OF_"+az[aA]+"="+av[aA]+"&"}if(ax!==""){this.SyncQRec(at);$.callback(this,function(aC){var aD=aC.retVal;ax=ax+aD;if(au!==""){ax=au+"~"+ax}})}}}}$.callback(this,function(){if(ax!==""||!aw){var aD=ag.get("PRO_SYNCQUEUE_DB_TBL_COLS");var aC=m.RemoveNonAlphaChars(this.GetName());var aE=[aD.TransactionId,aD.TransactionType,aD.BusComp,aD.RowId,aD.LocalTxnInfo,aD.SyncStatus];var aF=[ay,aB,aC,at,ar,F.get("SYNC_NEW")];if(aw){aE.push(aD.Request);aF.push(ax)}var aG=SiebelApp.SqlBuilder.InsertRecord(ag.get("PRO_SYNCQUEUE_DB_TBL"),aE,aF);m.CcfLogEvent([F.get("LOG_EVT_UPSYNC"),94,0,49,aG.insertquery,aG.values]);SiebelApp.BrowserCacheMgr.Execute(aG.insertquery,aG.values);if(aw){SiebelApp.OfflineAppSettings.SetSyncStatus(true);m.CcfLogEvent([M,38,0,49,ay,this.GetName()]);SiebelApp.S_App.UpdateSyncStatus("SyncPendng")}}this.SetNewTxn("");this.SetTxnId("");this.SetEmptyFNm();this.SetOpType("")})};an.prototype.FldType=function(ar){var at=this.GetFieldDefn(ar);if(at&&!at.ReadOnly){return true}return false};an.prototype.SetCommitPending=function(ar){if(this.IsCommitPending()===ar){return}m.CcfLogEvent([M,36,0,47,"CommitPending",ar,this.GetName()]);this.commitPending=ar;if(ar){ar=1}else{ar=0}if(!this.commitPending){this.ClearUpdates();this.GetCommitPending=function(){return false}}this.NotifyStateChanged("cp",ar)};an.prototype.GetChildBCArray=function(){var aw=[];var ar=this.GetBusObj();var av=ar.GetBCMap();var at;for(var au in av){if(av[au]){at=av[au].GetParentBusComp();if(!!at&&this.GetVarName()===at.GetVarName()){aw.push(av[au])}}}return(aw)};an.prototype.ResetChildBCArr=function(){this.SetExtObjProp("m_childBCarr",[])};an.prototype.UpdateLinks=function(){if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().StartTime("BusComp.prototype.UpdateLinks")}var aw=[];var av=this.GetChildBCArray();if(av){var az=av.length;var ay=this.GetExtObjProp("m_bDisNotChildOnUpdLnks");if(aq.IsEmpty(ay)){this.SetExtObjProp("m_bDisNotChildOnUpdLnks",true);ay=true}var ar=0;var au;var ax=[];for(var at=0;at<az;at++){if(ay){av[at].DisableNotify()}au=function(){var aA=at;return function(){av[aA].EnableNotify()}};if(this.GetActiveRow()!==-1){ax=av[at].GetCursor();ax[0]=0;av[at].SetCursor(ax);aw[ar]={execute:av[at].Execute,executeScope:av[at]};ar++;aw[ar]={execute:av[at].Home,executeScope:av[at],postExecute:au()};ar++}else{av[at].SetExtObjProp("m_bExecuted",false);aw[ar]={execute:av[at].UpdateLinks,executeScope:av[at]};ar++;aw[ar]={execute:av[at].Home,executeScope:av[at],postExecute:au()};ar++}}if(aw.length>0){$.eachAsyncOp(this,aw);$.callback(this,function(){aw=null;au=null;av=null});if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("BusComp.prototype.UpdateLinks")}}}};an.prototype.DisableNotify=function(){if(!(this.IsNotifyEnabled())){return}this.SetNotifyEnabled(false);this.NotifyStateChanged(("bNotifyEnabled"),false)};an.prototype.NotifyInsertWorkSet=function(av,at){var aw;if(!this.IsNotifySysEnabled()){return}var ay=this.GetNotifyInfoArray();var ar=ay.length;for(var au=0;au<ar;au++){aw=ay[au];if(aw){var ax=aw.GetBusCompNotify();if(ax){ax.NotifyInsertWorkSet(av,at)}}}};an.prototype.NotifyDeleteWorkSet=function(au,ay,ax){var av;if(!this.IsNotifySysEnabled()){return}var az=this.GetNotifyInfoArray();var ar=az.length;for(var at=0;at<ar;at++){av=az[at];if(av){var aw=av.GetBusCompNotify();if(aw){aw.NotifyDeleteWorkSet(au,ay,ax)}}}};an.prototype.GetNotifyInfo=function(au,ar){var at=this.GetNotifyInfoArray();
ar=(au<at.length)?at[au]:null;return ar};an.prototype.EnableNotify=function(){var au;var ar;if(this.IsNotifyEnabled()){return}if(!(this.IsNotifySysEnabled())){this.SetNotifySysEnabled(true);this.NotifyDeleteWorkSet(0,-1,null);var at=this.GetWorkSet().length;for(au=0;au<at;au++){ar=this.GetWorkSet()[au];this.NotifyInsertWorkSet(au,ar)}this.NotifyStateChanged(("bExecuted"),this.m_bExecuted);this.NotifyStateChanged(("activeRow"),this.m_activeRow);this.NotifyStateChanged(("cp"),this.IsCommitPending());this.NotifyStateChanged(("np"),this.IsNewRecordPending())}this.SetNotifyEnabled(true);this.NotifyStateChanged(("bNotifyEnabled"),true)};an.prototype.GetQuickPickInfo=function(aw,ax){if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().StartTime("BusComp.prototype.GetQuickPickInfo")}var at=this.GetFieldDefn(ax);var av;av=this.GetPickListInfo(aw,ax);if(at.pickMap){var ar=at.pickMap.length;for(var au=0;au<ar;au++){if(at.pickMap[au].FldName===ax){av.PFldName=at.pickMap[au].PFldName;break}}}SiebelApp.BrowserCacheMgr.GetPickListData(av,this,ax);$.callback(this,function(ay){$.setReturnValue(ay);if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("BusComp.prototype.GetQuickPickInfo")}})};an.prototype.GetPickListInfo=function(au,av){var ar;var at;ar=this.ValidateFieldDef(av);if(ar){at=SiebelApp.Metadata.GetPickListDef(au);return at}else{return at}};an.prototype.GetIdValueX=function(){if(this.CheckActiveRow()){var ar=this.GetActiveRow();var at=this.FindWorkSet(ar);this.FieldValue(D.get("SWE_ROW_ID_FIELD"),at);$.callback(this,function(au){$.setReturnValue({err:au.err,retVal:au.retVal});return})}else{$.setReturnValue({err:false,retVal:""});return}};function I(){var aw=[];var ax=CCFMiscUtil_CreatePropSet();ax.SetType(D.get("SWE_PST_REC_LIST"));var at=this.GetWS();var av;if(at==="undefined"||at.length<=0){av=CCFMiscUtil_CreatePropSet();av.SetType(D.get("SWE_PROP_LAST_RECORD"));av.SetProperty("v","");ax.AddChild(av);$.setReturnValue({err:false,retVal:ax})}else{ax.SetProperty(D.get("SWE_PROP_ACTIVE_ROW"),h.call(this));var ar=this.GetRowNum();var ay;if(ar.err){ay=-1}else{ay=ar.retVal}ax.SetProperty(D.get("SWE_PROP_CURR_RNUM"),ay);var au=this.GetNumRowsX();ax.SetProperty(D.get("SWE_PROP_NUM_ROWS"),au.retVal);aw=this.GetActivatedFieldList();this.PrepareOfflineRawRecord(at.length,aw);$.callback(this,function(aC){var aA=aC.retVal;for(var az=0;az<aA.length;az++){var aB=aA[az].value;var aD=aA[az].id;av=CCFMiscUtil_CreatePropSet();av.SetType(D.get("SWE_PROP_RECORD"));av.SetProperty("i",aD);av.SetProperty("v",aB);ax.AddChild(av)}$.setReturnValue({err:false,retVal:ax})})}}an.prototype.PickUpActiveFields=function(){var au=[];var at=this.GetFieldList();for(var ar=0;ar<at.length;ar++){var av=at[ar];av=SiebelApp.S_App.LookupStringCache(av);au.push(SiebelApp.OfflineUtils.RemoveNonAlphaChars(av))}return au};an.prototype.WSNextRecordX=function(av,ar){var au={};au.err="";var aw=this.GetNotifyInfoArray();var at=aw[av];if(av>aw.length||aq.IsEmpty(at)){au.err="SSAOMErrNotifyInfo";$.setReturnValue(au);return au}if(((at.GetCurrRow(ar)+1)-(at.GetBegRow(ar))<at.GetSize(ar))&&((at.GetCurrRow(ar)+1)<this.GetWS().length)){at.SetCurrRow(at.GetCurrRow(ar)+1,ar)}else{if((this.GetIsRelatedBC())&&((at.GetCurrRow(ar)+1)<this.GetWS().length)){at.SetCurrRow(at.GetCurrRow(ar)+1,ar)}else{au.err="SSAOMErrNotifyInfo"}}$.setReturnValue(au);return au};an.prototype.WSGetCurrRow=function(av,ar){var au={};au.err="";var aw=this.GetNotifyInfoArray();var at=aw[av];if(av>aw.length||aq.IsEmpty(at)){au.err="SSAOMErrNotifyInfo";return au}au.retVal=at.GetCurrRow(ar);return au};an.prototype.WSSetCurrRow=function(aw,av,ar){var au={};au.err="";var ax=this.GetNotifyInfoArray();var at=ax[aw];if(aw>ax.length||aq.IsEmpty(at)){au.err="SSAOMErrNotifyInfo";return au}at.SetCurrRow(av,ar);return au};an.prototype.NextRecord=function(){if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().StartTime("BusComp.prototype.NextRecord")}this.FinishRecord();var ar;ar=h.call(this);if(ar<0){$.setReturnValue({err:true});return}if(ar<(this.GetWS().length-1)){this.SetActiveRow(ar+1);$.callback(this,function(at){$.setReturnValue(at)});return}if(this.GetWS().length===1){this.GetNextRecord();$.callback(this,function(au){if(!au.err){var at=au.retVal;this.InsertWorkSet(0,at);this.DeleteWorkSet(1);this.NotifyNewData()}else{$.setReturnValue(au)}})}else{this.ScrollWorkSet(1);$.callback(this,function(at){if(at.err){$.setReturnValue({err:true});return}this.NotifyScrollData(true);return})}};an.prototype.PriorRecord=function(){if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().StartTime("BusComp.prototype.PriorRecord")}this.FinishRecord();var ar;ar=h.call(this);if(ar<0){$.setReturnValue({err:true});return}if(ar>0){this.SetActiveRow(ar-1);$.callback(this,function(at){$.setReturnValue(at)});return}if(this.GetWS().length===1){this.GetPriorRecord();$.callback(this,function(au){if(!au.err){var at=au.retVal;this.InsertWorkSet(0,at);this.DeleteWorkSet(1);this.NotifyNewData()}else{this.DeleteWorkSet(1);$.setReturnValue(au)}})}else{this.ScrollWorkSet(-1);$.callback(this,function(at){if(at.err){$.setReturnValue({err:true});return}this.NotifyScrollData(true);return})}};an.prototype.WSFieldValue=function(ax,aw,at){var av={};av.err="";var ay=this.GetNotifyInfoArray();var au=ay[aw];if(aw>ay.length||aq.IsEmpty(au)){av.err="SSAOMErrNotifyInfo";$.setReturnValue(av);return}var ar=this.FindWorkSet(au.GetCurrRow(at));this.FieldValue(ax,ar);$.callback(this,function(az){$.setReturnValue(az)})};an.prototype.PrepareOfflineRawRecord=function(aB,ax){var au=aB;var ay=ax.length;var aw="";var av={};var az=[];var aA=h.call(this);var at=0;var aC=0;var ar=function(){if(at===0){this.WSHomeX(aC)}else{this.WSNextRecordX(aC)}$.callback(this,function(){var aE=0;var aD=function(){var aG="";var aF=0;this.WSFieldValue(ax[aE],aC);$.callback(this,function(aH){if(!aH.err){aG=aH.retVal;if(!aG){aG=""}aF=aG.length;if(aw.length){aw=aw+aF+"*"+aG}else{aw=aF+"*"+aG}if(ax[aE]==="Id"){av.id=aG}}aE++;if(aE<ay){aD.call(this)}else{av.value=aw;az.push(av);aw="";av={}}})};if(ay>0){aD.call(this)}});$.callback(this,function(){at++;if(at<au){ar.call(this)}})};if(au>0){ar.call(this)}$.callback(this,function(){ai.call(this,aA);$.setReturnValue({err:false,retVal:az})})};function b(ar,aw,av,au){var at=this;if(!av&&ar&&!aw){at.NotifyNewSelection(false)}if(at.GetMultiSelectMode()!==av){at.NotifySelModeChange(at.GetMultiSelectMode());at.NotifyChangeSelection()}else{if(aw){at.NotifyChangeSelection()}else{if(ar){at.NotifyNewSelection(this.GetInverseSelection()?!au:au)}}}}an.prototype.SelectRow=function(at,aD,aw,ar){if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().StartTime("BusComp.prototype.SelectRow")}if(this.GetBusCompType()===(SiebelApp.Offlineconstants.get("BCTYPE_PICKLIST"))){aw=false;ar=false}var aA=false,az=this.GetMultiSelectMode(),aC,av=this.GetSelRowIdArray(),ay,ax,aB,au;if(!aw&&!ar){if(az){this.SetMultiSelectMode(false);this.SetInverseSelection(false);av.splice(0,av.length)}b.call(this,aw,ar,az,aA);
return}if(!this.CheckActiveRow()){$.setReturnValue({err:true});return}au=this.GetNotifyInfoArray().length>0?this.GetNotifyInfoArray()[0]:null;if(!au||!at){$.setReturnValue({err:"SSAOMErrNotifyInfo"});return}ax=this.FindWorkSet(au.GetBegRow(at)+aD);if(!aw){this.SetInverseSelection(false);av.splice(0,av.length)}if(!ar){if(!this.GetMultiSelectMode()){aB=this.FindWorkSet(this.GetActiveRow());this.FieldValue(D.get("SWE_ROW_ID_FIELD"),aB);$.callback(this,function(aE){ay=aE.retVal;av.push(ay)})}$.callback(this,function(){this.FieldValue(D.get("SWE_ROW_ID_FIELD"),ax);$.callback(this,function(aF){aC=aF.retVal;for(var aE=0;aE<av.length;aE++){if(av[aE]===aC){break}}if((aA=(aE===av.length))){av.push(aC)}else{av.splice(aE,1)}this.SetSelRowIdArray(av);this.FieldValue(D.get("SWE_ROW_ID_FIELD"),ax);$.callback(this,function(aG){var aH=aG.retVal;this.SetLastSelectedRowId(aH);this.SetMultiSelectMode(true);b.call(this,aw,ar,az,aA)})})})}};an.prototype.AssocSelection=function(){if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().StartTime("BusComp.prototype.AssocSelection")}this.GetIdValueX();$.callback(this,function(aB){if(!aB.err){var aJ=aB.retVal;var aA=this.GetActiveRow();var ay=aA;var ax=this.GetMultiSelectMode();var ar=this.GetSelRowIdArray();if(ax&&!this.GetInverseSelection()&&(ar.length===1)&&(ar[0]===aJ)){this.SetMultiSelectMode(false);ax=false;this.SetSelRowIdArray([]);this.NotifySelModeChange(ax)}if(!ax){return(al.call(this,aA))}this.FinishRecord();this.DisableNotify();var aI=this.GetBaseBC();aI.DisableNotify();var av=aI.GetParentBusComp();av.DisableNotify();var aH=this.GetActiveRow();var au=this.GetSelRowIdArray();var aC=this.GetWorkSetSize();var aK;var aD;var aF=0;var aw=function(aL){this.PositionById(aL);$.callback(this,function(){al.call(this,this.GetActiveRow())})};if(this.GetInverseSelection()){var aG=au.slice(),aE;au.splice(0,aG.length);var at=function(){aE=this.GetWS()[this.GetActiveRow()].Id;if(aG.indexOf(aE)===-1){aw.call(this,aE)}$.callback(this,function(){this.NextRecord();$.callback(this,function(aL){if(!aL.err){at.call(this)}})})};this.Home();$.callback(this,function(){at.call(this)})}else{aK=au.length;var az=function(){aw.call(this,au[aF]);$.callback(this,function(){aF++;if(aF<aK){az.call(this)}})};if(aF<aK){az.call(this)}}$.callback(this,function(){this.SetActiveRow(aH);$.callback(this,function(aL){if(!aL.err){if(aD===aC){this.DeleteWorkSet(aC)}this.NotifySelModeChange(ax);this.SetMultiSelectMode(false);aI.EnableNotify();av.EnableNotify();this.EnableNotify();this.SetSelRowIdArray([]);this.NotifySelModeChange(false);this.NotifyNewData();aI.Home();$.callback(this,function(){aI.NotifyExecute();aI.NotifyNewData();if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("BusComp.prototype.AssocSelection")}})}})})}})};an.prototype.IsCurWSRecSelected=function(ay,au){var at;var ax=false;var aw;var av="";var az;az=this.GetSelRowIdArray();at=h.call(this);if(at<0){return}var ar=this.WSGetCurrRow(0,au).retVal;if(!this.GetMultiSelectMode()){ax=ar===at?true:false}else{aw=this.FindWorkSet(ar);if(aw){this.FieldValue(D.get("SWE_ROW_ID_FIELD"),aw)}$.callback(this,function(aB){if(!aB.err){av=aB.retVal;var aA;for(aA=0;aA<az.length;aA++){if(az[aA]===av){break}}if(aA!==az.length){ax=true}else{ax=false}if(this.GetInverseSelection()){ax=!ax}}})}$.callback(this,function(){$.setReturnValue({err:false,retVal:ax})})};an.prototype.GetBaseBC=function(){var au=this.GetExtObjProp("baseBC");if(!au){var ar=SiebelApp.S_App.GetActiveView().GetActiveApplet();var at=ar.GetParentApplet();if(at){au=at.GetBusComp();this.SetExtObjProp("baseBC",au)}else{this.SetExtObjProp("baseBC","NoBaseBC")}}else{if(au==="NoBaseBC"){au=""}}return au};an.prototype.SetBaseBC=function(ar){this.SetExtObjProp("baseBC",ar)};function al(ar){this.FinishRecord();$.callback(this,function(){if(ar<0){return}var at=this.FindWorkSet(ar);this.PositionById(at.Id);$.callback(this,function(){var au=this.GetBaseBC();au.SetAssocList(this);au.AddAssociation();$.callback(this,function(){this.NotifyNewData("SSAAssocExistsField")})})})}an.prototype.PickCurrentRow=function(){var aC=this.GetMasterBC();var aA=aC.GetName();var ar=this.GetPickSrcField();var az=aC.GetFieldDefn(ar);if(az.PickListName){var at=az.pickMap;var au=at.length;var aB;var aw=0;var av=true;var ay=this.GetPickSrcIdFName();var ax=aC.FindWorkSet(aC.GetActiveRow());if(ay){this.GetIdValueX();$.callback(this,function(aD){if(!aD.err){if(ax&&aD.retVal!==ax[ay]&&!aC.commitPending){aC.NotifyStateChanged("cp",1)}m.CcfLogEvent([M,75,0,83,"Master BC: ",aA,"BC: ",this.GetName(),ay,aD.retVal]);aC.SetFieldValueX(ay,aD.retVal,true)}else{$.setReturnValue(aD)}})}$.callback(this,function(){var aD=function(){av=true;if(at[aw]){aB=at[aw].FldName;this.FieldValue(at[aw].PFldName);$.callback(this,function(aF){var aE=aC.GetFieldDefn(aB);if(at[aw].IsConstrained&&aq.IsTrue(aE.IsCalculated)){av=false}if(av){if(!aF.err||!at[aw].PFldName){if(ax&&aF.retVal!==ax[aB]&&!aC.commitPending){aC.NotifyStateChanged("cp",1)}m.CcfLogEvent([M,75,0,83,"Master BC: ",aA,"BC: ",this.GetName(),aB,aF.retVal]);aC.SetFieldValueX(aB,aF.retVal,true)}}})}aw++;if(aw<au){$.callback(this,aD)}};if(aw<au){aD.call(this)}$.callback(this,function(){$.setReturnValue({err:false,retVal:true});return})})}};an.prototype.AddAssociation=function(){if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().StartTime("BusComp.prototype.AddAssociation")}var at;var au=CCFMiscUtil_CreatePropSet();var ar={};ar[P]=this.GetName();ar[v]=C;ar[T]="AddAssociation";ar[i]=this;ar[ap]=a;SiebelApp.S_App.Model.InvokeRegisteredSvc(ar,au);$.callback(this,function(aA){at=aA.retVal;var ay=aA.err;if(ay){$.setReturnValue({err:ay,retVal:at});return}if(!aA.err){at=aA.retVal;if(at.Outputargs&&(at.Outputargs).GetProperty("Invoked")&&(at.Outputargs).GetProperty("Invoked").toString()==="true"){var aw=(at.Outputargs).GetProperty("RetVal");if(aw){$.setReturnValue({err:ay,retVal:aw})}else{$.setReturnValue({err:ay,retVal:""})}if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("BusComp.prototype.AddAssociation")}return}}if(at.Outputargs){(at.Outputargs).SetType(a);au.AddChild(at.Outputargs)}var av=function(){this.FinishRecord();$.callback(this,function(){var aE=this.GetActiveRow();var aC=this.FindWorkSet(aE);var aF=this.GetAssocList();if(aF){var aD=aF.FindWorkSet(aF.GetActiveRow());aE++;t.call(this,aD);$.callback(this,function(aJ){if(aJ.err){$.setReturnValue(aJ)}else{var aH=aJ.retVal.fieldList;var aI=aJ.retVal.fieldVal;this.InsertWorkSet(aE,aD);var aG=this.GetWorkSetSize();var aK=this.GetWS().length;if(aC&&aK>aG){if(aE!==aK-1){this.DeleteWorkSet(aK-1)}else{this.DeleteWorkSet(0);aE--}}this.SetActiveRow(aE);$.callback(this,function(){if(aH.length>0){var aL=function(aM){return[aH[aM],aI[aM],true]};$.eachAsyncOp(this,{execute:this.SetFieldValueX,executeScope:this,preExecute:aL,iteration:aH.length})}$.callback(this,function(){var aM=this.GetCursor();if(!aM||aM.length!==2){aM=[0,1]}else{aM[0]++}if(aB){this.FieldValue("Id");$.callback(this,function(aO){var aN=aO.retVal;
az.UpdateRecordX();$.callback(this,function(){az.SetFieldValueX(ax.primeIdFieldName,aN);$.callback(this,function(){az.WriteRecord();$.callback(this,function(){this.NotifyNewRecord();this.OnAddAssociation();this.UpdateLinks(false);$.callback(this,function(){if(az){az.OnAddChildAssociation(this)}ar[ap]=s;SiebelApp.S_App.Model.InvokeRegisteredSvc(ar,au);$.callback(this,function(aQ){at=aQ.retVal;var aP=aQ.err;if(aP){$.setReturnValue({err:aP,retVal:at});return}if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("BusComp.prototype.AddAssociation")}})})})})})})}else{this.NotifyNewRecord();this.OnAddAssociation();this.UpdateLinks(false);$.callback(this,function(){if(az){az.OnAddChildAssociation(this)}ar[ap]=s;SiebelApp.S_App.Model.InvokeRegisteredSvc(ar,au);$.callback(this,function(aO){at=aO.retVal;var aN=aO.err;if(aN){$.setReturnValue({err:aN,retVal:at});return}if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("BusComp.prototype.AddAssociation")}})})}})})}})}})};var ax=this.GetLinkDef();var aB=false;var az=this.GetParentBusComp();if(ax&&ax.primeIdFieldName&&az&&!(az.GetDefn().Fields[(ax.primeIdFieldName)].ReadOnly)){az.CanUpdateField(ax.primeIdFieldName);$.callback(this,function(aC){if(aC.retVal){az.FieldValue(ax.primeIdFieldName);$.callback(this,function(aE){var aD=aE.retVal;if(!aD){aB=true}av.call(this)})}else{av.call(this)}})}else{av.call(this)}})};an.prototype.GetWorkSetSize=function(){return this.GetWSSize()};an.prototype.DeleteWorkSet=function(av){var ar="";var at=this.GetWS().length;if(at===0){return}else{if(av!==at){var au=this.GetWS().splice(av,1);ar=au[0]}}this.NotifyDeleteWorkSet(av,1,ar)};function t(aD){var aI=aD.Id;var ax=this.GetWorkSetSize();var au;for(var aF=0;aF<ax;aF++){au=this.FindWorkSet(aF);if(au){if(aI===au.Id){$.setReturnValue({err:true});return}}}this.SetBCTableInsertState(F.get("INSMODE_ASSOCONLY"));var aM=this.GetLinkDef();var ay=aM.interTableName;var aE=[];var aK=[];aE.push(SiebelApp.OfflineUtils.RemoveNonAlphaChars(aM.interParentColName));aE.push(SiebelApp.OfflineUtils.RemoveNonAlphaChars(aM.interChildColName));aK.push((this.GetExtObjProp("m_pCurLinkQueryDef").Data.srcFieldValue));aK.push(aI);aE.push(SiebelApp.OfflineUtils.RemoveNonAlphaChars(D.get("SWE_ROW_ID_FIELD")));var aH=Z.call(this,aK[0],aI);aK.push(aH);var aJ=this.GetDefn().Fields;var aB=0;var ar=[];var av=[];var az={};az.fieldList=[];az.fieldVal=[];for(var aL in aJ){if(aJ[aL]){var aA=aJ[aL].ColName;if(aJ[aL].Join&&aJ[aL].JoinInfo.JoinType==="X"){if(L.DoesFieldExist(ay,aA)){var aG=aJ[aL].PreDefault;if(aG){aE.push(aA);av.push(aL);aB++}}}}}if(aB>0){var aw=this.GetName();var at=function(aN){return[aw,av[aN],true]};az.fieldList=av;var aC=function(aN){ar.push(aN.retVal);aK.push(aN.retVal)};$.eachAsyncOp(this,{execute:this.GetDefaultValue,executeScope:this,postExecute:aC,preExecute:at,iterations:aB})}$.callback(this,function(){az.fieldVal=ar;var aO=SiebelApp.SqlBuilder.InsertRecord(ay,aE,aK);this.SetInsertStatement(aO);var aN={};aN.query=aO.insertquery;aN.valList=aO.values;this.SetLocalTxn(JSON.stringify(aN));this.SetOpType(F.get("ADDRECORD"));this.SyncQRec(aI);m.CcfLogEvent([M,34,0,52,"interTable: ",ay,aO.insertquery]);$.callback(this,function(aP){var aQ=aP.retVal;this.SetNewTxn(aQ);this.WriteRecord();$.callback(this,function(){$.setReturnValue({err:false,retVal:az})})})})}function Z(at,ar){return(at+"."+ar)}an.prototype.OnAddAssociation=function(){};an.prototype.OnAddChildAssociation=function(){};an.prototype.DisableNotifySys=function(){if(!(this.IsNotifySysEnabled())){return}this.NotifyDeleteWorkSet(0,-1);this.DisableNotify();this.SetNotifySysEnabled(false)};an.prototype.NotifyGeneric=function(av,au){var aw;if(this.IsNotifyEnabled()){var ay=this.GetNotifyInfoArray();var ar=ay.length;for(var at=0;at<ar;at++){aw=ay[at];if(aw){var ax=aw.GetBusCompNotify();if(ax){ax.NotifyGeneric(av,au)}}}}};an.prototype.NotifyExecute=function(){var au;if(this.IsNotifyEnabled()){var aw=this.GetNotifyInfoArray();var ar=aw.length;for(var at=0;at<ar;at++){au=aw[at];if(au){var av=au.GetBusCompNotify();if(av){av.NotifyExecute()}}}}};an.prototype.GetNumSelected=function(av){var au=this.GetSelRowIdArray();if(!this.GetMultiSelectMode()){av=1}else{if(!this.GetInverseSelection()){av=au.length}else{var at=this.GetNumRowsX();var ar=at.retVal;av=ar-au.length;return av}}return av};an.prototype.CheckActivation=function(){var av=false;var az=this.GetActivatedFieldList();var ar=this.GetSavedFieldArray();var ay=ar.length;var ax;var at=az.length;for(var aw=0;aw<at;aw++){ax=this.GetFieldDefn(az[aw]);if(!av&&ax&&!(aq.IsTrue(ax.IsCalculated))){for(var au=0;au<ay;au++){if(az[aw]===ar[au]){break}}if(az[aw]===ar[aw]){continue}av=true}}return av};an.prototype.SaveFieldArray=function(){var ar=this.GetActivatedFieldList().splice(0);this.SetSavedFieldArray(ar)};an.prototype.SaveCanMethodStates=function(ax){var aE;var aD;var aA;var az;var ar;var aw;var av;var au;var aC;var at;var aB=this.IsActiveFieldListDirty();var ay=this.GetBCState();if(ax===af){return}if(ax===ac){aE=aB;if(aE!==ay.m_bActiveFieldListDirty){if(this.NotifyStateChanged("bActiveFieldListDirty",aE)){ay.m_bActiveFieldListDirty=aE}}}if(ax===ac){aD=this.CanAssociate();if(aD!==ay.m_bCanAssociate){if(this.NotifyStateChanged("bCanAssociate",aD)){ay.m_bCanAssociate=aD}}}if(ax===ac||ax==="SAVE_BC_STATE_CANDELETE"){this.CanDelete();$.callback(this,function(aF){aA=aF.retVal;if(aA!==ay.m_bCanDelete){if(this.NotifyStateChanged("bCanDelete",aA)){ay.m_bCanDelete=aA}}})}$.callback(this,function(){if(ax===ac){az=this.CanInsert(false);ar=this.CanInsert(true);if(az!==ay.m_bCanInsert){if(this.NotifyStateChanged("bCanInsert",az)){ay.m_bCanInsert=az}}if(ar!==ay.m_bCanInsertDynamic){if(this.NotifyStateChanged("bCanInsertDynamic",ar)){ay.m_bCanInsertDynamic=ar}}}if(ax===ac){aw=this.CanMergeRecords();if(aw!==ay.m_bCanMergeRecords){if(this.NotifyStateChanged("bCanMergeRecords",aw)){ay.m_bCanMergeRecords=aw}}}if(ax===ac){av=this.CanQuery();if(av!==ay.m_bCanQuery){if(this.NotifyStateChanged("bCanQuery",av)){ay.m_bCanQuery=av}}}if(ax===ac){this.CanUpdateX(false);$.callback(this,function(aF){au=aF.retVal;this.CanUpdateX(true);$.callback(this,function(aG){aC=aG.retVal;if(au!==ay.m_bCanUpdate){if(this.NotifyStateChanged("bCanUpdate",au)){ay.m_bCanUpdate=au}}if(aC!==ay.m_bCanUpdateDynamic){if(aC){aC=1}else{aC=0}if(this.NotifyStateChanged("bCanUpdateDynamic",aC)){ay.m_bCanUpdateDynamic=aC}}})})}$.callback(this,function(){if(ax===ac){at=this.HasAssocList();if(at!==ay.m_bHasAssocList){if(this.NotifyStateChanged("bHasAssocList",at)){ay.m_bHasAssocList=at}}}this.SetBCState(ay)})})};an.prototype.HasPickList=function(au){var at=this.GetFieldDefn(au);var ar=false;if(at&&!aq.IsEmpty(at.PickListName)){ar=true}return ar};an.prototype.IsPickAssocField=function(){};an.prototype.GetNextTokenConst=function(ay){var av=0;var ax;var au=0;var ar=0;var aw={};aw.token="";aw.next="";if(aq.IsEmpty(ay)){return aw}var at=ay.charAt(0);while(at===" "||at==="\t"||at==="\n"){ay=ay.substring(1);at=ay.charAt(0)}at=ay.charAt(au);
if(at==='"'||at==="'"){ax=at;at=ay.charAt(++au);while((at!==ax||ay.charAt(au+1)===ax)&&at!=="\0"){if(at===ax&&ay.charAt(au+1)===ax){at=ay.charAt(++au)}at=ay.charAt(++au)}at=ay.charAt(au);if(at===ax){au++}}else{at=ay.charAt(au++);ar=ay.length;while(at!==" "&&at!=="\t"&&at!=="\n"&&at!=="\0"&&au<ar){at=ay.charAt(au++)}}aw.token=ay.substring(av,au-av);aw.next=ay.substring(au);return aw};function w(ar,aA,ax){var aw;var at;var au="";var aB=this.IsOnFieldUpdDisabled();var aG=this.GetOnUpdSrcFldArray();var ay=this.GetOnUpdConditionArray();var aH=this.GetOnUpdExprArray();var aC=this.GetOnUpdDstFldArray();if(aB||this.LoadOnFieldUpdateSet(ar)!==true||(at=aG.length)===0){return}var aE=[];var av=[],aD;for(aw=0;aw<at;aw++){if(ar!==aG[aw]){continue}aD=this.GetFieldDefn(ar).cFldArray;if(aD&&aD.length>0&&aD.indexOf(aC[aw])>-1){continue}if(ay.length>aw&&ay[aw]){au=SiebelApp.Query.Evaluate(ay[aw].m_pQuery.ast,this)}au=SiebelApp.Query.Evaluate(aH[aw].m_pQuery.ast,this);aE.push(aC[aw]);av.push(au)}var aF=0;var az=function(){this.SetFieldValueX(aE[aF],av[aF]);$.callback(this,function(){aF++;if(aF<av.length){az.call(this)}})};if(aF<av.length){az.call(this)}}an.prototype.LoadUserPropN=function(aB,ax,aD,aC,aA,ay){var aw;var au;var ar;var az;var at;var av=null;ar=aB;for(aw=0,au=0;aw<100;aw++,au++){if(aw>0){ar=aB+" "+aw}az=this.GetUserProperty(ar);if(aq.IsEmpty(az)){if((aw===0)||(ax.length&&(au<10))){continue}else{break}}au=0;if(!aD){ax.push(az)}else{av=az;var aE=this.GetNextTokenConst(av);av=aE.next;at=aE.token;at=m.StripQuotes(at);ax.push(at);aE=this.GetNextTokenConst(av);av=aE.next;at=aE.token;aE=this.GetNextTokenConst(av);av=aE.next;at=aE.token;at=m.StripQuotes(at);aD.push(at);if(aC){if(ay){if(av.charAt(0)===","){ay.push("Y")}else{ay.push("N")}}aE=this.GetNextTokenConst(av);av=aE.next;at=aE.token;aE=this.GetNextTokenConst(av);av=aE.next;at=aE.token;at=m.StripQuotes(at);aC.push(at)}if(aA){aE=this.GetNextTokenConst(av);av=aE.next;at=aE.token;aE=this.GetNextTokenConst(av);av=aE.next;at=aE.token;at=m.StripQuotes(at);aA.push(at)}}}};an.prototype.LoadOnFieldUpdateSet=function(av){var aH;var aI;var at;var ar;var aw;var aG;var aE;var ay;var au;var aC=[];var aA=[];var aK=[];var aD=[];var ax=[];var aF=this.GetOnUpdSrcFldArray();var aL=this.GetOnUpdDstFldArray();var az=this.GetOnUpdExprArray();var aJ=null;var aB=this.GetOnUpdConditionArray();if(!this.IsLoadOnFldUpdSet()){this.SetLoadOnFldUpd(true);this.LoadUserPropN("On Field Update Set",aC,aA,aK,aD,ax);aI=aC.length;for(aH=0;aH<aI;aH++){at=aC[aH];ar=aA[aH];if(aq.IsEmpty(at)||aq.IsEmpty(ar)){continue}aG=this.GetFieldDefn(at);aE=this.GetFieldDefn(ar);if((at!==ar)&&aG&&aE){aw=null;if(aq.IsEmpty(aK[aH])){if(aq.IsEmpty(aD[aH])&&!(ax[aH]==="Y")){aK[aH]="["+at+"]"}else{aK[aH]='"'+aK[aH]+'"'}}aw={};aw.m_expr=aK[aH];aF.push(at);aL.push(ar);az.push(aw);if(!aq.IsEmpty(aD[aH])){aw={};aw.m_expr=aD[aH];aB.push(aw)}else{aB.push(null)}}}}aI=aF.length;for(aH=0;aH<aI;aH++){if(av===aF[aH]){aw=null;aw=az[aH];if((aw!=null)&&(aw.m_pQuery==null)){ay={};ay.m_pSqlObj=aJ;ay.ast=SiebelApp.Query.Parse(aw.m_expr);aw.m_pQuery=ay;ay=null}aw=aB[aH];if((aw!=null)&&(aw.m_pQuery==null)){au={};au.m_pSqlObj=aJ;au.ast=SiebelApp.Query.Parse(aw.m_expr);aw.m_pQuery=au;au=null}}}return true};an.prototype.ValidatePickValue=function(au,ax){if(!this.HasPickList(au)){$.setReturnValue({err:"",retVal:false});return}var aE;var aK;var aH="";var aB;var aA;var av=null;var aI=null;var ay=null;var aG=[];aA=this.GetFieldDefn(au);aB=aA.PickListName;aI=SiebelApp.S_App.Model.GetPickListDef(aB);if(!(aI)){$.setReturnValue({err:"",retVal:false});return}aK=aI.IsBounded;var aJ=aA.pickMap;var az=aJ?aJ.length:0;var aF=aI.NoInsert;var aC=B.call(this,aI,aJ);if(!aK){$.setReturnValue({err:"",retVal:false});return}var aw;if(aC||aF){var ar=SiebelApp.Metadata.GetBusCompDef(aI.BC);aw=aA&&ax&&
/*!pPickListDef->m_bLongList &&*/
aI.TypeFld&&aI.LOVType&&aI.NoInsert&&(ar.TableName===F.get("LIST_OF_VAL_TABLE"))}if(aw){var at;for(var aD=0;aD<az;aD++){ay=aJ[aD];if(ay.FldName===au){at=ay.PFldName;break}}for(aD=0;aD<az;aD++){ay=aJ[aD];if((ay.FldName!==au)&&ay.PFldName&&(at!==ay.PFldName)){aw=false;break}}}if(aw){L.GetPickListData(aI,this,au);$.callback(this,function(aQ){var aO=aQ.retVal;var aL=aO.length;var aP;var aN=false;for(var aM=0;aM<aL;aM++){aP=aO[aM];if(ax===aP){aN=true;break}}if(aN){this.SetFieldValueX(au,ax,true);aO=null;$.callback(this,function(aR){if(aR.err){$.setReturnValue(aR)}else{$.setReturnValue({err:false,retVal:true})}})}else{aG.push(aB);aG.push(au);aG.push(this.GetName());SiebelApp.S_App.OfflineErrorObject.SetErrorMsg("SSAOMErrBoundedPick",aG,"","","",0,80);$.setReturnValue({err:"SSAOMErrBoundedPick",retVal:false})}})}else{this.GetPickList(au);$.callback(this,function(aM){if(aM.err){$.setReturnValue(aM)}else{av=aM.retVal;if(!av){$.setReturnValue({err:"",retVal:false});return}aE=this.CheckSpecialPickValue(au,ax);if(aE){$.setReturnValue({err:"",retVal:false});av=null;return}if(aA.pickMap.length===0){SiebelApp.S_App.OfflineErrorObject.SetErrorMsg("SSAOMErrPickMapEmpty",aG,"","","",0,80);$.setReturnValue({err:"SSAOMErrPickMapEmpty",retVal:false});av=null;return}if(!aq.IsEmpty(ax)){var aL=aA.pickMap.length;for(var aN=0;aN<aL;aN++){ay=aA.pickMap[aN];if(ay.IsConstrained){continue}if(ay.FldName===au){aH=ay.PFldName;break}}av.SetFldSearchSpec(aH,ax);av.Execute();$.callback(this,function(aO){if(aO.err){aG.push(aB);aG.push(au);aG.push(this.GetName());SiebelApp.S_App.OfflineErrorObject.SetErrorMsg("SSAOMErrBoundedPick",aG,"","","",0,80);$.setReturnValue({err:"SSAOMErrBoundedPick",retVal:false});av=null;return}else{av.Home();$.callback(this,function(aP){if(!aP.err&&av.GetActiveRow()>-1&&av.GetWS().length===1){av.PickCurrentRow();$.callback(this,function(aQ){if(!aQ.err){$.setReturnValue({err:false,retVal:true})}else{$.setReturnValue({err:true,retVal:false})}})}else{aG.push(aB);aG.push(au);aG.push(this.GetName());SiebelApp.S_App.OfflineErrorObject.SetErrorMsg("SSAOMErrBoundedPick",aG,"","","",0,80);$.setReturnValue({err:"SSAOMErrBoundedPick",retVal:false})}})}})}else{av.PickNoRow(this,aA);$.callback(this,function(aO){if(!aO.err){$.setReturnValue({err:"",retVal:true});return}else{$.setReturnValue(aO)}})}}})}};function B(aw,av){var au=false;if(!aw){return au}au=aw.IsStatic;if(au){var ar=av.length;var at;for(var ax=0;ax<ar;ax++){at=av[ax];if(at.IsConstrained){au=false;break}}}return au}an.prototype.CheckSpecialPickValue=function(){return false};an.prototype.GetPickList=function(aC){var aw=false;var az;var au="";var aB=function(){var aG=false;if(!au){aG=true;return}au.SetMasterBC(this);var aN=aq.IsTrue(ar.TransPickList);if(aN&&!aq.IsEmpty(au.GetDefn().LanguageField)){au.SetFldSearchSpec(au.GetDefn().LanguageField,SiebelApp.S_App.Model.GetLanguage())}au.DeactivateFields();var aL=ay?ay.length:0;var aK;var aM=0;for(var aJ=0;aJ<aL;aJ++){aK=ay[aJ];if(aK.IsConstrained){aM++}au.ActivateField(aK.PFldName)}au.SetSearchSpec("");var aF=av.SrchSpec;var aP;var aI;if(aM>0){var aD=ay.length;var aH=0;if(aF){aF="("+aF+")"}var aE;aI=function(){aK=ay[aH];
if(!aK.IsConstrained){aH++;if(aH<aD){aI.call(this)}}else{aP=function(aQ){if(!aQ.err){aE=aQ.retVal;if(!aq.IsEmpty(aE)){if(aF){aF=aF+" AND (["+aK.PFldName+'] = "'+aE+'")'}else{aF="(["+aK.PFldName+'] ="'+aE+'")'}}}aH++;if(aH<aD){aI.call(this)}};this.FieldValue(aK.FldName);$.callback(this,aP)}};if(aH<aD){aI.call(this)}}var aO=function(){au.SetSearchSpec(aF);au.SetExecuted(false);aG=false;aI=null;aP=null};if(aM>0){$.callback(this,aO)}else{aO.call(this)}};var ax=function(){aB=null;$.setReturnValue({err:aw,retVal:au})};if(this.ValidateFieldDef(aC)){var ar=this.GetFieldDefn(aC);if(ar){var aA=ar.PickListName;var ay=ar.pickMap;if(!aA){aB.call(this)}else{var av=SiebelApp.S_App.Model.GetPickListDef(aA);if(!av){az=[];aw="SSASqlErrPickNotFound";az.push(aA);SiebelApp.S_App.OfflineErrorObject.SetErrorMsg("SSASqlErrPickNotFound",az,"","","",0,81);ax.call(this);return}else{var at=SiebelApp.S_App.Model.GetBusObj(this.GetBusObj().GetName());au=at.GetBusCompX(av.BC);if(au===null){aw="SSAOMErrGetPickListBusComp";az=[];az.push(av.BC);az.push(aC);az.push(this.GetName());SiebelApp.S_App.OfflineErrorObject.SetErrorMsg("SSAOMErrGetPickListBusComp",az,"","","",0,81);ax.call(this)}else{au.SetPickSrcField(aC);au.SetSrcIdFld(aC,this);au.SetBusCompType(F.get("BCTYPE_PICKLIST"));aB.call(this);$.callback(this,ax)}}}}else{aw=true;ax.call(this)}}else{aw=true;ax.call(this)}};an.prototype.SetSrcIdFld=function(ar,au){var av=au.GetFieldDefn(ar).pickMap;for(var at=0;at<av.length;at++){if(av[at].PFldName===D.get("SWE_ROW_ID_FIELD")){this.SetPickSrcIdFName(av[at].FldName);break}}};an.prototype.PickNoRow=function(aw,av){var ax=[];ax=av.pickMap;var ar=ax.length;var au=0;var at=function(){if(!aq.IsTrue(ax[au].IsConstrained)){aw.SetFieldValueX(ax[au].FldName,"",true)}$.callback(this,function(ay){if(!ay.err){au++;if(au<ar){at.call(this)}else{$.setReturnValue({err:true,retVal:false});return}}})};if(ar){at.call(this)}};an.prototype.SaveBusCompStates=function(aw){var aG;var ar;var av=false;var aC;var aD;var aE;var au;var at;var ax=this.GetBCState();var aA;var aB=this.GetSelRowIdArray();if(aw===af){return}if(aw===ac||aw==="SAVE_BC_STATE_ROWNUMINFO"){aC=g.call(this);var aF=this.GetRowNum();if(!aF.retVal){aC=-1}if(aC!==ax.m_curRowNum){if(this.NotifyStateChanged("curRowNum",aC)){ax.m_curRowNum=aC}}var aH=this.GetNumRowsX();aD=aH.retVal;aG=(aD>-1)?1:0;if(aG!==ax.m_bNumRowsKnown){if(this.NotifyStateChanged("bNumRowsKnown",aG)){ax.m_bNumRowsKnown=aG}}if(aD!==ax.m_numRows){if(this.NotifyStateChanged("numRows",aD)){ax.m_numRows=aD}}}if(aw===ac||aw==="SAVE_BC_STATE_SELINFO"){aE=this.GetNumSelected(aE);ar=(!isNaN(aE))?1:0;if(ar!==ax.m_bNumSelectedKnown){if(this.NotifyStateChanged("bNumSelectedKnown",ar)){ax.m_bNumSelectedKnown=ar}}if(aE!==ax.m_numSelected){if(this.NotifyStateChanged("numSelected",aE)){ax.m_numSelected=aE}}au=aB.length;ax.m_selRowIdArray=[];at=ax.m_selRowIdArray.length;if(au===at){for(var az=0;az<au;az++){if(aB[az]!==ax.m_selRowIdArray[az]){break}}av=(az===au)?true:false}if(!av){ax.m_selRowIdArray=[];this.NotifyNewSelIds();for(var ay=0;ay<au;ay++){ax.m_selRowIdArray.push(aB[ay])}}}this.SetBCState(ax)};an.prototype.WSGetBegRow=function(ar,at){var av=this.GetNotifyInfoArray();var au=av[ar];if(au){return(au.GetBegRow(at))}return};an.prototype.BeginQuery=function(){this.SetInQueryState(true);this.NotifyBeginQuery()};function ad(ar){if(ar.length<2){return"0"+ar}return ar}an.prototype.DoBldQueryText=function(ar,ax){var aO=null;var aC;if(!(ar&&ax)){return aO}var at=false;if((this.GetFieldDefn(ar.GetFieldName()).DataType==="10"||this.GetFieldDefn(ar.GetFieldName()).DataType==="13"||this.GetFieldDefn(ar.GetFieldName()).DataType==="12")){if(ax.length>=8){var aJ;var aM="";var aI="";var ay="";var au=false;var aF=aq.IsEmpty(ar.GetDisplayFormat())?SiebelApp.S_App.LocaleObject.GetDateFormat().toUpperCase():ar.GetDisplayFormat().toUpperCase();aF=aF.indexOf(" ")===-1?aF:aF.slice(0,aF.indexOf(" "));switch(aF){case"M/D/YYYY":aJ=ax.split("/");if(aJ.length!==3){au=true;break}aM=ad(aJ[0]);aI=ad(aJ[1]);ay=aJ[2];ax=ay+aM+aI;break;case"DD/MM/YYYY":aJ=ax.split("/");if(aJ.length!==3){au=true;break}aI=ad(aJ[0]);aM=ad(aJ[1]);ay=aJ[2];ax=ay+aM+aI;break;case"YYYY/M/D":aJ=ax.split("/");if(aJ.length!==3){au=true;break}ay=aJ[0];aM=ad(aJ[1]);aI=ad(aJ[2]);ax=ay+aM+aI;break;case"D.M.YYYY":aJ=ax.split(".");if(aJ.length!==3){au=true;break}aI=ad(aJ[0]);aM=ad(aJ[1]);ay=aJ[2];ax=ay+aM+aI;break;case"DD-MM-YYYY":aJ=ax.split("-");if(aJ.length!==3){au=true;break}aI=ad(aJ[0]);aM=ad(aJ[1]);ay=aJ[2];ax=ay+aM+aI;break;case"DD.MM.YYYY":aJ=ax.split(".");if(aJ.length!==3){au=true;break}aI=ad(aJ[0]);aM=ad(aJ[1]);ay=aJ[2];ax=ay+aM+aI;break;case"D/M/YYYY":aJ=ax.split("/");if(aJ.length!==3){au=true;break}aI=ad(aJ[0]);aM=ad(aJ[1]);ay=aJ[2];ax=ay+aM+aI;break;case"D/MM/YYYY":aJ=ax.split("/");if(aJ.length!==3){au=true;break}aI=ad(aJ[0]);aM=ad(aJ[1]);ay=aJ[2];ax=ay+aM+aI;break;case"YYYY/MM/DD":aJ=ax.split("/");if(aJ.length!==3){au=true;break}ay=ad(aJ[0]);aM=ad(aJ[1]);aI=aJ[2];ax=ay+aM+aI;break;case"YYYY-MM-DD":aJ=ax.split("-");if(aJ.length!==3){au=true;break}ay=ad(aJ[0]);aM=ad(aJ[1]);aI=aJ[2];ax=ay+aM+aI;break;case"D-M-YYYY":aJ=ax.split("-");if(aJ.length!==3){au=true;break}aI=ad(aJ[0]);aM=ad(aJ[1]);ay=aJ[2];ax=ay+aM+aI;break;case"MM/DD/YYYY":aJ=ax.split("/");if(aJ.length!==3){au=true;break}aM=ad(aJ[0]);aI=ad(aJ[1]);ay=aJ[2];ax=ay+aM+aI;break}if(au){m.CcfLogEvent([M,14,0,82]);aC="["+ar.GetName()+"]="+ax}var aK=new Date(ax.substring(0,4),ax.substring(4,6)-1,ax.substring(6,8));var aL=new Date();var aB=aL.getTimezoneOffset();if(this.GetFieldDefn(ar.GetFieldName()).DataType==="13"){var aP=new Date(aK.getFullYear(),aK.getMonth(),aK.getDate());aP.setMinutes(aP.getMinutes()+aB);var aN=new Date(aP.getFullYear(),aP.getMonth(),aP.getDate(),aP.getHours(),aP.getMinutes());aN.setHours(aN.getHours()+24);var aE=aP.getDate()<10?"0"+aP.getDate():""+aP.getDate();var aw=aP.getHours()<10?"0"+aP.getHours():""+aP.getHours();var aH=aP.getMonth()+1;aH=aH<10?"0"+aH:""+aH;var aD=aN.getDate()<10?"0"+aN.getDate():""+aN.getDate();var av=aN.getHours()<10?"0"+aN.getHours():""+aN.getHours();var aG=aN.getMonth()+1;aG=aG<10?"0"+aG:""+aG;var aA=aP.getFullYear()+""+aH+""+aE+""+aw;var az=aN.getFullYear()+""+aG+""+aD+""+av;aC="["+ar.GetName()+'] >= "'+aA+'" && ['+ar.GetName()+'] <= "'+az+'"'}else{aC="["+ar.GetName()+"]="+ax}}else{m.CcfLogEvent([M,14,0,82]);aC="["+ar.GetName()+"]="+ax}return aC}if(ax.indexOf("%")!==-1){ax=ax.replace(/\%/g,"[%]")}if(ax.indexOf("_")!==-1){ax=ax.replace(/\_/g,"\\_");at=true}if(ax.indexOf("?")!==-1){ax=ax.replace(/\?/g,"_")}if(ax.indexOf("*")!==-1){ax=ax.replace(/\*/g,"%")}else{if(ax.indexOf("_")===-1){ax=ax.concat("%")}}aO=j+' "'+ax+'"';aC="[";aC+=ar.GetFieldName();aC+="]";aC+=" "+aO;if(at){aC=aC+" {ESCAPE} '\\'"}return aC};an.prototype.NotifyBeginQuery=function(){var au;if(this.IsNotifyEnabled()){var aw=this.GetNotifyInfoArray();var ar=aw.length;for(var at=0;at<ar;at++){au=aw[at];if(au){var av=au.GetBusCompNotify();if(av){av.NotifyBeginQuery()}}}}};an.prototype.SetInQueryState=function(ar){if(this.IsInQueryState()!==ar){this.NotifyStateChanged("bInQueryState",ar)
}return(l.SetInQueryState.call(this))};an.prototype.SqlDeleteRecord=function(ax){var av;if(this.IsVBC()){av=({err:false})}else{var ar=SiebelApp.OfflineUtils.RemoveNonAlphaChars(this.GetName());var au=[];var aB=[];var az=this.GetLinkDef();if(az&&!aq.IsEmpty(az.interTableName)){var aC=this.GetParentBusComp();var aA=aC.GetActiveRow();var ay=aC.FindWorkSet(aA);ar=az.interTableName;au.push(az.interParentColName);au.push(az.interChildColName);aB.push(ay[az.srcFieldName]);aB.push(ax[az.destFieldName])}else{au.push("Id");aB.push(ax.Id)}var aw=SiebelApp.SqlBuilder.DeleteRecords(ar,au,"AND");var at={};at.query=aw;at.valList=aB;this.SetLocalTxn(JSON.stringify(at));SiebelApp.BrowserCacheMgr.Execute(aw,aB)}$.callback(this,function(aD){$.setReturnValue(aD)})};an.prototype.DeleteRecordX=function(ax,aw){if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().StartTime("BusComp.prototype.DeleteRecordX")}var av;var au={};var at=CCFMiscUtil_CreatePropSet();au[P]=this.GetName();au[v]=C;au[T]="DeleteRecord";au[i]=this;var ar=aq.IsEmpty(aw)?true:aw;au[ap]=a;SiebelApp.S_App.Model.InvokeRegisteredSvc(au,at);$.callback(this,function(aD){if(!aD.err){av=aD.retVal;if(av.Outputargs&&(av.Outputargs).GetProperty("Invoked")&&(av.Outputargs).GetProperty("Invoked").toString()==="true"){var az=(av.Outputargs).GetProperty("RetVal");var aC=aD.err;if(az){$.setReturnValue({err:aC,retVal:az})}else{$.setReturnValue({err:aC,retVal:""})}if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("BusComp.prototype.DeleteRecordX")}return}if(av&&av.Outputargs){(av.Outputargs).SetType(a);var ay=av.Outputargs.GetPropertyAsStr("bAddSyncQ");if(!aq.IsEmpty(ay)){ar=ay}}var aB=true;var aE="";if(!this.CanDeferDelete()){aw=false}if(!this.IsExecuted()||!this.CheckActiveRow()||!this.CanDeleteX()){$.setReturnValue({err:true})}this.NotifyDeleteRecord(true,aB);var aA=h.call(this);aE=this.FindWorkSet(aA);if(!aw){if(this.IsNewRecordPending()){this.PostDeleteRecord(ax,aw)}else{this.SqlDeleteRecord(aE);$.callback(this,function(aG){if(aG.err){$.setReturnValue(aG)}else{if(this.IsVBC()){this.PostDeleteRecord(ax,aw);au[ap]=s;at.SetProperty("Record",JSON.stringify(aE));SiebelApp.S_App.Model.InvokeRegisteredSvc(au,at);$.callback(this,function(aI){$.setReturnValue(aI)})}else{var aF=this.GetRecordCount();this.SetRecordCount(--aF);this.SetOpType(F.get("DELETERECORD"));var aH=this.FieldValue(D.get("SWE_ROW_ID_FIELD"),aE);$.callback(this,function(aI){if(aI.err){$.setreturnValue(aI);return}else{aH=aI.retVal;this.SetTxnId(m.GetTempId());this.SyncQRec(aH);$.callback(this,function(aK){var aO=aK.retVal;this.SetNewTxn(aO);ar=aq.IsTrue(ar);var aM=this.GetLinkDef();if(aM&&aM.interTableName){var aJ=this.GetParentBusComp();var aN=aJ.GetActiveRow();var aL=aJ.FindWorkSet(aN);aH=Z.call(this,aL[aM.srcFieldName],aH)}this.UpdateSync(aH,ar);$.callback(this,function(){this.PostDeleteRecord(ax,aw);au[ap]=s;at.SetProperty("Record",JSON.stringify(aE));SiebelApp.S_App.Model.InvokeRegisteredSvc(au,at);$.callback(this,function(aP){$.setReturnValue(aP)})})})}})}}if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("BusComp.prototype.DeleteRecordX")}})}}}else{$.setReturnValue(aD)}})};an.prototype.ScrollWorkSetByNum=function(aD,aC,ar){var aA=this.IsNotifyEnabled();var az=false;var aG=this.GetActiveRow();var ax=0;var au=0;var ay=0;var aw=aC>=0?true:false;if(!this.IsExecuted()){$.setReturnValue({err:true});return}aD=0;var aE=this.GetNotifyInfoArray();if(aD<aE.length){var at=aE[aD];if(at){if(!this.CheckActiveRow()){$.setReturnValue({err:true})}var aF=this.GetWS().length;var aB=at.GetBegRow(ar);var av=at.GetSize(ar);if(aC>0){ax=aF-(aB+av);au=aC-ax}else{ax=aB;au=aC+ax}this.ScrollWorkSet(au);$.callback(this,function(aH){az=aH.err;aB=at.GetBegRow(ar);av=at.GetSize(ar);aF=this.GetWS().length;if(az){if(az!=="SSAOMErrScrollWorkSet"){aB=(aF>av)?aF-av:0;at.SetBegRow(ar,aB);aG=aF-1}else{$.setReturnValue(aH);return}}else{if(aH.retVal){ay=aH.retVal}if(aC>0){if(ax>aC){aB=aB+aC}else{aB=aB+ax}}else{if(ax>(-aC)){aB=aB+aC}else{aB=0}}at.SetBegRow(aB,ar);aG=aG-ay}at.SetCurrRow(aB,ar);if(az&&aG!==this.GetActiveRow()){az=false}if(ay){if(aG===this.GetActiveRow()&&!az){this.OnActiveRowChanged();this.EventChangeRecord()}this.DisableNotify()}if(aG!==this.GetActiveRow()){this.SetActiveRow(aG,null,ar);$.callback(this,function(){if(this.IsNotifyEnabled()){this.NotifyNewData()}})}else{this.UpdateLinks(false)}$.callback(this,function(){if(ay){if(aA){this.EnableNotify()}else{this.DisableNotify()}this.NotifyScrollData(aw,ay)}})})}}else{$.setReturnValue({err:"SSAOMErrNotifyInfo"})}};an.prototype.NextSet=function(aw,ar){this.FinishRecord();if(!this.IsExecuted()){$.setReturnValue({err:true});return}if(!this.CheckActiveRow()){$.setReturnValue({err:true});return}var az=0;var aA=0;var aC=this.GetNotifyInfoArray();var at=aC[aA];var aE=this.GetActiveRow();var ax=this.IsNotifyEnabled();var av=false;var aB=function(){if(az){if(aE===this.GetActiveRow()&&!av){this.OnActiveRowChanged();this.EventChangeRecord()}this.DisableNotify();var aF=this.GetExtObjProp("m_bDisNotChildOnUpdLnks");aF=false}if(aE!==this.GetActiveRow()){this.SetActiveRow(aE,null,this.GetName())}else{this.UpdateLinks(false)}$.callback(this,function(aG){if(aG.err){$.setReturnValue({err:true,retVal:aG});return}if(az){if(ax){this.EnableNotify()}else{this.DisableNotify()}var aH=this.GetExtObjProp("m_bDisNotChildOnUpdLnks");aH=false;this.NotifyNewData();$.callback(this,function(aI){if(!aI.err){$.setReturnValue({err:false,retVal:aI});return}else{$.setReturnValue({err:true,retVal:aI});return}})}})};if(at){var ay=at.GetBegRow(ar);var au=at.GetSize(ar);aE=this.GetActiveRow();var aD=this.GetWS().length;az=ay+(2*au)-aD;if(az<0){az=0}if(az>0){this.ScrollWorkSet(az);$.callback(this,function(aF){if(!aF.err){ay+=au-az;aE+=au-az;at.SetBegRow(ay,ar)}else{ay=(aD>au)?(aD-au):0;at.SetBegRow(ay,ar);at.SetCurrRow(ay,ar);aE=aD-1;av=true}at.SetCurrRow(ay,ar);if(av&&aE!==this.GetActiveRow()){av=false}aB.call(this)})}else{ay+=(at.GetSize(ar)-az);at.SetBegRow(ay,ar);aE+=(at.GetSize(ar)-az);at.SetCurrRow(ay,ar);aB.call(this)}}};an.prototype.PriorSet=function(aw,ar){this.FinishRecord();if(!this.IsExecuted()){$.setReturnValue({err:true});return}if(!this.CheckActiveRow()){$.setReturnValue({err:true});return}var az=0;var aA=0;var aC=this.GetNotifyInfoArray();var at=aC[aA];var aE=this.GetActiveRow();var ax=this.IsNotifyEnabled();var av=false;var aB=function(){if(az){if(aE===this.GetActiveRow()&&!av){this.OnActiveRowChanged();this.EventChangeRecord()}this.DisableNotify();var aF=this.GetExtObjProp("m_bDisNotChildOnUpdLnks");aF=false}if(aE!==this.GetActiveRow()){this.SetActiveRow(aE,null,this.GetName())}else{this.UpdateLinks(false)}$.callback(this,function(aG){if(aG.err){$.setReturnValue({err:true,retVal:aG});return}if(az){if(ax){this.EnableNotify()}else{this.DisableNotify()}var aH=this.GetExtObjProp("m_bDisNotChildOnUpdLnks");aH=false;this.NotifyNewData();$.callback(this,function(aI){if(!aI.err){$.setReturnValue({err:false,retVal:aI});return}else{$.setReturnValue({err:true,retVal:aI});
return}})}})};if(at){var ay=at.GetBegRow(ar);var au=at.GetSize(ar);aE=this.GetActiveRow();var aD=this.GetWS().length;az=ay-au;if(az>0){az=0}if(az<0){this.ScrollWorkSet(az);$.callback(this,function(aF){if(!aF.err){ay-=au- -az;aE-=au- -az;at.SetBegRow(ay,ar)}else{ay=0;at.SetBegRow(ay,ar);at.SetCurrRow(ay,ar);aE=0;av=true}at.SetCurrRow(ay,ar);if(av&&aE!==this.GetActiveRow()){av=false}aB.call(this)})}else{ay-=au- -az;aE-=au- -az;at.SetBegRow(ay,ar);at.SetCurrRow(ay,ar);aB.call(this)}}};an.prototype.GetNextRecord=function(){var au=this.GetCursor(),at=CCFMiscUtil_CreatePropSet(),ar={};ar[P]=this.GetName();ar[v]=C;ar[T]="GetNextRecord";ar[i]=this;ar[ap]=a;at.SetProperty("Cursor",au[0]);Y.InvokeRegisteredSvc(ar,at);$.callback(this,function(az){var aA=az.retVal,ax=az.err;if(z.call(this,aA.Outputargs)){return}if(this.IsVBC()||this.GetIsRelatedBC()){var av;if(this.IsVBC()){av=this.GetVBCRecords()}else{av=this.GetRelatedBCRecords()}if(au[0]+1>=av.length){$.setReturnValue({err:true})}else{au[0]=au[0]+1;$.setReturnValue({err:false,retVal:av[au[0]]})}return}var aF=this.GetQuerySearchSpec();var aB=this.GetQuerySortSpec();var aD=this.GetQueryFieldList();var aw=this.GetQueryOrder();au[0]++;var aE=[];var ay=this.GetExtObjProp("m_pCurLinkQueryDef");aE.push(this.GetName());if(ay){if(!aq.IsEmpty(ay.Defn.interTableName)){aE.push(SiebelApp.OfflineUtils.RemoveNonAlphaChars(ay.Defn.interTableName))}}var aC=SiebelApp.SqlBuilder.SelectRecordPopulateWS(aE,aF,aD,aB,aw,au);SiebelApp.BrowserCacheMgr.SelectRecord(aC);$.callback(this,function(aH){if(aH.err){$.setReturnValue({err:true});au[0]--}else{var aG=aH.retVal;if(!aG){$.setReturnValue({err:true});au[0]--}else{ar[ap]=s;at.SetProperty("Record",JSON.stringify(aG));SiebelApp.S_App.Model.InvokeRegisteredSvc(ar,at);$.callback(this,function(aJ){aA=aJ.retVal;ax=aJ.err;if(aA.Outputargs&&(aA.Outputargs).GetProperty("Invoked")&&(aA.Outputargs).GetPropertyAsStr("Invoked")==="true"){var aI=aA.Outputargs.GetProperty("RetVal");if(aI){aG=JSON.parse(aI)}}$.setReturnValue({err:ax,retVal:aG})})}}})})};an.prototype.GetPriorRecord=function(av){var au=this.GetCursor(),at=CCFMiscUtil_CreatePropSet(),ar={};ar[P]=this.GetName();ar[v]=C;ar[T]="GetPriorRecord";ar[i]=this;ar[ap]=a;at.SetProperty("Cursor",au[0]);Y.InvokeRegisteredSvc(ar,at);$.callback(this,function(aA){var aB=aA.retVal,ay=aA.err;if(z.call(this,aB.Outputargs)){return}var aC=av?av:this.GetWorkSetSize();if(au[0]<=0){$.setReturnValue({err:true});return}var aJ=au[0];au[0]=au[0]-this.GetWS().length;if(au[0]<0){au[0]=aJ;$.setReturnValue({err:true});return}if(this.IsVBC()||this.GetIsRelatedBC()){var aw;if(this.IsVBC()){aw=this.GetVBCRecords()}else{aw=this.GetRelatedBCRecords()}$.setReturnValue({err:false,retVal:aw[au[0]]});au[0]=au[0]+this.GetWS().length-1;return}var aI=this.GetQuerySearchSpec();var aE=this.GetQuerySortSpec();var aG=this.GetQueryFieldList();var ax=this.GetQueryOrder();var aD=this;var aH=[];var az=this.GetExtObjProp("m_pCurLinkQueryDef");aH.push(aD.GetName());if(az){if(!aq.IsEmpty(az.Defn.interTableName)){aH.push(SiebelApp.OfflineUtils.RemoveNonAlphaChars(az.Defn.interTableName))}}var aF=SiebelApp.SqlBuilder.SelectRecordPopulateWS(aH,aI,aG,aE,ax,au);SiebelApp.BrowserCacheMgr.SelectRecord(aF);$.callback(this,function(aL){if(aL.err){$.setReturnValue(aL);au[0]=aJ}else{var aK=aL.retVal;if(!aK){$.setReturnValue({err:true});au[0]=aJ}else{if(av||aC>this.GetRecordCount()){au[0]=aJ}else{au[0]=au[0]+this.GetWS().length-1;this.SetCursor(au)}ar[ap]=s;at.SetProperty("Record",JSON.stringify(aK));SiebelApp.S_App.Model.InvokeRegisteredSvc(ar,at);$.callback(this,function(aN){aB=aN.retVal;ay=aN.err;if(aB.Outputargs&&(aB.Outputargs).GetProperty("Invoked")&&(aB.Outputargs).GetPropertyAsStr("Invoked")==="true"){var aM=aB.Outputargs.GetProperty("RetVal");if(aM){aK=JSON.parse(aM)}}$.setReturnValue({err:false,retVal:aK})})}}})})};function z(av){var ar=false,au=false;if(av&&av.GetProperty("Invoked")&&av.GetPropertyAsStr("Invoked")==="true"){var at=av.GetProperty("RetVal");if(at){at=JSON.parse(at)}else{au=true}if(av.GetPropertyAsStr("Cursor")){this.GetCursor()[0]=parseInt(av.GetProperty("Cursor"))}$.setReturnValue({err:au,retVal:at});ar=true}return ar}an.prototype.ScrollWorkSet=function(az,ar){if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().StartTime("BusComp.prototype.ScrollWorkSet")}if(az===0){$.setReturnValue({err:false});return}if(!this.IsExecuted()){$.setReturnValue({err:true});return}if(!ar){ar=0}var ay;var at;var ax=false,aw=0,av;var au;if(az>0){at=this.GetWS().length;ay=this.FindWorkSet(at-1);if(!ay){$.setReturnValue({err:"SSAOMErrScrollWorkSet"});return}au=function(){this.GetNextRecord(ay);$.callback(this,function(aA){av=aA.err;ay=aA.retVal;if(!ay||av){ax=true}else{this.InsertWorkSet(this.GetWS().length,ay);ar++;this.DeleteWorkSet(0)}aw++;if(aw<az&&!ax){au.call(this)}})};if(aw<az){au.call(this)}$.callback(this,function(){if(!ax||aw>1){$.setReturnValue({err:false,retVal:ar})}else{$.setReturnValue({err:true})}})}else{ay=this.FindWorkSet(0,ay);if(!ay){$.setReturnValue({err:true});return}au=function(){this.GetPriorRecord();$.callback(this,function(aA){av=aA.err;ay=aA.retVal;if(!ay||av){ax=true}else{ar--;this.InsertWorkSet(0,ay);this.DeleteWorkSet(this.GetWS().length-1)}aw++;if(aw<(-az)&&!ax){au.call(this)}})};if(aw<(-az)){au.call(this)}$.callback(this,function(){if(!ax||aw>1){$.setReturnValue({err:false,retVal:ar})}else{$.setReturnValue({err:true})}if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("BusComp.prototype.ScrollWorkSet")}})}};an.prototype.PostDeleteRecord=function(ay,aw){var av=true;var at=h.call(this);this.DeleteWorkSet(at);var ar=this.GetWorkSetSize();var au=function(){if(this.GetWS().length===0){ai.call(this,-1)}else{if(at===-1){ai.call(this,0)}else{if(at===this.GetWS().length){ai.call(this,--at)}}}this.SetCommitPending(false);this.SetNewRecPending(false);this.SetDeleteRecordPending(false);this.NotifyDeleteRecord(false,av);this.UpdateLinks(false);$.callback(this,function(){this.OnActiveRowChanged()})};var az=this.GetCursor();az[0]--;if(this.GetWS().length===(ar-1)){if(ar>0){var ax;this.GetNextRecord();$.callback(this,function(aB){ax=aB.retVal;var aA=aB.err;if(!aA&&ax){this.InsertWorkSet(this.GetWS().length,ax)}else{if(aB.err||!ax){this.GetPriorRecord();$.callback(this,function(aC){aA=aC.err;ax=aC.retVal;if(!aA&&ax){az[0]++;this.InsertWorkSet(0,ax)}})}}$.callback(this,function(){au.call(this)})})}}else{au.call(this)}};an.prototype.GetCalcFields=function(){var ar;var au=this.GetDefn().Fields;for(var at in au){if(aq.IsTrue(au[at].IsCalculated)){ar.push(au[at])}}};an.prototype.ClearToQuery=function(){this.SetSearchSpec("")};an.prototype.ActivateMultipleFields=function(at,ar){if(at){var au=at.EnumProperties(true);var av=[];while(!aq.IsEmpty(au)){av.push(au);au=at.EnumProperties(false)}if(ar){this.UpdateDeactivateableFldList(av)}this.ActivateFieldList(av)}};an.prototype.RefreshBusComp=function(){var at=SiebelApp.S_App.Model.GetBusObj(this.GetBusObj().GetName());var au=at.GetBusCompX(this.GetName());
var ar=au.IsExecuted();if(ar){au.Execute();$.callback(this,function(av){if(!av.err){au.Home();$.callback(this,function(aw){if(!aw.err){this.NotifyExecute();this.NotifyNewData();$.setReturnValue({err:false,retVal:""});return}})}})}else{$.setReturnValue({err:false,retVal:""});return}};an.prototype.GetPicklistBusComp=function(au){var at=this.GetFieldDefn(au);var ar=at.PickListName;if(ar){at=SiebelApp.S_App.Model.GetPickListDef(ar);if(at){var av=SiebelApp.S_App.Model.GetBusObj(this.GetBusObj().GetName());var aw=av.GetBusComp(at.BC);aw.SetMasterBC(this);aw.SetPickSrcField(au);aw.SetSrcIdFld(au,this);return aw}else{return""}}else{return""}};an.prototype.RefreshRecord=function(){var ar=this.GetWS()[this.GetActiveRow()];this.FieldValue(D.get("SWE_ROW_ID_FIELD"),ar);$.callback(this,function(aw){if(!aw.err){var at=aw.retVal;if(at){var av=SiebelApp.S_App.Model.GetBusObj(this.GetBusObj().GetName());var ax=av.GetBusCompX(this.GetName());var au;au="[";au+=D.get("SWE_ROW_ID_FIELD");au+="] = ";au+='"'+at+'"';ax.SetSearchSpec(au);ax.Execute();$.callback(this,function(ay){if(!ay.err){ax.Home();$.callback(this,function(aD){if(!aD.err){var aC=ax.FindWorkSet(0);if(!aC){$.setReturnValue({err:false,retVal:""});av.EndLife();av=null;ax=null;return}var az=ax.GetActivatedFieldList();var aB;for(var aA=0;aA<az.length;aA++){var aE=az[aA];ar[SiebelApp.OfflineUtils.RemoveNonAlphaChars(aE)]=aC[SiebelApp.OfflineUtils.RemoveNonAlphaChars(aE)]}$.setReturnValue({err:false,retVal:ar});Y.ReleaseBO(av);ax=null;return}})}})}}})};an.prototype.GetReqFieldsHasDefault=function(){var au=this.GetDefn().Fields;var at=[];for(var ar in au){if((!aq.IsEmpty(au[ar].PostDefault)||!aq.IsEmpty(au[ar].PreDefault))){at.push(ar)}}return at};an.prototype.SetMultipleFieldValues=function(at){if(at){var aw=at.EnumProperties(true);var ar=[];var ay=[];while(!aq.IsEmpty(aw)){ar.push(aw);ay.push(at.GetPropertyAsStr(aw));aw=at.EnumProperties(false)}var ax=ar.length;var av=0;var au=function(){this.SetFieldValueX(ar[av],ay[av]);$.callback(this,function(az){if(!az.err){av++;if(av<ax){au.call(this)}}else{$.setReturnValue(az)}})};if(av<ax){au.call(this)}}};an.prototype.GetMultipleFieldValues=function(ax,at){if(ax&&at){var aw=ax.EnumProperties(true);var ar=[];while(!aq.IsEmpty(aw)){ar.push(aw);aw=ax.EnumProperties(false)}var ay=ar.length;var av=0;var au=function(){this.FieldValue(ar[av]);$.callback(this,function(az){if(!az.err){at.SetPropertyStr(ar[av],az.retVal);av++;if(av<ay){au.call(this)}}else{$.setReturnValue(az)}})};if(av<ay){au.call(this)}}};an.prototype.GetLastErrCode=function(){return c.OfflineErrorObject.GetErrorCode()};an.prototype.GetLastErrText=function(){return c.OfflineErrorObject.GetErrorText()};an.prototype.SelectAll=function(){var at=false,ar=this.GetMultiSelectMode();if(!this.IsExecuted()||!this.CheckActiveRow()){at=true;$.setReturnValue({err:at})}else{this.SetMultiSelectMode(true);this.SetInverseSelection(true);this.SetSelRowIdArray([]);if(!ar){this.NotifySelModeChange(true)}this.NotifyChangeSelection()}$.setReturnValue({err:at})};SiebelApp.OfflineUtils.DefineExtentions(an,e,l)}());if(typeof(SiebelApp.S_App.OfflineBCInterface)==="undefined"){SiebelJS.Namespace("SiebelApp.S_App.OfflineBCInterface");SiebelApp.S_App.OfflineBCInterface=(function(){function a(f){var e=f;var c=this;var d={GetParentBusComp:1,GetBusObj:2};for(var b in f){(function(){var g=b;var h=f;if(typeof(f[g])==="function"&&!c[g]&&!d[g]){c[g]=function(){if(h.constructor.prototype[g]){return(h.constructor.prototype[g].apply(h,arguments))}else{return(h[g].apply(h,arguments))}}}return c[g]}())}this.GetOfflineBC=function(){return e};this.GetParentBusComp=function(){var g=e.GetParentBusComp();if(g){return g.GetInterface()}};this.GetBusObj=function(){var g=e.GetBusObj();if(g){return g.GetInterface()}};this.EndLife=function(){e=null;c=null;d=null}}a.prototype.SetFieldValue=function(f,e,c,d,b){return(this.GetOfflineBC().SetFieldValueX(f,e,c,d,b))};a.prototype.InvokeMethod=function(b,c){return(this.GetOfflineBC().InvokeMethodX(b,c))};a.prototype.CanInvokeMethod=function(b){return(this.GetOfflineBC().CanInvokeMethodX(b))};a.prototype.UpdateRecord=function(b){return(this.GetOfflineBC().UpdateRecordX(b))};a.prototype.CanUpdate=function(b,c){return(this.GetOfflineBC().CanUpdateX(b,c))};a.prototype.NewRecord=function(c,b,d){return(this.GetOfflineBC().NewRecordX(c,b,d))};a.prototype.GetIdValue=function(){return(this.GetOfflineBC().GetIdValueX())};a.prototype.WSNextRecord=function(){return(this.GetOfflineBC().WSNextRecordX())};a.prototype.WSHome=function(){return(this.GetOfflineBC().WSHomeX())};a.prototype.DeleteRecord=function(c,b){return(this.GetOfflineBC().DeleteRecordX(c,b))};a.prototype.Pick=function(){var b=this.GetOfflineBC().GetMasterBC();if(b){this.GetOfflineBC().PickCurrentRow()}else{$.setReturnValue({err:true})}};a.prototype.ActivateField=function(b){var c=this.GetOfflineBC();c.UpdateDeactivateableFldList([b]);return(c.ActivateField(b))};a.prototype.ActivateMultipleFields=function(b){return(this.GetOfflineBC().ActivateMultipleFields(b,true))};a.prototype.Associate=function(){return(this.GetOfflineBC().AddAssociation())};a.prototype.ExecuteQuery=function(){return(this.GetOfflineBC().Execute())};a.prototype.FirstRecord=function(){return(this.GetOfflineBC().Home())};a.prototype.GetAssocBusComp=function(){return(this.GetOfflineBC().GetAssocList())};a.prototype.GetFieldValue=function(c,b){return(this.GetOfflineBC().FieldValue(c,b))};a.prototype.Name=function(){return(this.GetOfflineBC().GetName())};a.prototype.BusObject=function(){return(this.GetOfflineBC().GetBusObj())};a.prototype.ParentBusComp=function(){return(this.GetOfflineBC().GetParentBusComp())};a.prototype.CountRecords=function(){return(this.GetOfflineBC().GetRecordCount())};a.prototype.SetSearchSpec=function(b,c){return(this.GetOfflineBC().SetFldSearchSpec(b,c))};a.prototype.GetSearchSpec=function(b){return(this.GetOfflineBC().GetFldSearchSpec(b))};a.prototype.GetNumRows=function(){return(this.GetOfflineBC().GetNumRowsX())};return a}())}})};