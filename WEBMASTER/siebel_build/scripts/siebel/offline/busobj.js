/*<ORACLECOPYRIGHT>
* Copyright (C) 1994-2014
* Oracle and Java are registered trademarks of Oracle and/or its affiliates.
* Other names may be trademarks of their respective owners.
* UNIX is a registered trademark of The Open Group.
*
* This software and related documentation are provided under a license agreement
* containing restrictions on use and disclosure and are protected by intellectual property laws.
* Except as expressly permitted in your license agreement or allowed by law, you may not use, copy,
* reproduce, translate, broadcast, modify, license, transmit, distribute, exhibit, perform, publish,
* or display any part, in any form, or by any means. Reverse engineering, disassembly,
* or decompilation of this software, unless required by law for interoperability, is prohibited.
*
* The information contained herein is subject to change without notice and is not warranted to be error-free.
* If you find any errors, please report them to us in writing.
*
* U.S. GOVERNMENT RIGHTS Programs, software, databases, and related documentation and technical data delivered to U.S.
* Government customers are "commercial computer software" or "commercial technical data" pursuant to the applicable
* Federal Acquisition Regulation and agency-specific supplemental regulations.
* As such, the use, duplication, disclosure, modification, and adaptation shall be subject to the restrictions and
* license terms set forth in the applicable Government contract, and, to the extent applicable by the terms of the
* Government contract, the additional rights set forth in FAR 52.227-19, Commercial Computer Software License
* (December 2007). Oracle America, Inc., 500 Oracle Parkway, Redwood City, CA 94065.
*
* This software or hardware is developed for general use in a variety of information management applications.
* It is not developed or intended for use in any inherently dangerous applications, including applications that
* may create a risk of personal injury. If you use this software or hardware in dangerous applications,
* then you shall be responsible to take all appropriate fail-safe, backup, redundancy,
* and other measures to ensure its safe use. Oracle Corporation and its affiliates disclaim any liability for any
* damages caused by use of this software or hardware in dangerous applications.
*
* This software or hardware and documentation may provide access to or information on content,
* products, and services from third parties. Oracle Corporation and its affiliates are not responsible for and
* expressly disclaim all warranties of any kind with respect to third-party content, products, and services.
* Oracle Corporation and its affiliates will not be responsible for any loss, costs,
* or damages incurred due to your access to or use of third-party content, products, or services.
</ORACLECOPYRIGHT>*/
/* 8.1.1.14SIA[23044]PATCHSET7 */
if(SiebelApp.S_App.BusObj){(function(){var d=SiebelApp.S_App;var v=SiebelApp.Utils;var o=SiebelApp.Constants;var h=SiebelApp.Offlineconstants;var i=SiebelApp.OfflineAppSettings;var b=o.get("SWE_PST_NEW_BUSCOMP");var s=o.get("SWE_PST_BUSCOMP_INFO");var q=o.get("SWE_PROP_NAME");var r=o.get("PHYEVENT_SORT_LIST");var x=o.get("SEARCHSPEC");var a=o.get("SWE_PROP_HIER_PAR_ID_FLD");var g=o.get("SWE_PST_FIELD_LIST");var j=o.get("SWE_PST_REC_LIST");var u=o.get("SWE_PST_FIELD");var c=SiebelApp.S_App.BusObj.prototype;var w=SiebelApp.S_App.BusObj;SiebelApp.S_App.BusObj=function(){w.call(this);var A=false;var f={};f.busCompReExecArray=[];f.busCompPosByIdOnlyArray=[];f.idValueArray=[];f.rowNumArray=[];var n=null;this.GetInterface=function(){if(!n){n=new SiebelApp.S_App.OfflineBOInterface(this)}return n};this.ResetInterface=function(){if(n){n.EndLife()}n=null};this.SetInterface=function(B){n=B};this.SetActivationBlockStatus=function(B){A=B};this.GetActivationBlockStatus=function(){return A};this.GetActivationStates=function(){return f};this.ResetActivationStates=function(){f.busCompReExecArray=[];f.busCompPosByIdOnlyArray=[];f.idValueArray=[];f.rowNumArray=[]};var z=this.RemoveBusComp;this.RemoveBusComp=function(C){if(SiebelApp.OfflineAppSettings.GetMode()===true){var B=this.GetView();if(B){B.RemoveBCBroker(C)}}return z.call(this,C)}};SiebelApp.S_App.BusObj.prototype=c;SiebelApp.S_App.BusObj.prototype.constructor=SiebelApp.S_App.BusObj;var m=SiebelApp.S_App.BusObj;var l={};var p={};l.AddBusComp=m.prototype.AddBusComp;l.ProcessObjectInfo=m.prototype.ProcessObjectInfo;l.ProcessChildObjInfo=m.prototype.ProcessChildObjInfo;l.EndLife=m.prototype.EndLife;p.ProcessObjectInfo=function(f){this.BeginActivationBlock();l.ProcessObjectInfo.call(this,f)};p.EndLife=function(f){if(!f){this.ResetInterface()}l.EndLife.call(this);this.SetInterface(null)};p.ProcessChildObjInfo=function(K){var D=K.GetProperty(h.get("STAND_ALONE_INST"));var I=(!v.IsTrue(D));this.GetUIState=function(){return I};var N=K.GetProperty("boexist");var B=K.EnumChildren(true);if(!B){return}var J=SiebelApp.S_App.BusComp;var f=K.GetProperty("isPopup");var L={};do{var n=B.GetType();var F=true;switch(n){case b:var H;if(!v.IsTrue(D)){var C=B.GetChild(0);var O=C.GetProperty(q);if(N&&this.GetBCMap()[O]){H=this.GetBCMap()[O];delete this.GetBCMap()[O]}else{H=this.GetBusCompX(O,true);if(v.IsEmpty(H)||f){H=new J();F=false}}if(f){var A=C.GetValue();if(A===SiebelApp.S_App.GetActiveView().GetActiveApplet().GetBCId()){var M=this.MaxBCIndex()+1;C.SetValue("S_BC"+M)}}H.ProcessObjectInfo(C,F);if(f){var E=H.GetDefn();var G;if(E.PopupVisType===h.get("SALES_REP")){G=0}else{if(E.PopupVisType===h.get("ORGANIZATION")){G=5}else{if(E.PopupVisType===h.get("CONTACT")){G=6}else{if(v.IsTrue(E.PopupVisAutoAll)||v.IsEmpty(z)){G=5}}}}G=G.toString();H.SetViewMode(G);H.SetIsPopup(f)}if(!L.hasOwnProperty(H.GetVarName())){L[H.GetVarName()]=H}if(!F){if(!H.GetDefn().isSetup){y.call(this,H)}}}break;case s:var z=this.GetBCtoProcess(B);if(!v.IsEmpty(z)){var A=z.GetName();if(N&&this.GetBCMap()[A]){H=this.GetBCMap()[A];delete this.GetBCMap()[A];z.ProcessObjectInfo(C,false,N)}else{z.ProcessObjectInfo(B)}}if(!L.hasOwnProperty(z.GetVarName())){L[z.GetVarName()]=z}break}}while((B=K.EnumChildren(false)));if(!v.IsTrue(D)){t.call(this,L,!f)}};function t(B,F){var G=this.GetBCMap();if(F){for(var C in G){if(G[C]){delete this.GetBCMap()[C]}}}for(var D in B){if(B[D]){this.GetBCMap()[D]=B[D]}}var A=SiebelApp.S_App.GetPrevViewBCList();if(A){var z=this.GetBCMap();var E=A.length;var f=true;var H=null;for(var n=0;n<E;n++){f=true;H=null;for(H in z){if(z[H]&&z[H]===A[n]){f=false;break}}if(f){if(A[n].EndLife){A[n].EndLife()}}}z=null;A=null;SiebelApp.S_App.SetPrevViewBCList(null)}}function y(f){e.call(this,f);f.GetDefn().isSetup=true}function e(f){var H=f.GetDefn();var z=H.Fields;var B;for(var G in z){if(!f.GetDefn().Fields[G].fDepArray){f.GetDefn().Fields[G].fDepArray=[]}if(!f.GetDefn().Fields[G].bDepArray){f.GetDefn().Fields[G].bDepArray=[]}B=z[G];if(B.DataType==="Currency"){f.GetDefn().Fields[G].bDepArray.push(B.m_currCodeFieldName);f.GetDefn().Fields[G].bDepArray.push(B.m_exchDateFieldName)}if(B.pickMap&&B.pickMap.length>0){var A;for(var C=0;C<B.pickMap.length;C++){A=B.pickMap[C].FldName;if(z[A]){f.GetDefn().Fields[G].bDepArray.push(A)}else{continue}}}if(v.IsTrue(B.IsCalculated)){if(!f.GetDefn().CalcFieldArray){f.GetDefn().CalcFieldArray=[]}f.GetDefn().CalcFieldArray.push(G);if(f.GetDefn().CalcFieldArray){if(!v.IsEmpty(B.CalExpr)){var D=SiebelApp.Query.GetFieldsFromExp("Calc",B.CalExpr),n=D.length;if(n>0){f.GetDefn().Fields[G].cFldArray=D;var F;for(var E=0;E<n;E++){F=D[E];if(f.GetDefn().Fields[F]){if(!f.GetDefn().Fields[F].fDepArray){f.GetDefn().Fields[F].fDepArray=[]}f.GetDefn().Fields[F].fDepArray.push(G);if(v.IsTrue(f.GetDefn().Fields[F].IsCalculated)){if(!f.GetDefn().Fields[G].cDepArray){f.GetDefn().Fields[G].cDepArray=[]}f.GetDefn().Fields[G].cDepArray.push(F)}}else{SiebelApp.OfflineUtils.CcfLogEvent([h.get("LOG_EVT_CLIENT_SYS"),55,0,53,F,f.GetName()])}}}}}}}}m.prototype.MaxBCIndex=function(){var A=this.GetBCMap();var z=0;for(var n in A){if(A[n]){var f=parseInt(n.substring(4));if(z<f){z=f}}}return z};p.AddBusComp=function(f){if(!(this.GetBCMap()[f.GetVarName()])||this.GetBCMap()[f.GetVarName()].GetName()!==f.GetName()){this.GetBCMap()[f.GetVarName()]=f}};m.prototype.BeginActivationBlock=function(n){this.SetActivationBlockStatus(true);for(var f in n){if(n[f]){n[f].SaveFieldArray()}}};m.prototype.EndActivationBlock=function(){if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().StartTime("BusObj.EndActivationBlock ")}var F=this.GetActivationBlockStatus();var C=this.GetBCMap();var D=false;for(var E in C){if(C[E]){D=true;break}}if(!F||!(D)){return}var B=function(){var G=A;return function(){return[C[G]]}};var f=[];var z=0;var n;for(var A in C){if(C[A]){n=B();if(C[A]){f[z++]={execute:this.CheckBusCompActivation,executeScope:this,preExecute:n}}}}$.eachAsyncOp(this,f);$.callback(this,function(){n=null;f=null;B=null;var J=this.GetActivationStates();var G=J.busCompReExecArray;var I=J.busCompPosByIdOnlyArray;var M=J.idValueArray;var N=G.length;var L;if(N>0){var K=function(O){L=G[O];return[(I[O].GetVarName()===L.GetVarName()),L,M[O]]};var H={iterations:N,execute:k,executeScope:this,preExecute:K};$.eachAsyncOp(this,H);$.callback(this,function(O){n=null;H=null;this.ResetActivationStates();if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("BusObj.EndActivationBlock ")}$.setReturnValue(O)})}else{$.setReturnValue({err:false})}})};function k(n,z,f){if(!n){$.setReturnValue({err:false})}else{z.SetExtObjProp("reExecute",true);z.Execute();$.callback(this,function(A){if(!A.err){z.SetExtObjProp("reExecute",false);if(z.IsNotifyEnabled()){z.DisableNotify()}var B;if(v.IsEmpty(f)){z.Home()}else{z.PositionById(f)}$.callback(this,function(C){if(!C.err){z.EnableNotify();if(z.CheckActiveRow()){z.NotifyNewActiveRow()}$.setReturnValue({err:false})}else{$.setReturnValue(C)}})}else{$.setReturnValue(A)
}})}}m.prototype.CheckBusCompActivation=function(f){var n=false;var F=false;var z=null;var E;if(!f.IsExecuted()){$.setReturnValue({err:false,retval:false});return}var D=(this.GetActivationStates()).busCompReExecArray;var C=D.length;for(var B=0;B<C;B++){if(f.GetVarName()===D[B].GetVarName()){$.setReturnValue({err:false,retval:true});return}}var A=f.GetParentBusComp();if(A){this.CheckBusCompActivation(A)}$.callback(this,function(G){if(A){F=(A.GetExtObjProp("reExecute")||G.retVal)}n=(f.GetExtObjProp("reExecute")||f.CheckActivation());if(!n&&!F){$.setReturnValue({err:true,retval:false});return}(this.GetActivationStates()).busCompReExecArray.push(f);if(!n&&F){(this.GetActivationStates()).busCompPosByIdOnlyArray.push(f)}else{(this.GetActivationStates()).busCompPosByIdOnlyArray.push(f)}if(f.GetActiveRow()>=0){f.GetIdValueX()}$.callback(this,function(I){if(!I.err){z=I.retVal;(this.GetActivationStates()).idValueArray.push(z);var H=f.GetRowNum();E=H.retVal;if(!E){E=-1}(this.GetActivationStates()).rowNumArray.push(E);$.setReturnValue({err:I.err,retval:true});return}})})};m.prototype.InterpolateBCPS=function(F){var E=this.GetBCMap();var A=F.GetChildCount();var f;var n,z=[],D;var C=0;for(var B=0;B<A;B++){f=F.GetChild(B);n=f.GetValue();z[B]={execute:E[n].InterpolateBCState,executeScope:E[n],preExecute:function(){D=F.GetChild(C);C++;return[D]}}}$.eachAsyncOp(this,z);$.callback(this,function(G){z=null;$.setReturnValue(G)})};m.prototype.GetBCPS=function(F,f){var I=SiebelApp.Metadata.GetBusCompDef(F);var J=null;if(I){J=CCFMiscUtil_CreatePropSet();J.SetType(s);J.SetPropertyStr(h.get("STAND_ALONE_INST"),"true");J.SetValue(I.Name);J.SetPropertyStr(q,I.Name);J.SetPropertyStr(r,I.SortSpec);J.SetPropertyStr(x,I.SrchSpec);J.SetPropertyStr(a,I.HierParField);var B=SiebelApp.Metadata.GetBusObjDef(this.GetName())[F];if(!v.IsEmpty(B)&&!f){var H=SiebelApp.Metadata.GetLinkDef(B);if(!v.IsEmpty(H.parentBusCompName)){J.SetPropertyStr("pi",H.parentBusCompName)}}var E=I.Fields;var G=CCFMiscUtil_CreatePropSet();G.SetType(g);var A=CCFMiscUtil_CreatePropSet();A.SetType(j);var D;if(E){for(var n in E){if(E.hasOwnProperty(n)){var C=CCFMiscUtil_CreatePropSet();C.SetType(u);var z=SiebelApp.S_App.LookupSCMap(n);if(z){D=z}else{SiebelApp.S_App.GetStringCache().push(n);D=SiebelApp.S_App.GetStringCache().length-1}C.SetPropertyStr(q,D);C.SetPropertyStr(o.get("CALCEXPR"),E[n].CalExpr);C.SetPropertyStr(o.get("COLUMN_NAME"),E[n].ColName);C.SetPropertyStr(o.get("SWE_PROP_TYPE"),E[n].DataType);C.SetPropertyStr(o.get("DISABLE_SEARCH"),E[n].DisableSearch);C.SetPropertyStr(o.get("DISABLE_SORT"),E[n].DisableSort);C.SetPropertyStr(o.get("FORCE_ACTIVE"),E[n].ForceActive);C.SetPropertyStr(o.get("FORCE_CASE"),E[n].ForeceCase);C.SetPropertyStr(o.get("SWE_PROP_IS_HIDDEN"),E[n].Hidden);C.SetPropertyStr(o.get("SWE_PROP_IS_POST_CHANGES"),E[n].ImPostChg);C.SetPropertyStr(o.get("SWE_PROP_IS_CALC"),E[n].IsCalculated);C.SetPropertyStr(o.get("LINKNAME"),E[n].LinkName);C.SetPropertyStr(o.get("NOCOPY"),E[n].NoCopy);C.SetPropertyStr(o.get("SWE_PROP_LENGTH"),E[n].OldtextLen);C.SetPropertyStr(o.get("PICKLISTNAME"),E[n].PickListName);C.SetPropertyStr(o.get("POSTDEFAULT"),E[n].PostDefault);C.SetPropertyStr(o.get("PREDEFAULT"),E[n].PreDefault);C.SetPropertyStr(o.get("PRECISION"),E[n].Precision);if(E[n].ReadOnly){C.SetPropertyStr(o.get("SWE_PROP_IS_READONLY"),E[n].ReadOnly)}if(E[n].Required){C.SetPropertyStr(o.get("SWE_PROP_IS_REQ"),E[n].Required)}C.SetPropertyStr(o.get("SWE_PROP_SCALE"),E[n].Scale);C.SetPropertyStr(o.get("VALIDATIONSPEC"),E[n].ValidationSpec);G.AddChild(C)}}}J.AddChild(G)}return J};m.prototype.GetBusCompX=function(A,z){var C;var D=this.GetBCMap();for(var B in D){if(D.hasOwnProperty(B)){if(D[B]){var n=D[B].GetName();if((n===A)){return D[B]}}}}B="";if(z){return(B)}C=B;if(v.IsEmpty(C)){var f=this.GetBCPS(A);if(f){C=new SiebelApp.S_App.BusComp();C.ProcessObjectInfo(f);if(!C.GetDefn().isSetup){y.call(this,C)}this.AddBusComp(C);C.SetBusObj(this)}}return C};m.prototype.DrillDownByField=function(C,n,f,D,z){var A=false;var B=this.GetBusCompByName(n);if(!B){return}if(z&&z!=="4"){B.SetViewMode(z)}B.SetFldSearchSpec(f,D);A=B.IsNotifyEnabled();if(A){B.DisableNotify()}B.Execute();$.callback(this,function(E){if(E.err){B.EnableNotify()}B.Home();$.callback(this,function(F){if(!F.err){if(!B.CheckActiveRow()){B.EnableNotify();return}if(A){B.EnableNotify()}}else{B.EnableNotify()}})})};m.prototype.GetLastErrCode=function(){return d.OfflineErrorObject.GetErrorCode()};m.prototype.GetLastErrText=function(){return d.OfflineErrorObject.GetErrorText()};SiebelApp.OfflineUtils.DefineExtentions(m,p,l)}())}if(typeof(SiebelApp.S_App.OfflineBOInterface)==="undefined"){SiebelJS.Namespace("SiebelApp.S_App.OfflineBOInterface");SiebelApp.S_App.OfflineBOInterface=(function(){function a(b){var e=b;var d=this;for(var c in b){(function(){var f=c;if(typeof(b[f])==="function"&&!d[f]){d[f]=function(){if(e.constructor.prototype[f]){return(e.constructor.prototype[f].apply(e,arguments))}else{return(e[f].apply(e,arguments))}}}return d[f]}())}this.GetOfflineBO=function(){return e};this.EndLife=function(){d=null;var h=SiebelApp.S_App.Model.GetBOArray();var f=h.length;for(var g=f-1;g>=0;g--){if(h[g]===this.GetOfflineBO()){h.splice(g,1);SiebelApp.S_App.Model.SetBOArray(h);break}}if(e&&e.EndLife){e.EndLife(true)}e=null}}a.prototype.GetBusComp=function(c,b){var e=SiebelApp.S_App.Model.GetIsInterFace();if(e>0){var f=this.GetOfflineBO().GetBusCompX(c,b);if(f){return f.GetInterface()}}else{var d=this.GetOfflineBO();return(d.GetBusComp.call(d,c))}};a.prototype.Name=function(){return this.GetOfflineBO().GetName()};return a}())};