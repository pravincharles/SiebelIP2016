/*<ORACLECOPYRIGHT>
* Copyright (C) 1994-2014
* Oracle and Java are registered trademarks of Oracle and/or its affiliates.
* Other names may be trademarks of their respective owners.
* UNIX is a registered trademark of The Open Group.
*
* This software and related documentation are provided under a license agreement
* containing restrictions on use and disclosure and are protected by intellectual property laws.
* Except as expressly permitted in your license agreement or allowed by law, you may not use, copy,
* reproduce, translate, broadcast, modify, license, transmit, distribute, exhibit, perform, publish,
* or display any part, in any form, or by any means. Reverse engineering, disassembly,
* or decompilation of this software, unless required by law for interoperability, is prohibited.
*
* The information contained herein is subject to change without notice and is not warranted to be error-free.
* If you find any errors, please report them to us in writing.
*
* U.S. GOVERNMENT RIGHTS Programs, software, databases, and related documentation and technical data delivered to U.S.
* Government customers are "commercial computer software" or "commercial technical data" pursuant to the applicable
* Federal Acquisition Regulation and agency-specific supplemental regulations.
* As such, the use, duplication, disclosure, modification, and adaptation shall be subject to the restrictions and
* license terms set forth in the applicable Government contract, and, to the extent applicable by the terms of the
* Government contract, the additional rights set forth in FAR 52.227-19, Commercial Computer Software License
* (December 2007). Oracle America, Inc., 500 Oracle Parkway, Redwood City, CA 94065.
*
* This software or hardware is developed for general use in a variety of information management applications.
* It is not developed or intended for use in any inherently dangerous applications, including applications that
* may create a risk of personal injury. If you use this software or hardware in dangerous applications,
* then you shall be responsible to take all appropriate fail-safe, backup, redundancy,
* and other measures to ensure its safe use. Oracle Corporation and its affiliates disclaim any liability for any
* damages caused by use of this software or hardware in dangerous applications.
*
* This software or hardware and documentation may provide access to or information on content,
* products, and services from third parties. Oracle Corporation and its affiliates are not responsible for and
* expressly disclaim all warranties of any kind with respect to third-party content, products, and services.
* Oracle Corporation and its affiliates will not be responsible for any loss, costs,
* or damages incurred due to your access to or use of third-party content, products, or services.
</ORACLECOPYRIGHT>*/
/* 8.1.1.14SIA[23044]PATCHSET11 */
if(typeof(SiebelAppFacade.EdetailerPlayerRenderer)==="undefined"){SiebelJS.Namespace("SiebelAppFacade.EdetailerPlayerRenderer");define("siebel/edetailerplayerrenderer",["siebel/phyrenderer"],function(){SiebelAppFacade.EdetailerPlayerRenderer=(function(){var f=SiebelJS.Dependency("SiebelApp.Constants");var c=true;var a=true;var g=false;var d=false;var h=false;function e(k){SiebelAppFacade.EdetailerPlayerRenderer.superclass.constructor.call(this,k);var j=k;this.GetPM=function(){return j}}SiebelJS.Extend(e,SiebelAppFacade.PhysicalRenderer);e.prototype.Init=function(){SiebelAppFacade.EdetailerPlayerRenderer.superclass.Init.call(this);this.AttachPMBinding("ShowSelection",this.ShowSelection);this.AttachPMBinding("detailerMenuBar",this.detailerMenuBar);this.AttachPMBinding("detailerThreadBar",this.detailerThreadBar);jQuery.event.add(window,"resize",b);window.addEventListener("message",i,false)};e.prototype.ShowUI=function(k){SiebelAppFacade.EdetailerPlayerRenderer.superclass.ShowUI.call(this,k);var j=this.GetPM();var m=$("#"+j.Get("GetFullId"));var l=new Date();$("#_sweappmenu").hide();$(".siebui-button-toolbar").hide();$("#_swethreadbar").hide();$("#_swescrnbar").hide();$(".siebui-mobile").hide();$(".AppletMenu").hide();m.find(".siebui-applet-header").hide();m.find(".AppletButtons").hide();$(".siebui-banner").hide();$(".AppletButtons").addClass("siebui-player-applet-btn");$(".siebui-form-applet-header").addClass("siebui-view-player-top");d=false;$("#_sweview").addClass("siebui-player-scroll");$("#_sweclient").addClass("siebui-player-scroll");$(".siebui-applet-title").remove();$("#_swecontent").addClass("siebui-edetail-top")};function b(){if(window.outerWidth===screen.width&&window.outerHeight===screen.height){if(h===false){$(".AppletButtons").hide();$(".siebui-thread").hide();$(".siebui-edetailing-player-applet").addClass("siebui-edetailing-player-fullscreen-applet");$(".siebui-edetailing-threadbar-prev-container").addClass("siebui-edetailing-threadbar-prev-fullscreen-container");h=true}}else{$(".AppletButtons").show();$(".siebui-edetailing-player-applet").removeClass("siebui-edetailing-player-fullscreen-applet");$(".siebui-edetailing-threadbar-prev-container").removeClass("siebui-edetailing-threadbar-prev-fullscreen-container");h=false}}e.prototype.BindEvents=function(j){var o=this.GetPM();var k;var n;var m;var j=this.GetPM().Get("GetControls");$("#"+o.Get("GetFullId")).on("click",".siebui-player-prev-slide",function(){o.ExecuteMethod("GotoPreviousSet")});$("#"+o.Get("GetFullId")).on("click",".siebui-player-next-slide",function(){o.ExecuteMethod("GotoNextSet")});var l=SiebelAppFacade.ComponentMgr.FindComponent({id:SiebelApp.S_App.GetActiveView().GetName()}).GetPM();l.ExecuteMethod("SysPref");k=l.Get("GetSysPref");n=l.Get("GetCrossInd");if(SiebelApp.S_App.GetOfflineMode&&SiebelApp.S_App.GetOfflineMode()){n="N"}if(j.Done||j.DoneButton){if(k==="Y"&&n!=="Y"){m=$("#"+j.DoneButton.GetInputName()+"_Ctrl")}else{m=$("#"+j.Done.GetInputName()+"_Ctrl")}m.on("click",{ctx:this},function(q){$(".AppletButtons").hide();$(".siebui-edetailing-title-prev-container").addClass("siebui-player-navbar");$(".siebui-edetailing-threadbar-prev-container").addClass("siebui-player-navbar");$(".siebui-banner").hide();var v=SiebelApp.S_App.GetService("LS PCD Service");var p=SiebelApp.S_App.NewPropertySet();var r=q.data.ctx.GetPM();var s=new Date();r.ExecuteMethod("SetSesRecData");var x=r.ExecuteMethod("GetSesRecData");if(l.Get("LastUpdatedRec")!==x.MpiId){if(v){var w={};w.async=true;w.scope=this;w.npr=true;w.selfbusy=true;w.cb=function(){outPropSet=arguments[2]};var u=(s.getMonth()+1)+"/"+s.getDate()+"/"+s.getFullYear()+" "+s.getHours()+":"+s.getMinutes()+":"+s.getSeconds();var t=l.Get("PlayerStartTime");p.SetProperty("MpiId",x.MpiId);p.SetProperty("StartTime",t);p.SetProperty("ThumbnailPath",x.ThumbnailPath);p.SetProperty("EndTime",u);p.SetProperty("ParentMPId",x.ParentMPId);p.SetProperty("ItemName",x.ItemName);p.SetProperty("ParentMPName",x.ParentMPName);p.SetProperty("ParentDsblMsgResponse",x.ParentDsblMsgResponse);p.SetProperty("LitFileExt",x.LitFileExt);p.SetProperty("LitFileRev",x.LitFileRev);p.SetProperty("LiteratureId",x.LiteratureId);p.SetProperty("ThumbnailExtension",x.ThumbnailExtension);p.SetProperty("ThumbnailId",x.ThumbnailId);p.SetProperty("ThumbnailRevId",x.ThumbnailRevId);l.AddProperty("LastUpdatedRec",x.MpiId);if(l.Get("UpdatePlayer")==="N"){p.SetProperty("Mode","INSERT")}else{p.SetProperty("Mode","UPDATE")}l.AddProperty("UpdatePlayer","N");$("#"+l.Get("ThreadbarFullId")).hide();$(".siebui-currentpdf-media").hide();$(".siebui-browsercomp-header").hide();$("#_sweview").removeClass("siebui-player-scroll");$("#_sweclient").removeClass("siebui-player-scroll");$("#_swecontent").removeClass("siebui-edetail-top");v.InvokeMethod("LogMsgPlanItemSesResponse",p,w)}}})}SiebelAppFacade.EdetailerPlayerRenderer.superclass.BindEvents.call(this,j)};e.prototype.ExecuteMethod=function(k,l,j){var m=SiebelAppFacade.ComponentMgr.FindComponent({id:SiebelApp.S_App.GetActiveView().GetName()}).Get("hotspotappletname");if(k==="detailerMenuBar"){SiebelAppFacade.ComponentMgr.FindComponent({id:m}).ExecuteMethod("detailerMenuBar",l)}else{if(k==="detailerThreadBar"){SiebelAppFacade.ComponentMgr.FindComponent({id:m}).ExecuteMethod("detailerThreadBar",l)}else{if(k==="GoToNextItem"){SiebelAppFacade.ComponentMgr.FindComponent({id:m}).ExecuteMethod("GoToNextItem")}else{if(k==="GotoPreviousItem"){SiebelAppFacade.ComponentMgr.FindComponent({id:m}).ExecuteMethod("GotoPreviousItem")}else{if(k==="navigateToItem"){SiebelAppFacade.ComponentMgr.FindComponent({id:m}).ExecuteMethod("navigateToItem",l)}else{if(k==="RelatedItemStartTime"){SiebelAppFacade.ComponentMgr.FindComponent({id:m}).ExecuteMethod("RelatedItemStartTime")}else{if(k==="RelatedItemEndTime"){SiebelAppFacade.ComponentMgr.FindComponent({id:m}).ExecuteMethod("RelatedItemEndTime",l,j)}else{alert(_SWEgetMessage("AppletErrNoSuchMethod"))}}}}}}}};e.prototype.BindData=function(l){SiebelAppFacade.EdetailerPlayerRenderer.superclass.BindData.call(this,l);var A=this.GetPM();var k=A.Get("GetFullId");var v=$("#"+A.Get("GetFullId"));var j=A.Get("GetRecordSet")[A.Get("GetSelection")];var y=A.Get("GetControls");var z=SiebelAppFacade.ComponentMgr.FindComponent({id:SiebelApp.S_App.GetActiveView().GetName()}).GetPM();var E,F;var s;var n;var o=this;var t=SiebelApp.S_App.IsAutoOn();if(y.FullScreen){var u=y.FullScreen.GetInputName();var w=$("#"+u+"_Ctrl");w.on("click",function(){var G=document.documentElement;if(G.requestFullScreen){G.requestFullScreen()}else{if(G.mozRequestFullScreen){G.mozRequestFullScreen()}else{if(G.webkitRequestFullScreen){G.webkitRequestFullScreen()}else{if(G.msRequestFullscreen){G.msRequestFullscreen()}}}}})}if(j){var E=j["Parent Disable MenuBar Flag"];var F=j["Parent Disable Nav Flag"];y=A.Get("GetControls");var p=j.LitFileExt;var D=j["File With Path"];if(!(SiebelApp.S_App.GetOfflineMode&&SiebelApp.S_App.GetOfflineMode())){s=this.GenNextMediaControl(p,D,0,j["Literature Id"],j.LitFileRev);
n=s;v.find(".siebui-collapsible-applet-content").replaceWith(n)}for(var C in y){if(y.hasOwnProperty(C)){var r=y[C];if(r.GetHTMLAttr()==="eDetailer Player"){var x=r.GetInputName()}}}if(d===false){if(t==="true"){v.prepend('<img class="siebui-player-prev-slide" src="images/leftnav.png" ot ="Button" rn="PreviousSlide" un="PreviousSlide" ></img>');v.append('<img class="siebui-player-next-slide" src="images/rightnav.png" ot ="Button" rn="NextSlide" un="NextSlide" ></img>');var B=localStorage.getItem("isAdfmContainer");if(B==="1"){$(".siebui-player-prev-slide").addClass("siebui-player-prev-slide-maf");$(".siebui-player-next-slide").addClass("siebui-player-next-slide-maf")}}else{v.prepend('<img class="siebui-player-prev-slide" src="images/leftnav.png" ></img>');v.append('<img class="siebui-player-next-slide" src="images/rightnav.png" ></img>');var B=localStorage.getItem("isAdfmContainer");if(B==="1"){$(".siebui-player-prev-slide").addClass("siebui-player-prev-slide-maf");$(".siebui-player-next-slide").addClass("siebui-player-next-slide-maf")}}if(t==="true"){var q='<div class="siebui-edetailing-threadbar-prev-container" ot ="SiebApplet" rn="ThreadBarArea" un="eDetailer Thread Bar Applet"></div>';v.append(q);var m='<div class="siebui-edetailing-title-prev-container" ot ="SiebApplet" rn="MenuBarArea" un="Player/Related Menu Bar"></div>';v.prepend(m)}else{var q='<div class="siebui-edetailing-threadbar-prev-container"></div>';v.append(q);var m='<div class="siebui-edetailing-title-prev-container"></div>';v.prepend(m)}if(z.Get("PlayerApplet")===A.Get("GetName")){this.CanInvokeNavBar(A)}d=true}$("#s_"+k+"_div").addClass("siebui-edetailing-player-applet");$("#s_vctrl_div_tabScreen").hide();if(F==="Y"){$(".siebui-player-prev-slide").addClass("invisible");$(".siebui-player-next-slide").addClass("invisible")}}else{$("#"+A.Get("GetFullId")).removeClass("siebui-current-media")}$(".siebui-edetailing-title-prev-container").on("click",function(){var G=A.Get("GetRecordSet")[A.Get("GetSelection")];if(G){var H=G["Parent Disable MenuBar Flag"];if(H==="Y"){return}}v.find(".AppletButtons").show();if(t==="true"){setTimeout(function(){v.find(".AppletButtons").hide()},30000)}else{setTimeout(function(){v.find(".AppletButtons").hide()},10000)}});v.find(".AppletButtons").mouseenter(function(){a=false});v.find(".AppletButtons").mouseleave(function(){a=true});v.find(".AppletButtons").hide();$("#s_vctrl_div").hide();$(".siebui-view-container").addClass("siebui-view-margin-top");if(SiebelAppFacade.DecisionManager.IsTouch()){$(".siebui-icon-fullscreen").hide()}z.AddProperty("visited","N");if(j&&(SiebelApp.S_App.GetOfflineMode&&SiebelApp.S_App.GetOfflineMode())){SiebelApp.MobileFileMgr.GetHttpURLPrefix({success:function(G){s=o.GenNextMediaControl(j.LitFileExt,j["File With Path"],0,j["Literature Id"],j.LitFileRev,G);n=s;v.find(".siebui-collapsible-applet-content").replaceWith(n)},error:function(G){alert(G)}})}};e.prototype.detailerThreadBar=function(j){if(j==="show"){$(".siebui-thread").show();setTimeout(function(){$(".siebui-thread").hide()},10000)}else{if(j==="hide"){$(".siebui-thread").hide()}else{alert("this mode is not supported")}}};e.prototype.detailerMenuBar=function(l){var k=this.GetPM();var j=$("#"+k.Get("GetFullId"));if(l==="show"){j.find(".AppletButtons").show();setTimeout(function(){j.find(".AppletButtons").hide()},10000)}else{if(l==="hide"){j.find(".AppletButtons").hide()}else{alert("this mode is not supported")}}};function i(l){var k=[];k=l.data;var j=k[0];var n=k[1];var m=k[2];if(SiebelAppFacade.EdetailerPlayerRenderer){SiebelAppFacade.EdetailerPlayerRenderer.prototype.ExecuteMethod(j,n,m)}}e.prototype.ShowScreenViewBar=function(k,m){var l=this.GetPM();var o=$("#"+l.Get("GetFullId"));if(!k){var j=l.Get("GetRecordSet")[l.Get("GetSelection")];var n="";if(j){var n=j["Parent Disable Nav Flag"]}if(n==="Y"){o.find(".siebui-tile-left-scroll").remove();o.find(".siebui-tile-right-scroll").remove()}else{o.find(".siebui-tile-left-scroll").removeClass("siebui-player-left-scroll");o.find(".siebui-tile-right-scroll").removeClass("siebui-player-right-scroll")}}if(m===undefined||m===""){g=false}if(k&&!g){$("#_sweappmenu").show();$(".siebui-button-toolbar").show();$("#_swethreadbar").show();$("#_swescrnbar").show();$(".siebui-mobile").show();$(".AppletMenu").show();o.find(".siebui-applet-header").show();$(".siebui-banner").show();o.find(".AppletButtons").show()}else{$("#_sweappmenu").hide();$(".siebui-button-toolbar").hide();$("#_swethreadbar").hide();$("#_swescrnbar").hide();$(".siebui-mobile").hide();$(".AppletMenu").hide();o.find(".siebui-applet-header").hide();$(".siebui-banner").hide();o.find(".AppletButtons").hide()}};e.prototype.ShowSelection=function(){SiebelAppFacade.EdetailerPlayerRenderer.superclass.ShowSelection.call(this);var y=this.GetPM().Get("GetControls");var q=SiebelAppFacade.ComponentMgr.FindComponent({id:SiebelApp.S_App.GetActiveView().GetName()}).GetPM();var k=q.Get("GetSysPref");var x=q.Get("GetCrossInd");if(y.Done||y.DoneButton){if(k==="Y"&&x!=="Y"){$("#"+y.Done.GetInputName()+"_Ctrl").addClass("forcehide")}else{if(y.DoneButton){$("#"+y.DoneButton.GetInputName()+"_Ctrl").addClass("forcehide")}}}var n=this.GetPM();var u=$("#"+n.Get("GetFullId"));var s=n.Get("GetRecordSet")[n.Get("GetSelection")];var j;var v;var t=this;var r=false;if((q.Get("Mode")==="Player"&&n.Get("GetName")===q.Get("PlayerApplet")&&q.Get("visited")==="N")||(q.Get("Mode")==="Related"&&n.Get("GetName")===q.Get("RelatedApplet")&&q.Get("visited")==="N")){r=true;if(s){var w=s.LitFileExt;var p=s["File With Path"];if(!(SiebelApp.S_App.GetOfflineMode&&SiebelApp.S_App.GetOfflineMode())){j=this.GenNextMediaControl(w,p,0,s["Literature Id"],s.LitFileRev);v=j;u.find(".siebui-current-media").replaceWith(v)}if(q.Get("PlayerApplet")===n.Get("GetName")){this.CanInvokeNavBar(n)}}else{$("#"+n.Get("GetFullId")).removeClass("siebui-current-media")}q.AddProperty("visited","Y")}var o=false;if(c){o=true;c=false}if(o){var l=new Date();var q=SiebelAppFacade.ComponentMgr.FindComponent({id:SiebelApp.S_App.GetActiveView().GetName()}).GetPM();var m=(l.getMonth()+1)+"/"+l.getDate()+"/"+l.getFullYear()+" "+l.getHours()+":"+l.getMinutes()+":"+l.getSeconds();q.AddProperty("PlayerStartTime",m);q.AddProperty("Mode","Player");n.ExecuteMethod("SetSesRecData")}if(SiebelAppFacade.DecisionManager.IsTouch()){$(".siebui-icon-fullscreen").hide()}if(r){if(s&&(SiebelApp.S_App.GetOfflineMode&&SiebelApp.S_App.GetOfflineMode())){SiebelApp.MobileFileMgr.GetHttpURLPrefix({success:function(z){j=t.GenNextMediaControl(s.LitFileExt,s["File With Path"],0,s["Literature Id"],s.LitFileRev,z);v=j;u.find(".siebui-current-media").replaceWith(v)},error:function(z){alert(z)}})}}};e.prototype.EndLife=function(){c=true;SiebelAppFacade.EdetailerPlayerRenderer.superclass.EndLife.call(this)};e.prototype.CanInvokeNavBar=function(k){var j=k;var l=false;var m=false;l=j.ExecuteMethod("CanInvokeMethod","GotoNextSet");m=j.ExecuteMethod("CanInvokeMethod","GotoPreviousSet");if(l===false){$(".siebui-player-next-slide").addClass("siebui-player-navbar")
}else{$(".siebui-player-next-slide").removeClass("siebui-player-navbar")}if(m===false){$(".siebui-player-prev-slide").addClass("siebui-player-navbar")}else{$(".siebui-player-prev-slide").removeClass("siebui-player-navbar")}};e.prototype.GenNextMediaControl=function(u,p,t,q,n,o){var k;t=0;var r;var m;var j;var s=false;var l;m=localStorage.getItem("isAdfmContainer");if(m==="1"&&(SiebelApp.S_App.GetOfflineMode&&SiebelApp.S_App.GetOfflineMode())){s=true}if(s&&p){j=p.split("\\");if(u!=="zip"&&u!=="ZIP"){r="S_LIT_"+q+"_"+n+"."+u}else{r="S_LIT_"+q+"_"+n+"/"+j[j.length-2]+"/"+j[j.length-1]}l=o+"/"+r}if(u==="jpg"||u==="JPG"){if(!s){k='<img id= "'+t+'" class = "siebui-current-media" src="'+p+'"/>';t++}else{k='<img id= "'+t+'" class = "siebui-current-media" src="'+l+'"/>';t++}}else{if(u==="png"||u==="PNG"){if(!s){k='<img id= "'+t+'" class = "siebui-current-media" src="'+p+'"/>';t++}else{k='<img id= "'+t+'" class = "siebui-current-media" src="'+l+'"/>';t++}}else{if(u==="gif"||u==="GIF"){if(!s){k='<img id= "'+t+'" class = "siebui-current-media" src="'+p+'"/>';t++}else{k='<img id= "'+t+'" class = "siebui-current-media" src="'+l+'"/>';t++}}else{if(u==="mp4"||u==="MP4"){if(!s){k='<video id= "'+t+'" class = "siebui-current-media" controls autoplay><source src="'+p+'" type="video/mp4">Your browser does not support the video tag.</video>';t++}else{k='<video id= "'+t+'" class = "siebui-current-media" controls autoplay><source src="'+l+'" type="video/mp4">Your browser does not support the video tag.</video>';t++}}else{if(u==="pdf"||u==="PDF"){if(!s){k='<div id="scroller"><iframe id="iframe" class = "siebui-current-media siebui-currentpdf-media" src="'+p+'" /></div>'}else{k='<div id="scroller"><iframe id="iframe" class = "siebui-current-media siebui-currentpdf-media" src="'+l+'" /></div>'}}else{if(u==="html"||u==="HTML"){if(!s){k='<embed id= "'+t+'" class = "siebui-current-media" src="'+p+'"/>';t++}else{k='<embed id= "'+t+'" class = "siebui-current-media" src="'+l+'"/>';t++}}else{if(u==="zip"||u==="ZIP"){if(!s){k='<embed id= "'+t+'" class = "siebui-current-media" src="'+p+'"/>';t++}else{k='<embed id= "'+t+'" class = "siebui-current-media" src="'+l+'"/>';t++}}else{alert(_SWEgetMessage("IDS_FILE_EXTENSION"))}}}}}}}return k};return e}());return"SiebelAppFacade.EdetailerPlayerRenderer"})};