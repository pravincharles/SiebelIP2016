/*<ORACLECOPYRIGHT>
* Copyright (C) 1994-2014
* Oracle and Java are registered trademarks of Oracle and/or its affiliates.
* Other names may be trademarks of their respective owners.
* UNIX is a registered trademark of The Open Group.
*
* This software and related documentation are provided under a license agreement
* containing restrictions on use and disclosure and are protected by intellectual property laws.
* Except as expressly permitted in your license agreement or allowed by law, you may not use, copy,
* reproduce, translate, broadcast, modify, license, transmit, distribute, exhibit, perform, publish,
* or display any part, in any form, or by any means. Reverse engineering, disassembly,
* or decompilation of this software, unless required by law for interoperability, is prohibited.
*
* The information contained herein is subject to change without notice and is not warranted to be error-free.
* If you find any errors, please report them to us in writing.
*
* U.S. GOVERNMENT RIGHTS Programs, software, databases, and related documentation and technical data delivered to U.S.
* Government customers are "commercial computer software" or "commercial technical data" pursuant to the applicable
* Federal Acquisition Regulation and agency-specific supplemental regulations.
* As such, the use, duplication, disclosure, modification, and adaptation shall be subject to the restrictions and
* license terms set forth in the applicable Government contract, and, to the extent applicable by the terms of the
* Government contract, the additional rights set forth in FAR 52.227-19, Commercial Computer Software License
* (December 2007). Oracle America, Inc., 500 Oracle Parkway, Redwood City, CA 94065.
*
* This software or hardware is developed for general use in a variety of information management applications.
* It is not developed or intended for use in any inherently dangerous applications, including applications that
* may create a risk of personal injury. If you use this software or hardware in dangerous applications,
* then you shall be responsible to take all appropriate fail-safe, backup, redundancy,
* and other measures to ensure its safe use. Oracle Corporation and its affiliates disclaim any liability for any
* damages caused by use of this software or hardware in dangerous applications.
*
* This software or hardware and documentation may provide access to or information on content,
* products, and services from third parties. Oracle Corporation and its affiliates are not responsible for and
* expressly disclaim all warranties of any kind with respect to third-party content, products, and services.
* Oracle Corporation and its affiliates will not be responsible for any loss, costs,
* or damages incurred due to your access to or use of third-party content, products, or services.
</ORACLECOPYRIGHT>*/
/* 8.1.1.14SIA[23044]PATCHSET9 */
if(typeof(SiebelAppFacade.GanttDateBar)==="undefined"){SiebelJS.Namespace("SiebelAppFacade.GanttDateBar");SiebelAppFacade.GanttDateBar=(function(){var w=SiebelJS.Dependency("SiebelApp.Constants"),c=w.get("SWE_GANTT_START_DATE"),s=w.get("SWE_GANTT_TIME_SCALE"),h="MM/dd/yyyy",A="MM/DD/YYYY",i=SiebelApp.S_App.LocaleObject,b=i.GetLocalString("IDS_TNT_DATE_INPUT_TOOLTIP"),f=i.GetLocalString("IDS_TNT_DATE_CAL_TOOLTIP"),k=i.GetDateFormat(),t=i.GetLocalString("IDS_SWE_DATEPICKER_CURRENT_TEXT"),z=i.GetLocalString("IDS_TNT_PREV_DAY_TOOLTIP"),B=i.GetLocalString("IDS_TNT_NEXT_DAY_TOOLTIP"),r=i.GetLocalString("IDS_TNT_PREV_WEEK_TOOLTIP"),u=i.GetLocalString("IDS_TNT_NEXT_WEEK_TOOLTIP"),e=i.GetLocalString("IDS_CALENDAR_PREVIOUS_MONTH_STRING"),v=i.GetLocalString("IDS_CALENDAR_NEXT_MONTH_STRING"),a=i.GetLocalString("IDS_TNT_PREV_DAY_TOOLTIP"),n=i.GetLocalString("IDS_CALENDAR_NEXT_YEAR_STRING"),l=i.GetLocalString("IDS_CALENDAR_PREVIOUS_YEAR_STRING"),g={7:r,1:a,30:e,31:e,365:l,35:e},j={7:u,1:B,30:v,31:v,365:n,35:v},d=w.get("SWE_PST_BUTTON_CTRL");function p(){}p.prototype.ShowUI=function(F,E){var H,D,I,G=SiebelApp.S_App.IsAutoOn(),C;this.pm=F;I=this.pm.Get("GetFullId");if(E){H='<div class = "siebui-buttonBar">';C="name = '"+I+"todayButton' title = '"+t+"' aria-labelledby = '"+t+"'";if(G==="true"){C+=" ot = 'Button' rn = '"+t+"' un = 'DB "+t+"'"}H+=SiebelAppFacade.HTMLTemplateManager.GenerateMarkup({type:d,className:" siebui-todayButton",value:t,id:I+"todayButton",attrs:C});C="aria-labelledby = 'Previous Set' title='Previous Set'";if(G==="true"){C+=" ot = 'Button' rn = 'Previous Set' un = 'DB Previous Set'"}H+=SiebelAppFacade.HTMLTemplateManager.GenerateMarkup({type:d,className:"siebui-buttonBar-button siebui-prevSetButton",id:I+"prevSetButton",attrs:C});C="aria-labelledby = 'Previous Day' title='Previous Day'";if(G==="true"){C+=" ot = 'Button' rn = 'Previous Day' un = 'DB Previous Day'"}H+=SiebelAppFacade.HTMLTemplateManager.GenerateMarkup({type:d,className:"siebui-buttonBar-button siebui-prevButton",id:I+"prevButton",attrs:C});H+='<span class="siebui-ganttDate">';C="";if(G==="true"){C+=" ot = 'label' rn = 'DateLabel' un = 'DB DateLabel'"}H+=SiebelAppFacade.HTMLTemplateManager.GenerateMarkup({type:w.get("SWE_CTRL_LABEL"),className:"siebui-dateRange",value:F.ExecuteMethod("getDateRange",""),id:"ganttDateLbl",attrs:C});C="title='Click to Enter Date' aria-labelledby='Click to Enter Date'";if(G==="true"){C+=" ot = 'JDatePick' rn = 'Start Date' un = 'DB Start Date'"}H+=SiebelAppFacade.HTMLTemplateManager.GenerateMarkup({type:w.get("SWE_CTRL_TEXT"),className:"siebui-dateInput siebui-input-popup",value:F.Get(c),id:"ganttdatePicker",attrs:C});H+="</span>";C="aria-labelledby = 'Next Day' title='Next Day'";if(G==="true"){C+=" ot = 'Button' rn = 'Next Day' un = 'DB Next Day'"}H+=SiebelAppFacade.HTMLTemplateManager.GenerateMarkup({type:d,className:"siebui-buttonBar-button siebui-nextButton",id:I+"nextButton",attrs:C});C="aria-labelledby = 'Next Set' title='Next Set'";if(G==="true"){C+=" ot = 'Button' rn = 'Next Set' un = 'DB Next Set'"}H+=SiebelAppFacade.HTMLTemplateManager.GenerateMarkup({type:d,className:"siebui-buttonBar-button siebui-nextSetButton",id:I+"nextSetButton",attrs:C});H+="</div>";E.append(H);$("#s_"+I+"_div").find("#ganttdatePicker").hide()}};p.prototype.BindEvents=function(){var O=this,J=O.pm,M=J.Get("GetFullId"),C,I,S,H="Click to Enter Date",P=J.Get("RTL Mode"),Q={mask:true},F=SiebelApp.S_App.PluginBuilder.GetHoByName("EventHelper");var L=$("#s_"+M+"_div").find("#ganttDateLbl");if(F&&L.length){F.Manage(L,"click",{ctx:this},m)}$("#s_"+M+"_div").find("#ganttdatePicker").datepicker({showOn:"button",buttonImage:"images/calPicker_icon.gif",buttonImageOnly:true,buttonText:f,isRTL:J.Get("RTL Mode")==="Y",changeMonth:true,changeYear:true,onSelect:function(){J.SetProperty("InEvent",true);J.ExecuteMethod("RefreshGanttChart",$(this).val(),null,Q);$(this).datepicker("hide")}});var K=$("#s_"+M+"_div").find("#ganttdatePicker");if(F&&K.length){F.Manage(K,"blur",{ctx:this},y);F.Manage(K,"change",{ctx:this,lpcsa:Q},q);F.Manage(K,"keypress",{ctx:this,lpcsa:Q},q)}var N=$("#s_"+M+"_div").find("#"+M+"todayButton");if(F&&N.length){F.Manage(N,"click",{ctx:this,lpcsa:Q},x)}var G=$("#s_"+M+"_div").find("#"+M+"nextButton");if(F&&G.length){F.Manage(G,"click",{ctx:this,lpcsa:Q,nav:"Next"},o)}var R=$("#s_"+M+"_div").find("#"+M+"nextSetButton");if(F&&R.length){F.Manage(R,"click",{ctx:this,lpcsa:Q,nav:"NextSet"},o)}var D=$("#s_"+M+"_div").find("#"+M+"prevButton");if(F&&D.length){F.Manage(D,"click",{ctx:this,lpcsa:Q,nav:"Prev"},o)}var E=$("#s_"+M+"_div").find("#"+M+"prevSetButton");if(F&&E.length){F.Manage(E,"click",{ctx:this,lpcsa:Q,nav:"PrevSet"},o)}};p.prototype.setNavigationValues=function(){var E=this.pm.Get("TST"),D=this.pm.Get("DateBar Navigation TS"),F=this.pm.Get("GetFullId"),C;if(D&&E){D=";"+D;E=";"+E+":";C=D.substring(D.indexOf(E)+E.length,D.indexOf(";",D.indexOf(E)+E.length));this.NextPrev=C?Number(C.substring(0,C.indexOf(","))):"";this.NextPrevSet=C?Number(C.substring(C.indexOf(",")+1,C.length)):""}$("#s_"+F+"_div").find("#"+F+"prevSetButton").attr("aria-labelledby",g[this.NextPrevSet]).attr("title",g[this.NextPrevSet]);$("#s_"+F+"_div").find("#"+F+"prevButton").attr("aria-labelledby",g[this.NextPrev]).attr("title",g[this.NextPrev]);$("#s_"+F+"_div").find("#"+F+"nextSetButton").attr("aria-labelledby",j[this.NextPrevSet]).attr("title",j[this.NextPrevSet]);$("#s_"+F+"_div").find("#"+F+"nextButton").attr("aria-labelledby",j[this.NextPrev]).attr("title",j[this.NextPrev])};function m(D){var C=D.data.ctx.pm,E=C.Get("GetFullId");localizedValue=i.GetStringFromDateTime(C.Get(c),A,k);$(this).hide();$("#s_"+E+"_div").find("#ganttdatePicker").val(localizedValue).show().focus();C.SetProperty("InEvent",true)}function y(D){var C=D.data.ctx.pm,E=C.Get("GetFullId");C.SetProperty("InEvent",true);$(this).hide();$("#s_"+E+"_div").find("#ganttDateLbl").show()}function q(D){if((D.type==="change")||(D.type==="keypress"&&D.which===13)){var C=D.data.ctx.pm,E=C.Get("GetFullId");lpcsa=D.data.lpcsa,nDate=i.GetStringFromDateTime($(this).val(),k,A);DateSep=i.GetDispDateSeparator();C.SetProperty("InEvent",true);while(DateSep!="/"&&nDate.indexOf(DateSep)!=-1){nDate=nDate.replace(DateSep,"/")}if(nDate===""&&$(this).val()!==""){SiebelApp.S_App.ErrorObject.SetErrorMsg("LocaleErrFormattedToString",$(this).val());SiebelApp.S_App.ErrorObject.ProcessError()}else{C.ExecuteMethod("RefreshGanttChart",nDate,null,lpcsa);$(this).hide();$("#s_"+E+"_div").find("#ganttDateLbl").show()}}}function x(E){var D=E.data.lpcsa,C=E.data.ctx.pm;C.SetProperty("InEvent",true);C.ExecuteMethod("RefreshGanttChart",0,null,D)}function o(G){var F=G.data.ctx,D=F.pm,E=G.data.lpcsa,H=G.data.nav,C=new Date(D.Get(c));switch(H){case"Next":C.setDate(C.getDate()+F.NextPrev);break;case"Prev":C.setDate(C.getDate()-F.NextPrev);break;case"NextSet":C.setDate(C.getDate()+F.NextPrevSet);break;case"PrevSet":C.setDate(C.getDate()-F.NextPrevSet);break;default:break}D.SetProperty("InEvent",true);
D.ExecuteMethod("RefreshGanttChart",C.format(h),null,E)}return p}())};