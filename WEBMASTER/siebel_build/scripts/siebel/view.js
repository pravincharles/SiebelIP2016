/*<ORACLECOPYRIGHT>
* Copyright (C) 1994-2014
* Oracle and Java are registered trademarks of Oracle and/or its affiliates.
* Other names may be trademarks of their respective owners.
* UNIX is a registered trademark of The Open Group.
*
* This software and related documentation are provided under a license agreement
* containing restrictions on use and disclosure and are protected by intellectual property laws.
* Except as expressly permitted in your license agreement or allowed by law, you may not use, copy,
* reproduce, translate, broadcast, modify, license, transmit, distribute, exhibit, perform, publish,
* or display any part, in any form, or by any means. Reverse engineering, disassembly,
* or decompilation of this software, unless required by law for interoperability, is prohibited.
*
* The information contained herein is subject to change without notice and is not warranted to be error-free.
* If you find any errors, please report them to us in writing.
*
* U.S. GOVERNMENT RIGHTS Programs, software, databases, and related documentation and technical data delivered to U.S.
* Government customers are "commercial computer software" or "commercial technical data" pursuant to the applicable
* Federal Acquisition Regulation and agency-specific supplemental regulations.
* As such, the use, duplication, disclosure, modification, and adaptation shall be subject to the restrictions and
* license terms set forth in the applicable Government contract, and, to the extent applicable by the terms of the
* Government contract, the additional rights set forth in FAR 52.227-19, Commercial Computer Software License
* (December 2007). Oracle America, Inc., 500 Oracle Parkway, Redwood City, CA 94065.
*
* This software or hardware is developed for general use in a variety of information management applications.
* It is not developed or intended for use in any inherently dangerous applications, including applications that
* may create a risk of personal injury. If you use this software or hardware in dangerous applications,
* then you shall be responsible to take all appropriate fail-safe, backup, redundancy,
* and other measures to ensure its safe use. Oracle Corporation and its affiliates disclaim any liability for any
* damages caused by use of this software or hardware in dangerous applications.
*
* This software or hardware and documentation may provide access to or information on content,
* products, and services from third parties. Oracle Corporation and its affiliates are not responsible for and
* expressly disclaim all warranties of any kind with respect to third-party content, products, and services.
* Oracle Corporation and its affiliates will not be responsible for any loss, costs,
* or damages incurred due to your access to or use of third-party content, products, or services.
</ORACLECOPYRIGHT>*/
/* 8.1.1.14SIA[23044]PATCHSET10 */
if(typeof(SiebelApp.S_App.View)==="undefined"){SiebelJS.Namespace("SiebelApp.S_App.View");SiebelApp.S_App.View=(function(){var v=SiebelJS.Dependency("SiebelApp.Utils");var q=SiebelJS.Dependency("SiebelApp.Constants");var m=[];var c=q.get("SWE_PST_NEW_APPLET"),r=q.get("SWE_PST_NEW_LIST_APPLET"),o=q.get("SWE_PST_NEW_CALENDARAPPLET"),y=q.get("SWE_PST_NEW_PLAYBARAPPLET"),e=q.get("SWE_PST_QTP_INFO"),s=q.get("SWE_PST_ACTIVE_APPLET"),p=q.get("SWE_PST_APPLET_INFO"),i=q.get("SWE_PST_ACCESSIBILITY_INFO"),k=q.get("SWE_PST_NEW_TREEAPPLET"),d=q.get("SWE_PST_CNTRL_LIST");function t(){var A={};var B={};var E=null;var D=null;var C=null;var F=null;var z=null;this.GetAppletMap=function(){return A};this.SetActiveAppletOnLoad=function(G){C=G};this.GetActiveAppletOnLoad=function(){return C};this.SetActiveAppletInternal=function(G){F=G};this.GetActiveApplet=function(){return F};this.SetActiveAppletBeforePopup=function(G){z=G};this.GetActiveAppletBeforePopup=function(){return z};this.AddToolbar=function(G){m.push(G)};this.GetControls=function(){return B};this.ClearControls=function(){B=null;B={}};this.GetCanInvokeByName=function(){return D};this.SetCanInvokeByName=function(){D=[]};this.GetCanInvokeArray=function(){return E};this.SetCanInvokeArray=function(){E=[]};SiebelApp.S_App.ErrorObject.DecorateErrorCapability(this)}t.prototype.GetPropArray=function(){if(SiebelApp.S_App.IsRwd()){return["GetAppletMap","GetName","GetTitle","GetControls"]}else{return["GetAppletMap","GetName","GetTitle"]}};t.prototype.GetMethodArray=function(){if(SiebelApp.S_App.IsRwd()){return["CanInvokeMethod","InvokeMethod","ExecuteViewUpdate"]}else{return[]}};t.prototype.EndLife=function(){var B=this.GetAppletMap();for(var D in B){if(B.hasOwnProperty(D)){if(B[D]&&B[D].EndLife){B[D].EndLife()}delete B[D]}}B=null;this.SetActiveAppletInternal(null);this.SetActiveAppletOnLoad(null);this.SetActiveAppletBeforePopup(null);var F=this.GetName().replace(/ /g,"_")+"_"+q.get("SWE_RPC_PROP_VIEW");SiebelApp.ThemeManager.unLoadStyle(F);var A=SiebelAppFacade.ComponentMgr.FindComponent({id:this.GetName()});if(A){var G=A.GetPR();if(G&&G.EndLife){G.EndLife()}var E=A.GetPM();if(E&&E.EndLife){E.EndLife()}}if(SiebelApp.S_App.IsRwd()){var C;var z=m.length;if(z>0){for(C=0;C<z;C++){pmName=m[C].GetPMName();SiebelApp.S_App.GetCmdMgr().UpdateToolbarArray(pmName);m.splice(C,1)}m=[]}}SiebelAppFacade.ComponentMgr.DeRegisterLevel(this);SiebelApp.S_App.ErrorObject.DeleteErrorObj(this)};function w(z){this.GetAppletMap()[z.GetName()]=z}t.prototype.GetApplet=function(z){return this.GetAppletMap()[z]||null};t.prototype.GetAppletById=function(C){var z=this.GetAppletMap(),B=null;for(var A in z){if(z.hasOwnProperty(A)){if(z[A].GetVarName()==C){B=z[A];break}}}return B};t.prototype.RemoveApplet=function(z){if(this.GetActiveApplet()===z){this.SetActiveAppletInternal(null)}if(this.GetActiveAppletOnLoad()===z){this.SetActiveAppletOnLoad(null)}var A=this.GetAppletMap()[z.GetName()];if(A){var B=SiebelAppFacade.ComponentMgr.FindComponent({id:A.GetName()});if(B){SiebelAppFacade.ComponentMgr.DeleteComponent(B,this)}if(A.EndLife){A.EndLife()}A=null;delete this.GetAppletMap()[z.GetName()];this.ClearErrorMsg();return true}this.SetErrorMsg("AppErrNoSuchApplet");return false};t.prototype.DeletePopup=function(){var F=false;var E=[];var I=this.GetAppletMap();for(var z in I){if(I.hasOwnProperty(z)){var A=I[z];if(A.GetPopupApplet()){var G=A.GetPopupApplet();E.push(G);if(G.GetPopupApplet()){while(G&&G.GetPopupApplet()){var B=G.GetPopupApplet();E.push(B);G=B}}var C=E.length;for(var D=C-1;D>=0;D--){var H=E[D];H.GetParentApplet().DeletePopup();this.SetActiveAppletBeforePopup(null);F=true}}}}if(!F){b.call(this,this.GetActiveAppletBeforePopup());this.SetActiveAppletBeforePopup(null)}};function b(z){if(z){this.SetActiveAppletInternal(z);z.SetAppletActive(true,z);z.SetFocusDefaultControl(true);z.FocusDefaultControl()}}function j(z){var A=this.GetApplet(z);if(A){A.Initialize();SiebelAppFacade.ComponentMgr.FindComponent({id:z}).Show();A.ShowOnly();A.ShowSelection();if(A.HasCustomShadow()&&A.shadow&&typeof(A.shadow.OnLoad)==="function"){A.shadow.OnLoad()}}b.call(this,this.GetActiveAppletOnLoad())}t.prototype.Initialize=function(){var B=null;var A=this.GetAppletMap();for(B in A){if(A.hasOwnProperty(B)){A[B].Initialize()}}SiebelApp.S_App.NotifyTimer("TimeGoToView",[this.GetName(),"Objects Initialized"]);var z=SiebelAppFacade.ComponentMgr.FindComponent({id:this.GetName()});SiebelAppFacade.ComponentMgr.Show(this);if(z){z.Show()}A=this.GetAppletMap();for(B in A){if(A.hasOwnProperty(B)){A[B].ShowOnly()}}SiebelApp.S_App.NotifyTimer("TimeGoToView",[this.GetName(),"Finished Populate"]);A=this.GetAppletMap();for(B in A){if(A.hasOwnProperty(B)){A[B].ShowSelection(true);this.ClearErrorMsg();if(A[B].HasCustomShadow()&&A[B].shadow&&typeof(A[B].shadow.OnLoad)==="function"){A[B].shadow.OnLoad()}}}SiebelApp.S_App.NavCtrlMgr.Show(false);b.call(this,this.GetActiveAppletOnLoad());SiebelApp.S_App.GetCmdMgr().UpdateUIControls()};t.prototype.ExecuteFrame=function(B,A){var z=SiebelApp.S_App.GetRequestDefault();var G=CCFMiscUtil_CreatePropSet();var D=this.GetApplet(B);var C=0;z.SetProperty(q.get("SWE_CMD_ARG"),q.get("SWE_CMD_INVOKE_METHOD_STR"));z.SetProperty(q.get("SWE_METHOD_STR"),"ExecuteFrameQuery");z.SetProperty(q.get("SWE_APPLET_STR"),B);z.SetProperty(q.get("SWE_VIEW_ARG"),this.GetName());var F=A.length;for(C=0;C<F;C++){var E=D.GetControl(A[C].field);z.SetProperty(E.GetInputName(),A[C].value)}SiebelApp.S_App.CallServer(z,G,true,{async:false,cb:function(){},scope:this})};function a(B){var A;var z=SiebelApp.S_App.GetRequestDefault();z.SetProperty(q.get("SWE_APPLET_STR"),B);z.SetProperty(q.get("SWE_CMD_ARG"),q.get("SWE_GET_APPLET_LAYOUT"));A=v.EncodeToQueryString(z);return SiebelApp.S_App.GetPageURL()+q.get("SWE_ARG_START")+A}t.prototype.HandleRefreshLayout=function(H,C){var G=H.GetChildByType("api");var A;var F=[];var B;if(!v.IsEmpty(G)){var z=G.GetChildByType("vi");var E=z.EnumChildren(true);do{var D=E.GetType();switch(D){case c:case o:case r:case k:A=E.GetChild(0);B=u.call(this,A,C);if(B){F.push(B)}break;case p:B=u.call(this,E,C);if(B){F.push(B)}break}}while((E=z.EnumChildren(false)))}return F};function u(G,E){var D=false;D=v.IsTrue(G.GetProperty(q.get("SWE_PROP_IS_PARTIAL")));if(D){var B;var F;var C;var z=new $.Deferred();B=G.GetProperty(q.get("SWE_PROP_NAME"));F=G.GetProperty(q.get("SWE_PROP_TOGGLE_VAR_NAME"));C=G.GetProperty(q.get("SWE_PROP_VAR_NAME"));if(v.IsEmpty(C)){C=G.GetValue();B=this.GetAppletById(C).GetName()}var A=a(B);if(!v.IsEmpty(F)){SiebelApp.S_App.uiStatus.Busy({target:$("#"+F),mask:true});$("#"+F).attr("id",C).attr("src",A)}else{SiebelApp.S_App.uiStatus.Busy({target:$("#"+C),mask:true});$("#"+C).attr("src",A)}if(!v.IsEmpty(A)&&!v.IsEmpty(F)){h.call(this,this.GetAppletById(F))}SiebelApp.contentUpdater.AddCallBack(A,function(){z.resolveWith(this)},this);E.push({func:function(H,I){j.call(H,I);SiebelApp.S_App.NavCtrlMgr.ShowVisDropdown();SiebelJS.Log("Loaded applet:"+I);SiebelApp.S_App.uiStatus.Free()
},tgt:this,applet:B});SiebelApp.contentUpdater.loadContent();return z.promise()}}function h(z){var A=z.GetBusComp();this.RemoveApplet(z);if(A.GetNotifyObject().GetAppletRegistry().length===1){A.EndLife();this.GetBusObj().RemoveBusComp(A)}else{A.GetNotifyObject().DeRegister(z)}}t.prototype.GetFilesAndProcessObjectInfo=function(A){var z=new $.Deferred(),B=v.PrepareModuleInfo(A),C=this,D=function(){try{C.BuildFrame(A)}catch(E){SiebelJS.Log(E)}C=A=null;z.resolveWith(C,["View Process Object"])};B.length?require(B,D):D();B=null;return z.promise()};t.prototype.BuildFrame=function(z){this.ProcessObjectInfo(z)};t.prototype.DispatchNotification=function(z){n.call(this,z);this.ExecuteViewUpdate()};t.prototype.ExecuteViewUpdate=function(){};function n(A){var z=A.GetProperty(q.get("SWE_PROP_CAN_INVOKE"));if(typeof(z)==="string"){f.call(this,z)}}function f(B){var E=[];var A=true;CCFMiscUtil_StringToArray(B,E);if(!this.GetCanInvokeByName()){this.SetCanInvokeByName()}this.SetCanInvokeArray();if(E.length>=2){for(var D=0,z=E.length;D<z;D+=2){var C=SiebelApp.S_App.LookupStringCache(E[D]);var F=E[D+1];if(C){A=(F==="1")?true:false;this.GetCanInvokeArray().push(C);this.GetCanInvokeByName()[C]={bCanInvoke:A}}}}}t.prototype.CanInvokeMethod=function(A){var z=true;if(!A){return false}if(this.GetCanInvokeByName()!==null&&this.GetCanInvokeByName()[A]){z=this.GetCanInvokeByName()[A].bCanInvoke;if(z!==undefined||z!==null){return z}}return z};t.prototype.ProcessObjectInfo=function(V){if(V.GetType()!=q.get("SWE_PST_VIEW_INFO")){SiebelJS.Log("[View-ProcessObjectInfo] -> Invalid PropertySet Information.");return}this.m_busObj=SiebelApp.S_App.GetActiveBusObj();SiebelApp.S_App.GetActiveBusObj().SetView(this);var N=v.Curry(SiebelApp.S_App.constructor.prototype.DefineAccessor,this,V);if(V.PropertyExists(q.get("SWE_PROP_NAME"))){N("GetName","SWE_PROP_NAME")}N("GetTitle","SWE_PROP_TITLE");N("GetPageURL","SWE_PROP_PAGEURL");N("IsCacheable","SWE_PROP_IS_CACHEABLE");if(SiebelApp.S_App.IsRwd()){if(!V.PropertyExists(q.get("SWE_PROP_OBJECT_RESPONSIVE"))){V.SetProperty(q.get("SWE_PROP_OBJECT_RESPONSIVE"),"false")}N("IsObjResponsive","SWE_PROP_OBJECT_RESPONSIVE")}N("GetThreadBarHTML","SWE_PROP_THREAD_BAR");N("GetViewType","SWE_PROP_VIEW_TYPE");N("IsCacheable","SWE_PROP_IS_CACHEABLE");N("GetInvokeMethod","SWE_PROP_VIEW_INVOKECOMMAND");N("GetTaskViewTitle","SWE_PROP_VIEW_TASKVIEWTITLE");N("GetTaskStepTitle","SWE_PROP_VIEW_TASKSTEPTITLE");N("GetActiveTask","SWE_PROP_VIEW_ACTIVETASK");N("GetDisableCancelPDQ","SWE_PROP_DISABLE_CANCEL_PDQ");if(!SiebelAppFacade.ComponentMgr.FindComponent({id:this.GetName()})){if(!V.GetProperty(q.get("SWE_UIDEF_PM_CTR"))){V.SetPropertyStr(q.get("SWE_UIDEF_PM_CTR"),"siebel/viewpm")}if(!V.GetProperty(q.get("SWE_UIDEF_PR_CTR"))){V.SetPropertyStr(q.get("SWE_UIDEF_PR_CTR"),"siebel/viewpr")}SiebelAppFacade.ComponentMgr.MakeComponent(SiebelApp.S_App,V,this)}if(SiebelApp.S_App.IsRwd()){n.call(this,V)}g.call(this);var E=V.EnumChildren(true),I=SiebelAppFacade.ProxyFactory,B=SiebelAppFacade.ComponentMgr,C=null,O=null,A=null;while(E){A=E.GetType();switch(A){case p:var P=E.GetValue();if(!v.IsEmpty(P)){C=this.GetAppletById(P);C.ProcessObjectInfo(E,false);var L=B.FindComponent(C.GetName());if(L){L.SwitchPMnPR(E,C)}w.call(this,C)}break;case i:var aa=v.Curry(SiebelApp.S_App.constructor.prototype.DefineAccessor,this,E);aa("GetViewSummary","SWE_PROP_VIEW_SUMMARY");if(this.GetViewSummary()===undefined){this.GetViewSummary=this.GetTitle}break;case e:var G=v.Curry(SiebelApp.S_App.constructor.prototype.DefineAccessor,this,E);G("GetObjectType","SWE_PROP_QTP_OT");G("GetRepstrName","SWE_PROP_QTP_RN");G("GetUIName","SWE_PROP_QTP_UN");break;case s:O=E;break;case d:if(SiebelApp.S_App.IsRwd()){var R=V.Clone();var Y=R.GetChildByType(q.get("SWE_PST_CNTRL_LIST"));l.call(this,Y)}break;default:C=I.MakeObject(A);if(C){C.SetView(this);var J=E.GetChild(0);C.SetName(J.GetProperty(q.get("SWE_PROP_NAME")));var z={callback:C.ProcessObjectInfo,scope:C,input:{ps:J}};B.MakeComponent(this,J,C,z);w.call(this,C);B.CompleteComponent(this,J,C)}break}E=V.EnumChildren(false)}if(O!==null){var W=this.GetApplet(O.GetProperty(q.get("SWE_PROP_NAME"))),K=SiebelApp.S_App.GetPopupPM();this.SetActiveAppletOnLoad(W);if(K.Get("state")===q.get("POPUP_STATE_VISIBLE")&&W){var F=K.Get("currPopups"),H=F.length,T=false;for(var U=0;U<H;U++){if(F[U].GetName()===W.GetName()){T=true;break}}if(!T){F.push(W);var M=(W.GetMvgAssocAppletName||W.GetMvgSelectedAppletName||function(){}).call(W);if(M){M=this.GetApplet(M);var Z=F.length,D=false;for(var S=0;S<Z;S++){if(F[S]===M){D=true;break}}if(!D){var X=this.GetAppletMap();for(var Q in X){if(X[Q]===M){F.push(M)}}}}}}}V=O=null};t.prototype.GetThreadBarPlaceHolder=function(){return q.get("SWE_THREADBAR_IDENTIFIER")};function g(){$("#"+this.GetThreadBarPlaceHolder()).html(this.GetThreadBarHTML()).addClass(SiebelApp.S_App.GetDirection()?" siebui-rtl-element-right":"")}t.prototype.GetBusObj=function(){return this.m_busObj};t.prototype.ExecuteUIUpdate=function(){var z=this.GetAppletMap();for(var A in z){if(z.hasOwnProperty(A)){z[A].ExecuteUIUpdate()}}};t.prototype.SetActiveApplet=function(z){if(z&&this.IsAppletActive(z)){return true}var A=this.GetActiveApplet();if(!A){A=SiebelApp.S_App.GetExternalActiveApplet()}if(A){if(!A.SetAppletActive(false,z)){return false}}this.SetActiveAppletInternal(z);if(z&&!this.GetActiveApplet().SetAppletActive(true,z)){return false}if(A&&A!==z){A.ResetAppletState()}SiebelApp.S_App.GetCmdMgr().UpdateUIControls();this.ClearErrorMsg();return true};t.prototype.IsAppletActive=function(z){return(this.GetActiveApplet()===z)};t.prototype.SetActiveAppletByName=function(B,A){var z=this.GetApplet(B);return this.SetActiveApplet(z)};t.prototype.GotoSelectedTreeNode=function(){var B=this.GetActiveApplet();if(B&&B.GetParentApplet()){return true}var z=this.GetAppletMap();for(var A in z){if(z.hasOwnProperty(A)){if(z[A]){z[A].FocusSelectedTreeNode()}}}};function l(z){var A=z.GetChildCount(),B;for(B=0;B<A;B++){x.call(this,z.GetChild(B))}}function x(A){var C=SiebelApp.S_App.LookupStringCache,B=CCFMiscUtil_CreatePropSet(),z=SiebelApp.S_App.IsAutoOn();B.SetProperty(q.get("SWE_PROP_NAME"),C(A.GetProperty(q.get("SWE_PROP_NAME"))));B.SetProperty(q.get("SWE_PROP_TMPL_ITM_HOLDER"),A.GetProperty(q.get("SWE_PROP_TMPL_ITM_HOLDER")));B.SetProperty(q.get("SWE_PROP_TYPE"),C(A.GetProperty(q.get("SWE_PROP_TYPE"))));B.SetProperty(q.get("SWE_PROP_SEQ"),A.GetProperty(q.get("SWE_PROP_SEQ")));B.SetProperty(q.get("SWE_PROP_DISP_NAME"),C(A.GetProperty(q.get("SWE_PROP_DISP_NAME"))));B.SetProperty(q.get("SWE_PROP_JUSTIFICATION"),C(A.GetProperty(q.get("SWE_PROP_JUSTIFICATION"))));B.SetProperty(q.get("SWE_PROP_MTHD_NAME"),C(A.GetProperty(q.get("SWE_PROP_MTHD_NAME"))));if(z="true"&&A.GetChild(0)!=="undefined"&&A.GetChild(0)!==null){var D=CCFMiscUtil_CreatePropSet();D=A.GetChild(0);B.SetProperty(q.get("SWE_PROP_QTP_OT"),C(A.GetProperty(q.get("SWE_PROP_TYPE"))));B.SetProperty(q.get("SWE_PROP_QTP_RN"),C(A.GetProperty(q.get("SWE_PROP_NAME"))));B.SetProperty(q.get("SWE_PROP_QTP_UN"),C(A.GetProperty(q.get("SWE_PROP_DISP_NAME"))))
}this.GetControls()[B.GetProperty(q.get("SWE_PROP_NAME"))]=B}t.prototype.InvokeMethod=function(B,z,D){var E=true;if(typeof(D)!=="undefined"){if(D.psresp===true||D.psresp===false){E=D.psresp}}z.SetProperty(q.get("SWE_CMD_ARG"),q.get("SWE_CMD_INVOKE_METHOD_STR"));z.SetProperty(q.get("SWE_METHOD_STR"),B);z.SetProperty(q.get("SWE_VIEW_ID_ARG"),this.GetBusObj().GetZone());z.SetProperty(q.get("SWE_VIEW_ARG"),this.GetName());z.SetProperty(q.get("SWE_COUNT_STR"),SiebelApp.S_App.GetSWEReqCount());var C={};if(typeof(D)==="object"||D===true||D===false){C.scope=this;C.args=[];C.args.push(B);C.args.push(z);C.async=(typeof(D.async)==="boolean")?D.async:D;C.target=D.target;C.selfbusy=D.selfbusy||false;C.mask=D.mask||false}var A=CCFMiscUtil_CreatePropSet();SiebelApp.S_App.CallServer(z,A,E,D)};t.prototype.CycleActiveApplet=function(z){var A=true;var B=null;var F=null;var G=0;var I=[];var M;var K=this.GetActiveApplet();var C;var E;if(K&&K.GetParentApplet()){return true}var L=this.GetAppletMap();for(var J in L){if(L.hasOwnProperty(J)){I[G]=L[J];G++}}var H=I.length;for(var D=0;D<H;D++){if(A){B=I[D];A=false}if(I[D]===K){M=D;break}F=I[D]}if(!B){this.SetErrorMsg("ViewErrNoApplets");return false}else{if(!K){return this.SetActiveApplet(B)}}if(z){if(!F){C=I[I.length-1]}else{C=F}}else{if(M<(I.length-1)){C=I[M+1]}else{C=I[0]}}if(!C||(K===C)){return true}E=this.SetActiveApplet(C);if(E){C.SetFocusDefaultControl(true);C.FocusDefaultControl(true)}};return t}())};