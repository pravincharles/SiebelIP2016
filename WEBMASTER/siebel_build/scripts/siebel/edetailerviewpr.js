/*<ORACLECOPYRIGHT>
* Copyright (C) 1994-2014
* Oracle and Java are registered trademarks of Oracle and/or its affiliates.
* Other names may be trademarks of their respective owners.
* UNIX is a registered trademark of The Open Group.
*
* This software and related documentation are provided under a license agreement
* containing restrictions on use and disclosure and are protected by intellectual property laws.
* Except as expressly permitted in your license agreement or allowed by law, you may not use, copy,
* reproduce, translate, broadcast, modify, license, transmit, distribute, exhibit, perform, publish,
* or display any part, in any form, or by any means. Reverse engineering, disassembly,
* or decompilation of this software, unless required by law for interoperability, is prohibited.
*
* The information contained herein is subject to change without notice and is not warranted to be error-free.
* If you find any errors, please report them to us in writing.
*
* U.S. GOVERNMENT RIGHTS Programs, software, databases, and related documentation and technical data delivered to U.S.
* Government customers are "commercial computer software" or "commercial technical data" pursuant to the applicable
* Federal Acquisition Regulation and agency-specific supplemental regulations.
* As such, the use, duplication, disclosure, modification, and adaptation shall be subject to the restrictions and
* license terms set forth in the applicable Government contract, and, to the extent applicable by the terms of the
* Government contract, the additional rights set forth in FAR 52.227-19, Commercial Computer Software License
* (December 2007). Oracle America, Inc., 500 Oracle Parkway, Redwood City, CA 94065.
*
* This software or hardware is developed for general use in a variety of information management applications.
* It is not developed or intended for use in any inherently dangerous applications, including applications that
* may create a risk of personal injury. If you use this software or hardware in dangerous applications,
* then you shall be responsible to take all appropriate fail-safe, backup, redundancy,
* and other measures to ensure its safe use. Oracle Corporation and its affiliates disclaim any liability for any
* damages caused by use of this software or hardware in dangerous applications.
*
* This software or hardware and documentation may provide access to or information on content,
* products, and services from third parties. Oracle Corporation and its affiliates are not responsible for and
* expressly disclaim all warranties of any kind with respect to third-party content, products, and services.
* Oracle Corporation and its affiliates will not be responsible for any loss, costs,
* or damages incurred due to your access to or use of third-party content, products, or services.
</ORACLECOPYRIGHT>*/
/* 8.1.1.14SIA[23044]PATCHSET10 */
if(typeof(SiebelApp.S_App.edetailerviewpr)=="undefined"){Namespace("SiebelApp.S_App.edetailerviewpr");define("siebel/edetailerviewpr",["siebel/viewpr","siebel/htmltmplmgr"],function(){SiebelAppFacade.edetailerviewpr=(function(){var c=SiebelJS.Dependency("SiebelAppFacade.HTMLTemplateManager");var e="Button";var b=SiebelJS.Dependency("SiebelApp.Constants");function a(f){SiebelAppFacade.edetailerviewpr.superclass.constructor.call(this,f)}SiebelJS.Extend(a,SiebelAppFacade.ViewPR);a.prototype.Init=function(){SiebelAppFacade.edetailerviewpr.superclass.Init.call(this);this.AttachPMBinding("ComponentStateChange",this.ComponentDisplay);this.AttachPMBinding("ButtonCanInvoke",this.RelItmCanInvoke)};a.prototype.ShowUI=function(){SiebelAppFacade.edetailerviewpr.superclass.ShowUI.call(this);var f=[];var h=[];f=$("[id^=s_S_A]");for(var g=0;g<f.length;g++){h[g]="#"+f[g].id}this.GetPM().ExecuteMethod("PrepareStateInfo",h);d(this)};a.prototype.RelItmCanInvoke=function(){var r=SiebelAppFacade.ComponentMgr.FindComponent({id:this.GetPM().Get("RelatedApplet")});var p=r.GetPM();var n=p.Get("GetRecordSet")[p.Get("GetSelection")];var o=true;if(n){o=true}else{o=false}var g=this.GetPM().Get("ChildComponentState");var f="#S_A"+g[0].id;var m="Related";var i=SiebelApp.S_App.IsAutoOn();var j=((i==="true")?' rn="Related_Ctrl" un="Related" ot="Button"':" ");var s=((i==="true")?' rn="Player_Ctrl" un="Player" ot="Button"':" ");var h=c.GenerateMarkup({type:e,id:m+"_Ctrl",className:(o?"appletButton siebui-related-applet-btn sieble-ui-related":"appletButtonDis sieble-ui-related"),value:g[1].childLabel,attrs:'data-display="'+g[1].childLabel+'" tabindex="0" title="'+g[1].childLabel+'" aria-label="'+g[1].childLabel+'" '+j+((o===true)?" ":'disabled="disabled"')});var k=c.GenerateMarkup({type:e,id:m+"_Ctrl",className:(o?"appletButton siebui-related-applet-btn sieble-ui-related":"appletButtonDis sieble-ui-related"),value:g[0].childLabel,attrs:'data-display="'+g[0].childLabel+'" tabindex="0" title="'+g[0].childLabel+'" aria-label="'+g[0].childLabel+'" '+s+((o===true)?" ":'disabled="disabled"')});var l="<span class = 'siebui-edetail-related-container'>"+k+"</span>";var q="<span class = 'siebui-edetail-related-container'>"+h+"</span>";$(f).find(".siebui-edetail-related-container").replaceWith(q);f="#S_A"+g[1].id;$(f).find(".siebui-edetail-related-container").replaceWith(l)};a.prototype.ComponentDisplay=function(k,h){var j="#s_S_A"+k+"_div";var g="a_"+k;var i=SiebelAppFacade.ComponentMgr.FindComponent({id:this.GetPM().Get("RelatedApplet")});var f=i.GetPM();if(h===true){$(j).parent().show();f.GetRenderer().BindData()}else{if(h===false){$(j).parent().hide()}}$(".siebui-view-multi-column").remove()};function d(x){var B=x.GetPM();var k=B.Get("View");var q=B.Get("ChildComponentState");var F="#S_A"+q[0].id;var f=SiebelAppFacade.ComponentMgr.FindComponent({id:B.Get("RelatedApplet")});var l=f.GetPM();var i=l.Get("GetRecordSet")[l.Get("GetSelection")];var D=true;var r=true;var s="Related";var v=SiebelApp.S_App.IsAutoOn();var C=((v==="true")?' rn="Related_Ctrl" un="Related" ot="Button"':" ");var A=((v==="true")?' rn="Player_Ctrl" un="Player" ot="Button"':" ");var z=((v==="true")?' rn="Contacts_Ctrl" un="Contacts" ot="Button"':" ");var h=((v==="true")?' rn="Done_Ctrl" un="Player" ot="Button"':" ");var j="Contacts";var E=B.Get("ChildComponentState");if(i){D=true}else{D=false}var o=c.GenerateMarkup({type:e,id:s+"_Ctrl",className:(D?"appletButton siebui-related-applet-btn sieble-ui-related":"appletButtonDis sieble-ui-related"),value:q[1].childLabel,attrs:'data-display="'+q[1].childLabel+'" tabindex="0" title="'+q[1].childLabel+'" aria-label="'+q[1].childLabel+'" '+C+((D===true)?" ":'disabled="disabled"')});var g=c.GenerateMarkup({type:e,id:s+"_Ctrl",className:(D?"appletButton siebui-related-applet-btn sieble-ui-related":"appletButtonDis sieble-ui-related"),value:q[0].childLabel,attrs:'data-display="'+q[0].childLabel+'" tabindex="0" title="'+q[0].childLabel+'" aria-label="'+q[0].childLabel+'" '+A+((D===true)?" ":'disabled="disabled"')});var n="<span class = 'siebui-edetail-related-container'>"+g+"</span>";var w="<span class = 'siebui-edetail-related-container'>"+o+"</span>";$(F).find(".siebui-applet-buttons").append(w);F="#S_A"+q[1].id;$(F).find(".siebui-applet-buttons").append(n);var G=SiebelApp.S_App.GetService("LS PCD Service");var y=SiebelApp.S_App.NewPropertySet();var p=SiebelApp.S_App.NewPropertySet();var t;var m;if(G){var u={};u.async=true;u.scope=this;u.npr=true;u.selfbusy=true;u.cb=function(){p=arguments[2];t=p.childArray[0].GetProperty("RetVal");m=p.childArray[0].GetProperty("CrossIndRetVal");if(t==="Y"){if(SiebelApp.S_App.GetOfflineMode&&SiebelApp.S_App.GetOfflineMode()){m="N"}if(m==="N"){var I=c.GenerateMarkup({type:e,id:j+"_Ctrl",className:(r?"appletButton":"FALSE"),value:q[2].childLabel,attrs:'data-display="'+q[2].childLabel+'" tabindex="0" title="'+q[2].childLabel+'" aria-label="'+q[2].childLabel+'" '+z+((r===true)?" ":'disabled="disabled"')});var J="<span class = 'AppletButtons siebui-add'>"+I+"</span>";$("#S_A"+E[0].id).find(".siebui-applet-buttons").append(J)}var K=c.GenerateMarkup({type:e,id:"Done_Ctrl",className:(r?"appletButton":"FALSE"),value:q[0].childLabel,attrs:'data-display="'+q[0].childLabel+'" tabindex="0" title="'+q[0].childLabel+'" aria-label="'+q[0].childLabel+'" '+h+((r===true)?" ":'disabled="disabled"')});var H="<span class = 'siebui-ctrl-btn siebui-icon-done'>"+K+"</span>";$("#S_A"+E[2].id).find(".siebui-btn-grp-applet").prepend(H)}};G.InvokeMethod("GeteDetailingSysPref",y,u)}}a.prototype.BindEvents=function(){var h=this;var f=this.id;var g=h.GetPM().Get("ChildComponentState");$("#s_svctrl_div").hide();$(".sieble-ui-related").bind("click",{ctx:this},function(k){var m=k.data.ctx.GetPM();m.OnControlEvent("TabClick",this.id);var x=SiebelAppFacade.ComponentMgr.FindComponent({id:m.Get("PlayerApplet")});var w=SiebelAppFacade.ComponentMgr.FindComponent({id:m.Get("RelatedApplet")});var j=h.GetPM().Get("ChildComponentState");var v=x.GetPM();var r=w.GetPM();var o=r.Get("GetRecordSet").length;var l=new Date();var s=SiebelApp.S_App.GetService("LS PCD Service");if(j[0].displayState===false){m.AddProperty("Mode","Related");m.AddProperty("visited","N");w.GetPR().ShowSelection();w.GetPR().CanInvokeNavBar(r);var t={};t.async=true;t.scope=this;t.npr=true;t.selfbusy=true;t.cb=function(){var y=(l.getMonth()+1)+"/"+l.getDate()+"/"+l.getFullYear()+" "+l.getHours()+":"+l.getMinutes()+":"+l.getSeconds();m.AddProperty("RelatedStartTime",y);r.ExecuteMethod("SetSesRecData")};if(s){var q="";var p=v.ExecuteMethod("GetSesRecData");var n=m.Get("PlayerStartTime");var i=SiebelApp.S_App.NewPropertySet();i.SetProperty("MpiId",p.MpiId);i.SetProperty("StartTime",n);i.SetProperty("ThumbnailPath",p.ThumbnailPath);i.SetProperty("EndTime",q);i.SetProperty("ParentMPId",p.ParentMPId);i.SetProperty("ItemName",p.ItemName);i.SetProperty("ParentMPName",p.ParentMPName);i.SetProperty("ParentDsblMsgResponse",p.ParentDsblMsgResponse);i.SetProperty("LitFileExt",p.LitFileExt);
i.SetProperty("LitFileRev",p.LitFileRev);i.SetProperty("LiteratureId",p.LiteratureId);i.SetProperty("ThumbnailExtension",p.ThumbnailExtension);i.SetProperty("ThumbnailId",p.ThumbnailId);i.SetProperty("ThumbnailRevId",p.ThumbnailRevId);if(m.Get("UpdatePlayer")==="N"){i.SetProperty("Mode","INSERT")}else{i.SetProperty("Mode","UPDATE")}m.AddProperty("LastUpdatedRec",p.MpiId);m.AddProperty("UpdatePlayer","N");s.InvokeMethod("LogMsgPlanItemSesResponse",i,t)}}else{r.ExecuteMethod("SetSesRecData");var i=SiebelApp.S_App.NewPropertySet();x.GetPR().CanInvokeNavBar(v);if(s){var q=(l.getMonth()+1)+"/"+l.getDate()+"/"+l.getFullYear()+" "+l.getHours()+":"+l.getMinutes()+":"+l.getSeconds();var u=r.ExecuteMethod("GetSesRecData");var n=m.Get("RelatedStartTime");i.SetProperty("MpiId",u.MpiId);i.SetProperty("StartTime",n);i.SetProperty("ThumbnailPath",u.ThumbnailPath);i.SetProperty("EndTime",q);i.SetProperty("ParentMPId",u.ParentMPId);i.SetProperty("ItemName",u.ItemName);i.SetProperty("ParentMPName",u.ParentMPName);i.SetProperty("ParentDsblMsgResponse",u.ParentDsblMsgResponse);i.SetProperty("Mode","INSERT");i.SetProperty("LitFileExt",u.LitFileExt);i.SetProperty("LitFileRev",u.LitFileRev);i.SetProperty("LiteratureId",u.LiteratureId);i.SetProperty("ThumbnailExtension",u.ThumbnailExtension);i.SetProperty("ThumbnailId",u.ThumbnailId);i.SetProperty("ThumbnailRevId",u.ThumbnailRevId);m.AddProperty("LastUpdatedRec",u.MpiId);v.ExecuteMethod("SetSesRecData");m.AddProperty("Mode","Player");m.AddProperty("UpdatePlayer","Y");s.InvokeMethod("LogMsgPlanItemSesResponse",i)}}});$(document).undelegate("#Contacts_Ctrl","click");$(document).delegate("#Contacts_Ctrl","click",{ctx:this},function(i){$(".siebui-thread").hide();$("#S_A"+g[0].id).hide();$("#S_A"+g[1].id).hide();$("#s_S_A"+g[2].id+"_div").removeClass("siebui-addcontact-applet");$("#S_A"+g[2].id).show();$("#Done_Ctrl").on("click",{ctx:this},function(j){$("#S_A"+g[2].id).hide();$("#s_S_A"+g[2].id+"_div").addClass("siebui-addcontact-applet");$("#S_A"+g[0].id).show()})})};return a}());return"SiebelAppFacade.edetailerviewpr"}())};