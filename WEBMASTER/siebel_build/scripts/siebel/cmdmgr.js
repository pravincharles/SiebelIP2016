/*<ORACLECOPYRIGHT>
* Copyright (C) 1994-2014
* Oracle and Java are registered trademarks of Oracle and/or its affiliates.
* Other names may be trademarks of their respective owners.
* UNIX is a registered trademark of The Open Group.
*
* This software and related documentation are provided under a license agreement
* containing restrictions on use and disclosure and are protected by intellectual property laws.
* Except as expressly permitted in your license agreement or allowed by law, you may not use, copy,
* reproduce, translate, broadcast, modify, license, transmit, distribute, exhibit, perform, publish,
* or display any part, in any form, or by any means. Reverse engineering, disassembly,
* or decompilation of this software, unless required by law for interoperability, is prohibited.
*
* The information contained herein is subject to change without notice and is not warranted to be error-free.
* If you find any errors, please report them to us in writing.
*
* U.S. GOVERNMENT RIGHTS Programs, software, databases, and related documentation and technical data delivered to U.S.
* Government customers are "commercial computer software" or "commercial technical data" pursuant to the applicable
* Federal Acquisition Regulation and agency-specific supplemental regulations.
* As such, the use, duplication, disclosure, modification, and adaptation shall be subject to the restrictions and
* license terms set forth in the applicable Government contract, and, to the extent applicable by the terms of the
* Government contract, the additional rights set forth in FAR 52.227-19, Commercial Computer Software License
* (December 2007). Oracle America, Inc., 500 Oracle Parkway, Redwood City, CA 94065.
*
* This software or hardware is developed for general use in a variety of information management applications.
* It is not developed or intended for use in any inherently dangerous applications, including applications that
* may create a risk of personal injury. If you use this software or hardware in dangerous applications,
* then you shall be responsible to take all appropriate fail-safe, backup, redundancy,
* and other measures to ensure its safe use. Oracle Corporation and its affiliates disclaim any liability for any
* damages caused by use of this software or hardware in dangerous applications.
*
* This software or hardware and documentation may provide access to or information on content,
* products, and services from third parties. Oracle Corporation and its affiliates are not responsible for and
* expressly disclaim all warranties of any kind with respect to third-party content, products, and services.
* Oracle Corporation and its affiliates will not be responsible for any loss, costs,
* or damages incurred due to your access to or use of third-party content, products, or services.
</ORACLECOPYRIGHT>*/
/* 8.1.1.14SIA[23044]PATCHSET8 */
if(typeof(SiebelApp.CommandManager)=="undefined"){SiebelJS.Namespace("SiebelApp.CommandManager");SiebelApp.CommandManager=(function(){var F=SiebelApp.Utils;var x=SiebelApp.Constants;var p;var D;var E;var f={};var s={};var d=CCFMiscUtil_CreatePropSet();var t=CCFMiscUtil_CreatePropSet();var I=CCFMiscUtil_CreatePropSet();var C=CCFMiscUtil_CreatePropSet();var z=CCFMiscUtil_CreatePropSet();var G=CCFMiscUtil_CreatePropSet();var w=CCFMiscUtil_CreatePropSet();var A=CCFMiscUtil_CreatePropSet();var q=CCFMiscUtil_CreatePropSet();var u=CCFMiscUtil_CreatePropSet();var y;var H;var B=x.get("PROP_KEY"),n=x.get("PROP_COMMAND");var b;var m=[];var l=[];var a=false;function v(J){E=this;SiebelApp.CommandManager=function(){return E};SiebelApp.CommandManager.prototype=v.prototype;SiebelApp.CommandManager.GetInstance=v.GetInstance;E.constructor=v;this.Initialize();p=J;return E}v.GetInstance=function(){return E};v.prototype.Initialize=function(){$("html").bind("keydown",function(J){SiebelApp.S_App.GetCmdMgr().FireAccelerator(J,J.which,F.GetEventNType(J))});window.addEventListener("click",function(K){if(K&&K.detail===2&&$(K.target).attr("type")!=="checkbox"){var J=false;if($(K.target).attr("data-allowdblclick")==="true"){J=true}if($(K.target).parents('[data-allowdblclick="true"]').length>0){J=true}if(!J){K.stopPropagation()}}},true)};v.prototype.SetGlobalAccl=function(J){w=J};v.prototype.GetGlobalAccl=function(){return w};v.prototype.SetBaseAccl=function(J){A=J};v.prototype.GetBaseAccl=function(){return A};v.prototype.GetBatchMethods=function(){return d};v.prototype.SetRefreshTB=function(J){y=J};v.prototype.GetRefreshTB=function(){return y};v.prototype.SetToolbar=function(J){H=J};v.prototype.GetToolbar=function(){return H};v.prototype.GetToolbarArray=function(){return m};v.prototype.UpdateToolbarArray=function(K){var J;for(J=0;J<m.length;J++){if(m[J].GetPMName()===K){m.splice(J,1)}}};v.prototype.GetGlobalMenu=function(){return b};v.prototype.UpdateBatchMethods=function(J){d.Reset();return this.AppendBatchMethods(J)};v.prototype.AppendBatchMethods=function(J){var N=true;var M;var K=J.EnumProperties(true);var L=x.get("CMDMGR_HASH");while(!F.IsEmpty(K)){if(K.indexOf(L)==0){d.SetProperty(K,J.GetProperty(K))}K=J.EnumProperties(false)}return true};v.prototype.InvokeServerCommand=function(P,K,Q,M){if(F.IsEmpty(p)){return false}if(F.IsEmpty(D)){D=p.GetService(x.get("CMDMGR_SERVICE"));if(F.IsEmpty(D)){return false}}if(P.indexOf(x.get("CMDMGR_HASH"))<0){K.SetProperty(x.get("SWEJI"),x.get("CMDMGR_FALSE"));K.SetProperty(x.get("SWEDIC"),x.get("CMDMGR_TRUE"))}var J=K.EncodeAsString();var O=CCFMiscUtil_CreatePropSet();var L={};var N=this;if(typeof(M)==="object"||typeof(M)==="boolean"){L.scope=this;L.async=(typeof(M.async)==="boolean")?M.async:M;L.selfbusy=M.selfbusy||false;L.mask=M.mask||false;L.cb=function(){var R=[];R.push(arguments[0]);R.push(arguments[1]);R.push(N.PostCommandExecute.apply(N,arguments));if(typeof(M.scope.PostExecute)==="function"){M.scope.PostExecute.apply(M.scope||null,R)}}}else{L=undefined}O=D.InvokeMethod(P,K,L);if(typeof(M)==="undefined"){if(!O.IsEmpty()){Q.DeepCopy(O.GetChildByType(x.get("SWE_PROP_RESULTSET")));if(Q.IsEmpty()){Q.Copy(O)}return true}else{return false}}};v.prototype.PostCommandExecute=function(J,M,L){var K=CCFMiscUtil_CreatePropSet();if(!L.IsEmpty()){K.DeepCopy(L.GetChildByType(x.get("SWE_PROP_RESULTSET")));if(K.IsEmpty()){K.Copy(L)}return K}else{return false}};v.prototype.GetCachedMenu=function(J){if(!F.IsEmpty(f[J])){return f[J]}};v.prototype.SetCachedMenu=function(J,K){if(F.IsEmpty(f[J])){f[J]=K}};v.prototype.RemoveCachedMenu=function(J){if(!F.IsEmpty(f[J])){delete f[J]}};v.prototype.InvokeCommand=function(N,J,L){var M;if(J===true||J===false){M=J}else{M=true}if(typeof(L)==="object"||typeof(L)==="boolean"){var K={};K.scope=this;K.async=(typeof(L.async)==="boolean")?L.async:L;K.selfbusy=L.selfbusy||false;K.mask=L.mask||false;K.cb=function(){var O=Array.prototype.slice.call(arguments);if(typeof(L.scope)!=="undefined"&&typeof(L.scope.cb)==="function"){L.scope.cb.apply(L.scope||null,O)}};k.call(this,N,M,K)}else{return(k.call(this,N,M,L))}};v.prototype.AppendBatchMethods=function(M){var L=M.EnumProperties(true);var J=this.GetBatchMethods();var K=x.get("CMDMGR_HASH");while(L){if(!F.IsEmpty(L)&&L.indexOf(K)>=0){J.SetProperty(L,M.GetProperty(L))}L=M.EnumProperties(false)}};function k(K,ac,P){var ah;var T;var W;var aj=CCFMiscUtil_CreatePropSet();var af=CCFMiscUtil_CreatePropSet();var ae=CCFMiscUtil_CreatePropSet();var J=CCFMiscUtil_CreatePropSet();var L;var Q;var O=CCFMiscUtil_CreatePropSet();var Y=false;if(ac){Q=CCFMiscUtil_CreatePropSet()}if(!e.call(this,K,O)){if(ac){L=CCFMiscUtil_CreatePropSet();var aa;L=this.ProcessCommandState(K);aa=L.GetProperty(x.get("CMDMGR_DELEGATE_APPLET"));if(F.IsEmpty(aa)){if(p){if(!D){D=p.GetService(x.get("CMDMGR_SERVICE"))}if(D){ah=p.GetMainView();if(ah){T=ah.GetActiveApplet();if(T){Y=T.InvokeMethod("ImplicitCommit",aj);if(!Y){return false}}}}}ae=j.call(this,K,af);if(!this.InvokeServerCommand(K,ae,J,P)){return false}}else{var S;var ag;S=L.GetProperty(x.get("CMDMGR_DELEGATE_METHOD"));ah=p.GetMainView();if(ah&&aa){T=ah.GetApplet(aa);if(!T){return(false)}}if(T){bstrName=T.GetName();ag=ah.SetActiveAppletByName(bstrName,false);if(!ag){return(false)}aj=p.NewPropertySet();Y=T.InvokeMethod(S,aj);return(Y==true)}}}else{return r.call(this,K)}}if(ac){Q=j.call(this,K,O)}var Z=O.GetProperty(x.get("PROP_TARGET"));var ad=O.GetProperty(x.get("PROP_APPLET"));var V=O.GetProperty(x.get("PROP_SERVICE"));var U=String(O.GetProperty(x.get("PROP_METHOD")));var X;var N;if(F.IsEmpty(U)||F.IsEmpty(Z)){return false}if(F.IsEmpty(p)){return false}if(F.IsEmpty(ad)){if(Z=="Browser Applet"||!F.IsEmpty(V)){X=p.GetActiveView();if(!F.IsEmpty(X)){N=X.GetActiveApplet()}if(!N){N=SiebelApp.S_App.GetExternalActiveApplet()}if(!F.IsEmpty(N)){ad=N.GetName()}}if(Z=="Browser Applet"&&F.IsEmpty(ad)){return false}}if(!F.IsEmpty(V)){var ai=p.GetService(V);if(!F.IsEmpty(ai)){if(!F.IsEmpty(ad)){X=p.GetActiveView();if(!F.IsEmpty(X)){N=X.GetApplet(ad);if(!F.IsEmpty(N)){var ab=N.GetBusComp()}}}if(ac){if(ai.CanInvokeMethod(U)){var M=Q.EncodeAsString();var R=CCFMiscUtil_CreatePropSet();R.SetProperty(x.get("SWE_INPUT_PS"),M);Y=ai.InvokeMethod(U,R,P)}}else{Y=ai.CanInvokeMethod(U)}}}else{if(!F.IsEmpty(ad)){X=p.GetActiveView();if(!F.IsEmpty(X)){N=X.GetApplet(ad)}if(!N){N=SiebelApp.S_App.GetExternalActiveApplet()}if(!F.IsEmpty(N)){if(ac){if(N.CanInvokeMethod(U)){var M=Q.EncodeAsString();var R=CCFMiscUtil_CreatePropSet();R.SetProperty(x.get("SWE_INPUT_PS"),M);Y=N.InvokeMethod(U,R,P)}}else{Y=N.CanInvokeMethod(U)}}}else{if(ac){if(p.CanInvokeMethod(U)){var M=Q.EncodeAsString();var aj=CCFMiscUtil_CreatePropSet();aj.DecodeFromString(M);var Y=p.InvokeMethod(U,aj,P)}}else{Y=p.CanInvokeMethod(U)}}}return Y}v.prototype.ProcessCommandState=function(K){var J=CCFMiscUtil_CreatePropSet();if(K.indexOf(x.get("CMDMGR_HASH"))>=0){if(I.GetChildByType(K)){J=I.GetChildByType(K)}else{if(C.GetChildByType(K)){J=C.GetChildByType(K)
}}}return J};function j(O,N){var J;var L;var K;var M=CCFMiscUtil_CreatePropSet();M=F.IsEmpty(t.GetChildByType(O))?M:t.GetChildByType(O);if(F.IsEmpty(M)){if(z.GetChildByType(O)){return M}}if(O.indexOf(x.get("CMDMGR_HASH"))>=0){return M}M.SetProperty(n,O);J=N.GetProperty(x.get("PROP_ARGUMENT"));if(!F.IsEmpty(J)){M.SetProperty(x.get("PROP_ARGUMENT"),J)}L=N.GetProperty(x.get("PROP_DX"));K=N.GetProperty(x.get("PROP_DY"));if(!F.IsEmpty(L)&&!F.IsEmpty(K)){M.SetProperty(x.get("SWE_SHOW_POPUP_STR"),x.get("CMDMGR_TRUE"));M.SetProperty(x.get("SWEW"),L);M.SetProperty(x.get("SWEH"),K)}return M}v.prototype.ProcessNotifications=function(N){var M=N.Clone();var K;var J;q=M.GetChildByType("StateToolBar");C=M.GetChildByType("StateExToolBar");z=M.GetChildByType("FlagsToolBar");J=M.GetProperty("RefreshToolbar");if(J&&J=="true"){this.SetRefreshTB(J)}K=M.GetChildByType("StateEx");if(K){o.call(this,K)}K=M.GetChildByType("Flags");if(K){i.call(this,K)}K=M.GetChildByType("Accelerators");if(K){this.PrepareAccelerators(K)}K=M.GetChildByType("Toolbar");if(K){if(this.GetToolbar()){this.GetToolbar().HandleResponsePS(K)}else{var L=new SiebelAppFacade.ToolbarPM({GetName:function(){return"ToolbarPxy"}});this.SetToolbar(L);L.Init();L.Setup(K);L.Show()}}M=N=K=null};v.prototype.ProcessRWDNotifications=function(T){var K=T.Clone();var U;var S;var Z;var P;var aa;var X=[];var J="Toolbar",Y="GlobalMenu",M="StateToolBar",O="StateExToolBar",ab="FlagsToolBar",W="StateEx",R="Flags",N="Accelerators";for(aa=true;U=K.EnumChildren(aa);aa=false){S=U.GetType();switch(S){case J:X.push(U);break;case Y:b=U;break;case M:q=U;break;case O:C=U;break;case ab:z=U;break;case W:o.call(this,U);break;case R:i.call(this,U);break;case N:this.PrepareAccelerators(U);break;default:break}}var L;var V=X.length;if(V>0){for(L=0;L<V;L++){Z=X[L];if(Z){var ac=Z.GetProperty("Name");var Q=new SiebelAppFacade.ToolbarPM({GetName:function(){return ac}});Q.Init();Q.Setup(Z);m.push(Q);l.push(Q)}Z=null}}P=K.GetProperty("RefreshToolbar");if(P&&P=="true"){this.SetRefreshTB(P)}K=T=U=Z=null};v.prototype.Show=function(){var J;var K=l.length;for(J=0;J<K;J++){l[J].Show();view=SiebelApp.S_App.GetActiveView();if(view){view.AddToolbar(l[J])}}l=[]};v.prototype.CanInvokeCommand=function(J){if(!F.IsEmpty(J)){return k.call(this,J,false)}else{return false}};v.prototype.UpdateUIControls=function(){if(!a){a=true;if(SiebelApp.S_App.IsRwd()){var J;var K=m.length;for(J=0;J<K;J++){m[J].ExecuteMethod("Update")}}else{if(this.GetToolbar()){this.GetToolbar().ExecuteMethod("Update")}}a=false}};v.prototype.PrepareAccelerators=function(J){var O=CCFMiscUtil_CreatePropSet();var L=CCFMiscUtil_CreatePropSet();var M;for(var N=0,K=J.GetChildCount();N<K;N++){O=J.GetChild(N);M=O.GetType();if(!G.GetChildByType(M)){G.AddChild(O);this.InitializeAccelerators(O)}}};v.prototype.InitializeAccelerators=function(L){var O;var N;var K;var M;c.call(this,13,0,1,0);c.call(this,27,0,0,0);c.call(this,27,0,1,0);c.call(this,9,0,0,0);c.call(this,9,0,1,0);for(bFirst=true;(child=L.EnumChildren(bFirst))!=null&&child.GetPropertyCount()>0;bFirst=false){var J=child.GetProperty("key");if(J!=null){O=parseInt(J.charAt(0),10);N=parseInt(J.charAt(1),10);K=parseInt(J.charAt(2),10);M=parseInt(J.substr(3),10);if(M!=0){c.call(this,M,O,N,K)}}}};function c(N,O,M,L){var K=0;if(L){K|=4}if(M){K|=1}if(O){K|=2}var J=""+K+N;s[J]=J}v.prototype.FireAccelerator=function(L,K,J){if(K<=0){return false}if(g.call(this,K,J)||K===13){if(this.ProcessAccelerator(L,K)===true){L.preventDefault();L.stopPropagation()}}};v.prototype.ProcessAccelerator=function(aa,ag){var ah="0";var L="0";var ad="0";var O="";var af;var T;var Q;var S;var X=CCFMiscUtil_CreatePropSet();var K=CCFMiscUtil_CreatePropSet();var Y=CCFMiscUtil_CreatePropSet();var V=CCFMiscUtil_CreatePropSet();var W="";var M;var ac,Z;var ae;var P;if(ag==16||ag==17||ag==18){return false}if(aa.altKey){ad="1"}if(aa.ctrlKey){L="1"}if(aa.shiftKey){ah="1"}O+=ah+L+ad+ag;if(SiebelApp.S_App){af=SiebelApp.S_App.GetMainView();if(af){T=af.GetActiveApplet();if(!T){T=SiebelApp.S_App.GetExternalActiveApplet()}if(T){if(O=="01013"){S=T.InvokeMethod("OnEnterKey",null);if(!S){return false}return true}else{if(O=="00027"){S=T.InvokeMethod("OnEscapeKey",null);if(!S){return false}return true}else{if(O=="00013"){S=T.InvokeMethod("OnEnterKey");if(!S){return false}return true}}}Q=T.GetName();if(!F.IsEmpty(Q)){if(G.GetChildByType(Q)){X=G.GetChildByType(Q);var R=X.GetChildCount();for(ac=0;ac<R;ac++){K=X.GetChild(ac);W=K.GetProperty(B);if(O!=W){continue}M=K.GetProperty(n);this.InvokeCommand(M,true,true);return true}var U=X.GetChildCount();for(ac=0;ac<U;ac++){K=X.GetChild(ac);if(K.GetProperty(x.get("PROP_CLASS"))){ae=K.GetProperty(x.get("PROP_CLASS"));if(this.GetBaseAccl().GetChildByType(ae)){Y=this.GetBaseAccl().GetChildByType(ae);var ab=Y.GetChildCount();for(Z=0;Z<ab;Z++){V=Y.GetChild(Z);W=V.GetProperty(B);if(O!=W){continue}M=V.GetProperty(n);P=h.call(this,M,Q);this.InvokeCommand(P,true,true);return true}}}}}}}}}K.Reset();var N=this.GetGlobalAccl(),J;for(ac=0,J=N.GetChildCount();ac<J;ac++){K=N.GetChild(ac);W=K.GetProperty(B);if(O!=W){continue}M=K.GetProperty(n);this.InvokeCommand(M,true,true);return true}return false};function h(N,K){var M=CCFMiscUtil_CreatePropSet();var L="";e.call(this,N,M);var J=M.GetProperty(x.get("PROP_APPLET"));if(J=="#AN"){M.SetProperty(x.get("PROP_APPLET"),K);L=M.EncodeAsString();return L}return N}function g(L,M){var K=false;var J=""+M+L;if(J=="09"){return false}if(s[J]){K=true}return K}function o(K){var N;var P;var M;var L;var O;var J;for(L=0,J=K.GetChildCount();L<J;L++){N=K.GetChild(L);M=N.GetType();O=I.FindChildPosition(M);if(O>=0&&O<I.GetChildCount()){I.RemoveChild(O)}I.AddChild(N)}}function i(L){var K;var M;var J;for(M=0,J=L.GetChildCount();M<J;M++){K=L.GetChild(M);t.AddChild(K)}}function r(K){var L=this.GetBatchMethods();var J=false;if(q){J=q.GetProperty(K)}if(F.IsEmpty(J)&&!F.IsEmpty(L)){J=L.GetProperty(K)}return(J==x.get("CMDMGR_TRUE"))}function e(L,K){if(L.indexOf(x.get("CMDMGR_AT"))>=0){K.DecodeFromString(L);return(true)}if(L.indexOf(x.get("CMDMGR_STAR"))<0){return(false)}var J=L.split(x.get("CMDMGR_STAR"));J.shift();if(!F.IsEmpty(J[0])){K.SetProperty(x.get("PROP_TARGET"),F.Trim(J[0]))}if(!F.IsEmpty(J[1])){K.SetProperty(x.get("PROP_SERVICE"),F.Trim(J[1]))}if(!F.IsEmpty(J[2])){K.SetProperty(x.get("PROP_METHOD"),F.Trim(J[2]))}if(!F.IsEmpty(J[3])){K.SetProperty(x.get("PROP_APPLET"),F.Trim(J[3]))}if(!F.IsEmpty(J[4])){K.SetProperty(x.get("PROP_ARGUMENT"),F.Trim(J[4]))}if(!F.IsEmpty(J[5])){K.SetProperty(x.get("PROP_DX"),F.Trim(J[5]))}if(!F.IsEmpty(J[6])){K.SetProperty(x.get("PROP_DY"),F.Trim(J[6]))}return(true)}return v}())};