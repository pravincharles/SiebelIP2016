/*<ORACLECOPYRIGHT>
* Copyright (C) 1994-2014
* Oracle and Java are registered trademarks of Oracle and/or its affiliates.
* Other names may be trademarks of their respective owners.
* UNIX is a registered trademark of The Open Group.
*
* This software and related documentation are provided under a license agreement
* containing restrictions on use and disclosure and are protected by intellectual property laws.
* Except as expressly permitted in your license agreement or allowed by law, you may not use, copy,
* reproduce, translate, broadcast, modify, license, transmit, distribute, exhibit, perform, publish,
* or display any part, in any form, or by any means. Reverse engineering, disassembly,
* or decompilation of this software, unless required by law for interoperability, is prohibited.
*
* The information contained herein is subject to change without notice and is not warranted to be error-free.
* If you find any errors, please report them to us in writing.
*
* U.S. GOVERNMENT RIGHTS Programs, software, databases, and related documentation and technical data delivered to U.S.
* Government customers are "commercial computer software" or "commercial technical data" pursuant to the applicable
* Federal Acquisition Regulation and agency-specific supplemental regulations.
* As such, the use, duplication, disclosure, modification, and adaptation shall be subject to the restrictions and
* license terms set forth in the applicable Government contract, and, to the extent applicable by the terms of the
* Government contract, the additional rights set forth in FAR 52.227-19, Commercial Computer Software License
* (December 2007). Oracle America, Inc., 500 Oracle Parkway, Redwood City, CA 94065.
*
* This software or hardware is developed for general use in a variety of information management applications.
* It is not developed or intended for use in any inherently dangerous applications, including applications that
* may create a risk of personal injury. If you use this software or hardware in dangerous applications,
* then you shall be responsible to take all appropriate fail-safe, backup, redundancy,
* and other measures to ensure its safe use. Oracle Corporation and its affiliates disclaim any liability for any
* damages caused by use of this software or hardware in dangerous applications.
*
* This software or hardware and documentation may provide access to or information on content,
* products, and services from third parties. Oracle Corporation and its affiliates are not responsible for and
* expressly disclaim all warranties of any kind with respect to third-party content, products, and services.
* Oracle Corporation and its affiliates will not be responsible for any loss, costs,
* or damages incurred due to your access to or use of third-party content, products, or services.
</ORACLECOPYRIGHT>*/
/* 8.1.1.14SIA[23044]PATCHSET12 */
if(typeof(SiebelAppFacade.BasePM)==="undefined"){SiebelJS.Namespace("SiebelAppFacade.BasePM");SiebelAppFacade.BasePM=(function(){var x=SiebelJS.Dependency("SiebelApp.Utils"),p=SiebelJS.Dependency("SiebelApp.Constants");var b=p.get("SWE_PROP_BC_OPERATION"),h=p.get("SWE_EXTN_CANCEL_ORIG_OP"),t=p.get("SWE_EXTN_CANCEL_POST_OP"),u=p.get("SWE_EXTN_RETVAL"),l=p.get("SWE_EXTN_STOP_PROP_OP");var k={},d={},s={},m={},z={},o={},e={},f={};function y(C){var B=C.GetName()+"_PM";this.GetPMName=function(){return B};this.GetObjName=function(){return C.GetName()};k[B]=C;d[B]={};s[B]={};m[B]={};z[B]={};o[B]={};e[B]={};f[B]={};var D;this.GetRenderer=function(){return D};this.SetRenderer=function(E){D=E}}function a(C,B,D){this[h]=C||false;this[t]=B||false;this[u]=D||null}y.prototype.Init=function(){var D=k[this.GetPMName()],E=null,C=0,B=0;if(D){E=D.GetPropArray();for(C=0,B=E.length;C<B;C++){this.AddProperty(E[C],null,{core:true})}E=D.GetMethodArray();for(C=0,B=E.length;C<B;C++){this.AddMethod(E[C],null,{core:true})}E=null}this.AddMethod("PostExecute",this.HandlePreExecute,{sequence:true,scope:this});this.AddMethod("PostExecute",this.HandlePostExecute,{sequence:false,scope:this});this.AddMethod("AddLocalString",function(F,G){SiebelApp.S_App.LocaleObject.AddLocalString(F,G);return G})};y.prototype.Setup=function(O){if(!(k[this.GetPMName()] instanceof SiebelApp.S_App.Applet)&&!(k[this.GetPMName()]===SiebelApp.S_App.CommToolbar)&&!(k[this.GetPMName()].GetName()===p.get("SWE_PST_SEARCH_NAME"))){var N="";var F=O.GetProperty(p.get("SWE_UIDEF_PR_CTR"));if(F){F=F.split(".");if(F[0]){N=window[F[0]];for(var G=1,M=F.length;G<M&&N;G++){N=N[F[G]]}}}else{var L=O.GetProperty(p.get("SWE_PROP_OUI_PRENDERER"));F=SiebelApp.S_App.GetConstructorFromKey(L)+".";var C=O.GetProperty("SWE_OUI_RENDERER");var E="";var R=0;var I=F.indexOf(".");while(I!=-1){var Q=F.substring(R,I);E=(E=="")?window[Q]:E[Q];R=I+1;I=F.indexOf(".",R)}N=E||SiebelAppFacade[C]||SiebelAppFacade.PhysicalRenderer}this.SetRenderer(new N(this))}else{var B=O.GetChildByType("apm");if(!x.IsEmpty(B)){var K;if(B){K=B.EnumProperties(true);do{this.AddProperty(K,B.GetProperty(K))}while((K=B.EnumProperties(false)))}var P=B.GetProperty("Max List Columns Tablet");if(P!==undefined&&P!==null){this.SetProperty("maxListColTablet",P)}var H=B.GetProperty("Max List Columns Phone");if(H!==undefined&&H!==null){this.SetProperty("maxListColPhone",H)}var D=B.GetProperty("Default Applet Display Mode");if(D!==undefined&&D!==null){this.SetProperty("defaultAppletDisplayMode",D.toString().toLowerCase())}var J=B.GetProperty("EnableDragAndDropInList");if(J!==undefined&&J!==null){this.SetProperty("enableDragAndDropInList",J)}}}};y.prototype.Show=function(){if(!(k[this.GetPMName()] instanceof SiebelApp.S_App.Applet)){var B=this.GetRenderer();B.ShowUI();B.BindEvents();B.BindData()}};y.prototype.HandlePreExecute=function(C,E,D){if(!e[this.GetPMName()]){return}var B=e[this.GetPMName()].ALL||[];w.call(this,B,C,E,D);B=e[this.GetPMName()].NOT||[];w.call(this,B,C,E,D);B=e[this.GetPMName()][C]||[];w.call(this,B,C,E,D)};y.prototype.HandlePostExecute=function(C,E,D){if(!f[this.GetPMName()]){return}var B=f[this.GetPMName()].ALL||[];w.call(this,B,C,E,D);B=f[this.GetPMName()].NOT||[];w.call(this,B,C,E,D);B=f[this.GetPMName()][C]||[];w.call(this,B,C,E,D)};function w(C,E,G,F){for(var D=0,B=C.length;D<B;D++){C[D][0].call(C[D][1],E,G.Clone(),F.Clone())}}y.prototype.HandleNotify=function(C){var D=C.GetProperty(b);var F=z[this.GetPMName()][D]||[];for(var E=0,B=F.length;E<B;E++){F[E][0].call(F[E][1],C.Clone())}};y.prototype.HandleResponsePS=function(H){var D=H.GetChildCount();var F=o[this.GetPMName()]||{};for(var E=0;E<D;E++){var J=H.GetChild(E);var I=J.GetType();if(F[I]){var B=F[I];for(var C=0,G=B.length;C<G;C++){B[C][0].call(B[C][1],J.Clone())}}}};y.prototype.OnControlEvent=function(I){var G=false;var L=null;var O=[];var Q=arguments.length;var E={};var M=false;var C=m[this.GetPMName()];for(var H=1;H<Q;H++){if(arguments[H]&&(arguments[H].async===true||arguments[H].async===false)){L=arguments[H]}else{O.push(arguments[H])}}var D;var N=k[this.GetPMName()];var P={};var B=false;if(L&&(L.async===true||L.async===false)){B=true;P.scope=this;P.target=L.target;if(typeof(L.async)!=="boolean"){P.async=true}else{P.async=L.async}P.selfbusy=L.selfbusy||false;P.mask=L.mask||false;P.cb=function(){var R=Array.prototype.slice.call(arguments);if(typeof(L.cb)==="function"){L.cb.apply(L.scope||null,R)}}}if(C&&C[I]){var K=C[I]||[];var J=K.length;for(var H=J-1;H>=0;H--){if(!M||(K[H].core&&!E[h])){if(typeof(K[H].handler)==="function"){O.push(P);O.push(E);G=K[H].handler.apply(this,O)}else{if(typeof(K[H].handler)==="string"){O.push(E);G=this.ExecuteMethod.apply(this,[K[H].handler].concat(O))}}}if(E[h]&&E[l]){return G}else{if(E[l]){M=true}}}if(E[h]){return G}}switch(I){case p.get("PHYEVENT_INVOKE_CONTROL"):if(!B){P.async=true}if(O[0]==="NewQuery"||O[0]==="UndoQuery"||O[0]==="GotoNextSet"||O[0]==="GotoPreviousSet"){P.async=false}O.push(P);G=N.InvokeControlMethod.apply(N,O);break;case p.get("PHYEVENT_CONTROL_BLUR"):G=N.OnBlur.apply(N,O);break;case p.get("PHYEVENT_CONTROL_FOCUS"):G=N.OnFocus.apply(N,O);break;case p.get("PHYEVENT_APPLET_FOCUS"):D=CCFMiscUtil_CreatePropSet();G=N.InvokeMethod("OnFocus",D);break;case p.get("PHYEVENT_INVOKE_DETAIL_POPUP"):case p.get("PHYEVENT_INVOKE_EFFDAT"):case p.get("PHYEVENT_INVOKE_PICK"):if(!this.ExecuteMethod("hasRecords")&&!this.Get("IsInQueryMode")){return false}case p.get("PHYEVENT_INVOKE_COMBO"):case p.get("PHYEVENT_INVOKE_CURRENCY"):case p.get("PHYEVENT_INVOKE_MVG"):if(I===p.get("PHYEVENT_INVOKE_COMBO")&&!this.ExecuteMethod("CanUpdate",O[0].GetName())){return false}N.SetActiveControl.apply(N,O);D=CCFMiscUtil_CreatePropSet();G=N.InvokeControlMethod("EditPopup",D,B);break;case p.get("PHYEVENT_CANCEL_QRY_POPUP"):A.call(this);break;case p.get("PHYEVENT_DRILLDOWN_FORM"):N.SetActiveControl.apply(N,O);D=CCFMiscUtil_CreatePropSet();D.SetProperty(p.get("SWE_FIELD_STR"),O[0].GetInputName());if(!B){G=N.InvokeControlMethod("DrillDown",D)}else{G=N.InvokeControlMethod("DrillDown",D,P)}break;case p.get("PHYEVENT_INVOKE_TOGGLE"):D=CCFMiscUtil_CreatePropSet();D.SetProperty(p.get("SWE_SEQ_STR"),O[0]);G=N.InvokeControlMethod("ToggleTo",D);break;case p.get("PHYEVENT_ENTER_KEY_PRESS"):G=false;if(this.Get("isControlPopupOpen")){this.SetProperty("isControlPopupOpen",false);G=true}else{var F=O[0].GetDefaultMethod();if(F&&N.CanInvokeMethod(F)){D=CCFMiscUtil_CreatePropSet();N.InvokeMethod(F,D);G=true}}break;case p.get("PHYEVENT_ESCAPE_KEY_PRESS"):case p.get("PHYEVENT_TAB_KEY_PRESS"):if(this.Get("isControlPopupOpen")){this.SetProperty("isControlPopupOpen",false)}break}return G};y.prototype.EndLife=function(){var B=this.GetRenderer();if(B&&B.EndLife){B.EndLife()}B=null;this.SetRenderer(B);delete d[this.GetPMName()];delete s[this.GetPMName()];delete m[this.GetPMName()];delete z[this.GetPMName()];delete o[this.GetPMName()];delete e[this.GetPMName()];delete f[this.GetPMName()];delete k[this.GetPMName()]};y.prototype.AddProperty=function(C,E,B){var D=d[this.GetPMName()];
B=B||{};if(typeof(C)==="string"&&x.Trim(C)!==""){var F=D[C]||{};if(F&&!F.core){D[C]={value:E,core:B.core};return true}}return false};y.prototype.SetProperty=function(C,E,B){var D=d[this.GetPMName()];if(typeof(C)==="string"&&x.Trim(C)!==""){var F=D[C];if(F){D[C].value=E;c.call(this,C,E);return true}else{return this.AddProperty(C,E,B)}}return false};y.prototype.Get=function(D){var B=k[this.GetPMName()]||{},E=d[this.GetPMName()][D]||{};var C=null;if(E.core===true){if(typeof(B[D])!=="undefined"){C=B[D].call(B)}}else{C=(typeof(E.value)==="function")?E.value.call(this):E.value}return C};function c(E,G){var F=d[this.GetPMName()];var H=F[E]||{};if(H&&H.onChange){var D=H.onChange;for(var C=0,B=D.length;C<B;C++){D[C].method.call(D[C].scope||this,E,G)}}}function v(J,H,K,C){var F=s[this.GetPMName()][J],E,I,B=false;var D=function(){var L=arguments[arguments.length-1],M=!(L&&(L instanceof a));if(M){L=new a()}L[u]=q.call(this,E,I,arguments,L,M,(B?0:1));if(C){q.call(this,H,K,arguments,L[u],M,0)}else{if(L[t]!==true){q.call(this,H,K,arguments,L,M,1)}}return L[u]};if(F.core){var G=k[this.GetPMName()];E=G[J];I=G;if(!F.first){B=F.first=true}G[J]=D}else{E=F.ref;I=F.scope;F.ref=D}}function q(G,I,H,E,D,F){var C=Array.prototype.slice.call(H);if(D){if(G.length>(C.length+F)){C.length=G.length-F}C.push(E)}else{var B=C[C.length-1];if(B&&B instanceof a){if(G.length>(H.length-1+F)){C.length=C.length-1;C.length=G.length-F;C.push(E)}}}return G.apply(I,C)}function n(B,E){var D=[];for(var C=0;C<B.length;C++){D.push(B[C])}D.push(E);return D}function i(B,H,C){var G=s[this.GetPMName()][B];C.scope=C.scope||this;var E;var F;if(G.core){var D=k[this.GetPMName()];E=D[B];F=D;D[B]=function(){if(C.when.call(C.scope)){H.apply(C.scope,arguments)}var I=E.apply(F,arguments);return I}}else{E=G.ref;F=G.scope;G.ref=function(){if(C.when.call(C.scope)){H.apply(C.scope,arguments)}var I=E.apply(F,arguments);return I}}}function r(K,I,C,D){var G=s[this.GetPMName()][K],F,J,B=false;C.scope=C.scope||this;var E=function(){var L=arguments[arguments.length-1],M=!(L&&(L instanceof a));if(M){L=new a()}L[u]=q.call(this,F,J,arguments,L,M,(B?0:1));if(D&&C.when.call(C.scope)){q.call(this,I,C.scope,arguments,L[u],M,0)}else{if(L[t]!==true&&C.when.call(C.scope)){q.call(this,I,C.scope,arguments,L,M,1)}}return L[u]};if(G.core){var H=k[this.GetPMName()];F=H[K];J=H;if(!G.first){B=G.first=true}H[K]=E}else{F=G.ref;J=G.scope;G.ref=E}}function g(I,C,J){var F=s[this.GetPMName()][I],B=false,E,H;var D=function(){var K=arguments[arguments.length-1],L=!(K&&(K instanceof a));if(L){K=new a()}q.call(this,C,J,arguments,K,L,1);if(K[h]===true){K[t]=true}else{K[u]=q.call(this,E,H,arguments,K,L,(B?0:1))}return K[u]};if(F.core){var G=k[this.GetPMName()];E=G[I];H=G;G[I]=D;if(!F.first){B=F.first=true}}else{E=F.ref;H=F.scope;F.ref=D}}function j(B,E,D){var F;var H;var G=s[this.GetPMName()][B];if(G.core){var C=k[this.GetPMName()];F=C[B];H=C;C[B]=function(){return E.apply(H,arguments)}}else{F=G.ref;H=G.scope;G.ref=function(){return E.apply(H,arguments)}}}y.prototype.AddMethod=function(C,G,E){var B=s[this.GetPMName()];E=E||{};var D=k[this.GetPMName()];var F=true;if((typeof(C)==="string")&&x.Trim(C)!==""){if(E.core===true){if(!B[C]){if(typeof(D[C])==="function"){B[C]={core:true}}}}if(typeof(G)==="function"){if(!B[C]){B[C]={ref:G,scope:E.scope||this}}else{if(E.override){j.call(this,C,G,E.scope)}else{if(E.sequence===true){g.call(this,C,G,E.scope)}else{if(E.sequence===false){v.call(this,C,G,E.scope,false)}}}}}else{F=false}}else{F=false}return F};y.prototype.ExecuteMethod=function(B){var C=Array.prototype.slice.call(arguments);C.shift();var E=s[this.GetPMName()][B];if(E&&E.core===true){var D=k[this.GetPMName()];return D[B].apply(D,C)}else{if(E&&E.ref){return E.ref.apply(E.scope,C)}else{SiebelJS.Log("Can't find method - [ "+B+" ]");return null}}};y.prototype.AttachEventHandler=function(C,D,B){var E=m[this.GetPMName()];var F=false;B=B||{};E[C]=E[C]||[];if(typeof(C)==="string"&&C!==""){if(typeof(D)==="function"||typeof(D)==="string"){E[C].push({handler:D,core:(B.core?true:false)});F=true}}return F};y.prototype.AddValidator=function(B,C){this.AttachEventHandler(B,function(){if(!C.apply(this,arguments)){arguments[arguments.length-1][h]=true;arguments[arguments.length-1][l]=true}})};y.prototype.AttachNotificationHandler=function(G,E,B){var C=z[this.GetPMName()];var H=false;if(typeof(G)==="string"&&x.Trim(G)!==""&&typeof(E)==="function"){B=B||{};var F=C[G]||[];var D=(B.core===true)?0:-1;F.splice(D,0,[E,B.scope||this]);C[G]=F;H=true}return H};y.prototype.AttachPSHandler=function(E,D,H){var B=o[this.GetPMName()];var G=false;if(typeof(E)==="string"&&x.Trim(E)!==""&&typeof(D)==="function"){H=H||{};var F=B[E]||[];var C=(H.core===true)?0:-1;F.splice(C,0,[D,H.scope||this]);B[E]=F;G=true}return G};y.prototype.AttachPreProxyExecuteBinding=function(H,E,C){var B=e[this.GetPMName()];var G=false;if(typeof(H)==="string"&&x.Trim(H)!==""&&typeof(E)==="function"){C=C||{};var F=B[H]||[];var D=(C.core===true)?0:-1;F.splice(D,0,[E,C.scope||this]);B[H]=F;G=true}return G};y.prototype.AttachPostProxyExecuteBinding=function(H,E,C){var B=f[this.GetPMName()];var G=false;if(typeof(H)==="string"&&x.Trim(H)!==""&&typeof(E)==="function"){C=C||{};var F=B[H]||[];var D=(C.core===true)?0:-1;F.splice(D,0,[E,C.scope||this]);B[H]=F;G=true}return G};y.prototype.AttachPMBinding=function(H,E,C){var B=s[this.GetPMName()];var G=d[this.GetPMName()];var F=false;C=C||{scope:this};if(typeof(H)==="string"&&x.Trim(H)!==""&&typeof(E)==="function"){if(B[H]){if(typeof(C.when)==="function"){r.call(this,H,E,C,true)}else{v.call(this,H,E,C.scope||this,true)}}else{if(G[H]){var D=G[H];D.onChange=D.onChange||[];D.onChange.push({method:E,scope:C.scope||this})}else{F=false}}}return F};function A(){var C=new Date();var B=CCFMiscUtil_CreatePropSet();var E=CCFMiscUtil_CreatePropSet();B.SetProperty(p.get("SWSE_CMD_STR"),p.get("SWSE_CANCEL_QUERY"));B.SetProperty(p.get("SWSE_CANCEL_ID"),SiebelApp.S_App.GetCancelId());var D={};D.async=true;D.scope=this;D.args=[];D.args.push("");D.args.push(B);SiebelApp.S_App.CallServer(B,E,true,D)}return y}())}if(typeof(SiebelAppFacade.PresentationModel)==="undefined"){SiebelJS.Namespace("SiebelAppFacade.PresentationModel");SiebelAppFacade.PresentationModel=(function(){var q=SiebelJS.Dependency("SiebelApp.Utils"),j=SiebelJS.Dependency("SiebelApp.Constants");var b=j.get("SWE_RPC_PROP_STATUS"),k=j.get("SWE_RPC_PROP_RETURN_STATUS"),a=j.get("SWE_RPC_PROP_STATUS_ERROR"),g=j.get("SWE_RPC_PROP_STATUS_COMPLETED"),e=j.get("SWE_RPC_PROP_STATUS_CONTINUE"),c=j.get("SWE_RPC_PROP_NEW_PAGE"),s=j.get("SWE_RPC_PROP_REFRESH_LAYOUT"),o=j.get("SWE_RPC_PROP_NEW_LAYOUT"),l=j.get("EVENT_ROW_SELECTION"),i=j.get("SWE_PST_APPLET_MODE_BASE"),f=j.get("SWE_PST_APPLET_MODE_EDITLIST"),h=j.get("SWE_PST_APPLET_SHOWMODE_ROIPE"),t=j.get("SWE_PST_APPLET_SHOWMODE_EDIT");function n(){SiebelAppFacade.PresentationModel.superclass.constructor.apply(this,arguments);this.retryWaitForObjInfoProcessing=0}SiebelJS.Extend(n,SiebelAppFacade.BasePM);n.prototype.Init=function(){SiebelAppFacade.PresentationModel.superclass.Init.apply(this,arguments);
if(SiebelApp.S_App.IsRwd()&&q.IsTrue(this.Get("IsObjResponsive"))){this.AddProperty("GetPlaceholder",this.Get("GetListId"))}else{this.AddProperty("GetPlaceholder","s_"+this.Get("GetId")+"_l")}this.AddProperty("GetCaption",SiebelApp.S_App.LookupStringCache(this.Get("GetTitle")));this.AddProperty("IsPopup",this.Get("GetParentApplet")?true:false);this.AddProperty("isControlPopupOpen",false);this.AddProperty("SetFocusToGridCell",false);this.AddProperty("UpdateUI",false);this.AddProperty("LandMarkTitle",this.Get("GetAppletLabel")+" "+SiebelApp.S_App.LocaleObject.GetLocalString("IDS_SWE_FORM_APPLET"));this.AddProperty("ShowMode","");this.AddProperty("IsRefreshLayout","");this.AddProperty("RequiredControl",[]);this.AddMethod("ExecuteUIUpdate",function(){d.call(this,l)},{sequence:false,scope:this});this.AddMethod("hasRecords",function(){return(this.Get("GetNumRows")||0)>0},{scope:this});this.AddMethod("IsRequired",function(v){var u=this.Get("RequiredControl");return(q.IndexOf(u,v)>=0?true:false)},{scope:this});this.AddMethod("HandleControlFocus",p,{sequence:false,scope:this});this.AddMethod("ExecuteHandleControlFocus",m,{sequence:false,scope:this});this.AttachNotificationHandler(j.get("SWE_PROP_BC_NOTI_STATE_CHANGED"),function(u){if(u.GetProperty("state")==="np"||u.GetProperty("state")==="cp"){if(u.GetProperty("value")==="1"){if(this.Get("ShowMode")!==t&&this.Get("GetMode")!==i){this.SetProperty("ShowMode",t)}}else{if(this.Get("ShowMode")!==h&&this.Get("GetDefaultMode")!==f){this.SetProperty("ShowMode",h)}}}});this.AttachNotificationHandler("g",function(u){if(this.Get("IsActive")){var v=this.Get("GetActiveControl");if(v&&u.GetProperty("type")==="ClosePopup"){this.ExecuteMethod("FieldChange",v,this.ExecuteMethod("GetFormattedFieldValue",v))}}});this.AttachPostProxyExecuteBinding("ExecuteQuery",function(v,u,x){var w=SiebelApp.S_App.GetPopupPM();if(!q.IsEmpty(w)&&w.Get("IsCancelQryPopupOpen")){w.ExecuteMethod("ClearPopup");w.SetProperty("IsCancelQryPopupOpen",false)}return});this.AttachPostProxyExecuteBinding("Drilldown",function(w,v,x){var u=x.GetProperty(b);if(q.IndexOf([o,s,c],u)===-1){SiebelApp.S_App.uiStatus.Free()}});this.AttachPreProxyExecuteBinding("ALL",function(v,u,y){d.call(this,j.get("NOT_PRV_FIELDS"));r.call(this,v,u,y);if(this.Get("IsRefreshLayout")){this.SetProperty("IsRefreshLayout",false)}var w=y.GetProperty(k);if(!(q.IsEmpty(w))&&w===s){var x=(this.Get("GetMode")===this.Get("GetDefaultMode"))?h:t;if(this.Get("ShowMode")!==x){this.SetProperty("ShowMode",x)}this.SetProperty("IsRefreshLayout",true)}return});this.AddMethod("Query",function(){var u=SiebelApp.S_App.GetActiveView();if(u){var v=u.GetActiveApplet();u.ExecuteFrame(v.GetName(),[{field:this.Get("SearchField"),value:this.Get("SearchValue")}])}});this.AddMethod("SetSelectionOnDragNDrop",function(u){this.ExecuteMethod("ChangeSelectionInPopup",u)});this.AddMethod("HandleDragNDropInPopup",function(u){if(this.ExecuteMethod("CanInvokeMethod",u)){return(this.ExecuteMethod("InvokeMethod",u))}return false});this.AddMethod("CanInvokeScrollMethod",function(v){var u=this.ExecuteMethod("CanInvokeMethod",v);return u});this.AddMethod("LeaveField",function(x,v,u,w){this.ExecuteMethod("MaskLeaveField",x,false)},{sequence:false,scope:this});this.AddMethod("LeaveField",function(x,v,u,w){this.ExecuteMethod("MaskLeaveField",x,true)},{sequence:true,scope:this});this.AddMethod("MaskLeaveField",function(v,u){});this.AttachNotificationHandler("g",function(u){if(u.GetProperty("type")==="ClosePopup"){this.ExecuteMethod("ClearPopup")}},{scope:SiebelApp.S_App.GetPopupPM()})};n.GetCtrlTemplate=function(v,w,x,u){var y=CCFMiscUtil_CreatePropSet();y.SetType(j.get("SWE_PST_COL"));y.SetPropertyStr(j.get("SWE_PROP_IS_CLIENT_CTRL"),"1");y.SetPropertyStr("cph","1");y.SetPropertyStr(j.get("SWE_PROP_CURR_FLD"),"");y.SetPropertyStr(j.get("SWE_PROP_CASE_SENSITIVE"),"1");y.SetPropertyStr(j.get("SWE_PROP_DISP_FORMAT"),"");y.SetPropertyStr(j.get("SWE_PROP_DISP_MODE"),"");y.SetPropertyStr(j.get("SWE_PROP_DISP_MAX_CHARS"),"0");y.SetPropertyStr(j.get("SWE_PROP_DISP_NAME"),w);y.SetPropertyStr(j.get("SWE_PROP_FLD_NAME"),v);y.SetPropertyStr(j.get("SWE_PROP_HEIGHT"),"0");y.SetPropertyStr(j.get("SWE_PROP_HTML_ATTRIBUTE"),"");y.SetPropertyStr(j.get("SWE_PROP_IS_BOUND_PICK"),"0");y.SetPropertyStr(j.get("SWE_PROP_IS_ENCODE"),"1");y.SetPropertyStr(j.get("SWE_PROP_INPUTMETHOD"),"6");y.SetPropertyStr(j.get("SWE_PROP_JUSTIFICATION"),"left");y.SetPropertyStr(j.get("SWE_PROP_LABEL_JUSTIFICATION"),"");y.SetPropertyStr(j.get("SWE_PROP_MAX_SIZE"),"30");y.SetPropertyStr(j.get("SWE_PROP_NAME"),v);y.SetPropertyStr(j.get("SWE_PROP_PICK_APLT"),"");y.SetPropertyStr(j.get("SWE_PROP_POPUP_HEIGHT"),"0");y.SetPropertyStr(j.get("SWE_PROP_PROMPT"),"6");y.SetPropertyStr(j.get("SWE_PROP_POPUP_WIDTH"),"0");y.SetPropertyStr(j.get("SWE_PROP_IS_DYNAMIC"),"0");y.SetPropertyStr(j.get("SWE_PROP_SPAN"),v);y.SetPropertyStr(j.get("SWE_PROP_SEQ"),"0");y.SetPropertyStr(j.get("SWE_PROP_TYPE"),x);y.SetPropertyStr(j.get("SWE_PROP_WIDTH"),"100");y.SetPropertyStr(j.get("SWE_PROP_IS_EDIT"),"0");y.SetPropertyStr(j.get("SWE_PROP_COLINDEX"),u);y.SetPropertyStr(j.get("SWE_PROP_ICON_MAP"),"");y.SetPropertyStr(j.get("SWE_PROP_IS_SORTABLE"),"0");y.SetPropertyStr(j.get("SWE_CTRL_CLIENTTYPE"),"");y.SetPropertyStr("length","0");if(y.GetProperty(j.get("SWE_PROP_DISP_FORMAT"))===""){if(x===j.get("SWE_CTRL_DATE_TZ_PICK")||x===j.get("SWE_CTRL_DATE_TIME_PICK")){y.SetPropertyStr(j.get("SWE_PROP_DISP_FORMAT"),SiebelApp.S_App.LocaleObject.GetDateFormat()+" "+SiebelApp.S_App.LocaleObject.GetTimeFormat())}else{if(x===j.get("SWE_CTRL_DATE_PICK")){y.SetPropertyStr(j.get("SWE_PROP_DISP_FORMAT"),SiebelApp.S_App.LocaleObject.GetDateFormat())}}}if(x===j.get("SWE_CTRL_COMBOBOX")){y.SetPropertyStr(j.get("SWE_PROP_PICK_APLT"),v)}return y};n.prototype.Setup=function(w){SiebelAppFacade.PresentationModel.superclass.Setup.apply(this,arguments);var v,u,x,y;if(w){v=w.GetChildByType(j.get("SWE_APPLET_PM_PS"))}if(v){u=v.GetChildByType(j.get("SWE_PM_USER_PREF"));if(u){x=u.EnumProperties(true);do{this.AddProperty(x,u.GetProperty(x))}while((x=u.EnumProperties(false)))}y=v.GetProperty(j.get("SWE_MTHD_UPDATE_USER_PREF"));if(y){this.AddProperty(j.get("SWE_MTHD_UPDATE_USER_PREF"),y)}var A=v.GetProperty("Required Control");if(A){this.SetProperty("RequiredControl",A.split(","))}}var z=(this.Get("GetMode")===this.Get("GetDefaultMode"))?h:t;this.SetProperty("ShowMode",z);this.SetProperty("IsRefreshLayout",false)};n.prototype.UpdateModel=function(u){this.AddMethod("AddClientControl",null,{core:true})};function d(y){var B=this.Get("GetUIEventMap");var D=B.length;var C=j.get("EVENT_NO_FOCUS");var A=j.get("NOT_PRV_FIELDS");var u=false;for(var z=0;z<D;z++){if(B[z].ev===l&&y===l){this.SetProperty("UpdateUI",true);this.SetProperty("UpdateUI",false);var E=this.Get("GetBusComp");if(E){E.ClearUpdates()}B.splice(z,1);u=true}else{if(B[z].ev===C&&y===C){B.splice(z,1);u=true}else{if(B[z].ev===A&&y===A){if(B[z].ar){var w=B[z].ar;var v=B[z].ar.length;for(var x=0;x<v;
x++){this.ExecuteMethod("RepopulateField",w[x])}}B.splice(z,1);u=true}}}D=B.length}return u}function m(u){if(u&&!this.Get("HasPickError")){this.ExecuteMethod("SetFocusToCtrl",u.GetName(),true)}}function p(u){this.ExecuteMethod("ExecuteHandleControlFocus",u)}function r(v,A,z){var w=z.GetProperty(k),u=null,x=false;if(w===g){switch(v){case"NewRecord":case"CreateRecord":u=this.Get("GetDefaultFocusOnNew");break;case"UndoQuery":case"UndoRecord":case"ExecuteQuery":u=this.Get("GetDefaultFocusOnEdit")||((this.Get("GetActiveControl")||this.Get("GetPrsrvControl"))?(this.Get("GetActiveControl")||this.Get("GetPrsrvControl")).GetName():null);if(v!=="ExecuteQuery"&&u&&this.Get("GetActiveControl")&&u===this.Get("GetActiveControl").GetName()){this.ExecuteMethod("SetActiveControl",null);this.ExecuteMethod("SetFocusToCtrl",u,false)}break;case"NewQuery":case"RefineQuery":u=this.Get("GetDefaultFocusOnQuery");break;case"GotoNext":case"GotoPrevious":case"GotoPreviousSet":case"GotoNextSet":case"GotoFirstSet":case"GotoLastSet":u=this.Get("GetActiveControl")||this.Get("GetPrsrvControl");this.ExecuteMethod("HandleControlFocus",u);x=true;break;case"WriteRecord":var y=SiebelApp.S_App.GetPopupPM();if(d.call(this,j.get("EVENT_NO_FOCUS"))||(y&&y.Get("isCurrencyOpen"))){x=true}u=this.Get("GetActiveControl")||this.Get("GetPrsrvControl");if(u){u=u.GetName()}else{x=true}break;case"InvertSelection":case"PositionOnRow":if(this.Get("MultiSelectMode")){this.ExecuteMethod("FocusOnApplet")}x=true;break;case"DeleteRecord":case"CopyRecord":break;case"PostChanges":this.SetProperty("ForceFocusOnControl",true);x=true;break;default:x=true}}else{if(w===a||!w){this.ExecuteMethod("SetFocusDefaultControl",false);this.ExecuteMethod("ProcessError");switch(v){case"ExecuteQuery":x=true;break;case"PostChanges":u=this.Get("GetActiveControl")||this.Get("GetPrsrvControl");if(u){u=u.GetName()}else{x=true}break;case"WriteRecord":d.call(this,j.get("EVENT_NO_FOCUS"));u=this.Get("GetActiveControl")||this.Get("GetPrsrvControl");if(u){u=u.GetName()}else{x=true}break}}else{if(w===e){switch(v){case"InvertSelection":case"PositionOnRow":if(this.Get("MultiSelectMode")){this.ExecuteMethod("FocusOnApplet")}break}}}}if(!x&&!this.Get("HasPickError")){if(w===g||w===a||!w){if(u){this.ExecuteMethod("SetFocusToCtrl",u,true)}else{this.ExecuteMethod("FocusFirstControl")}}}this.ExecuteMethod("SetHasPickError",false)}return n}())}if(typeof(SiebelApp.PopupPModel)==="undefined"){SiebelJS.Namespace("SiebelApp.PopupPModel");SiebelApp.PopupPModel=(function(){var j=SiebelJS.Dependency("SiebelApp.Utils");var i=SiebelJS.Dependency("SiebelApp.Constants");function d(l){this.constructor.superclass.constructor.call(this,l)}SiebelJS.Extend(d,SiebelAppFacade.PresentationModel);d.prototype.Init=function(){this.AddProperty("state",i.get("POPUP_STATE_UNLOADED"));this.AddProperty("noHide",false);this.AddProperty("height",0);this.AddProperty("width",0);this.AddProperty("source",i.get("POPUP_SOURCE_HI"));this.AddProperty("closeByXDisabled",false);this.AddProperty("isPrevPopupVisible",false);this.AddProperty("isPopupClosedByX",false);this.AddProperty("currPopups",[]);this.AddProperty("prevPopups",[]);this.AddProperty("url","");this.AddProperty("isSIPopup",false);this.AddProperty("content","");this.AddProperty("isCurrencyOpen",false);this.AddProperty("IsCancelQryPopupOpen",false);this.AddProperty("CanProcessLayout",true);this.AddProperty("isPopupSI",false);this.AddProperty("forceClosePopup",false);this.AddMethod("SetPopupVisible",k);this.AddMethod("ProcessNewPopup",b);this.AddMethod("ProcessClearPopup",e);this.AddMethod("ClearPopup",g);this.AddMethod("OpenPopup",c);this.AddMethod("OnLoadPopupContent",a);this.AddMethod("StandAlonePopup",function(n,l,m){});this.AttachEventHandler("ClosePopupByX",h,{core:true});this.AttachPreProxyExecuteBinding("ALL",function(m,l,n){if(i.get("CLOSE_BY_X")===String(l.GetProperty(i.get("SWE_CMD_ARG")))){this.ExecuteMethod("ClearPopup");this.SetProperty("isPopupClosedByX",true)}else{if(i.get("SWSE_CANCEL_QUERY")===String(l.GetProperty(i.get("SWSE_CMD_STR")))){this.ExecuteMethod("ClearPopup");this.SetProperty("isPopupClosedByX",true);this.SetProperty("IsCancelQryPopupOpen",false)}}})};d.prototype.PostExecute=function(l,n,m){this.HandlePreExecute(l,n,m);this.HandlePostExecute(l,n,m)};function k(l){if(!l){this.SetProperty("state",i.get("POPUP_STATE_HIDDEN"));this.SetProperty("isPopupSI",false)}else{this.SetProperty("state",i.get("POPUP_STATE_VISIBLE"))}}function b(s){var y;var m;var l,r;var x;var n;var z;var p,v,t,w;var q=false;if(SiebelApp.S_App.GetEnablePerfHooks()&&SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().TimePopupApplet("","Start PopupApplet")}if(this.Get("state")===i.get("POPUP_STATE_VISIBLE")){this.SetProperty("prevPopups",this.Get("currPopups"))}this.SetProperty("currPopups",[]);y=Number(s.GetProperty(i.get("SWE_POP_HEIGHT_STR")))||0;m=Number(s.GetProperty(i.get("SWE_POP_WIDTH_STR")))||0;n=s.GetProperty(i.get("SWE_IS_SI_POPUP"));this.SetProperty("isSIPopup",j.IsTrue(n));var o=s.GetProperty(i.get("SWE_FULL_POPUP_WINDOW_STR"));l=s.GetProperty("URL");z=s.GetProperty(i.get("SWE_FREE_POPUP_STR"));r=s.GetProperty(i.get("SWE_LINK_TARGET_STR"));p=parseInt((screen.availWidth/2)-((m||800)/2),10);v=parseInt((screen.availHeight/2)-((y||600)/2),10);t="width="+(m||800)+",height="+(y||600)+",left="+p+",top="+v+",screenX="+p+",screenY="+v;if(o){t=t+"scrollbars=yes,resizable=yes,location=yes,toolbar=yes,menubar=yes,status=yes"}else{t=t+"scrollbars=yes,resizable=yes"}if(this.Get("state")===i.get("POPUP_STATE_UNLOADED")&&!(this.GetRenderer())){this.Setup();q=true}if(z||o||(l&&!l.match(/.swe\?/))){this.ExecuteMethod("StandAlonePopup",l,t,r);SiebelApp.S_App.uiStatus.Free();return true}else{if(this.Get("state")===i.get("POPUP_STATE_UNLOADED")&&!q){this.Show()}}if(l.indexOf("start.swe")===-1){x=SiebelApp.S_App.GetPageURL().split("start.swe")[0]+l+i.get("SWE_ARG_START")+f("")}else{l=f(l);x=SiebelApp.S_App.GetPageURL()+l.split("start.swe")[1]}var u=SiebelApp.S_App.GetActiveView();if(u){var A=u.GetActiveApplet();if(A){u.SetActiveAppletBeforePopup(A)}}this.ExecuteMethod("OpenPopup",x,y,m,false,false,false);return true}function e(l){this.SetProperty("isPrevPopupVisible",false);this.ExecuteMethod("ClearPopup");return(true)}function g(){if(this.Get("isCurrencyOpen")||this.Get("state")===i.get("POPUP_STATE_HIDDEN")||this.Get("state")===i.get("POPUP_STATE_UNLOADED")||(this.Get("isPrevPopupVisible")===true&&!this.Get("forceClosePopup"))){return}this.ExecuteMethod("SetPopupVisible",false);var m=SiebelApp.S_App.GetActiveView();if(m){m.DeletePopup()}var p=this.Get("currPopups");var o=null;var l=p.length;var n=0;for(n=0;n<l;n++){o=p[n];if(SiebelApp.S_App.IsExternalApplet(o)){o.Close()}}this.SetProperty("isPopupPick",false);this.SetProperty("isPopupMVGAssoc",false);this.SetProperty("isPopupMVGSelected",false);this.SetProperty("isPopupAssoc",false);this.SetProperty("currPopups",[]);this.SetProperty("prevPopups",[])}d.prototype.Setup=function(l){var m=new SiebelAppFacade.PopupRenderer(this);
this.GetRenderer=function(){return m};this.Show()};function c(l,t,n,q,r,o){try{var m;var p=this;if(this.Get("state")===i.get("POPUP_STATE_VISIBLE")){this.SetProperty("isPrevPopupVisible",true);this.ExecuteMethod("SetPopupVisible",false,true)}else{this.SetProperty("isPrevPopupVisible",false)}t=(t===undefined?0:parseFloat(t));n=(n===undefined?0:parseFloat(n));if(t<=0){t=parseFloat(i.get("DEFAULT_POPUP_HEIGHT"))}if(n<=0){n=parseFloat(i.get("DEFAULT_POPUP_WIDTH"))}this.SetProperty("noHide",false);this.SetProperty("height",t);this.SetProperty("width",n);this.ExecuteMethod("SetPopupVisible",true);if(o===undefined||!o){this.SetProperty("url",l)}else{this.SetProperty("content",l)}return true}catch(s){return false}}function a(){var p=this;if(p.Get("isSIPopup")){return}if(this.Get("CanProcessLayout")===false&&p.retryWaitForObjInfoProcessing<25){p.retryWaitForObjInfoProcessing++;setTimeout(function(){a.call(p)},100);return}p.retryWaitForObjInfoProcessing=0;var s=p.Get("prevPopups");var q=p.Get("currPopups");if(s&&s.length){var n=0;for(var l=0,o=s.length;l<o;l++){if(j.IndexOf(q||[],s[l])!==-1){n++}}if(n===s.length&&p.Get("isPrevPopupVisible")){p.SetProperty("isPrevPopupVisible",false)}}var t=null;var r=q.length;var m=0;for(m=0;m<r;m++){t=q[m];t.Initialize();SiebelApp.S_App.NotifyTimer("TimePopupApplet",[t.GetName(),"Objects Initialized"]);SiebelAppFacade.ComponentMgr.FindComponent({id:t.GetName()}).Show();t.Show();SiebelApp.S_App.NotifyTimer("TimePopupApplet",[t.GetName(),"Finished Populate"]);if(SiebelApp.S_App.GetActiveView()){if(t.GetView()===SiebelApp.S_App.GetActiveView()){SiebelApp.S_App.GetActiveView().SetActiveApplet(t);SiebelApp.S_App.GetActiveView().SetActiveAppletOnLoad(null)}else{}}t.SetFocusDefaultControl(true);t.FocusDefaultControl(q.length!=2)}if(q.length==2){SiebelApp.MvgBeautifier.Initialize()}if(0==q.length){this.SetProperty("isPopupSI",true)}SiebelApp.S_App.uiStatus.Free();SiebelApp.S_App.uiStatus.LocalFree()}function f(l){if(l.indexOf(".swe?")!==-1&&l.indexOf(i.get("SWE_SHOW_POPUP_STR"))===-1){l=j.AppendArgsToURL(l,i.get("SWE_SHOW_POPUP_STR"),i.get("SWE_NUMERIC_TRUE"))}return l}function h(n){n.preventDefault();n.stopPropagation();if(this.Get("state")===SiebelApp.Constants.get("POPUP_STATE_HIDDEN")){return false}this.SetProperty("isPopupClosedByX",true);this.SetProperty("isPrevPopupVisible",false);var o=CCFMiscUtil_CreatePropSet();var l=CCFMiscUtil_CreatePropSet();o.SetProperty(i.get("SWE_CMD_ARG"),i.get("CLOSE_BY_X"));o.SetProperty(i.get("SWEDIC"),i.get("CMDMGR_TRUE"));var m={};m.async=true;m.scope=this;m.args=[];m.args.push("");m.args.push(o);SiebelApp.S_App.CallServer(o,l,true,m);return false}d.prototype.IsPopupStarted=function(){return j.IndexOf([i.get("POPUP_STATE_STARTED"),i.get("POPUP_STATE_LOADED"),i.get("POPUP_STATE_VISIBLE")],this.Get("state"))!==-1};return d}());define("siebel/pmodel",[],function(){return"SiebelAppFacade.PresentationModel"})};