/*<ORACLECOPYRIGHT>
* Copyright (C) 1994-2014
* Oracle and Java are registered trademarks of Oracle and/or its affiliates.
* Other names may be trademarks of their respective owners.
* UNIX is a registered trademark of The Open Group.
*
* This software and related documentation are provided under a license agreement
* containing restrictions on use and disclosure and are protected by intellectual property laws.
* Except as expressly permitted in your license agreement or allowed by law, you may not use, copy,
* reproduce, translate, broadcast, modify, license, transmit, distribute, exhibit, perform, publish,
* or display any part, in any form, or by any means. Reverse engineering, disassembly,
* or decompilation of this software, unless required by law for interoperability, is prohibited.
*
* The information contained herein is subject to change without notice and is not warranted to be error-free.
* If you find any errors, please report them to us in writing.
*
* U.S. GOVERNMENT RIGHTS Programs, software, databases, and related documentation and technical data delivered to U.S.
* Government customers are "commercial computer software" or "commercial technical data" pursuant to the applicable
* Federal Acquisition Regulation and agency-specific supplemental regulations.
* As such, the use, duplication, disclosure, modification, and adaptation shall be subject to the restrictions and
* license terms set forth in the applicable Government contract, and, to the extent applicable by the terms of the
* Government contract, the additional rights set forth in FAR 52.227-19, Commercial Computer Software License
* (December 2007). Oracle America, Inc., 500 Oracle Parkway, Redwood City, CA 94065.
*
* This software or hardware is developed for general use in a variety of information management applications.
* It is not developed or intended for use in any inherently dangerous applications, including applications that
* may create a risk of personal injury. If you use this software or hardware in dangerous applications,
* then you shall be responsible to take all appropriate fail-safe, backup, redundancy,
* and other measures to ensure its safe use. Oracle Corporation and its affiliates disclaim any liability for any
* damages caused by use of this software or hardware in dangerous applications.
*
* This software or hardware and documentation may provide access to or information on content,
* products, and services from third parties. Oracle Corporation and its affiliates are not responsible for and
* expressly disclaim all warranties of any kind with respect to third-party content, products, and services.
* Oracle Corporation and its affiliates will not be responsible for any loss, costs,
* or damages incurred due to your access to or use of third-party content, products, or services.
</ORACLECOPYRIGHT>*/
/* 8.1.1.14SIA[23044]PATCHSET13 */
if(typeof(SiebelAppFacade.PhysicalRenderer)==="undefined"){SiebelJS.Namespace("SiebelAppFacade.PhysicalRenderer");define("siebel/phyrenderer",["siebel/basephyrenderer","siebel/htmltmplmgr"],function(){SiebelAppFacade.PhysicalRenderer=(function(){var S=SiebelJS.Dependency("SiebelApp.Utils");var f=SiebelJS.Dependency("SiebelApp.Constants");var w=SiebelJS.Dependency("SiebelAppFacade.HTMLTemplateManager");var g=f.get("SWE_PST_BUTTON_CTRL");var aq=f.get("SWE_CTRL_DETAIL");var am=f.get("SWE_CTRL_MVG");var a=f.get("SWE_CTRL_PICK");var M=f.get("SWE_CTRL_RADIO");var J=f.get("SWE_CTRL_CHECKBOX");var K=f.get("SWE_CTRL_COMBOBOX");var i=f.get("SWE_CTRL_CHART");var t=f.get("SWE_CTRL_PLAINTEXT");var O=f.get("SWE_CTRL_DATE_TIME_PICK");var W=f.get("SWE_CTRL_DATE_PICK");var ae=f.get("SWE_CTRL_CALC");var l=f.get("SWE_CTRL_DATE_TZ_PICK");var aj=f.get("SWE_CTRL_CURRENCY_CALC");var ai=f.get("SWE_CTRL_TEXT");var r=f.get("SWE_CTRL_TEXTAREA");var al=f.get("SWE_CTRL_PWD");var x=f.get("SWE_CTRL_RTCEMBEDDED");var k=f.get("SWE_CTRL_RTCEMBEDDEDTEXTONLY");var I=f.get("SWE_CTRL_RTCEMBEDDEDLINKFIELD");var ad=f.get("SWE_CTRL_RTCPOPUP");var q=f.get("SWE_CTRL_RTCIO");var z=f.get("SWE_CTRL_INKDATA");var j=f.get("SWE_CTRL_LINK");var m=f.get("SWE_CTRL_LABEL");var p=f.get("SWE_CTRL_URL");var V=f.get("SWE_CTRL_MAILTO");var v=/(About Record Applet\w*)|(About SRF Applet\w*)|(About Siebel Applet\w*)|(About View Applet\w*)|(Record Count Applet\w*)|(Technical Support Applet\w*)/;var ab=f.get("SWE_CTRL_EFFDAT");var H=f.get("SWE_CTRL_IMAGECONTROL");var d=f.get("SWE_CTRL_FILE");var e=f.get("SWE_PST_COL");var b=f.get("SWE_PST_APPLET_MODE_QUERY");var G=f.get("SWE_PST_APPLET_MODE_EDIT");var ao=f.get("SWE_PST_APPLET_MODE_NEW");function Z(av){SiebelAppFacade.PhysicalRenderer.superclass.constructor.call(this,av);var aw=null;this.SetFirstControl=function(ay){aw=ay};this.GetFirstControl=function(){return aw};var ax=false;this.SetIsGridBaseForm=function(ay){ax=ay};this.GetIsGridBaseForm=function(){return ax};this._EndLife=function(){aw=null}}SiebelJS.Extend(Z,SiebelAppFacade.BasePR);Z.prototype.Init=function(){SiebelAppFacade.PhysicalRenderer.superclass.Init.call(this);this.AttachPMBinding("RemoveControls",u);this.AttachPMBinding("UpdateQuickPickInfo",this.UpdatePick);this.AttachPMBinding("UpdateAppletMessage",L);this.AttachPMBinding("UpdateCurrencyCalcInfo",E);this.AttachPMBinding("UpdateConditionals",c);this.AttachPMBinding("ProcessCancelQueryPopup",y);this.AttachPMBinding("FocusOnApplet",n);this.AttachPMBinding("HandleCtrlDefChange",this.RefreshControl);this.AttachPMBinding("SetCanInvokeState",s);this.AttachPMBinding("BeginQueryState",B);this.AttachPMBinding("EndQueryState",Y);this.AttachPMBinding("UpdateRowCounter",X);this.AttachPMBinding("ShowPopup",this.ShowPopup);this.AttachPMBinding("isControlPopupOpen",h);this.AttachPMBinding("MaskLeaveField",this.MaskLeaveField);this.AttachPMBinding("ShowSelection",this.ShowSelection);this.AttachPMBinding("ResetAppletState",this.ResetRendererState);this.AttachPMBinding("RefreshData",this.BindData);this.AttachPMBinding("FieldChange",this.SetControlValue);this.AttachPMBinding("UpdateStateChange",this.UpdateUIControls);this.AttachPMBinding("InvokeStateChange",this.UpdateUIButtons);this.AttachPMBinding("GetPhysicalControlValue",this.GetPhysicalControlValue);this.AttachPMBinding("SetFocusToCtrl",this.SetFocusToControl);this.AttachPMBinding("FocusFirstControl",this.FocusFirstControl);this.AttachPMBinding("SetHighlightState",ag);this.AttachPMBinding("UpdateUI",function(){if(this.GetPM().Get("UpdateUI")){this.ShowSelection()}})};Z.prototype.RefreshControl=function(aw){var av=$("#"+aw.GetInputName())[0]||$("[name="+aw.GetInputName()+"]");if(av.length>0){av.nextAll().remove();this.GetUIWrapper(aw,true);this.ShowUIControl(aw);this.BindControlEvents(aw);this.EnableControl(aw,this.GetPM().ExecuteMethod("CanUpdate",aw.GetName()));ap.call(this,aw)}};Z.prototype.EndLife=function(){var ax=this.GetPM(),av=ax.Get("GetControls");for(var aw in av){var aA=av[aw];if(aA.GetUIType()===x){var az=CKEDITOR.instances[aA.GetInputName()];if(az){var ay=this.GetUIWrapper(aA).GetEl();if(!ay.data("pendingAction")){az.destroy(true)}}}}$("#s_"+ax.Get("GetFullId")+"_div").off("click click.drilldown");this._EndLife();SiebelAppFacade.PhysicalRenderer.superclass.EndLife.call(this)};Z.prototype.ResetRendererState=function(){};Z.prototype.UpdatePick=function(){var av=arguments[arguments.length-1];var aw=this.GetPM().Get("GetActiveControl");if(!aw){return}this.GetUIWrapper(aw).UpdatePickList(av);delete this.inProgress};function u(){SiebelApp.S_App.PluginBuilder.ResetPW(this)}function E(){var ay=this.GetPM();var aB=SiebelApp.S_App.GetPopupPM();$("div[name='popup']").find("div[name=CurrencyCalc]").remove();var az=ay.ExecuteMethod("GetCurrencyCalInfo");var aC={pickId:az[0],pickName:az[1],pickValue:az[2],dateId:az[3],dateName:az[4],dateValue:az[5],calcId:az[6],calcName:az[7],calcValue:az[8],hideExchDate:az[9],CCodeReadOnly:az[10],eDateReadOnly:az[11],AmountReadOnly:az[12],sourceField:az[13],qtpInfo:az[14],dateformat:az[15],dateFieldName:az[16]};var aA=ay.Get("GetActiveControl");if(!aA){var aE=ay.Get("GetControls");for(var aD in aE){if(aE.hasOwnProperty(aD)){if(aE[aD].GetInputName()===aC.sourceField){aA=aE[aD];break}}}}var ax='<div name="CurrencyCalc" class="siebui-popup-currency">';var aw=ay.ExecuteMethod("GetFieldDataType",aC.dateFieldName);var av=SiebelApp.S_App.LocaleObject.StringToFormatted(aw,aC.dateValue,aC.dateformat);ax+='<input type="hidden" autofocus="autofocus"/>';ax+='<div id="'+aC.pickId+'_cc" class="siebui-popup-input-row"><span class="siebui-popup-label">'+aC.pickName+'</span><input type="text" id="'+aC.pickId+'" tabindex="100" aria-label="'+aC.pickName+'" class="siebui-ctrl-pick" value="'+aC.pickValue+'" '+(aC.CCodeReadOnly?'readonly="readonly" ':"")+"></div>";if(!aC.hideExchDate){ax+='<div id="'+aC.dateId+'_cc" class="siebui-popup-input-row"><span class="siebui-popup-label">'+aC.dateName+'</span><input type="text" id="'+aC.dateId+'" tabindex="101" aria-label="'+aC.dateName+'" class="siebui-ctrl-date" value="'+av+'" '+(aC.eDateReadOnly?' readonly="readonly" ':"")+"></div>"}ax+='<div id="'+aC.calcId+'_cc" class="siebui-popup-input-row"><span class="siebui-popup-label">'+aC.calcName+'</span><input type="text" id="'+aC.calcId+'" tabindex="102" aria-label="'+aC.calcName+'" class="siebui-ctrl-calc" value="'+aC.calcValue+'" '+(aC.AmountReadOnly?'readonly="readonly" ':"")+"></div>";ax+="</div>";if(aB.Get("state")===f.get("POPUP_STATE_UNLOADED")){aB.Setup()}aB.SetProperty("isCurrencyOpen",true);aB.ExecuteMethod("OpenPopup",ax,0,0,false,false,true);aB.SetProperty("isCurrencyOpen",true);$("div[name=popup] ").find("div[name=CurrencyCalc]").parents("div.ui-dialog").children("div.ui-dialog-titlebar").hide().end().end().bind("keydown",{ctx:this,ctrl:aA,popPM:aB},function(aG){if(aG.keyCode===$.ui.keyCode.ESCAPE){if(aG.data.popPM.Get("isCurrencyOpen")){aG.data.popPM.SetProperty("isCurrencyOpen",false);aG.data.ctx.GetPM().ExecuteMethod("NotifyClosePopup");
aG.data.ctx.SetFocusToControl(aG.data.ctrl.GetName(),true)}}if(aG.keyCode===$.ui.keyCode.ESCAPE||aG.keyCode===$.ui.keyCode.ENTER){aG.stopPropagation()}});$("div[name=CurrencyCalc]").parents("div.ui-dialog-content").removeClass("minWidthContainer");SiebelAppFacade.ControlBuilder.Pick({target:"#"+aC.pickId,className:"siebui-icon-pick",scope:this,control:aA,click:function(aG){this.GetPM().ExecuteMethod("ShowPickPopup")}});SiebelAppFacade.ControlBuilder.DatePick({target:"#"+aC.dateId,className:"siebui-icon-date",control:aA,scope:this,showPopup:false,click:function(aI,aH){if(!aC.eDateReadOnly){this.GetPM().SetProperty("isControlPopupOpen",true);$.data(this,"innerCtrlElem",{date:aH});var aG=this;SiebelAppFacade.ControlBuilder.DatePick({target:aH,className:"siebui-icon-date",control:aI,scope:this,showPopup:true,yearRange:"c-100:c+100",getISOVal:function(){return S.ToISOFormat($(this.target).val(),false)},onClose:function(aL,aK){$(this).datetimepicker("destroy").focus();aG.GetPM().SetProperty("isControlPopupOpen",false);$.removeData("innerCtrlElem");if(S.IsISO(consts.get("SWE_CTRL_DATE_PICK"),aL)){var aJ=SiebelApp.S_App.LocaleObject.GetStringFromDateTime(aL,consts.get("ISO_DATE_FORMAT"),SiebelApp.S_App.LocaleObject.GetDateFormat());$(this).val(aJ)}else{$(this).val(aL)}}})}}});SiebelAppFacade.ControlBuilder.Calculator({target:"#"+aC.calcId,className:"siebui-icon-calc",control:aA,dc:SiebelApp.S_App.LocaleObject.GetDispCurrencyDecimal(),scope:this,click:function(aI,aH){if(!this.GetPM().ExecuteMethod("CanUpdate",aI.GetName())){return}this.GetPM().SetProperty("isControlPopupOpen",true);$.data(this,"innerCtrlElem",{calc:aH});this.SetControlValue(aI,this.GetPM().ExecuteMethod("GetFieldValue",aI));var aG=this;SiebelAppFacade.DecisionManager.PauseVKeyboard($(aH));SiebelAppFacade.ControlBuilder.Calculator({target:aH,className:"siebui-icon-calc",control:aI,dc:SiebelApp.S_App.LocaleObject.GetDispCurrencyDecimal(),show:true,beforeShow:function(aO,aN){var aM=aO;var aJ=$("#"+aC.pickId).val();if(aJ){var aL;var aP=SiebelApp.S_App.LocaleObject.GetCurrency(aJ);aP=aP?aP.m_sSymbol:null;if(aP){aM=aM.replace(aP,"")}}var aK=SiebelApp.S_App.LocaleObject.GetDispCurrencySeparator(),aM=aM.replace(new RegExp("\\"+aK,"ig"),"").trim();$(this).val(aM)},close:function(aJ){var aK=aJ.replace(/\[/g,"").replace(/\]/g,"");aG.SetControlValue(aI,aK);if($(this).parents("body").length){$(this).calculator("destroy").next("img").show().end().focus()}aG.GetPM().SetProperty("isControlPopupOpen",false);$.removeData("innerCtrlElem");aG.GetPM().OnControlEvent(f.get("PHYEVENT_CONTROL_FOCUS"),aI);SiebelAppFacade.DecisionManager.ResumeVKeyboard($(this))}})}});Q.call(this,aC.qtpInfo);$("#"+aC.pickId).bind("focus",{ctx:this,ctrl:aA},function(aG){aG.data.ctx.GetPM().OnControlEvent(f.get("PHYEVENT_CONTROL_FOCUS"),aG.data.ctrl,$(this).val())}).bind("blur",{ctx:this,ctrl:aA,ctrlType:aC.pickName},function(aH){aH.data.ctx.onBlurCurrency(aH.data.ctrlType,$(this).val());aH.data.ctx.GetPM().ExecuteMethod("CurrencyPostChanges");var aI=aH.data.ctx.GetPM().ExecuteMethod("GetCurrencyCalInfo");var aG=$("#"+aI[6]);aG.val(aI[8])}).bind("keydown",{ctx:this,ctrl:aA,readOnly:aC.CCodeReadOnly},function(aG){aG.data.ctx.HandleKeyEvents($(this),aG,$(this).val())});$("#"+aC.calcId).bind("focus",{ctx:this,ctrl:aA},function(aG){aG.data.ctx.GetPM().OnControlEvent(f.get("PHYEVENT_CONTROL_FOCUS"),aG.data.ctrl,$(this).val())}).bind("blur",{ctx:this,ctrl:aA},function(aI){if(aI.data.ctx.GetPM().Get("isControlPopupOpen")===false){if(!!$(this).data("inLeaveField")){return}var aJ=$(this).val();var aH=0;while(isNaN(aJ.charAt(aH))){aH++}aJ=aJ.substring(aH);aI.data.ctx.GetPM().OnControlEvent(f.get("PHYEVENT_CONTROL_BLUR"),aI.data.ctrl,aJ);aI.data.ctx.GetPM().ExecuteMethod("CurrencyPostChanges");var aK=aI.data.ctx.GetPM().ExecuteMethod("GetCurrencyCalInfo");var aG=$("#"+aK[6]);aG.val(aK[8])}}).bind("keydown",{ctx:this,ctrl:aA,readOnly:aC.AmountReadOnly},function(aG){if(!$.calculator._showingCalculator){aG.data.ctx.HandleKeyEvents($(this),aG,$(this).val())}});$("#"+aC.dateId).bind("blur",{ctx:this,ctrl:aA,readOnly:aC.eDateReadOnly},function(aH){if(!aH.data.readOnly){var aI=S.Trim($(this).val()),aJ=S.ToISOFormat(aI,false)||aI;if(S.IsISO(consts.get("SWE_CTRL_DATE_PICK"),aJ)){var aG=SiebelApp.S_App.LocaleObject.GetStringFromDateTime(aJ,consts.get("ISO_DATE_FORMAT"),SiebelApp.S_App.LocaleObject.GetDateFormat());$(this).val(aG)}else{$(this).val(aJ)}}return false}).bind("keydown",{ctx:this,ctrl:aA,readOnly:aC.eDateReadOnly},function(aG){aG.data.ctx.HandleKeyEvents($(this),aG,$(this).val())});$("div.ui-widget-overlay").bind("click",{ctx:this,ctrl:aA,popPM:aB},function(aG){if(aG.data.popPM.Get("isCurrencyOpen")){aG.data.popPM.SetProperty("isCurrencyOpen",false);aG.data.ctx.GetPM().ExecuteMethod("NotifyClosePopup");aG.data.ctx.SetFocusToControl(aG.data.ctrl.GetName(),true)}});var aF=this;setTimeout(function(){var aG=$("#"+aA.GetInputName()+"_icon")||$("#"+aA.GetInputName().replace("_0","_"+ay.Get("GetSelection"))+ +"_icon");if(aG.length===0&&typeof(aF.GetColumnHelper)==="function"){aG=$('[name="'+aF.GetColumnHelper().GetModifiedColumnName(aA.GetName())+'"]').next("img");if(aG.length===0){aG=aG.end()}}$("div[name=popup] ").find("div[name=CurrencyCalc]").parents("div.ui-dialog").position({my:"top",at:"bottom",collision:"flipfit",of:aG});setTimeout(function(){$("#"+aC.pickId).focus()},5)},15)}Z.prototype.onBlurCurrency=function(ax,aw){var av=this.GetPM().ExecuteMethod("GetCurrencyCalInfo");var ay;aw=aw.toUpperCase();if(ax==="Currency Code"){ay=av[0];var az=SiebelApp.S_App.LocaleObject.GetCurrency(aw);if(az){$("#"+ay).val(aw)}else{$("#"+ay).val(av[2])}}};function Q(az){if(az){var av=az.GetChildCount();for(var aw=0;aw<av;aw++){var ay=az.GetChild(aw);var ax=ay.GetProperty(consts.get("SWE_PROP_ID"));$("#"+ax).attr({ot:ay.GetProperty(consts.get("SWE_PROP_QTP_OT")),rn:ay.GetProperty(consts.get("SWE_PROP_QTP_RN")),un:ay.GetProperty(consts.get("SWE_PROP_QTP_UN"))})}}}function L(){var av=this.GetPM(),ay=av.Get("GetQueryModePrompt"),ax=av.Get("GetId"),aw;msgSpan=$("#"+ax+"_msg"),markup="<div class='siebui-applet-msg'><span id="+ax+"_msg><span></div>";if((SiebelApp.S_App.IsRwd())&&(S.IsTrue(av.Get("IsObjResponsive")))){aw=$("#"+av.Get("GetRowCount"))}else{aw=$("#s_"+ax+"_rc")}if(msgSpan.length===0){if(aw.parent().prev("td").length){aw.parent().prev("td").append(markup)}else{aw.parent().append(markup)}}if(ay){aw.addClass("siebui-no-display");$("#"+ax+"_msg").html(ay).parent(".siebui-applet-msg").removeClass("siebui-no-display")}else{$("#"+ax+"_msg").parent(".siebui-applet-msg").addClass("siebui-no-display");aw.removeClass("siebui-no-display")}aw=null}function y(){var aA=SiebelApp.S_App.GetPopupPM();$("[name=cancelQuery]").remove();var az=$('<div name="cancelQuery"></div>');var aD="";var aF=SiebelApp.S_App.LocaleObject;var aC=aF.GetLocalString("IDS_CANCELQRY_INITIALTEXT");var ax=aF.GetLocalString("IDS_CANCELQRY_RESPONSETEXT");var aE=aF.GetLocalString("IDS_CANCELQRY_HEADERTEXT");var aw=aF.GetLocalString("IDS_CANCELQRY_BUTTONTEXT");
aD+='<div align ="center" id = "responseTxt_div"><p id="initTxt_CQ"><b>'+aC+"</b></p></div><br />";var av='<button id="cancelQry_Ctrl_CQ" class="appletButton" type="button" title="'+aw+'" >'+aw+"</button>";aD+='<div align="center" id = "cancelbtn_div">'+av+"</div>";az.append(aD);if(aA.Get("state")===f.get("POPUP_STATE_UNLOADED")){aA.Setup()}aA.SetProperty("IsCancelQryPopupOpen",true);aA.ExecuteMethod("SetPopupVisible",true);aA.SetProperty("content",az);var aB=$("#cancelQry_Ctrl_CQ");if(aB.length!==0){var ay=this;aB.bind("click",function(aG){var aH='<p id="responseTxt_CQ"><b>'+ax+"</b></p>";$("#initTxt_CQ").replaceWith(aH);aA.OnControlEvent(f.get("PHYEVENT_CANCEL_QRY_POPUP"),aG)})}}function s(){var av=this.GetPM();var aw=$("#s_"+av.Get("GetFullId")+"_div");if(av.ExecuteMethod("IsMethodDefault","MaximizeApplet")&&av.ExecuteMethod("CanInvokeMethod","MaximizeApplet")===false){aw.removeClass("siebui-applet-minimize").addClass("siebui-applet-maximize")}else{if(av.ExecuteMethod("IsMethodDefault","MinimizeApplet")&&av.ExecuteMethod("CanInvokeMethod","MinimizeApplet")===false){aw.removeClass("siebui-applet-maximize").addClass("siebui-applet-minimize")}else{aw.removeClass("siebui-applet-maximize siebui-applet-minimize")}}}function F(ax,aw,av){if(this.GetPM().Get("IsInQueryMode")&&ax.GetCaseSensitive()){if(av==true&&$(aw).val()===""){$(aw).val(SiebelApp.S_App.LocaleObject.GetLocalString("IDS_SWE_CSQ_WATERMARK"));$(aw).addClass("siebui-watermark-text")}else{if(av==false&&$(aw).val()===SiebelApp.S_App.LocaleObject.GetLocalString("IDS_SWE_CSQ_WATERMARK")){$(aw).val("");$(aw).removeClass("siebui-watermark-text")}}}}Z.prototype.ShowUI=function(){SiebelAppFacade.PhysicalRenderer.superclass.ShowUI.call(this);var aL=this.GetPM(),aO=aL.Get(f.get("SWE_VIS_MODE_LIST")),az=aL.Get(f.get("SWE_LDC_VIS_MODE_LIST")),aH=aO?aO.length:0,aD=az?az.length:0,ax=aL.Get("GetFullId"),aI=aL.Get("GetPlaceholder"),aB,av,aG=aL.Get(f.get("SWE_VIS_MODE_DEFAULT")),aM="<div align='center' id = 's_div_"+aI+"_VisualModes' class = 'siebui-viz-buttonbar AppletButtons'>";aL.AddProperty("IsTaggedApplet",v.test(aL.Get("GetName")));s.call(this);var aP=$("#s_"+ax+"_div");aP.addClass(" siebui-applet siebui-form ");aP.find(".AppletTitle").eq(0).removeClass("AppletTitle").addClass(" siebui-applet-title ");if(aP.find("table[data-siebel-form-table='true']").length>0){this.SetIsGridBaseForm(true);aL.SetProperty("GridFormContent",true)}if(S.IsTrue(SiebelApp.S_App.GetAccessibilityEnhanced())){aP.attr({role:"region",title:aL.Get("LandMarkTitle")})}var aJ=aL.Get("GetControls");for(var aE in aJ){if(aJ.hasOwnProperty(aE)){this.ShowUIControl(aJ[aE])}}aJ=null;this.InjectAppletQTPInfo(aP);this.ShowCollapseExpand();if(aH>0&&aD>0&&aH===aD){var ay=aL.Get("GetAppletLabel");if(ay!==""){ay+=":"}for(var aK=0;aK<aH;aK++){var aF=aO[aK];var aA=az[aK];var aC=ay+aA;if(aF!==aG){av="siebui-ctrl-btn appletButton"}else{av="siebui-ctrl-btn appletButtonDis"}if($("#"+aI+"_"+aF+"_btn").length===0){aB='<button id="'+aI+"_"+aF+"_btn\" class='"+av+"' aria-label='"+aC+"' "+((av==="siebui-ctrl-btn appletButton")?" ":' disabled="disabled" ')+'type="button" title="'+aC+'" ';if(S.IsTrue(SiebelApp.S_App.IsAutoOn())){aB+=consts.get("SWE_PROP_QTP_OT")+"='"+consts.get("SWE_PST_BUTTON_CTRL")+"' "+consts.get("SWE_PROP_QTP_RN")+"='"+aF+"' "+consts.get("SWE_PROP_QTP_UN")+"='"+aA+"'"}aB+=">"+aA+"</button>";aM+='<div align="center" id = "s_div_'+aI+"_"+aF+"\" class='siebui-viz-button-"+aF.toLowerCase()+"' >"+aB+"</div>"}}if(aB){aM+="</div>";var aN=aP.find(".siebui-vismode-buttonbar").eq(0);if(aN.length>0){aN.empty();aN.append(aM)}else{var aw=SiebelApp.S_App.IsRwd()?$("#"+aL.Get("GetRowCount")):$("#s_"+aL.Get("GetId")+"_rc");if(aw.parent().prev("td").length){aw.parent().prev("td").append(aM)}else{aw.parent().prepend(aM)}aw=null}aN=null}}if(this.GetIsGridBaseForm()===true){af.call(this,aP)}else{$("#SWEBottomHidden"+aL.Get("GetId")).attr("tabindex","-1")}SiebelAppFacade.LegacyCssSupport.addLegacyClass($("#"+ax));aP.find("span >img:first-child").each(function(){var aQ=$(this),aR=aQ.attr("alt")||aQ.attr("title");aR?aQ.parent().attr("title",aR):false});aP=null};function af(ay){if(ay&&ay.length){var aA="#SWEBottomHidden"+this.GetPM().Get("GetId"),az=ay.find("[tabindex]").not(aA);for(var aw=0,av=az.length;aw<av;aw++){var ax=az.eq(aw);if(Number(ax.attr("tabindex"))>=0){ax.attr({"data-seq":ax.attr("tabindex"),tabindex:"0"})}}ay.on("keydown","input[type=file][data-seq], button[data-seq], input[type=button][data-seq],div[data-seq],span[data-seq],a[data-seq]",{ctx:this},function(aB){ar.call(aB.data.ctx,aB.target,null,aB)});ay=az=null}}Z.prototype.ShowUIControl=function(aC){var ay=this.GetPM(),az=ay.ExecuteMethod("IsRequired",aC.GetName()),aH=aC.GetUIType(),aJ=false,aD=null;aD=this.GetUIWrapper(aC);aD.ShowUI();if(ay.Get("IsInQueryMode")){aD.BeginQuery()}aJ=(aH===p||aH===k||aD.constructor.name==="BasePW");if(aJ||az){var aF=arguments[1]?arguments[1]:aC.GetInputName();var aE=(this.GetIsGridBaseForm()===true)?aC.GetSeq():0;var aB=$('[name="'+aF+'"]')[0]||$("#"+aF)[0];if(!aB){return}aB=$(aB)}if(az){var aG=aB.attr("aria-labelledby")||"";if(aG){aG=aG.split(" ",1);var aA=SiebelApp.S_App.GetRequiredIndicator();var aI=aG[0].replace("/","\\/");var aw=ay.Get("GetFullId");$("#"+aw).children().find("#"+aI).parent().append(aA);aB.attr("aria-required","true");aA=aI=aw=null}aG=null}switch(aC.GetUIType()){case p:if(aC.GetName()==="BookmarkImage"&&ay.GetPMName()==="Bookmark URL Popup Applet (SWE)_PM"){aB.remove();$($("table.FormSection")[0]).remove()}break;case k:aB.text("");var ax=aB.next("textarea");if(ax.length>0){ax.height(aC.GetHeight()).width(aC.GetWidth()).attr("name",aC.GetInputName()).attr("aria-labelledby",(aC.GetFieldName().replace(/\s+/g,"")+"_Label")).attr("aria-label",aC.GetDisplayName()).attr("maxlength",aC.GetMaxSize()||256).attr("tabindex",aE).addClass("siebui-align-"+aC.GetJustification());this.InjectAppletQTPInfo(ax)}var av=aB.siblings(".siebui-email-rtc-stripbtn").find("img.siebui-email-rtc-stripbtn-img");if(av.length>0){var aK=SiebelApp.S_App.LocaleObject.GetLocalString("RTCStripHTML");av.attr("alt",aK).attr("title",aK)}break;default:if(aD.constructor.name==="BasePW"){aB.attr("maxlength",aC.GetMaxSize()||256).attr("tabindex",aE).addClass("siebui-align-"+aC.GetJustification());this.InjectQTPInfo(aB,aC)}break}aD=aB=null};function N(aw){var av=arguments[1]?arguments[1]:aw.GetInputName();if($("#"+av+"_mb").length>0){return}return'<a  id ="'+av+'_mb" tabindex ="'+aw.GetSeq()+'" href="javascript:void(0)" >'+aw.GetDisplayName()+"</a>"}Z.prototype.ShowCollapseExpand=function(){var ax=this.GetPM();var aA=ax.Get("defaultAppletDisplayMode");if(aA){var ay=ax.Get("GetAppletLabel");if(ay!==""){ay=ay+":"}var aC;var aw=SiebelApp.S_App.LocaleObject.GetLocalString("IDS_SWE_APPLET_EXPAND");var az=ay+aw;var av=S.IsTrue(SiebelApp.S_App.IsAutoOn());var aB="#s_"+ax.Get("GetFullId")+"_div";aC="<span class='siebui-button-secondary siebui-btn-icon-expanded'><a href='javascript:void()' role='link' tabindex='0' aria-label='"+az+"' ";
if(av){aC+=consts.get("SWE_PROP_QTP_OT")+"='"+consts.get("SWE_CTRL_LINK")+"' "+consts.get("SWE_PROP_QTP_RN")+"='"+aw+"' "+consts.get("SWE_PROP_QTP_UN")+"='"+aw+"'"}aC+="></a></span>";az="";aw=SiebelApp.S_App.LocaleObject.GetLocalString("IDS_SWE_APPLET_COLLAPSE");az=ay+aw;aC+="<span class='siebui-button-secondary siebui-btn-icon-collapsed'><a href='javascript:void()' role='link' tabindex='0' aria-label='"+az+"' ";if(av){aC+=consts.get("SWE_PROP_QTP_OT")+"='"+consts.get("SWE_CTRL_LINK")+"' "+consts.get("SWE_PROP_QTP_RN")+"='"+aw+"' "+consts.get("SWE_PROP_QTP_UN")+"='"+aw+"'"}aC+="></a></span>";$(aB).find(".siebui-applet-container.siebui-collapsible").prepend(aC).find(".siebui-btn-icon-"+aA).hide();if(aA==="collapsed"){$(aB).find(".siebui-applet-content.siebui-collapsible").hide()}}};Z.prototype.BindEvents=function(aF,aB){SiebelAppFacade.PhysicalRenderer.superclass.BindEvents.call(this);var aw=this.GetPM(),az=aw.Get(f.get("SWE_VIS_MODE_LIST")),av=az?az.length:0,aC=aw.Get("GetFullId"),aI="",aE=aw.Get("GetPlaceholder");if(av>0){for(var ay=0;ay<av;ay++){if($("#"+aE+"_"+az[ay]+"_btn").length>0){$("#"+aE+"_"+az[ay]+"_btn").bind("click",{ctx:this,visMode:az[ay]},function(aO){var aK=aO.data.ctx,aM=aK.GetPM(),aJ=CCFMiscUtil_CreatePropSet(),aL={};aL.async=true;var aN=this;aL.cb=function(){var aP=Array.prototype.slice.call(arguments);var aQ=aP?aP[aP.length-1]:"";if(aQ===true){aM.SetProperty("DefaultVisualMode",aO.data.visMode);$(aN).attr("disabled","disabled");$(aN).removeClass("siebui-ctrl-btn appletButton siebui-mode-button-enable");$(aN).addClass("siebui-ctrl-btn appletButtonDis siebui-mode-button-disable")}};aJ.SetProperty("VisualMode",aO.data.visMode);aM.OnControlEvent(f.get("PHYEVENT_INVOKE_CONTROL"),aM.Get(f.get("SWE_VIS_MODE_FLIP_METHOD")),aJ,aL)})}}}if(this.constructor==Z){var aG=$("#SWEBottomHidden"+aw.Get("GetId"));aG.bind("focus",{ctx:this},function(aJ){ah.call(aJ.data.ctx,aJ)});aG=null}var aA=$("#s_"+aw.Get("GetFullId")+"_div");aA.on("click",".siebui-applet-header.siebui-collapsible .siebui-button-secondary",{ctx:this},function(aJ){$(this).parents(".siebui-applet-header.siebui-collapsible").find(".siebui-button-secondary").toggle().parents(".siebui-applet:first").find(".siebui-applet-content.siebui-collapsible").slideToggle("fast","linear");(aJ.data.ctx.resize||$.noop).call(aJ.data.ctx)});aA.bind("click",{ctx:this},function(aK){if(SiebelApp.S_App.GetPopupPM().Get("state")===consts.get("POPUP_STATE_VISIBLE")&&$(aK.currentTarget).find("div[id^='s_S_A'][id$='_div']").find($(aK.target)).length>0){return}var aJ=aK.data.ctx;if(aJ.IsValidClick(aK.srcElement||aK.target)){if(aJ&&aJ.GetPM()){if(!aJ.GetPM().Get("IsActive")){aJ.GetPM().OnControlEvent(f.get("PHYEVENT_APPLET_FOCUS"))}ak.call(aJ,aK)}}});$("#_sweview #s_"+aw.Get("GetFullId")+"_div").on("click",".siebui-task-assist-list-item",{ctx:this},function(aM){var aL=this.id;var aN=SiebelApp.S_App.getExtObject("TaskAssistant");if(aN){aN.ExecuteMethod("LaunchTaskFromView",aL)}else{var aJ=SiebelApp.S_App.GetService(consts.get("NAME_TASKASSISTUISVC"));if(aJ){var aK=CCFMiscUtil_CreatePropSet();aK.SetProperty("Task Id",aL);aJ.InvokeMethod("LaunchTaskFromView",aK)}}});aA.on("click.drilldown",".siebui-ctrl-drilldown",{ctx:this},function(aM){var aJ=aM.data.ctx.GetPM().Get("GetControls");var aK=this.id.indexOf("_mb");var aL=this.id.substring(0,aK);for(var aO in aJ){if(aJ.hasOwnProperty(aO)){var aN=aJ[aO];if(aN.GetInputName()===aL){aM.data.ctx.GetPM().OnControlEvent(f.get("PHYEVENT_DRILLDOWN_FORM"),aN)}}}});var aD=aw.ExecuteMethod("GetControlId");if(aD){aD=((SiebelApp.S_App.IsRwd())&&(S.IsTrue(aw.Get("IsObjResponsive"))))?"#"+aD:"[name="+aD+"]";$(aD).bind("change",{ctx:this},function(aJ){aJ.data.ctx.GetPM().OnControlEvent(f.get("PHYEVENT_INVOKE_TOGGLE"),$(this).val())})}aA=null;if(aB===true){return}var aH=aF||aw.Get("GetControls");for(var ax in aH){if(aH.hasOwnProperty(ax)){this.BindControlEvents(aH[ax])}}aH=null};Z.prototype.InvokeControlMethod=function(ay){SiebelApp.S_App.uiStatus.Busy({});var aw={};aw.async=true;aw.cb=function(){var az=Array.prototype.slice.call(arguments);var aA=az?az[az.length-1]:"";if(aA!==f.get("SWE_RPC_PROP_NEW_LAYOUT")&&aA!==f.get("SWE_RPC_PROP_REFRESH_LAYOUT")&&aA!==f.get("SWE_RPC_PROP_NEW_PAGE")){SiebelApp.S_App.uiStatus.Free()}};var ax=ay.GetMethodPropSet();var av=ax.Clone();this.GetPM().OnControlEvent(f.get("PHYEVENT_INVOKE_CONTROL"),ay.GetMethodName(),av,aw)};Z.prototype.IsValidClick=function(av){return((S.IndexOf(["input","textarea","button","a","img","select"],av.tagName.toLowerCase())===-1)||(av.type||"").toLowerCase()==="file")};Z.prototype.FormatDDInQueryMode=function(ax,aw){if(this.GetPM().Get("IsInQueryMode")){var av=this.GetPM().Get("DDUserSelected");if(av&&aw&&aw.charAt(0)!=='"'&&aw.charAt(aw.length-1)!=='"'&&av.ctrl===ax&&av.value===aw){aw='"'+aw+'"';this.GetPM().SetProperty("DDUserSelected",undefined)}}return aw};Z.prototype.BindControlEvents=function(ay){switch(ay.GetUIType()){case g:if(ay.GetMethodName()==="ClearSignature"){break}case aq:case K:case J:case M:case V:case p:case j:case m:case W:case O:case l:case ai:case r:case al:case a:case am:case ab:case aj:case x:case i:case ae:case z:this.GetUIWrapper(ay).BindEvents();return;case d:this.GetUIWrapper(ay).BindEvents(true);return}var az=$("[name="+ay.GetInputName()+"]");var ax=this.GetPM();if(az.length===0&&ay.GetControlType()===e&&S.IndexOf([b,G,ao],ax.Get("GetMode"))!==-1){var av=ay.GetSpanPrefix()+"0";az=$("[name="+av+"]")}if(az.length===0&&$("#"+ay.GetInputName()).length===0&&$("#"+(ay.GetInputName()+"_Ctrl")).length===0){return}switch(ay.GetUIType()){case g:if(ay.GetMethodName()==="ClearSignature"){$("#"+(ay.GetInputName()+"_Ctrl")).bind("click",{ctx:this,ctrl:ay},function(aA){var aD=aA.data.ctx.GetPM().Get("GetControls");for(var aB in aD){if(aD.hasOwnProperty(aB)){if(aD[aB].GetUIType()==="JInkData"){var aC=aD[aB].GetInputName();$("#siebui-ctrl"+aC+"-clearButton").trigger("click");$("#"+aC).attr({value:""});$($("#sign_"+aC).find("canvas")).trigger("mouseup")}}}})}break;case k:var aw=az.siblings(".siebui-email-rtc-stripbtn").find(".siebui-email-rtc-stripbtn-link");if(aw.length>0){aw.bind("click",function(){var aB=SiebelApp.S_App.LocaleObject.GetLocalString("RTCStripHtmlConfirm");var aA=confirm(aB);if(aA==true){var aC=$("textarea[name='"+ay.GetInputName()+"']");aC.val(SiebelApp.Utils.stripOUIHTMLTag(aC.val()));aC.focus()}})}default:az.bind("keydown",{ctx:this,ctrl:ay},function(aA){return aA.data.ctx.HandleKeyEvents($(this),aA,$(this).val())});az.bind("blur",{ctx:this,ctrl:ay},function(aA){F.call(aA.data.ctx,aA.data.ctrl,this,false);var aB=aA.data.ctx.GetPM().OnControlEvent(f.get("PHYEVENT_CONTROL_BLUR"),aA.data.ctrl,$(this).val());F.call(aA.data.ctx,aA.data.ctrl,this,true)});az.bind("focus",{ctx:this,ctrl:ay},function(aA){F.call(aA.data.ctx,aA.data.ctrl,this,false);aA.data.ctx.GetPM().OnControlEvent(f.get("PHYEVENT_CONTROL_FOCUS"),aA.data.ctrl,$(this).val())});break}az=null};Z.prototype.HandleKeyEvents=function(ax,ay,aA){var av=false;var aw=this.GetPM();
if(ax&&ax.length===1&&ay){var az=ay.data.ctrl;if(az){switch(ay.which){case $.ui.keyCode.ENTER:av=an.call(this,ax,az,ay);break;case $.ui.keyCode.ESCAPE:av=ac.call(this,ax,az,ay);break;case $.ui.keyCode.UP:av=au.call(this,ax,az,ay);break;case $.ui.keyCode.DOWN:av=A.call(this,ax,az,ay);break;case $.ui.keyCode.LEFT:case $.ui.keyCode.RIGHT:av=D.call(this,ax,az,ay);break;case $.ui.keyCode.BACKSPACE:av=C.call(this,ax,az,ay);if(av){ay.preventDefault()}break;case $.ui.keyCode.TAB:av=ar.call(this,ax,az,ay);break;case f.get("SWE_F2_KEY"):av=o.call(this,ax,az,ay);break;default:T.call(this,ax,az,ay);break}}}if(av){ay.stopImmediatePropagation()}};function au(av,ay,aw){var ax=this.GetUIWrapper(ay).HandleKey(av,aw);return(ax===true)}function A(av,ay,aw){var ax=this.GetUIWrapper(ay).HandleKey(av,aw);return(ax===true)}function T(aw,ay,ax){var av=ax.ctrlKey||ax.altKey||ax.shiftKey;if(ay.GetUIType()==K&&!av&&aw.autocomplete("option","source").length==0){this.GetUIWrapper(ay).HandleKey(aw,ax)}}function D(aw,ay,ax){var av=false;if(ax.altKey){av=ac.call(this,aw,ay,ax)}return av}function an(ax,az,ay){var av=false,aw=this.GetPM();switch(az.GetUIType()){case r:case p:case z:case x:case k:case I:case ad:case q:case g:av=true;break;case p:av=aw.Get("IsInQueryMode")?false:true;break;case a:ay.preventDefault();break;case K:U.call(this,ax,az,ay);break}if(az.GetUIType()===ae||(az.GetUIType()==K&&ax.attr("autocomplete"))){this.GetUIWrapper(az).HandleKey(ax,ay)}return av?av:aw.OnControlEvent(f.get("PHYEVENT_ENTER_KEY_PRESS"),az)}function ac(aw,ay,ax){var av=this.GetPM();preState=av.Get("isControlPopupOpen");av.OnControlEvent(f.get("PHYEVENT_ESCAPE_KEY_PRESS"),ay);return(av.Get("isControlPopupOpen")!==preState)}function C(av,ax,aw){if(av.attr("type")==="checkbox"){return true}return !(this.GetPM().ExecuteMethod("CanUpdate",ax.GetName()))}function o(av,ax,aw){if(!aw.data.readOnly){$(av).nextAll("span[id$='_icon']").click();return true}return false}function U(aw,ax,av){if(ax&&ax.GetUIType()==K&&aw.attr("autocomplete")){if(aw.autocomplete("widget").not(":hidden").length>0){aw.val(aw.autocomplete("widget").find(".ui-state-focus").text())}}}function ar(av,aA,aB){if(aB.keyCode===$.ui.keyCode.TAB){ak.call(this,aB,aA);U.call(this,av,aA,aB);var ay=$("#s_"+this.GetPM().Get("GetFullId")+"_div"),aD=ay.find("[data-seq]").not(":hidden,:disabled"),aM=aD.index($(av)),aC=Number($(av).attr("data-seq"));if((aM===-1)||(aB.shiftKey&&aM===0)){return}var aL=null,aI=aB.shiftKey?aM-1:aM+1,ax=aB.shiftKey?0:aD.length,aJ=aB.shiftKey?-1:1,aH=aI;if(aC==0){while(true){if(Number(aD.eq(aH).attr("data-seq"))===0){aL=aH;break}if(aH===ax){break}aH+=aJ}}if(aL===null){var aK=null,az=null,aG=function(aO,aN){return aO>aN},aF=function(aO,aN){return aO<aN},aw=aB.shiftKey?aF:aG;for(aH=0,len=aD.length;aH<len;aH++){if(aH!==aM){var aE=Number(aD.eq(aH).attr("data-seq"));if((!aK&&aw(aE,aC))||aK&&aw(aE,aC)&&aw(aK,aE)){aK=aE;az=aH}}}if(az){aL=az}}if(aL!==null){aD.eq(aL).focus();aB.preventDefault()}else{R.call(this,aB);aB.preventDefault()}}}function ah(aw){var aA=$("#s_"+this.GetPM().Get("GetFullId")+"_div"),az=aA.find("[data-seq]").not(":hidden,:disabled"),av=az.length,aC=-1,ay=-1;for(var ax=av;ax>=0;ax--){var aB=Number(az.eq(ax).attr("data-seq"));if(aC<aB){aC=aB;ay=ax}}az.eq(ay).focus()}function R(ax){var aw=$(ax.target),az="SWEBottomHidden"+this.GetPM().Get("GetId"),ay=$("a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, *[tabindex], *[contenteditable]").not(":hidden").add("a#"+az).not("[tabindex=-1]"),av=ay.length;lastindex=ay.index($("#"+az));if((lastindex+1)===av){ay.eq(0).focus()}else{ay.eq(lastindex+1).focus()}}function h(){if(this.GetPM().Get("isControlPopupOpen")===false){var az=this.GetPM().Get("GetActiveControl");if(az){var ay=$($('input[name="'+az.GetInputName()+'"]')[0]||$("#"+az.GetInputName())[0]);switch(az.GetUIType()){case K:ay.autocomplete("close");break;case W:case O:case l:ay.datetimepicker("hide");break;case ae:ay.calculator("hide");break;case aj:var ax=$.data(this,"innerCtrlElem");if(ax&&ax.hasOwnProperty("calc")){var av=$(ax.calc);if(av&&av.size()>0){av.calculator("hide")}}else{if(ax.hasOwnProperty("date")){var aw=$(ax.date);if(aw&&aw.size()>0){aw.datetimepicker("hide")}}}break}}}}Z.prototype.BindData=function(){SiebelAppFacade.PhysicalRenderer.superclass.BindData.call(this);this.ShowSelection()};Z.prototype.ShowSelection=function(aw){if(this.inProgress||aw===true){return false}var ax=this.GetPM(),av=ax.Get("GetControls");for(var ay in av){if(av.hasOwnProperty(ay)){ap.call(this,av[ay],aw)}}};Z.prototype.MaskLeaveField=function(av,ay){if(av){var ax=this.GetUIWrapper(av);if(ax){var aw=ax.GetEl(this.GetPM().Get("GetSelection"));if(aw&&aw.length){if(ay){aw.data("inLeaveField","true")}else{aw.removeData("inLeaveField")}}}}};function ap(ax,az){var aF=!az?0:az,aw=this.GetPM(),av=ax.GetName(),ay=ax.GetFieldName(),aE=aw.Get("IsInQueryMode"),aB=aw.Get("IsPure"),aA=aw.ExecuteMethod("IsPrivateField",av);if((!S.IsEmpty(ay)||aA||!aB)&&ax.GetUIType()!==g){var aD="";if(aE||aA||!aB){aD=$("[name='"+ax.GetInputName()+"']").val()||"";if((av===f.get("SWE_QUERY_COMBO_BOX")||av===f.get("SWE_QUERY_SEARCH_SPEC")||av===f.get("SWE_POPUP_QUERY_COMBO_BOX")||av===f.get("SWE_POPUP_QUERY_SEARCH_SPEC"))&&aD){aw.ExecuteMethod("LeaveField",ax,aD,true);return}else{if((aE&&aA)||!aE||!aB){if(az===undefined||az===null){aD=aw.ExecuteMethod("GetFormattedFieldValue",ax,false)}else{aD=aw.ExecuteMethod("GetFormattedFieldValue",ax,true,aF)}}else{var aC=aw.Get("GetRecordSet");if(S.IsEmpty(aC[aF][ay])){aD=""}else{aD=aC[aF][ay]}}}}else{if(az===undefined||az===null){aD=aw.ExecuteMethod("GetFormattedFieldValue",ax,true)}else{aD=aw.ExecuteMethod("GetFormattedFieldValue",ax,true,aF)}}if(az===undefined||az===null){this.EnableControl(ax,aw.ExecuteMethod("CanUpdate",av));this.SetControlValue(ax,aD)}else{this.EnableControl(ax,aw.ExecuteMethod("CanUpdate",av),aF);this.SetControlValue(ax,aD,aF)}}}Z.prototype.IconMapFormatter=function(az,aF,aA){var av="";var aE=SiebelApp.S_App.GetIconMap();var ax=aE[SiebelApp.S_App.LookupStringCache(az.GetIconMap())];if(ax){var aD=ax.length;for(var aB=0;aB<aD;aB++){var ay=ax[aB];var aG=$(ay.iconImage),aw=az.GetDisplayName();if(aw){var aC=aG.attr("alt");aG.attr("alt",(aC?(aw+":"+aC):aC));aC=aG.attr("title");aG.attr("title",(aC?(aw+":"+aC):aC));aG=aG[0].outerHTML}else{aG=ay.iconImage}if(!S.IsEmpty(aF)&&ay.iconName==aF){return aG}if(ay.iconName=="Default"){av=aG}}if(!S.IsEmpty(av)){return av}}return""};Z.prototype.ControlHtmlFormatter=function(aw,ax,av,az,ay,aA){if(av){if(aw.next("."+ax).length===1){aw.next("."+ax).html(av)}else{aw.after("<span class='"+ax+"'>"+av+"</span>")}aw.next("."+ax).toggle(aA.GetScriptProperty("Visible"))}else{aw.next("."+ax).hide()}if(az||(!az&&S.IsEmpty(ay))){aw.val(ay).toggle(aA.GetScriptProperty("Visible"))}else{aw.hide()}};Z.prototype.SetControlValue=function(ay,aC,aB){var aA=(aB===undefined||aB===null)?this.GetPM().Get("GetSelection"):aB;switch(ay.GetUIType()){case p:case i:case k:break;
default:this.GetUIWrapper(ay).SetValue(aC,aA);return}var aD=!aB?0:aB;var ax=this.GetPM();var az=$("#"+ay.GetInputName())[aD]||$("[name="+ay.GetInputName()+"]")[aD];if(!az){return}az=$(az);switch(ay.GetUIType()){case p:if(ay.GetName()==="BookmarkURL"&&this.GetPM().GetPMName()==="Bookmark URL Popup Applet (SWE)_PM"){var aw=az.replaceWith('<textarea name="'+ay.GetInputName()+'" class="siebui-bookmark-textarea" readonly="readonly" rows="3" cols="150" value=\''+aC+"'>"+aC+"</textarea>")}else{this.GetUIWrapper(ay).SetValue(aC,aA)}break;case i:this.GetUIWrapper(ay,true).SetValue(aC,aA);break;case k:var av=az.next("textarea");if(av.length>0){S.IsEmpty(aC)?av.val(""):av.val(aC)}break}az=null};function P(aw,ax,av,aA){var az=aA.GetScriptProperty("Visible");if(aw){var ay=ax.nextAll("div#"+ax.attr("name")+"_IPEField").text();ax.nextAll("div#"+ax.attr("name")+"_IPEField").hide();ax.nextAll("img#"+ax.attr("name")+"_icon").toggle(az);ax.toggle(az);ax.val(ay)}else{var ay=ax.val();ax.nextAll("div#"+ax.attr("name")+"_IPEField").toggle(az);ax.nextAll("img#"+ax.attr("name")+"_icon").hide();ax.hide();ax.nextAll("div#"+ax.attr("name")+"_IPEField").children().val(ay)}if(av!==true){ax.focus()}}function at(av){var ax=this.GetPM(),aw=ax.Get("GetControls"),az;for(var ay in aw){if(aw[ay].GetInputName()===av){az=aw[ay];break}}aw=null;return az}function ak(av,az){if(this.GetPM()){var ax=this.GetPM(),aw;var ay=$("#s_"+this.GetPM().Get("GetFullId")+"_div").find("div[id$='_IPEField']").filter(":hidden");var aA=ay.prevAll("input.siebui-input-popup").eq(0);if((ay.length&&av&&av.keyCode===$.ui.keyCode.TAB)||(aA.length&&document.activeElement!==aA[0])){aw=SiebelApp.S_App.LookupStringCache(aA.GetName());az=az||at.call(this,aw);P.call(this,false,aA,true,az)}}}Z.prototype.EnableControl=function(aB,aA,ax){var az,av,aw;if(!aa(aB)){return}var aC=(ax===undefined||ax===null)?this.GetPM().Get("GetSelection"):ax;ax=!ax?0:ax;switch(aB.GetUIType()){case M:case J:case W:case K:case ai:case r:case al:case am:case a:case aj:case V:case p:case m:case x:this.GetUIWrapper(aB).SetState(f.get("EDITABLE"),aA,aC);return;case j:case g:this.GetUIWrapper(aB).SetState(f.get("ENABLE"),aA,aC);return}if(aB.GetUIType()==k){az=$("[name="+aB.GetInputName()+"]");if(az.length>0){az.attr("readOnly",!aA).attr("aria-readonly",!aA);var ay=az.siblings(".siebui-email-rtc-stripbtn");if(ay.length>0){aA?$(ay).toggle(aB.GetScriptProperty("Visible")):$(ay).hide()}}}else{az=$("#"+aB.GetInputName())[ax]||$("[name="+aB.GetInputName()+"]")[ax];$(az).removeAttr("readOnly").attr("readOnly",!aA).attr("aria-readonly",!aA)}};Z.prototype.UpdateUIControls=function(av){var av=this.GetPM().Get("GetControls");for(var ax in av){if(av.hasOwnProperty(ax)){var aw=av[ax];var ay=aw.GetFieldName();if(!S.IsEmpty(ay)){this.EnableControl(aw,this.GetPM().ExecuteMethod("CanUpdate",aw.GetName()))}}}};Z.prototype.UpdateUIButtons=function(){var av=this.GetPM().Get("GetControls");for(var ax in av){if(av.hasOwnProperty(ax)){var aw=av[ax];if(aw.GetUIType()===g||aw.GetUIType()===j){var ay=this.GetPM().ExecuteMethod("CanInvokeMethod",aw.GetMethodName());this.EnableControl(aw,ay)}}}};Z.prototype.FocusFirstControl=function(){var aw=this.GetPM().Get("GetControls");var av=9999;this.SetFirstControl(null);for(var az in aw){if(aw.hasOwnProperty(az)){var ay=aw[az];var aA=ay.GetFieldName();if(!S.IsEmpty(aA)){if(ay.GetIndex()&&ay.GetIndex()<av){var ax=false;if(this.GetPM().Get("IsInQueryMode")===false){ax=this.GetPM().ExecuteMethod("CanUpdate",az)}else{ax=true}if(ax&&!S.IsEmpty(ay.GetUIType())&&(ay.isBasicControl()||ay.GetUIType()[0]==="J"||ay.GetUIType()===am||ay.GetUIType()===a)){av=ay.GetIndex();this.SetFirstControl($("#"+ay.GetInputName())[0]||$("[name="+ay.GetInputName()+"]")[0]);break}}}}}if(this.GetFirstControl()!=null){$(this.GetFirstControl()).focus();return}this.FocusFirstNonEditableControl()};Z.prototype.FocusFirstNonEditableControl=function(){var aw=this.GetPM().Get("GetControls");var av=9999;var aA;for(var az in aw){if(aw.hasOwnProperty(az)){var ay=aw[az],ax=ay.GetUIType();controlInputName=ay.GetInputName();if(ay.GetIndex()<av&&(!S.IsEmpty(ax)&&ax!=="Button"&&ax!=="Label")){this.SetFirstControl($("#"+controlInputName)[0]||$("[name="+controlInputName+"]")[0]);break}}}aA=this.GetFirstControl();if(aA&&$(aA).length>0){$(aA).focus();if(!$(aA).is(":focusable")&&$(aA).children().eq(0).is(":focusable")){$(aA).children().eq(0).focus()}}};Z.prototype.SetFocusToControl=function(ax,aw){var av=this.GetPM().Get("GetControls");var ay=null;var az=av[ax],aA=this.GetPM().Get("GetSelection");if(az){if(!S.IsEmpty(az.GetMethodName())){ay=$("#"+(az.GetInputName()+"_Ctrl"));aw?$(ay).focus():$(ay).blur()}else{this.GetUIWrapper(az).SetState(f.get("FOCUS"),aw,aA)}return true}};function ag(aw,ax){var av=$("#s_"+this.GetPM().Get("GetFullId")+"_div");if(aw){av.addClass("Selected siebui-active").removeClass("NotSelected siebui-nonactive")}else{av.removeClass("Selected siebui-active").addClass("NotSelected siebui-nonactive")}}function n(av){av=(typeof av==="undefined")?false:av;var aw=$("#s_"+this.GetPM().Get("GetFullId")+"_div"),ax=null;if(av){aw.addClass("siebui-active-el").data("accessible-el",true)}else{ax=aw.find("#a_"+this.GetPM().Get("GetId"));if(ax.length&&aw.data("accessible-el")){aw.removeData("accessible-el").removeAttr("tabindex")}aw=ax.length?ax:aw}aw.attr("tabindex",0).focus();aw=ax=null}function aa(av){return(typeof(av.GetInputName)==="function")}Z.prototype.InjectQTPInfo=function(aw,av){if((aw.length!=0)&&(av!=undefined)){if(typeof(av.GetObjectType)=="function"&&!(aw).attr("ot")){$(aw).attr("ot",av.GetObjectType())}if(typeof(av.GetRepstrName)=="function"&&!(aw).attr("rn")){$(aw).attr("rn",av.GetRepstrName())}if(typeof(av.GetUIName)=="function"&&!(aw).attr("un")){$(aw).attr("un",av.GetUIName())}}};Z.prototype.InjectAppletQTPInfo=function(aw){var av=this.GetPM();if((aw.length!=0)&&av){if(typeof(av.Get("GetObjectType"))==="string"){$(aw).attr("ot",av.Get("GetObjectType"))}if(typeof(av.Get("GetRepstrName"))==="string"){$(aw).attr("rn",av.Get("GetRepstrName"))}if(typeof(av.Get("GetUIName"))==="string"){$(aw).attr("un",av.Get("GetUIName"))}}};Z.prototype.ShowPopup=function(av){this.GetUIWrapper(av).OpenPopup()};Z.prototype.GetPhysicalControlValue=function(az){var ay,ax,aw=this.GetPM(),aA=aw.Get("GetSelection");if(az){aw.AddProperty("PhysicalCtrlVal",ax);ay=$("[name='"+az.GetInputName()+"']");ax=this.GetUIWrapper(az).GetValue(aA)||"";if(aw.Get("IsInQueryMode")&&az.GetCaseSensitive()&&(ax===SiebelApp.S_App.LocaleObject.GetLocalString("IDS_SWE_CSQ_WATERMARK"))){ax=""}var av=az.GetUIType();switch(av){case W:case O:case l:if(aw.Get("IsInQueryMode")===false){ax=S.ToISOFormat(S.Trim(ax),(av!==W),az.GetDisplayFormat())||ax}break;case K:if(!ay.data("iscache")){ax=this.FormatDDInQueryMode(az,ax)}else{ax=aw.ExecuteMethod("GetFormattedFieldValue",az)}break}aw.AddProperty("PhysicalCtrlVal",ax)}};function c(){var ax=this.GetPM();var av=ax.Get("GetControls");var az=ax.Get("IsInQueryMode");var aw=null;ax.ExecuteMethod("SetUpdateConditionals",false);
for(var aC in av){if(av.hasOwnProperty(aC)){var aB=av[aC];var aA=aB.GetMethodName();var ay=aB.GetScriptProperty("Visible");if((aC===f.get("SWE_POPUP_QUERY_COMBO_BOX"))||aC===f.get("SWE_POPUP_QUERY_SEARCH_SPEC")||aC===f.get("SWE_POPUP_QUERY_EXECUTE")||aC===f.get("SWE_QUERY_COMBO_BOX")||aC===f.get("SWE_QUERY_SEARCH_SPEC")){aw=$("#"+(aB.GetInputName()+"_Ctrl"))[0]||$("#"+aB.GetInputName())[0];if($(aw).length===0&&S.IsEmpty(aB.GetFieldName())){aw=$('[name="'+aB.GetInputName()+'"]')[0]}aw=$(aw);if(az){aw.attr("disabled","disabled");if(aC==="PopupQueryExecute"){if(aw.hasClass("appletButton")){aw.removeClass("appletButton")}aw.addClass("appletButtonDis")}}else{if(aw.attr("disabled")){aw.removeAttr("disabled");if(aC==="disabled"){if(aw.hasClass("appletButtonDis")){aw.removeClass("appletButtonDis")}aw.addClass("appletButton")}}}continue}if(aB.GetUIType()&&aB.GetUIType()[0]=="J"){continue}aw=$("#"+(aB.GetInputName()+"_Ctrl"))[0]||$("#"+aB.GetInputName())[0];if(!aw&&S.IsEmpty(aB.GetFieldName())){aw=$('[name="'+aB.GetInputName()+'"]')[0]}aw=$(aw);if(aC==="QueryAssistant"){if(az){if(aw.attr("disabled")){aw.removeAttr("disabled");if(aw.hasClass("appletButtonDis")){aw.removeClass("appletButtonDis")}aw.addClass("appletButton")}}else{aw.attr("disabled","disabled");if(aw.hasClass("appletButton")){aw.removeClass("appletButton")}aw.addClass("appletButtonDis")}}if((!az&&S.IndexOf(["UndoQuery","ExecuteQuery","ShowQueryAssistant"],aA)!==-1)||(az&&S.IndexOf(["NewQuery","ToggleListRowCount"],aA)!==-1)){$(aw).styleHide()}else{if(!S.IsEmpty(aA)&&ax.ExecuteMethod("CanInvokeMethod",aA)){if((aA!=="Drilldown")||!(aw.nextAll("[id^='"+aB.GetInputName()+"']").is(":visible"))){if(SiebelApp.S_App.IsRwd()&&(S.IsTrue(ax.Get("IsObjResponsive")))&&S.IndexOf(["AddRecords","DeleteRecords","DeleteAllRecords"],aA)!==-1){continue}S.DecideVisibility(aw,ay)}}else{if(az&&aA&&S.IndexOf(["Find","AddRecords","AddAllRecords","DeleteRecords","DeleteAllRecords"],aA)===-1){aw.styleHide()}else{if(SiebelApp.S_App.IsRwd()&&(S.IsTrue(ax.Get("IsObjResponsive")))&&S.IndexOf(["Find","AddRecords","AddAllRecords","DeleteRecords","DeleteAllRecords"],aA)===-1){continue}S.DecideVisibility(aw,ay)}}}}}}function B(){var av=this.GetPM().Get("GetControls");for(var aw in av){if(av.hasOwnProperty(aw)){this.GetUIWrapper(av[aw]).BeginQuery()}}}function Y(){var av=this.GetPM().Get("GetControls");for(var aw in av){if(av.hasOwnProperty(aw)){this.GetUIWrapper(av[aw]).EndQuery()}}}function X(){var ay=this.GetPM();var aw=ay.ExecuteMethod("GetWSStartRowNum");var az=Number(ay.Get("GetRowListRowCount"));var aA=(az>1)?f.get("SWE_ROW_COUNTER_LIST"):f.get("SWE_ROW_COUNTER_FORM");var av=[];var aC;var aB;var aD;if(aw===0){aC=f.get("SWE_ROW_COUNTER_NO_RECORDS")}else{if(aw>0){av.push(aw);if(az>1){av.push(Number(ay.Get("GetWSEndRowNum")))}av.push(Number(ay.Get("GetNumRows")));aC=aA+(ay.Get("IsNumRowsKnown")?f.get("SWE_ROW_COUNTER_TOTAL_KNOWN"):f.get("SWE_ROW_COUNTER_TOTAL_UNKNOWN"))}else{if(aw<0&&aw>=-1*az){if(az>1){av.push(Number(-1*aw))}aC=aA+f.get("SWE_ROW_COUNTER_LAST_RECORD")}else{av.push(Number((-1-aw)));if(az>1){av.push(Number(-1-Number(ay.Get("GetWSEndRowNum"))))}aC=aA+f.get("SWE_ROW_COUNTER_FROM_LAST")}}}aB=SiebelApp.S_App.GetRowCounterTemplateMap(aC);aD=S.FormatString(aB,av);var ax;if(SiebelApp.S_App.IsRwd()&&(S.IsTrue(ay.Get("IsObjResponsive")))){ax=$("#"+ay.Get("GetRowCount"))}else{ax=$("#s_"+ay.Get("GetId")+"_rc")}ax.addClass("siebui-row-counter").text(aD);if(S.IsTrue(SiebelApp.S_App.IsAutoOn())){ax.attr(consts.get("SWE_PROP_QTP_OT"),consts.get("SWE_CTRL_LABEL")).attr(consts.get("SWE_PROP_QTP_RN"),consts.get("SWE_ROW_COUNTER_NO_RECORDS")).attr(consts.get("SWE_PROP_QTP_UN"),aD)}}return Z}());return"SiebelAppFacade.PhysicalRenderer"})}if(typeof(SiebelAppFacade.PopupRenderer)==="undefined"){SiebelJS.Namespace("SiebelAppFacade.PopupRenderer");define("siebel/popuprenderer",["siebel/phyrenderer"],function(){SiebelAppFacade.PopupRenderer=(function(){var j=SiebelJS.Dependency("SiebelApp.Utils");var h=SiebelJS.Dependency("SiebelApp.Constants");var b=Number(h.get("DEFAULT_POPUP_WIDTH"));var g=Number(h.get("DEFAULT_POPUP_HEIGHT"));function c(n){SiebelAppFacade.PopupRenderer.superclass.constructor.call(this,n)}SiebelJS.Extend(c,SiebelAppFacade.BasePR);c.prototype.Init=function(){SiebelAppFacade.PopupRenderer.superclass.Init.call(this);this.AttachPMBinding("state",i);this.AttachPMBinding("url",d);this.AttachPMBinding("content",k);this.AttachPMBinding("OnLoadPopupContent",m);this.AttachPMBinding("OnLoadPopupContent",l);this.AttachPMBinding("StandAlonePopup",this.ProcessStandAlonePopup)};function d(){SiebelApp.S_App.uiStatus.Busy();SiebelApp.contentUpdater.AddCallBack(this.GetPM().Get("url"),function(){this.ExecuteMethod("OnLoadPopupContent")},this.GetPM());var n=$("[name=popup]");if(SiebelApp.S_App.GetEnablePerfHooks()&&SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().TimePopupApplet("","Call GetLayout")}n.attr("src",this.GetPM().Get("url"));n=null;setTimeout(function(){SiebelApp.contentUpdater.loadContent(true)},1)}function k(){SiebelApp.S_App.uiStatus.Free();$("[name=popup]").children().remove();$("[name=popup]").addClass("minWidthContainer");$("[name=popup]").dialog("open");$("[name=popup]").html("");$("[name=popup]").append(this.GetPM().Get("content"))}function i(){var n=this.GetPM().Get("state");var w=this.GetPM().Get("isCurrencyOpen");var q=true;if(w){q=false}if(n==h.get("POPUP_STATE_HIDDEN")){$("[name=popup]").dialog("close");$("[name=popup]").parents(".ui-dialog").eq(0).removeClass("siebui-mvg-dialog");var o=$("div[name=popup]"),t=o.find("textarea"),x=t.length;for(var s=0;s<x;s++){var u=CKEDITOR.instances[$(t[s]).attr("name")];if(u){u.destroy(true)}}o.children().remove().end().dialog("option","buttons",{}).parent().find("div.ui-dialog-buttonset").empty();this.GetPM().SetProperty("isCurrencyOpen",false)}else{if(n==h.get("POPUP_STATE_VISIBLE")){$("div[name=popup]").data("InitDlg",true);setTimeout(function(){$("div[name=popup]").removeData("InitDlg")},2);$("div[name=popup]").dialog("open");$("div[name=popup]").parents("div.ui-dialog").children("div.ui-dialog-titlebar").show();$("div[name=popup]").dialog("option","height","auto").dialog("option","width","auto").dialog("option","resizable",q).dialog("option","minWidth",b).dialog("option","minHeight",g);$("div[name=popup]").dialog("option","position",{my:"center",at:"center",of:window});var r=this.GetPM();var p;var v;$(".ui-widget-overlay").droppable({drop:function(A,F){if(F.draggable&&(F.draggable.is("tr.jqgrow")||F.draggable.is(".siebui-tile"))){var z=F.draggable.attr("id");var G=false;if(z>0){var C=F.draggable.parent().parent().jqGrid("getRowData",z)}var I=$("#s_"+r.Get("baseParentAppletId")+"_div");if(I.length>0){var E=I.offset().top+I.height();var H=I.offset().left+I.width()}if((I.offset().left<A.originalEvent.clientX&&A.originalEvent.clientX<H)&&(I.offset().top<A.originalEvent.clientY&&A.originalEvent.clientY<E)){if(r.Get("isPopupPick")){p=r.Get("PickAppletObject");p.GetPModel().ExecuteMethod("SetSelectionOnDragNDrop",z);
G=p.GetPModel().ExecuteMethod("HandleDragNDropInPopup","PickRecord")}if(r.Get("isPopupMVGAssoc")){v=r.Get("MVGAssocParentAppletObject");if(!r.Get("ismultislectmode")){v.GetPModel().ExecuteMethod("SetSelectionOnDragNDrop",z)}var D=v.GetPModel().ExecuteMethod("HandleDragNDropInPopup","AddRecords");if(D){G=v.GetPModel().ExecuteMethod("HandleDragNDropInPopup","CloseApplet")}}if(r.Get("isPopupAssoc")){var B=CCFMiscUtil_CreatePropSet();p=r.Get("AssocAppletObject");if(!r.Get("ismultislectmode")){p.GetPModel().ExecuteMethod("SetSelectionOnDragNDrop",z)}G=p.GetPModel().ExecuteMethod("HandleDragNDropInPopup","AddRecord")}if(!G){F.draggable.animate(F.draggable.data().origPosition,"slow")}else{F.draggable.detach();r.SetProperty("isPopupPick",false);r.SetProperty("isPopupMVGAssoc",false);r.SetProperty("isPopupMVGSelected",false);r.SetProperty("isPopupAssoc",false)}}else{F.draggable.animate(F.draggable.data().origPosition,"slow")}r.SetProperty("ismultislectmode",false)}}});m.call(this);SiebelApp.S_App.uiStatus.LocalBusy({mask:true})}}}function a(o){var n=o.parent().width(),p=o.parent().height(),q={position:{my:"center",at:"center",of:window}};if(!$(".siebui-send-email").length){$.extend(q,{minWidth:n,minHeight:p,width:o.width()})}o.dialog("option",q)}function l(){var n=this,o=arguments;DOMUtils.Read(function(){DOMUtils.Write(function(){f.apply(n,o)})})}function f(){var n=Number(this.GetPM().Get("width"))||0;var o=false;var p=$("div[name=popup]");if(p.find("div.ui-jqgrid").length>0){if(n===b){n*=2}p.width(n);$(window).resize()}else{if(n<b){p.width(b)}else{o=true}}if(o){setTimeout(function(){var r=$("div[name=popup]"),q=r.width();if(r[0]&&r[0].scrollWidth>q&&r[0].scrollWidth<n){q=r[0].scrollWidth}r.width(q);a(r)},3)}else{a(p)}p=null}function m(){var p=$("[name='popup']");if(this.GetPM().Get("currPopups")&&this.GetPM().Get("currPopups")[0]){p.dialog("option","title",SiebelApp.S_App.LookupStringCache(this.GetPM().Get("currPopups")[0].GetTitle()));if(j.IsTrue(SiebelApp.S_App.IsAutoOn())){p.parent(".ui-dialog").find("span.ui-dialog-title").attr("ot","popup").attr("rn","popup").attr("un",this.GetPM().Get("currPopups")[0].GetUIName()+" popup")}}else{var n=p.find("[title-preserved]"),o=n&&n.length?n.attr("title-preserved"):"";p.dialog("option","title",HtmlDecode(o));if(!j.IsEmpty(o)){p.parents("div.ui-dialog").find(".ui-dialog-title").focus()}}}c.prototype.BindData=function(){SiebelAppFacade.PopupRenderer.superclass.BindData.call(this)};c.prototype.ShowUI=function(){SiebelAppFacade.PopupRenderer.superclass.ShowUI.call(this);if($("[name=popup]").length===0){var n=$('<div name="popup"></div>');var o=SiebelApp.S_App.GetDirection();SiebelApp.S_App.GetTargetViewContainer().append(n);SiebelApp.S_App.uiStatus.LocalBusy({target:"[name=popup]",mask:false});var p=$("div[name=popup]");p.dialog({position:"center",modal:true,autoOpen:false,closeOnEscape:false,resize:e});p.parent().find(".ui-dialog-titlebar-close").attr("title",SiebelApp.S_App.LocaleObject.GetLocalString("IDS_MSG_CLOSE"));p.parents("div.ui-dialog").children("div.ui-dialog-titlebar").removeAttr("role").children("span.ui-dialog-title").attr("tabindex","-1").addClass(o?"ui-dialog-title-rtl":"").next().addClass(o?"ui-dialog-titlebar-close-rtl":"").removeClass(o?"ui-dialog-titlebar-close":"")}};function e(o,r){if($(this).width()!==r.size.width){$(this).width("auto")}if(r.originalSize.height!==r.size.height&&$(this).find(".siebui-send-email").length){var q=$(this).siblings(".ui-dialog-titlebar").outerHeight()+$(this).height();var p=r.size.height-q;var n=$(this).find(".siebui-email-rtc-text textarea");if(n.length){n.width("");var t=n.height();n.height(t+p)}var s=CKEDITOR.instances[$(this).find(".siebui-email-body textarea").attr("name")];if(s){var t=$(this).find(".siebui-email-body .cke").height();s.resize("100%",t+p)}if(q>r.size.height&&(n.length||s)){$(this).parent().height(q)}}}c.prototype.BindEvents=function(){SiebelAppFacade.PopupRenderer.superclass.BindEvents.call(this);var n=$("[name=popup]");n.data("context",this);n.dialog({beforeClose:function(o,p){if(!$("div[name=popup]").data("InitDlg")){if($(o.currentTarget,"[class*=ui-dialog-titlebar-close]").length>0){if(j.Confirm(SiebelApp.S_App.LocaleObject.GetLocalString("IDS_SWE_POPUP_CLOSEBYX_WARNING"))){$("[name=popup]").data("context").GetPM().OnControlEvent("ClosePopupByX",o);return true}return false}}else{return false}}})};c.prototype.ProcessStandAlonePopup=function(q,n,p){p=p||"subWind";var o=window.open(q,p,n)};return c})();return SiebelAppFacade.PopupRenderer})};